(this["webpackJsonpnitro-react"]=this["webpackJsonpnitro-react"]||[]).push([[0],{125:function(e,t,s){},126:function(e,t,s){"use strict";s.r(t);var n=s(41),r=s(85),c=s(1),i=s(71),a=s(2);const o=e=>{if(!e)return 0;let t=0;for(const s of e.achievements)t+=s.levelCount;return t};class l{constructor(e){this._code=void 0,this._achievements=void 0,this._code=e,this._achievements=[]}getProgress(){return h(this)}getMaxProgress(){return o(this)}get code(){return this._code}get achievements(){return this._achievements}set achievements(e){this._achievements=e}}const u=e=>{if(!e)return null;let t=e.badgeId;return e.finalLevel||(t=R().getPreviousLevelBadgeId(t)),t},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=N("achievements.images.url");let r=s?"achicon_":"achcategory_";return r+=e.code,null!==t&&(r+="_"+(t>0?"active":"inactive")),n.replace("%image%",r)},h=e=>{if(!e)return 0;let t=0;for(const s of e.achievements)t+=s.finalLevel?s.level:s.level-1;return t},j=e=>{if(!e)return 0;let t=0;for(const s of e.achievements)s.unseen>0&&t++;return t},b=e=>!!e&&!!(e.finalLevel||e.level-1>0),g=e=>e?e.finalLevel?e.level:e.level-1:0;class O{constructor(e,t,s){this._productName=void 0,this._customImage=void 0,this._furnitureClassName=void 0,this._productName=e,this._customImage=t,this._furnitureClassName=s}get productName(){return this._productName}get customImage(){return this._customImage}get furnitureClassName(){return this._furnitureClassName}}class m{}m.STATE_UNLOCKED=1,m.STATE_LOCKED_AVAILABLE=2,m.STATE_LOCKED_EXPIRED=3,m.STATE_LOCKED_FUTURE=4;class p{}function _(){return a.Ge.instance}function E(e){_().addLinkEventTracker(e)}p.WALL="i",p.FLOOR="s",p.EFFECT="e",p.HABBO_CLUB="h",p.BADGE="b",p.GAME_TOKEN="GAME_TOKEN",p.PET="p",p.ROBOT="r";function f(){return _().avatar}function x(e){return f().structureData.getPalette(e)}function I(e){return f().structureData.getSetType(e)}function T(){return _().cameraManager}function C(e){e=e.startsWith("event:")?e.substring(6):e,_().createLinkEvent(e)}function S(){return _().communication}function N(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _().getConfiguration(e,t)}function v(){return S().connection}function R(){return _().localization}function A(){return _().ticker}function y(e){_().removeLinkEventTracker(e)}function w(){return _().roomEngine}let k=!1,D=0,P=0;const U=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const s=e.clientX*window.devicePixelRatio,n=e.clientY*window.devicePixelRatio;let r=e.type;switch(r===a.ue.MOUSE_CLICK&&(D&&(P=1,D>=Date.now()-300&&P++),D=Date.now(),2===P&&(k||(r=a.ue.DOUBLE_CLICK),P=0,D=null)),r){case a.ue.MOUSE_CLICK:case a.ue.DOUBLE_CLICK:break;case a.ue.MOUSE_MOVE:k=!0;break;case a.ue.MOUSE_DOWN:k=!1;break;case a.ue.MOUSE_UP:case a.ue.RIGHT_CLICK:break;default:return}w().dispatchMouseEvent(t,s,n,r,e.altKey,e.ctrlKey||e.metaKey,e.shiftKey,!1)};let L=!1,M=0,F=0,H=null;const B=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=e.type;s&&(i=a.Kh.TOUCH_LONG),i!==a.Kh.TOUCH_END||L||(i=a.ue.MOUSE_CLICK,M&&(F=1,M>=Date.now()-300&&F++),M=Date.now(),2===F&&(i=a.ue.DOUBLE_CLICK,F=0,M=null)),H&&clearTimeout(H);let o=0,l=0;switch(e.touches[0]?(o=e.touches[0].clientX,l=e.touches[0].clientY):e.changedTouches[0]&&(o=e.changedTouches[0].clientX,l=e.changedTouches[0].clientY),o=Math.round(o/(1/window.devicePixelRatio)),l=Math.round(l/(1/window.devicePixelRatio)),i){case a.ue.MOUSE_CLICK:case a.ue.DOUBLE_CLICK:break;case a.Kh.TOUCH_START:H=setTimeout((()=>{L||B(e,t,!0)}),300),i=a.ue.MOUSE_DOWN,L=!1;break;case a.Kh.TOUCH_MOVE:i=a.ue.MOUSE_MOVE,L=!0;break;case a.Kh.TOUCH_END:i=a.ue.MOUSE_UP;break;case a.Kh.TOUCH_LONG:i=a.ue.MOUSE_DOWN_LONG;break;default:return}w().dispatchMouseEvent(t,o,l,i,n,r,c,!1)};function G(e){if(!e||!e.model)return!1;return K().userId===e.model.getValue(a.Fg.FURNITURE_OWNER_ID)}function W(e,t,s){return!!e&&(e.controllerLevel>=a.Wf.GUEST||K().isModerator||G(w().getRoomObject(e.roomId,t,s)))}function V(){return _().roomSessionManager}function q(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;V().createSession(e,t)}function z(){const e=ce();if(!e)return a.k.POSTURE_STAND;return e.model.getValue(a.Fg.FIGURE_CAN_STAND_UP)}function Y(){const e=ce();if(!e)return!1;const t=e.model.getValue(a.Fg.FIGURE_EFFECT);return!(29===t||30===t||185===t)}function K(){return _().sessionDataManager}function Q(){return N("hc.disabled",!1)?a.xd.VIP:K().clubLevel}function $(e,t){let s=null;switch(t.toLowerCase()){case p.FLOOR:s=K().getFloorItemData(e);break;case p.WALL:s=K().getWallItemData(e)}return s}function X(e,t,s){const n=w().getRoomObject(e,t,s);if(!n)return;const r=n.model.getValue(a.Fg.FURNITURE_TYPE_ID);switch(s){case a.zg.FLOOR:return K().getFloorItemData(r);case a.zg.WALL:return K().getWallItemData(r)}return null}function J(){const e=ce();if(!e)return a.k.POSTURE_STAND;return e.model.getValue(a.Fg.FIGURE_POSTURE)}function Z(e){return e?K().getProductData(e):null}function ee(){return V().getSession(-1)}function te(){Ln(new a.nb)}function se(){return K().clubLevel>=a.xd.CLUB}function ne(){return K().clubLevel>=a.xd.VIP}const re=()=>{ee()&&(te(),V().removeSession(-1))};function ce(){const e=K().userId,t=w().activeRoomId,s=a.zg.UNIT,n=w().getTotalObjectsForManager(t,s);let r=0;for(;r<n;){const n=w().getRoomObjectByIndex(t,r,s);if(n){const t=ee().userDataManager.getUserDataByIndex(n.id);if(t&&t.webID===e)return n}r++}return null}const ie=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const r=w().getRoomObjectBoundingRectangle(e,t,s,n);return r?(1!==window.devicePixelRatio&&(r.x=Math.round(r.x/window.devicePixelRatio),r.y=Math.round(r.y/window.devicePixelRatio)),r):null},ae=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const r=w().getRoomObjectScreenLocation(e,t,s,n);return r?(1!==window.devicePixelRatio&&(r.x=Math.round(r.x/window.devicePixelRatio),r.y=Math.round(r.y/window.devicePixelRatio)),r):null};function oe(e,t,s){w().processRoomObjectOperation(e,t,s)}function le(e){w().setActiveRoomId(e)}class ue{constructor(e,t,s,n){this._id=void 0,this._type=void 0,this._color=void 0,this._brightness=void 0,this._id=e,this._type=t,this._color=s,this._brightness=n}get id(){return this._id}get type(){return this._type}get color(){return this._color}get brightness(){return this._brightness}}class de{constructor(e,t,s){this._id=void 0,this._category=void 0,this._name=void 0,this._id=e,this._category=t,this._name=s}get id(){return this._id}get category(){return this._category}get name(){return this._name}}class he extends a.Le{}class je extends he{constructor(e,t,s,n,r){super(je.AVATAR_INFO),this._userId=void 0,this._userName=void 0,this._userType=void 0,this._roomIndex=void 0,this._allowNameChange=void 0,this._userId=e,this._userName=t,this._userType=s,this._roomIndex=n,this._allowNameChange=r}get userId(){return this._userId}get userName(){return this._userName}get userType(){return this._userType}get roomIndex(){return this._roomIndex}get allowNameChange(){return this._allowNameChange}}je.AVATAR_INFO="RWAIE_AVATAR_INFO";class be extends he{constructor(e,t){super(e),this._items=void 0,this._items=t}get items(){return this._items}}be.USER_CHOOSER_CONTENT="RWCCE_USER_CHOOSER_CONTENT",be.FURNI_CHOOSER_CONTENT="RWCCE_FURNI_CHOOSER_CONTENT";class ge extends he{constructor(e){super(ge.FLOOD_CONTROL),this._seconds=0,this._seconds=e}get seconds(){return this._seconds}}ge.FLOOD_CONTROL="RWFCE_FLOOD_CONTROL";class Oe extends he{constructor(e,t,s,n,r,c){super(e),this._roomIndex=void 0,this._category=void 0,this._id=void 0,this._name=void 0,this._userType=void 0,this._roomIndex=t,this._category=s,this._id=n,this._name=r,this._userType=c}get roomIndex(){return this._roomIndex}get category(){return this._category}get id(){return this._id}get name(){return this._name}get userType(){return this._userType}}Oe.TYPE="RWONE_TYPE";class me extends he{constructor(e,t){super(e),this._id=-1,this._summary=void 0,this._headline=void 0,this._numQuestions=0,this._startMessage="",this._endMessage="",this._questionArray=null,this._pollType="",this._npsPoll=!1,this._id=t}get id(){return this._id}get summary(){return this._summary}set summary(e){this._summary=e}get headline(){return this._headline}set headline(e){this._headline=e}get numQuestions(){return this._numQuestions}set numQuestions(e){this._numQuestions=e}get startMessage(){return this._startMessage}set startMessage(e){this._startMessage=e}get endMessage(){return this._endMessage}set endMessage(e){this._endMessage=e}get questionArray(){return this._questionArray}set questionArray(e){this._questionArray=e}get pollType(){return this._pollType}set pollType(e){this._pollType=e}get npsPoll(){return this._npsPoll}set npsPoll(e){this._npsPoll=e}}me.OFFER="RWPUW_OFFER",me.ERROR="RWPUW_ERROR",me.CONTENT="RWPUW_CONTENT";class pe extends he{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(e),this._hue=void 0,this._saturation=void 0,this._lightness=void 0,this._hue=t,this._saturation=s,this._lightness=n}get hue(){return this._hue}get saturation(){return this._saturation}get lightness(){return this._lightness}}pe.PREVIEW="RWUBCPE_PREVIEW",pe.CLEAR_PREVIEW="RWUBCPE_CLEAR_PREVIEW";class _e extends he{constructor(e,t,s,n,r,c,i,a,o,l,u,d){let h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,j=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,b=arguments.length>14&&void 0!==arguments[14]?arguments[14]:null;super(e),this._userId=void 0,this._text=void 0,this._chatType=void 0,this._userName=void 0,this._links=void 0,this._userX=void 0,this._userY=void 0,this._userImage=void 0,this._userColor=void 0,this._roomId=void 0,this._userCategory=void 0,this._userType=void 0,this._petType=void 0,this._styleId=void 0,this._userId=t,this._text=s,this._chatType=h,this._userName=n,this._userCategory=r,this._userType=c,this._petType=i,this._links=b,this._userX=a,this._userY=o,this._userImage=l,this._userColor=u,this._roomId=d,this._styleId=j}get userId(){return this._userId}get text(){return this._text}get chatType(){return this._chatType}get userName(){return this._userName}get userCategory(){return this._userCategory}get userType(){return this._userType}get petType(){return this._petType}get links(){return this._links}get userX(){return this._userX}get userY(){return this._userY}get userImage(){return this._userImage}get userColor(){return this._userColor}get roomId(){return this._roomId}get styleId(){return this._styleId}}_e.CHAT_EVENT="RWUCE_CHAT_EVENT",_e.CHAT_TYPE_SPEAK=0,_e.CHAT_TYPE_WHISPER=1,_e.CHAT_TYPE_SHOUT=2,_e.CHAT_TYPE_RESPECT=3,_e.CHAT_TYPE_PETRESPECT=4,_e.CHAT_TYPE_NOTIFY=5,_e.CHAT_TYPE_PETTREAT=6,_e.CHAT_TYPE_PETREVIVE=7,_e.CHAT_TYPE_PET_REBREED_FERTILIZE=8,_e.CHAT_TYPE_PET_SPEED_FERTILIZE=9,_e.CHAT_TYPE_BOT_SPEAK=10,_e.CHAT_TYPE_BOT_SHOUT=11,_e.CHAT_TYPE_BOT_WHISPER=12;class Ee extends he{constructor(e,t){super(Ee.CHAT_INPUT_CONTENT),this._chatMode="",this._userName="",this._chatMode=e,this._userName=t}get chatMode(){return this._chatMode}get userName(){return this._userName}}Ee.CHAT_INPUT_CONTENT="RWUCICE_CHAT_INPUT_CONTENT",Ee.WHISPER="whisper",Ee.SHOUT="shout";class fe extends he{constructor(e,t,s,n){super(e),this._objectId=void 0,this._value=void 0,this._furniType=void 0,this._objectId=t,this._value=s,this._furniType=n}get objectId(){return this._objectId}get value(){return this._value}get furniType(){return this._furniType}}fe.CREDIT_FURNI_UPDATE="RWUCFE_CREDIT_FURNI_UPDATE";class xe extends he{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(xe.UPDATE_CUSTOM_STACK_HEIGHT),this._objectId=void 0,this._height=void 0,this._objectId=e,this._height=t}get objectId(){return this._objectId}get height(){return this._height}}xe.UPDATE_CUSTOM_STACK_HEIGHT="RWUCSHE_UPDATE_CUSTOM_STACK_HEIGHT";class Ie extends he{constructor(e){super(Ie.UPDATE_DANCE),this._isDancing=void 0,this._isDancing=e}get isDancing(){return this._isDancing}}Ie.UPDATE_DANCE="RWUDSE_UPDATE_DANCE";class Te extends he{constructor(e){super(Te.UPDATE_DECORATE),this._isDecorating=void 0,this._isDecorating=e}get isDecorating(){return this._isDecorating}}Te.UPDATE_DECORATE="RWUDME_UPDATE_DECORATE";class Ce extends he{constructor(e){super(e),this._selectedPresetId=0,this._presets=void 0,this._presets=[]}get presetCount(){return this._presets.length}get presets(){return this._presets}get selectedPresetId(){return this._selectedPresetId}set selectedPresetId(e){this._selectedPresetId=e}setPresetValues(e,t,s,n){const r=new ue(e,t,s,n);this._presets[e-1]=r}getPresetNumber(e){return this._presets[e]}}Ce.PRESETS="RWUDE_PRESETS",Ce.HIDE="RWUDE_HIDE";class Se extends he{constructor(e,t,s,n,r){super(Se.DIMMER_STATE),this._state=void 0,this._presetId=void 0,this._effectId=void 0,this._color=void 0,this._brightness=void 0,this._state=e,this._presetId=t,this._effectId=s,this._color=n,this._brightness=r}get state(){return this._state}get presetId(){return this._presetId}get effectId(){return this._effectId}get color(){return this._color}get brightness(){return this._brightness}}Se.DIMMER_STATE="RWUDSE_DIMMER_STATE";class Ne extends he{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(Ne.UPDATE_EXTERNAL_IMAGE),this._objectId=void 0,this._photoData=void 0,this._objectId=e,this._photoData=t}get objectId(){return this._objectId}get photoData(){return this._photoData}}Ne.UPDATE_EXTERNAL_IMAGE="RWUEIE_UPDATE_EXTERNAL_IMAGE";class ve extends he{}class Re extends ve{constructor(){super(...arguments),this.id=0,this.category=0,this.name="",this.description="",this.image=null,this.isWallItem=!1,this.isStickie=!1,this.isRoomOwner=!1,this.roomControllerLevel=0,this.isAnyRoomController=!1,this.expiration=-1,this.purchaseCatalogPageId=-1,this.purchaseOfferId=-1,this.extraParam="",this.isOwner=!1,this.stuffData=null,this.groupId=0,this.ownerId=0,this.ownerName="",this.usagePolicy=0,this.rentCatalogPageId=-1,this.rentOfferId=-1,this.purchaseCouldBeUsedForBuyout=!1,this.rentCouldBeUsedForBuyout=!1,this.availableForBuildersClub=!1,this.tileSizeX=1,this.tileSizeY=1}}Re.FURNI="RWUIFE_FURNI";class Ae extends ve{constructor(){super(...arguments),this.level=0,this.maximumLevel=0,this.experience=0,this.levelExperienceGoal=0,this.energy=0,this.maximumEnergy=0,this.happyness=0,this.maximumHappyness=0,this.respectsPetLeft=0,this.respect=0,this.age=0,this.name="",this.id=-1,this.image=null,this.petType=0,this.petBreed=0,this.petFigure="",this.posture="std",this.isOwner=!1,this.ownerId=-1,this.ownerName="",this.canRemovePet=!1,this.roomIndex=0,this.unknownRarityLevel=0,this.saddle=!1,this.rider=!1,this.breedable=!1,this.skillTresholds=[],this.publiclyRideable=0,this.fullyGrown=!1,this.dead=!1,this.rarityLevel=0,this.maximumTimeToLive=0,this.remainingTimeToLive=0,this.remainingGrowTime=0,this.publiclyBreedable=!1}}Ae.PET_INFO="RWUIPE_PET_INFO";class ye extends ve{constructor(){super(...arguments),this.name="",this.motto="",this.webID=0,this.figure="",this.badges=[],this.carryItem=0,this.roomIndex=0,this.amIOwner=!1,this.amIAnyRoomController=!1,this.roomControllerLevel=0,this.ownerId=-1,this.ownerName="",this.botSkills=[]}}ye.RENTABLE_BOT="RWUIRBE_RENTABLE_BOT";class we extends ve{constructor(){super(...arguments),this.name="",this.motto="",this.achievementScore=0,this.webID=0,this.xp=0,this.userType=-1,this.figure="",this.badges=[],this.groupId=0,this.groupName="",this.groupBadgeId="",this.carryItem=0,this.roomIndex=0,this.isSpectatorMode=!1,this.allowNameChange=!1,this.amIOwner=!1,this.amIAnyRoomController=!1,this.roomControllerLevel=0,this.canBeKicked=!1,this.canBeBanned=!1,this.canBeMuted=!1,this.respectLeft=0,this.isIgnored=!1,this.isGuildRoom=!1,this.canTrade=!1,this.canTradeReason=0,this.targetRoomControllerLevel=0,this.isAmbassador=!1}get isOwnUser(){return this.type===we.OWN_USER}}we.OWN_USER="RWUIUE_OWN_USER",we.PEER="RWUIUE_PEER",we.BOT="RWUIUE_BOT",we.TRADE_REASON_OK=0,we.TRADE_REASON_SHUTDOWN=2,we.TRADE_REASON_NO_TRADING=3,we.DEFAULT_BOT_BADGE_ID="BOT";class ke extends he{constructor(e,t,s,n,r){super(e),this._objectId=void 0,this._figure=void 0,this._gender=void 0,this._name=void 0,this._objectId=t,this._figure=s,this._gender=n,this._name=r}get objectId(){return this._objectId}get figure(){return this._figure}get gender(){return this._gender}get name(){return this._name}}ke.MANNEQUIN_UPDATE="RWUME_MANNEQUIN_UPDATE";class De extends he{constructor(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;super(e),this._objectId=-1,this._classId=0,this._itemType="",this._giftMessage="",this._imageUrl=null,this._isController=void 0,this._purchaserName=void 0,this._purchaserFigure=void 0,this._placedItemId=-1,this._placedItemType="",this._placedInRoom=void 0,this._objectId=t,this._giftMessage=s,this._imageUrl=r,this._isController=n,this._purchaserName=c,this._purchaserFigure=i}get objectId(){return this._objectId}get classId(){return this._classId}set classId(e){this._classId=e}get itemType(){return this._itemType}set itemType(e){this._itemType=e}get giftMessage(){return this._giftMessage}get imageUrl(){return this._imageUrl}get isController(){return this._isController}get purchaserName(){return this._purchaserName}get purchaserFigure(){return this._purchaserFigure}get placedItemId(){return this._placedItemId}set placedItemId(e){this._placedItemId=e}get placedInRoom(){return this._placedInRoom}set placedInRoom(e){this._placedInRoom=e}get placedItemType(){return this._placedItemType}set placedItemType(e){this._placedItemType=e}}De.PACKAGEINFO="RWUPDE_PACKAGEINFO",De.CONTENTS="RWUPDE_CONTENTS",De.CONTENTS_CLUB="RWUPDE_CONTENTS_CLUB",De.CONTENTS_FLOOR="RWUPDE_CONTENTS_FLOOR",De.CONTENTS_LANDSCAPE="RWUPDE_CONTENTS_LANDSCAPE",De.CONTENTS_WALLPAPER="RWUPDE_CONTENTS_WALLPAPER",De.CONTENTS_IMAGE="RWUPDE_CONTENTS_IMAGE";class Pe extends he{constructor(e,t,s,n,r,c,i){super(Pe.UPDATE_CHAT),this._objectId=void 0,this._category=void 0,this._botId=void 0,this._chat=void 0,this._automaticChat=void 0,this._chatDelay=void 0,this._mixSentences=void 0,this._objectId=e,this._category=t,this._botId=s,this._chat=n,this._automaticChat=r,this._chatDelay=c,this._mixSentences=i}get objectId(){return this._objectId}get category(){return this._category}get botId(){return this._botId}get chat(){return this._chat}get automaticChat(){return this._automaticChat}get chatDelay(){return this._chatDelay}get mixSentences(){return this._mixSentences}}Pe.UPDATE_CHAT="RWURBCE_UPDATE_CHAT";class Ue extends he{constructor(e,t){super(e),this._roomId=0,this._roomId=t}get roomId(){return this._roomId}}Ue.GAME_MODE="RWUREE_GAME_MODE",Ue.NORMAL_MODE="RWUREE_NORMAL_MODE";class Le extends he{constructor(e,t,s,n){super(e),this._id=void 0,this._category=void 0,this._roomId=void 0,this._id=t,this._category=s,this._roomId=n}get id(){return this._id}get category(){return this._category}get roomId(){return this._roomId}}Le.OBJECT_SELECTED="RWUROE_OBJECT_SELECTED",Le.OBJECT_DESELECTED="RWUROE_OBJECT_DESELECTED",Le.USER_REMOVED="RWUROE_USER_REMOVED",Le.FURNI_REMOVED="RWUROE_FURNI_REMOVED",Le.FURNI_ADDED="RWUROE_FURNI_ADDED",Le.USER_ADDED="RWUROE_USER_ADDED",Le.OBJECT_ROLL_OVER="RWUROE_OBJECT_ROLL_OVER",Le.OBJECT_ROLL_OUT="RWUROE_OBJECT_ROLL_OUT",Le.OBJECT_REQUEST_MANIPULATION="RWUROE_OBJECT_REQUEST_MANIPULATION";class Me extends he{constructor(e,t,s,n){super(e),this._songId=void 0,this._songName=void 0,this._songAuthor=void 0,this._songId=t,this._songName=s,this._songAuthor=n}get songId(){return this._songId}get songName(){return this._songName}get songAuthor(){return this._songAuthor}}Me.PLAYING_CHANGED="RWUSE_PLAYING_CHANGED",Me.DATA_RECEIVED="RWUSE_DATA_RECEIVED";(class extends he{constructor(e,t,s,n,r,c){super(e),this._color=void 0,this._name=void 0,this._date=void 0,this._message=void 0,this._extra=void 0,this._color=t,this._name=s,this._date=n,this._message=r,this._extra=c}get color(){return this._color}get name(){return this._name}get date(){return this._date}get message(){return this._message}get extra(){return this._extra}}).TROPHY_UPDATE="RWUTE_TROPHY_UPDATE";class Fe extends he{constructor(){super(Fe.USER_DATA_UPDATED)}}Fe.USER_DATA_UPDATED="RWUUDE_USER_DATA_UPDATED";class He extends he{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(He.UPDATE_YOUTUBE_DISPLAY),this._objectId=void 0,this._hasControl=void 0,this._objectId=e,this._hasControl=t}get objectId(){return this._objectId}get hasControl(){return this._hasControl}}He.UPDATE_YOUTUBE_DISPLAY="RWUEIE_UPDATE_YOUTUBE_DISPLAY";class Be extends he{constructor(e,t){super(e),this._items=void 0,this._items=t}get items(){return this._items}}Be.USE_PRODUCT_BUBBLES="RWUPBE_USE_PRODUCT_BUBBLES";class Ge extends he{constructor(e,t){super(e),this._id=-1,this._pollType=null,this._pollId=-1,this._questionId=-1,this._duration=-1,this._question=null,this._userId=-1,this._value=void 0,this._answerCounts=void 0,this._id=t}get id(){return this._id}get pollType(){return this._pollType}set pollType(e){this._pollType=e}get pollId(){return this._pollId}set pollId(e){this._pollId=e}get questionId(){return this._questionId}set questionId(e){this._questionId=e}get duration(){return this._duration}set duration(e){this._duration=e}get question(){return this._question}set question(e){this._question=e}get userId(){return this._userId}set userId(e){this._userId=e}get value(){return this._value}set value(e){this._value=e}get answerCounts(){return this._answerCounts}set answerCounts(e){this._answerCounts=e}}Ge.NEW_QUESTION="RWPUW_NEW_QUESTION",Ge.QUESTION_FINISHED="RWPUW_QUESION_FINSIHED",Ge.QUESTION_ANSWERED="RWPUW_QUESTION_ANSWERED";class We{constructor(e,t,s,n,r,c,i){this._id=void 0,this._category=void 0,this._name=void 0,this._requestRoomObjectId=void 0,this._targetRoomObjectId=void 0,this._requestInventoryStripId=void 0,this._replace=void 0,this._id=e,this._category=t,this._name=s,this._requestRoomObjectId=n,this._requestInventoryStripId=c,this._replace=i}get id(){return this._id}get category(){return this._category}get name(){return this._name}get requestRoomObjectId(){return this._requestRoomObjectId}get requestInventoryStripId(){return this._requestInventoryStripId}get replace(){return this._replace}}const Ve=e=>{if(null==e||"object"!=typeof e)return e;const t=new e.constructor;for(const s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t};class qe{static makeColorHex(e){return"#"+e}static makeColorNumberHex(e){let t=e.toString(16);if(t.length<6){const e=6-t.length;for(let s=0;s<e;s++)t="0"+t}return"#"+t}static convertFromHex(e){return parseInt(e.replace("#",""),16)}}const ze=e=>{let t=_().localization.getBadgeDesc(e);return t&&t.length||(t=`badge_desc_${e}`),t},Ye=e=>{let t=_().localization.getBadgeName(e);return t&&t.length||(t=`badge_name_${e}`),t};function Ke(e){return!e||isNaN(e)?"0":e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function Qe(e){if(!e||isNaN(e))return"0";let t=Math.abs(e);const s=Math.pow(10,1),n=e<0;let r="";const c=[{key:"Q",value:Math.pow(10,15)},{key:"T",value:Math.pow(10,12)},{key:"B",value:Math.pow(10,9)},{key:"M",value:Math.pow(10,6)},{key:"K",value:1e3}];for(const i of c){let e=t/i.value;if(e=Math.round(e*s)/s,e>=1){t=e,r=i.key;break}}return(n?"-":"")+t+r}function $e(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return _().getLocalizationWithParameters(e,t,s)}var Xe=s(35);function Je(e,t){Object(c.useEffect)((()=>{const s=new e(t);return S().registerMessageEvent(s),()=>S().removeMessageEvent(s)}),[e,t])}const Ze=()=>{const[e,t]=Object(c.useState)(!0),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)(null),[o,u]=Object(c.useState)(-1),[d,h]=Object(c.useState)(0),b=Object(c.useMemo)((()=>{let e=0;return s.forEach((t=>e+=j(t))),e}),[s]),g=Object(c.useMemo)((()=>{let e=0;return s.forEach((t=>e+=t.getProgress())),e}),[s]),O=Object(c.useMemo)((()=>{let e=0;return s.forEach((t=>e+=t.getMaxProgress())),e}),[s]),m=Object(c.useMemo)((()=>~~(100*(g-0)/(O-0)+0)),[g,O]),p=Object(c.useCallback)(((e,t)=>{n((s=>{const n=[...s];for(const r of n)if(r.code===e)for(const e of r.achievements)e.achievementId===t&&(e.unseen=0);return n}))}),[]),_=Object(c.useCallback)((e=>{const t=e.getParser().achievement;n((e=>{const s=[...e],n=s.findIndex((e=>e.code===t.category));if(-1===n){const e=new l(t.category);e.achievements.push(t),s.push(e)}else{const e=Ve(s[n]),r=[...e.achievements],c=r.findIndex((e=>e.achievementId===t.achievementId));let i=null;-1===c?r.push(t):(i=r[c],r[c]=t),(e=>{if(!e)return!1;const t=N("achievements.unseen.ignored"),s=e.badgeId.replace(/[0-9]/g,"");return t.indexOf(s)>=0})(t)||(t.unseen++,i&&(t.unseen+=i.unseen)),e.achievements=r,s[n]=e}return s}))}),[]);Je(a.b,_);const E=Object(c.useCallback)((e=>{const t=e.getParser(),s=[];for(const n of t.achievements){const e=n.category;let t=s.find((t=>t.code===e));t||(t=new l(e),s.push(t)),t.achievements.push(n)}n(s)}),[]);Je(a.d,E);const f=Object(c.useCallback)((e=>{const t=e.getParser();h(t.score)}),[]);return Je(a.e,f),Object(c.useEffect)((()=>{e&&(Ln(new a.If),t(!1))}),[e]),{achievementCategories:s,selectedCategoryCode:r,setSelectedCategoryCode:i,selectedAchievementId:o,setSelectedAchievementId:u,achievementScore:d,getTotalUnseen:b,getProgress:g,getMaxProgress:O,scaledProgressPercent:m,setAchievementSeen:p}},et=(e,t,s)=>{Object(c.useEffect)((()=>(t.addEventListener(e,s),()=>t.removeEventListener(e,s))),[e,t,s])},tt=(e,t)=>et(e,Hn().events,t),st=(e,t)=>e.dispatchEvent(t),nt=e=>st(_().events,e),rt=(e,t)=>et(e,_().events,t),ct=(e,t)=>et(e,w().events,t),it=(e,t)=>et(e,V().events,t),at=new a.sb,ot=e=>st(at,e),lt=(e,t)=>et(e,at,t);var ut=s(23);const dt=()=>{const[e,t]=Object(c.useState)([]),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)([]),[o,l]=Object(c.useState)(null),u=Object(c.useMemo)((()=>{const t=e.filter((e=>e.online));return t.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)),t}),[e]),d=Object(c.useMemo)((()=>{const t=e.filter((e=>!e.online));return t.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)),t}),[e]),h=Object(c.useCallback)((e=>Ln(new a.Ab(e.id))),[]),j=Object(c.useCallback)(((e,t)=>t!==e.relationshipStatus&&Ln(new a.Fh(e.id,t))),[]),b=Object(c.useCallback)((t=>{for(const s of e)if(s.id===t)return s;return null}),[e]),g=Object(c.useCallback)((e=>!b(e)&&(!s.find((t=>t.requesterUserId===e))&&!(r.indexOf(e)>=0))),[s,r,b]),O=Object(c.useCallback)(((e,t)=>{if(!g(e))return!1;i((t=>{const s=[...t];return s.push(e),s})),Ln(new a.Mf(t))}),[g]),m=Object(c.useCallback)(((e,t)=>{-1!==e||t?n((s=>{const n=[...s],r=n.findIndex((t=>t.id===e));return-1===r?s:(Ln(t?new a.a(n[r].id):new a.lb(!1,n[r].id)),n.splice(r,1),n)})):(Ln(new a.lb(!0)),n([]))}),[]),p=Object(c.useCallback)((e=>{const t=e.getParser();l(new qn(t.userFriendLimit,t.normalFriendLimit,t.extendedFriendLimit,t.categories)),Ln(new a.fc)}),[]);Je(a.de,p);const _=Object(c.useCallback)((e=>{const s=e.getParser();t((e=>{const t=[...e];for(const n of s.fragment){const e=t.findIndex((e=>e.id===n.id)),s=new Js;s.populate(n),e>-1?t[e]=s:t.push(s)}return t}))}),[]);Je(a.Cb,_);const E=Object(c.useCallback)((e=>{const s=e.getParser();t((e=>{const t=[...e],n=e=>{const s=t.findIndex((t=>t.id===e.id));if(-1===s){const s=new Js;s.populate(e),t.unshift(s)}else t[s].populate(e)};for(const r of s.addedFriends)n(r);for(const r of s.updatedFriends)n(r);for(const r of s.removedFriendIds){const e=t.findIndex((e=>e.id===r));e>-1&&t.splice(e,1)}return t}))}),[]);Je(a.Db,E);const f=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e];for(const n of t.requests){const e=s.findIndex((e=>e.requesterUserId===n.requesterUserId));if(e>0)s[e]=Ve(s[e]),s[e].populate(n);else{const e=new Vn;e.populate(n),s.push(e)}}return s}))}),[]);Je(a.Eb,f);const x=Object(c.useCallback)((e=>{const t=e.getParser().request;n((e=>{const s=[...e];if(-1===s.findIndex((e=>e.requesterUserId===t.requesterUserId))){const e=new Vn;e.populate(t),s.push(e)}return s}))}),[]);return Je(a.Fe,x),Object(c.useEffect)((()=>{Ln(new a.ce)}),[]),{friends:e,requests:s,sentRequests:r,settings:o,onlineFriends:u,offlineFriends:d,getFriend:b,canRequestFriend:g,requestFriend:O,requestResponse:m,followFriend:h,updateRelationship:j}},ht=()=>Object(ut.a)(dt),jt=()=>{const[e,t]=Object(c.useState)([]),[s,n]=Object(c.useState)(-1),[r,i]=Object(c.useState)([]),[o,l]=Object(c.useState)(Wn.HIDDEN),{getFriend:u=null}=ht(),d=Object(c.useMemo)((()=>e.filter((e=>-1===r.indexOf(e.threadId)))),[e,r]),h=Object(c.useMemo)((()=>s>0&&d.find((e=>e.threadId===s||null))),[s,d]),j=Object(c.useCallback)((s=>{let n=e.find((e=>e.participant&&e.participant.id===s));if(n)return n;const r=u(s);return r?(n=new Kn(r),t((e=>{const t=[...e];return t.push(n),t})),i((e=>{const t=e.indexOf(n.threadId);if(-1===t)return e;const s=[...e];return s.splice(t,1),s})),n):null}),[e,u]),b=Object(c.useCallback)((e=>{const n=e.getParser();t((e=>{const t=[...e];let r=t.findIndex((e=>e.participant&&e.participant.id===n.senderId)),c=null;if(-1===r){const e=u(n.senderId);e&&(c=new Kn(e),t.push(c))}else t[r]=Ve(t[r]),c=t[r];return c.addMessage(n.senderId,n.messageText,n.secondsSinceSent,n.extraData),s===c.threadId&&c.setRead(),c.unreadCount>0&&Ft(ps.MESSENGER_MESSAGE_RECEIVED),t}))}),[s,u]);Je(a.Ee,b);const g=Object(c.useCallback)((e=>{const n=e.getParser();t((e=>{const t=[...e];let r=t.findIndex((e=>e.participant&&e.participant.id===n.senderId)),c=null;if(-1===r){const e=u(n.senderId);e&&(c=new Kn(e),t.push(c))}else t[r]=Ve(t[r]),c=t[r];return c.addMessage(null,n.messageText,0,null,zn.ROOM_INVITE),s===c.threadId&&c.setRead(),c.unreadCount>0&&Ft(ps.MESSENGER_MESSAGE_RECEIVED),t}))}),[s,u]);Je(a.vg,g);const O=Object(c.useCallback)((e=>{const t=e.getParser(),s="Received room invite error: errorCode: "+t.errorCode+", recipients: "+t.failedRecipients;jr.simpleAlert(s,or.DEFAULT,null,null,$e("friendlist.alert.title"))}),[]);return Je(a.ug,O),Object(c.useEffect)((()=>{s<=0||t((e=>{const t=[...e];let n=t.findIndex((e=>e.threadId===s));if(-1!==n)return t[n]=Ve(t[n]),t[n].setRead(),t}))}),[s]),Object(c.useEffect)((()=>{l((e=>{if(!d.length)return Wn.HIDDEN;let t=!1;for(const s of d)if(s.unreadCount>0){t=!0;break}return t?Wn.UNREAD:Wn.SHOW}))}),[d]),{messageThreads:e,activeThread:h,iconState:o,visibleThreads:d,getMessageThread:j,setActiveThreadId:n,closeThread:e=>{i((t=>{const s=[...t];return s.indexOf(e)>=0?t:(s.push(e),s)}))},sendMessage:(n,r)=>{n&&r&&r.length&&(Ln(new a.Bh(n.participant.id,r)),1===e.length&&1===n.groups.length&&Ft(ps.MESSENGER_NEW_THREAD),t((e=>{const t=[...e],c=t.findIndex((e=>e.threadId===n.threadId));return-1===c?e:(t[c]=Ve(t[c]),(n=t[c]).addMessage(K().userId,r,0,null,zn.CHAT),s===n.threadId&&n.setRead(),t)})))}}},bt=()=>Object(ut.a)(jt),gt=()=>{const[e,t]=Object(c.useState)([]);return{isVisible:Object(c.useMemo)((()=>!!e.length),[e]),activate:Object(c.useCallback)((()=>{let e=-1;return t((t=>{const s=[...t];return e=s.length?s[s.length-1]+1:0,s.push(e),s})),e}),[]),deactivate:Object(c.useCallback)((e=>{t((t=>{const s=[...t],n=s.indexOf(e);return-1===n?t:(s.splice(n,1),s)}))}),[])}},Ot=()=>{const[e,t]=Object(c.useState)(new Map),s=Object(c.useCallback)((t=>{var s;return(null===(s=e.get(t))||void 0===s?void 0:s.length)||0}),[e]),n=Object(c.useMemo)((()=>{let t=0;for(const n of e.keys())t+=s(n);return t}),[e,s]),r=Object(c.useCallback)((e=>{let s=!0;return t((t=>{if(!t.has(e))return s=!1,t;const n=new Map(t);return n.delete(e),(e=>{Ln(new a.hi(e))})(e),n})),s}),[]),i=Object(c.useCallback)(((e,s)=>{let n=!0;return t((t=>{if(!t.has(e))return n=!1,t;const r=new Map(t),c=r.get(e);if(c)for(const e of s)c.splice(c.indexOf(e),1);return((e,t)=>{Ln(new a.ii(e,...t))})(e,s),r})),n}),[]),o=Object(c.useCallback)(((t,s)=>{if(!e.has(t))return!1;return e.get(t).indexOf(s)>=0}),[e]),l=Object(c.useCallback)(((e,s)=>{t((t=>{if(!t.has(e))return t;const n=new Map(t),r=n.get(e),c=r.indexOf(s);return c>=0&&r.splice(c,1),n}))}),[]),u=Object(c.useCallback)((e=>{const s=e.getParser();t((e=>{const t=new Map(e);for(const n of s.categories){let e=t.get(n);e||(e=[],t.set(n,e));const r=s.getItemsByCategory(n);for(const t of r)-1===e.indexOf(t)&&e.push(t)}return t}))}),[]);return Je(a.gi,u),{getCount:s,getFullCount:n,resetCategory:r,resetItems:i,isUnseen:o,removeUnseen:l}},mt=()=>Object(ut.a)(Ot),pt=()=>{const[e,t]=Object(c.useState)(!0),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)([]),[o,l]=Object(c.useState)([]),[u,d]=Object(c.useState)(null),{isVisible:h=!1,activate:j=null,deactivate:b=null}=gt(),{isUnseen:g=null,resetCategory:O=null}=mt(),m=N("user.badges.max.slots",5),p=()=>o.length<m,_=Object(c.useCallback)((e=>{const t=e.getParser(),s=t.getAllBadgeCodes(),r=[];for(const n of s)r.push(t.getBadgeId(n));n(s),i(r),l(t.getActiveBadgeCodes())}),[]);Je(a.v,_);const E=Object(c.useCallback)((e=>{const t=e.getParser(),s=g(ns.BADGE,t.badgeId);n((e=>{const n=[...e];return s?n.unshift(t.badgeCode):n.push(t.badgeCode),n})),i((e=>{const n=[...e];return s?n.unshift(t.badgeId):n.push(t.badgeId),n}))}),[g]);return Je(a.u,E),Object(c.useEffect)((()=>{s&&s.length&&d((e=>{let t=e;return t&&-1===s.indexOf(t)&&(t=null),t||(t=s[0]),t}))}),[s]),Object(c.useEffect)((()=>{if(h)return()=>{O(ns.BADGE)}}),[h,O]),Object(c.useEffect)((()=>{h&&e&&(Ln(new a.Jf),t(!1))}),[h,e]),{badgeCodes:s,activeBadgeCodes:o,selectedBadgeCode:u,setSelectedBadgeCode:d,isWearingBadge:e=>o.indexOf(e)>=0,canWearBadges:p,toggleBadge:e=>{l((t=>{const s=[...t],n=s.indexOf(e);if(-1===n){if(!p())return t;s.push(e)}else s.splice(n,1);const r=new a.Dh;for(let e=0;e<m;e++)r.addActivatedBadge(s[e]||null);return Ln(r),s}))},getBadgeId:e=>{const t=s.indexOf(e);return-1===t?0:r[t]||0},activate:j,deactivate:b}},_t=()=>Object(ut.a)(pt),Et=()=>{const[e,t]=Object(c.useState)(!0),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)(null),{isVisible:o=!1,activate:l=null,deactivate:u=null}=gt(),{isUnseen:d=null,resetCategory:h=null}=mt(),j=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e],n=s.map((e=>e.botData.id)),r=[];for(const c of t.items.values())-1===n.indexOf(c.id)&&r.push(c);for(const c of n){let e=!0;for(const s of t.items.values())if(s.id===c){e=!1;break}if(!e)continue;const n=s.findIndex((e=>e.botData.id===c)),r=s[n];-1!==n&&r&&(Xt()===r.botData.id&&(Zt(),C("inventory/open")),s.splice(n,1))}for(const t of r){const e={botData:t};d(ns.BOT,t.id)?s.unshift(e):s.push(e)}return s}))}),[d]);Je(a.A,j);const b=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e];if(s.findIndex((e=>e.botData.id===t.item.id))>=0)return e;const n={botData:t.item};return d(ns.BOT,n.botData.id)?s.unshift(n):s.push(n),s}))}),[d]);Je(a.y,b);const g=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e],n=s.findIndex((e=>e.botData.id===t.itemId));return-1===n?e:(s.splice(n,1),Xt()===t.itemId&&(Zt(),C("inventory/show")),s)}))}),[]);return Je(a.C,g),Object(c.useEffect)((()=>{s&&s.length&&i((e=>{let t=e;return t&&-1===s.indexOf(t)&&(t=null),t||(t=s[0]),t}))}),[s]),Object(c.useEffect)((()=>{if(o)return()=>{h(ns.BOT)}}),[o,h]),Object(c.useEffect)((()=>{o&&e&&(Ln(new a.Xb),t(!1))}),[o,e]),{botItems:s,selectedBot:r,setSelectedBot:i,activate:l,deactivate:u}},ft=()=>Object(ut.a)(Et);let xt=null;const It=()=>{const[e,t]=Object(c.useState)(!0),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)(null),{isVisible:o=!1,activate:l=null,deactivate:u=null}=gt(),{isUnseen:d=null,resetCategory:h=null}=mt(),j=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e];for(const n of t.items){let e=0,t=null;for(;e<s.length;){const r=s[e];let c=0;for(;c<r.items.length;){const e=r.items[c];if(e.id===n.itemId){e.update(n);const s=[...r.items];s[c]=e,r.items=s,t=r;break}c++}if(t)break;e++}if(t)t.hasUnseenItems=!0,s[e]=Ve(t);else{const e=new Gt(n);qt(s,e,d(ns.FURNI,n.itemId))}}return s}))}),[d]);Je(a.Ib,j);const b=Object(c.useCallback)((e=>{const t=e.getParser();xt||(xt=new Array(t.totalFragments));const s=zt(t.fragment,t.totalFragments,t.fragmentNumber,xt);s&&(n((e=>{const t=[...e],n=Yt(t);for(const r of n){if(s.get(r))continue;let e=0;for(;e<t.length;){const s=t[e],n=s.remove(r);if(n){Xt()===n.ref&&(Zt(),ts(s)||C("inventory/show")),s.getTotalCount()<=0&&(t.splice(e,1),s.dispose());break}e++}}for(const r of s.keys()){if(n.indexOf(r)>=0)continue;const e=s.get(r);if(!e)continue;const c=new Gt(e);qt(t,c,d(ns.FURNI,r))}return t})),xt=null)}),[d]);Je(a.Kb,b);const g=Object(c.useCallback)((e=>{t(!0)}),[]);Je(a.Lb,g);const O=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e];let n=0;for(;n<s.length;){const e=s[n],r=e.remove(t.itemId);if(r){Xt()===r.ref&&(Zt(),ts(e)||C("inventory/show")),e.getTotalCount()<=0&&(s.splice(n,1),e.dispose());break}n++}return s}))}),[]);Je(a.Mb,O);const m=Object(c.useCallback)((e=>{}),[]);return Je(a.Rb,m),Object(c.useEffect)((()=>{s&&s.length&&i((e=>{let t=e;return t&&-1===s.indexOf(t)&&(t=null),t||(t=s[0]),t}))}),[s]),Object(c.useEffect)((()=>{if(o)return()=>{h(ns.FURNI)&&n((e=>{const t=[...e];for(const s of t)s.hasUnseenItems=!1;return t}))}}),[o,h]),Object(c.useEffect)((()=>{o&&e&&(Ln(new a.Jb),t(!1))}),[o,e]),{groupItems:s,setGroupItems:n,selectedItem:r,setSelectedItem:i,activate:l,deactivate:u}},Tt=()=>Object(ut.a)(It);let Ct=null;const St=()=>{const[e,t]=Object(c.useState)(!0),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)(null),{isVisible:o=!1,activate:l=null,deactivate:u=null}=gt(),{isUnseen:d=null,resetCategory:h=null}=mt(),j=Object(c.useCallback)((e=>{const t=e.getParser();Ct||(Ct=new Array(t.totalFragments));const s=as(t.fragment,t.totalFragments,t.fragmentNumber,Ct);s&&(n((e=>{const t=[...e];return is(t,s,d),t})),Ct=null)}),[d]);Je(a.hf,j);const b=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e];return rs(t.pet,s,d(ns.PET,t.pet.id)),s}))}),[d]);Je(a.ef,b);const g=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e];return cs(t.petId,s),s}))}),[]);return Je(a.kf,g),Object(c.useEffect)((()=>{s&&s.length&&i((e=>{let t=e;return t&&-1===s.indexOf(t)&&(t=null),t||(t=s[0]),t}))}),[s]),Object(c.useEffect)((()=>{if(o)return()=>{h(ns.PET)}}),[o,h]),Object(c.useEffect)((()=>{o&&e&&(Ln(new a.Nf),t(!1))}),[o,e]),{petItems:s,selectedPet:r,setSelectedPet:i,activate:l,deactivate:u}},Nt=()=>Object(ut.a)(St),vt=()=>{const[e,t]=Object(c.useState)(null),[s,n]=Object(c.useState)(null),[r,i]=Object(c.useState)(os.TRADING_STATE_READY),{groupItems:o=[],setGroupItems:l=null,activate:u=null,deactivate:d=null}=Tt(),h=r>=os.TRADING_STATE_RUNNING,j=Object(c.useCallback)((r=>{const c=r.getParser();e&&s&&(e.userId===c.userID?t((e=>{const t=Ve(e);return t.accepts=c.userAccepts,t})):s.userId===c.userID&&n((e=>{const t=Ve(e);return t.accepts=c.userAccepts,t})))}),[e,s]);Je(a.Mh,j);const b=Object(c.useCallback)((s=>{const r=s.getParser();r.reason===a.Qh.ERROR_WHILE_COMMIT?ds(us.ERROR_WHILE_COMMIT):e&&r.userID!==e.userId&&ds(us.THEY_CANCELLED),t(null),n(null),i(os.TRADING_STATE_READY)}),[e]);Je(a.Ph,b);const g=Object(c.useCallback)((e=>{e.getParser();t(null),n(null),i(os.TRADING_STATE_READY)}),[]);Je(a.Rh,g);const O=Object(c.useCallback)((e=>{e.getParser();i(os.TRADING_STATE_COUNTDOWN)}),[]);Je(a.Th,O);const m=Object(c.useCallback)((e=>{const s=e.getParser(),r=js(s.firstUserItemArray),c=js(s.secondUserItemArray);t((e=>{const t=Ve(e);t.userId===s.firstUserID?(t.creditsCount=s.firstUserNumCredits,t.itemCount=s.firstUserNumItems,t.userItems=r):(t.creditsCount=s.secondUserNumCredits,t.itemCount=s.secondUserNumItems,t.userItems=c);const n=[];for(const s of t.userItems.getValues()){let e=0;for(;e<s.getTotalCount();){const t=s.getItemByIndex(e);t&&n.push(t.ref),e++}}return l((e=>{const t=[...e];for(const s of t)s.lockItemIds(n);return t})),t})),n((e=>{const t=Ve(e);return t.userId===s.firstUserID?(t.creditsCount=s.firstUserNumCredits,t.itemCount=s.firstUserNumItems,t.userItems=r):(t.creditsCount=s.secondUserNumCredits,t.itemCount=s.secondUserNumItems,t.userItems=c),t}))}),[l]);Je(a.Wh,m);const p=Object(c.useCallback)((e=>{e.getParser()}),[]);Je(a.Yh,p);const _=Object(c.useCallback)((e=>{const s=e.getParser(),r=new ls,c=ee().userDataManager.getUserData(s.userID);r.userItems=new a.g;const o=new ls,l=ee().userDataManager.getUserData(s.otherUserID);o.userItems=new a.g,c.webID===K().userId?(r.userId=c.webID,r.userName=c.name,r.canTrade=s.userCanTrade,o.userId=l.webID,o.userName=l.name,o.canTrade=s.otherUserCanTrade):l.webID===K().userId&&(r.userId=l.webID,r.userName=l.name,r.canTrade=s.otherUserCanTrade,o.userId=c.webID,o.userName=c.name,o.canTrade=s.userCanTrade),t(r),n(o),i(os.TRADING_STATE_RUNNING)}),[]);Je(a.ai,_);const E=Object(c.useCallback)((e=>{const t=e.getParser();ds(t.reason,t.otherUserName)}),[]);Je(a.bi,E);const f=Object(c.useCallback)((e=>{e.getParser();ds(us.THEY_NOT_ALLOWED)}),[]);Je(a.ci,f);const x=Object(c.useCallback)((e=>{e.getParser();ds(us.YOU_NOT_ALLOWED)}),[]);return Je(a.ei,x),Object(c.useEffect)((()=>{if(r===os.TRADING_STATE_READY)return;const e=u();return()=>d(e)}),[r,u,d]),{ownUser:e,otherUser:s,tradeState:r,setTradeState:i,isTrading:h,groupItems:o,progressTrade:()=>{switch(r){case os.TRADING_STATE_RUNNING:return s.itemCount||e.accepts||jr.simpleAlert($e("inventory.trading.warning.other_not_offering"),null,null,null),void(e.accepts?Ln(new a.di):Ln(new a.Lh));case os.TRADING_STATE_CONFIRMING:return Ln(new a.Sh),void i(os.TRADING_STATE_CONFIRMED)}},removeItem:e=>{const t=e.getLastItem();t&&Ln(new a.Xh(t.id))},stopTrading:()=>{h&&(r!==os.TRADING_STATE_RUNNING?Ln(new a.Nh):Ln(new a.Oh))}}},Rt=()=>Object(ut.a)(vt),At=()=>Object(c.useState)({settingsReceived:!1,homeRoomId:0,enteredGuestRoom:null,currentRoomOwner:!1,currentRoomId:0,currentRoomIsStaffPick:!1,createdFlatId:0,avatarId:0,roomPicker:!1,eventMod:!1,currentRoomRating:0,canRate:!0}),yt=()=>Object(ut.a)(At),wt=()=>{const[e,t]=Object(c.useState)(new br),s=Object(c.useMemo)((()=>N("hc.disabled",!1)),[]),n=Object(c.useMemo)((()=>s||e.clubDays>0?er.ACTIVE:e.pastVipDays>0||e.pastVipDays>0?er.EXPIRED:er.NONE),[e,s]),r=Object(c.useCallback)((e=>{const s=e.getParser();t((e=>{const t=Ve(e);return t.credits=parseFloat(s.credits),e.credits!==t.credits&&Ft(ps.CREDITS),t}))}),[]);Je(a.pi,r);const i=Object(c.useCallback)((e=>{const s=e.getParser();t((e=>{const t=Ve(e);return t.activityPoints=s.currencies,t}))}),[]);Je(a.ri,i);const o=Object(c.useCallback)((e=>{const s=e.getParser();t((e=>{const t=Ve(e);return t.activityPoints=new Map(t.activityPoints),t.activityPoints.set(s.type,s.amount),0===s.type&&Ft(ps.DUCKETS),t}))}),[]);Je(a.f,o);const l=Object(c.useCallback)((e=>{const s=e.getParser(),n=s.productName;"club_habbo"!==n&&"habbo_club"!==n||t((e=>{const t=Ve(e);return t.clubDays=Math.max(0,s.daysToPeriodEnd),t.clubPeriods=Math.max(0,s.periodsSubscribedAhead),t.isVip=s.isVip,t.pastClubDays=s.pastClubDays,t.pastVipDays=s.pastVipDays,t.isExpiring=s.responseType===a.Ji.RESPONSE_TYPE_DISCOUNT_AVAILABLE,t.minutesUntilExpiration=s.minutesUntilExpiration,t.minutesSinceLastModified=s.minutesSinceLastModified,t}))}),[]);return Je(a.Ii,l),Object(c.useEffect)((()=>{if(s)return;Ln(new a.Hi("habbo_club"));const e=setInterval((()=>Ln(new a.Hi("habbo_club"))),5e4);return()=>clearInterval(e)}),[s]),Object(c.useEffect)((()=>{Ln(new a.qi)}),[]),{purse:e,hcDisabled:s,clubStatus:n,getCurrencyAmount:t=>{if(-1===t)return e.credits;for(const[s,n]of e.activityPoints.entries())if(s===t)return n;return 0}}},kt=()=>Object(ut.a)(wt),Dt=()=>{const[e,t]=Object(c.useState)([]),s=Object(c.useCallback)((s=>{e.indexOf(s)>=0||t([...e,s])}),[e]),n=Object(c.useCallback)((s=>{const n=e.indexOf(s);if(-1===n)return;const r=[...e];r.splice(n,1),t(r)}),[e]),r=Object(c.useCallback)(((e,t)=>{ee().sendDoorbellApprovalMessage(e,t),n(e)}),[n]),i=Object(c.useCallback)((e=>{switch(e.type){case a.Ng.DOORBELL:return void s(e.userName);case a.Ng.RSDE_REJECTED:case a.Ng.RSDE_ACCEPTED:return void n(e.userName)}}),[s,n]);return it(a.Ng.DOORBELL,i),it(a.Ng.RSDE_REJECTED,i),it(a.Ng.RSDE_ACCEPTED,i),{users:e,addUser:s,removeUser:n,answer:r}},Pt=()=>{const[e,t]=Object(c.useState)(null),[s,n]=Object(c.useState)(null),r=Object(c.useCallback)((e=>{const s=e.getParser();t(s.userInfo),n(s.userInfo.figure)}),[]);Je(a.wi,r);const i=Object(c.useCallback)((e=>{const t=e.getParser();n(t.figure)}),[]);return Je(a.ub,i),{userInfo:e,userFigure:s}},Ut=()=>Object(ut.a)(Pt),Lt=e=>{return t=()=>e(),Object(c.useEffect)(t,[]);var t};let Mt=!1;const Ft=e=>{Mt&&nt(new Xe.a(Xe.a.PLAY_SOUND,e))},Ht=[a.ue.MOUSE_CLICK];(()=>{const e=t=>(Mt=!0)&&Ht.forEach((t=>window.removeEventListener(t,e)));Ht.forEach((t=>window.addEventListener(t,e)))})();class Bt{}Bt.DEFAULT=1,Bt.WALL_PAPER=2,Bt.FLOOR=3,Bt.LANDSCAPE=4,Bt.POST_IT=5,Bt.POSTER=6,Bt.SOUND_SET=7,Bt.TRAX_SONG=8,Bt.PRESENT=9,Bt.ECOTRON_BOX=10,Bt.TROPHY=11,Bt.CREDIT_FURNI=12,Bt.PET_SHAMPOO=13,Bt.PET_CUSTOM_PART=14,Bt.PET_CUSTOM_PART_SHAMPOO=15,Bt.PET_SADDLE=16,Bt.GUILD_FURNI=17,Bt.GAME_FURNI=18,Bt.MONSTERPLANT_SEED=19,Bt.MONSTERPLANT_REVIVAL=20,Bt.MONSTERPLANT_REBREED=21,Bt.MONSTERPLANT_FERTILIZE=22,Bt.FIGURE_PURCHASABLE_SET=23;class Gt{constructor(e){this._expirationTimeStamp=void 0,this._isWallItem=void 0,this._songId=void 0,this._locked=void 0,this._id=void 0,this._ref=void 0,this._category=void 0,this._type=void 0,this._stuffData=void 0,this._extra=void 0,this._recyclable=void 0,this._tradeable=void 0,this._groupable=void 0,this._sellable=void 0,this._secondsToExpiration=void 0,this._hasRentPeriodStarted=void 0,this._creationDay=void 0,this._creationMonth=void 0,this._creationYear=void 0,this._slotId=void 0,this._isRented=void 0,this._flatId=void 0,e&&(this._locked=!1,this._id=e.itemId,this._type=e.spriteId,this._ref=e.ref,this._category=e.category,this._groupable=e.isGroupable&&!e.rentable,this._tradeable=e.tradable,this._recyclable=e.isRecycleable,this._sellable=e.sellable,this._stuffData=e.stuffData,this._extra=e.extra,this._secondsToExpiration=e.secondsToExpiration,this._expirationTimeStamp=e.expirationTimeStamp,this._hasRentPeriodStarted=e.hasRentPeriodStarted,this._creationDay=e.creationDay,this._creationMonth=e.creationMonth,this._creationYear=e.creationYear,this._slotId=e.slotId,this._songId=e.songId,this._flatId=e.flatId,this._isRented=e.rentable,this._isWallItem=e.isWallItem)}get rentable(){return this._isRented}get id(){return this._id}get ref(){return this._ref}get category(){return this._category}get type(){return this._type}get stuffData(){return this._stuffData}set stuffData(e){this._stuffData=e}get extra(){return this._extra}get _Str_16260(){return this._recyclable}get isTradable(){return this._tradeable}get isGroupable(){return this._groupable}get sellable(){return this._sellable}get secondsToExpiration(){if(-1===this._secondsToExpiration)return-1;let e=-1;return this._hasRentPeriodStarted?(e=this._secondsToExpiration-(_().time-this._expirationTimeStamp)/1e3,e<0&&(e=0)):e=this._secondsToExpiration,e}get _Str_8932(){return this._creationDay}get _Str_9050(){return this._creationMonth}get _Str_9408(){return this._creationYear}get slotId(){return this._slotId}get _Str_3951(){return this._songId}get locked(){return this._locked}set locked(e){this._locked=e}get flatId(){return this._flatId}get isWallItem(){return this._isWallItem}get hasRentPeriodStarted(){return this._hasRentPeriodStarted}get _Str_10616(){return this._expirationTimeStamp}update(e){this._type=e.spriteId,this._ref=e.ref,this._category=e.category,this._groupable=e.isGroupable&&!e.rentable,this._tradeable=e.tradable,this._recyclable=e.isRecycleable,this._sellable=e.sellable,this._stuffData=e.stuffData,this._extra=e.extra,this._secondsToExpiration=e.secondsToExpiration,this._expirationTimeStamp=e.expirationTimeStamp,this._hasRentPeriodStarted=e.hasRentPeriodStarted,this._creationDay=e.creationDay,this._creationMonth=e.creationMonth,this._creationYear=e.creationYear,this._slotId=e.slotId,this._songId=e.songId,this._flatId=e.flatId,this._isRented=e.rentable,this._isWallItem=e.isWallItem}clone(){const e=new Gt(null);return e._expirationTimeStamp=this._expirationTimeStamp,e._isWallItem=this._isWallItem,e._songId=this._songId,e._locked=this._locked,e._id=this._id,e._ref=this._ref,e._category=this._category,e._type=this._type,e._stuffData=this._stuffData,e._extra=this._extra,e._recyclable=this._recyclable,e._tradeable=this._tradeable,e._groupable=this._groupable,e._sellable=this._sellable,e._secondsToExpiration=this._secondsToExpiration,e._hasRentPeriodStarted=this._hasRentPeriodStarted,e._creationDay=this._creationDay,e._creationMonth=this._creationMonth,e._creationYear=this._creationYear,e._slotId=this._slotId,e._isRented=this._isRented,e._flatId=this._flatId,e}}class Wt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;this._type=void 0,this._category=void 0,this._roomEngine=void 0,this._stuffData=void 0,this._extra=void 0,this._isWallItem=void 0,this._iconUrl=void 0,this._name=void 0,this._description=void 0,this._locked=void 0,this._selected=void 0,this._hasUnseenItems=void 0,this._items=void 0,this._type=e,this._category=t,this._roomEngine=s,this._stuffData=n,this._extra=r,this._isWallItem=!1,this._iconUrl=null,this._name=null,this._description=null,this._locked=!1,this._selected=!1,this._hasUnseenItems=!1,this._items=[]}clone(){const e=new Wt;return e._type=this._type,e._category=this._category,e._roomEngine=this._roomEngine,e._stuffData=this._stuffData,e._extra=this._extra,e._isWallItem=this._isWallItem,e._iconUrl=this._iconUrl,e._name=this._name,e._description=this._description,e._locked=this._locked,e._selected=this._selected,e._hasUnseenItems=this._hasUnseenItems,e._items=this._items,e}prepareGroup(){this.setIcon(),this.setName(),this.setDescription()}dispose(){}getItemByIndex(e){return this._items[e]}getItemById(e){for(const t of this._items)if(t.id===e)return t;return null}getTradeItems(e){const t=[],s=this.getLastItem();if(!s)return t;let n=0,r=0;for(;r<this._items.length&&!(n>=e);){const e=this.getItemByIndex(r);!e.locked&&e.isTradable&&e.type===s.type&&(t.push(e),n++),r++}return t}push(e){const t=[...this._items];let s=0;for(;s<t.length;){let n=t[s];if(n.id===e.id)return n=n.clone(),n.locked=!1,t.splice(s,1),t.push(n),void(this._items=t);s++}t.push(e),this._items=t,1===this._items.length&&this.prepareGroup()}pop(){const e=[...this._items];let t=null;if(e.length>0){const s=e.length-1;t=e[s],e.splice(s,1)}return this._items=e,t}remove(e){const t=[...this._items];let s=0;for(;s<t.length;){let n=t[s];if(n.id===e)return t.splice(s,1),this._items=t,n;s++}return null}getTotalCount(){if(this._category===Bt.POST_IT){let e=0,t=0;for(;t<this._items.length;){const s=this.getItemByIndex(t);e+=parseInt(s.stuffData.getLegacyString()),t++}return e}return this._items.length}getUnlockedCount(){if(this.category===Bt.POST_IT)return this.getTotalCount();let e=0,t=0;for(;t<this._items.length;){this.getItemByIndex(t).locked||e++,t++}return e}getLastItem(){if(!this._items.length)return null;return this.getItemByIndex(this._items.length-1)}unlockAllItems(){const e=[...this._items];let t=0;for(;t<e.length;){const s=e[t];if(s.locked){const n=s.clone();n.locked=!1,e[t]=n}t++}this._items=e}lockItemIds(e){const t=[...this._items];let s=0,n=!1;for(;s<t.length;){const r=t[s],c=e.indexOf(r.ref)>=0;if(r.locked!==c){n=!0;const e=r.clone();e.locked=c,t[s]=e}s++}return this._items=t,n}setName(){const e=this.getLastItem();if(!e)return void(this._name="");let t="";switch(this._category){case Bt.POSTER:t="poster_"+e.stuffData.getLegacyString()+"_name";break;case Bt.TRAX_SONG:return void(this._name="SONG_NAME");default:t=this.isWallItem?"wallItem.name."+e.type:"roomItem.name."+e.type}this._name=$e(t)}setDescription(){this._description=""}setIcon(){if(this._iconUrl)return;let e=null;e=this.isWallItem?this._roomEngine.getFurnitureWallIconUrl(this._type,this._stuffData.getLegacyString()):this._roomEngine.getFurnitureFloorIconUrl(this._type),e&&(this._iconUrl=e)}get type(){return this._type}get category(){return this._category}get stuffData(){return this._stuffData}get extra(){return this._extra}get iconUrl(){return this._iconUrl}get name(){return this._name}get description(){return this._description}get hasUnseenItems(){return this._hasUnseenItems}set hasUnseenItems(e){this._hasUnseenItems=e}get locked(){return this._locked}set locked(e){this._locked=e}get selected(){return this._selected}set selected(e){this._selected=e}get isWallItem(){const e=this.getItemByIndex(0);return!!e&&e.isWallItem}get isGroupable(){const e=this.getItemByIndex(0);return!!e&&e.isGroupable}get isSellable(){const e=this.getItemByIndex(0);return!!e&&e.sellable}get items(){return this._items}set items(e){this._items=e}}const Vt=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;return new Wt(e,t,w(),s,n)},qt=(e,t,s)=>{t.isGroupable?((e,t,s)=>{let n=null;for(const r of e)if(r.type===t.type&&r.isWallItem===t.isWallItem&&r.isGroupable)if(t.category===Bt.POSTER){if(r.stuffData.getLegacyString()===t.stuffData.getLegacyString()){n=r;break}}else{if(t.category!==Bt.GUILD_FURNI){n=r;break}if(t.stuffData.compare(r.stuffData)){n=r;break}}if(n){if(n.push(t),s){n.hasUnseenItems=!0;const t=e.indexOf(n);t>=0&&e.splice(t,1),e.unshift(n)}return n}n=Vt(t.type,t.category,t.stuffData,t.extra),n.push(t),s?(n.hasUnseenItems=!0,e.unshift(n)):e.push(n)})(e,t,s):((e,t,s)=>{const n=[];for(const c of e)c.type===t.type&&n.push(c);for(const c of n)if(c.getItemById(t.id))return c;const r=Vt(t.type,t.category,t.stuffData,t.extra);r.push(t),s?(r.hasUnseenItems=!0,e.unshift(r)):e.push(r)})(e,t,s)},zt=(e,t,s,n)=>{if(1===t)return e;n[s]=e;for(const c of n)if(!c)return null;const r=new Map;for(const c of n){for(const[e,t]of c)r.set(e,t);c.clear()}return n=null,r},Yt=e=>{const t=[];for(const s of e){let e=s.getTotalCount();s.category===Bt.POST_IT&&(e=1);let n=0;for(;n<e;)t.push(s.getItemByIndex(n).id),n++}return t};let Kt=!1,Qt=-1;const $t=e=>Kt=e,Xt=()=>Qt,Jt=e=>Qt=e,Zt=()=>{-1!==Xt()&&(w().cancelRoomObjectPlacement(),Jt(-1),$t(!1))},es=function(e){const t=e.petData;if(!t)return!1;const s=V().getSession(1);return!!s&&(!(!s.isRoomOwner&&!s.allowPets)&&(C("inventory/hide"),w().processRoomObjectPlacement(a.Cg.INVENTORY,-t.id,a.zg.UNIT,a.Dg.PET,t.figureData.figuredata)&&(Jt(t.id),$t(!0)),!0))},ts=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||!e.getUnlockedCount())return!1;const s=e.getLastItem();if(!s)return!1;if(s.category===Bt.FLOOR||s.category===Bt.WALL_PAPER||s.category===Bt.LANDSCAPE)return t||Ln(new a.Qb(s.id)),!1;{C("inventory/hide");let e=0,t=!1;e=s.isWallItem?a.zg.WALL:a.zg.FLOOR,t=s.category===Bt.POSTER?w().processRoomObjectPlacement(a.Cg.INVENTORY,s.id,e,s.type,s.stuffData.getLegacyString()):w().processRoomObjectPlacement(a.Cg.INVENTORY,s.id,e,s.type,s.extra.toString(),s.stuffData),t&&(Jt(s.ref),$t(!0))}return!0},ss=function(e){const t=e.botData;if(!t)return!1;const s=V().getSession(1);return!(!s||!s.isRoomOwner)&&(C("inventory/hide"),w().processRoomObjectPlacement(a.Cg.INVENTORY,-t.id,a.zg.UNIT,a.Dg.RENTABLE_BOT,t.figure)&&(Jt(t.id),$t(!0)),!0)};class ns{}ns.FURNI=1,ns.RENTABLE=2,ns.PET=3,ns.BADGE=4,ns.BOT=5,ns.GAMES=6;const rs=function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n={petData:e};return s?t.unshift(n):t.push(n),n},cs=(e,t)=>{let s=0;for(;s<t.length;){const n=t[s];if(n&&n.petData.id===e)return Xt()===n.petData.id&&(Zt(),C("inventory/open")),t.splice(s,1),n;s++}return null},is=(e,t,s)=>{const n=e.map((e=>e.petData.id));const r=[],c=[];for(const i of t.keys())-1===n.indexOf(i)&&r.push(i);for(const i of n)!t.get(i)&&c.push(i);n.length;for(const i of c)cs(i,e);for(const i of r){const n=t.get(i);n&&rs(n,e,s(ns.PET,n.id))}return e},as=(e,t,s,n)=>{if(1===t)return e;n[s]=e;for(const c of n)if(!c)return null;const r=new Map;for(const c of n){for(const[e,t]of c)r.set(e,t);c.clear()}return n=null,r};class os{}os.TRADING_STATE_READY=0,os.TRADING_STATE_RUNNING=1,os.TRADING_STATE_COUNTDOWN=2,os.TRADING_STATE_CONFIRMING=3,os.TRADING_STATE_CONFIRMED=4,os.TRADING_STATE_COMPLETED=5,os.TRADING_STATE_CANCELLED=6;class ls{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new a.g,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]&&arguments[6];this.userId=e,this.userName=t,this.userItems=s,this.itemCount=n,this.creditsCount=r,this.accepts=c,this.canTrade=i}}class us{}us.ALERT_SCAM=0,us.HOTEL_TRADING_DISABLED=1,us.YOU_NOT_ALLOWED=2,us.THEY_NOT_ALLOWED=4,us.ROOM_DISABLED=6,us.YOU_OPEN=7,us.THEY_OPEN=8,us.ERROR_WHILE_COMMIT=9,us.THEY_CANCELLED=10;const ds=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";switch(e){case us.ALERT_SCAM:return void jr.simpleAlert($e("inventory.trading.warning.other_not_offering"),null,null,null,$e("inventory.trading.notification.title"));case us.HOTEL_TRADING_DISABLED:case us.YOU_NOT_ALLOWED:case us.THEY_NOT_ALLOWED:case us.ROOM_DISABLED:case us.YOU_OPEN:case us.THEY_OPEN:return void jr.simpleAlert($e(`inventory.trading.openfail.${e}`,["otherusername"],[t]),null,null,null,$e("inventory.trading.openfail.title"));case us.ERROR_WHILE_COMMIT:return void jr.simpleAlert(`${$e("inventory.trading.notification.caption")}, ${$e("inventory.trading.notification.commiterror.info")}`,null,null,null,$e("inventory.trading.notification.title"));case us.THEY_CANCELLED:return void jr.simpleAlert($e("inventory.trading.info.closed"),null,null,null,$e("inventory.trading.notification.title"))}},hs=e=>{var t;return(null===(t=K().getWallItemData(e))||void 0===t?void 0:t.isExternalImage)||!1},js=e=>{const t=new a.g;if(e.length)for(const s of e){const e=s.spriteId,n=s.category;let r=s.furniType+e;s.isGroupable&&!hs(e)||(r="itemid"+s.itemId),s.category===Bt.POSTER?r=s.itemId+"poster"+s.stuffData.getLegacyString():s.category===Bt.GUILD_FURNI&&(r="");let c=s.isGroupable&&!hs(s.spriteId)?t.getValue(r):null;c||(c=Vt(e,n,s.stuffData),t.add(r,c)),c.push(new Gt(s))}return t};class bs{static getProductImageUrl(e,t,s){let n=null;switch(e){case a.R.S:n=w().getFurnitureFloorIconUrl(t);break;case a.R.I:const e=this.getProductCategory(a.R.I,t);if(1===e)n=w().getFurnitureWallIconUrl(t,s);else switch(e){case Bt.WALL_PAPER:case Bt.LANDSCAPE:case Bt.FLOOR:}case a.R.E:}return n}static getProductCategory(e,t){if(e===a.R.S)return 1;if(e===a.R.I){if(3001===t)return Bt.WALL_PAPER;if(3002===t)return Bt.FLOOR;if(4057===t)return Bt.LANDSCAPE}return 1}}class gs{static getRandomNumber(e){return Math.floor(Math.random()*e)}static getRandomElement(e){return e[this.getRandomNumber(e.length)]}static getRandomElements(e,t){const s=new Array(t);let n=e.length;const r=new Array(n);for(;t--;){var c=this.getRandomNumber(n);s[t]=e[c in r?r[c]:c],r[c]=--n in r?r[n]:n}return s}}var Os=s(77);const ms=new Map;ms.set("r","red"),ms.set("b","blue"),ms.set("g","green"),ms.set("y","yellow"),ms.set("w","white"),ms.set("o","orange"),ms.set("c","cyan"),ms.set("br","brown"),ms.set("pr","purple"),ms.set("pk","pink"),ms.set("red","red"),ms.set("blue","blue"),ms.set("green","green"),ms.set("yellow","yellow"),ms.set("white","white"),ms.set("orange","orange"),ms.set("cyan","cyan"),ms.set("brown","brown"),ms.set("purple","purple"),ms.set("pink","pink");class ps{}ps.CAMERA_SHUTTER="camera_shutter",ps.CREDITS="credits",ps.DUCKETS="duckets",ps.MESSENGER_NEW_THREAD="messenger_new_thread",ps.MESSENGER_MESSAGE_RECEIVED="messenger_message_received",ps.MODTOOLS_NEW_TICKET="modtools_new_ticket";class _s{constructor(e){this._type=void 0,this._type=e}get type(){return this._type}}class Es extends _s{constructor(e){super(Es.AVATAR_EXPRESSION),this._animation=void 0,this._animation=e}get animation(){return this._animation}}Es.AVATAR_EXPRESSION="RWAEM_MESSAGE_AVATAR_EXPRESSION";class fs extends _s{constructor(e){super(fs.CHANGE_MOTTO),this._motto=void 0,this._motto=e}get motto(){return this._motto}}fs.CHANGE_MOTTO="RWCMM_CHANGE_MOTTO";class xs extends _s{constructor(e){super(xs.CHANGE_POSTURE),this._posture=void 0,this._posture=e}get posture(){return this._posture}}xs.CHANGE_POSTURE="RWCPM_MESSAGE_CHANGE_POSTURE",xs.POSTURE_STAND=0,xs.POSTURE_SIT=1;class Is extends _s{constructor(e,t,s,n,r){super(e),this._chatType=void 0,this._text=void 0,this._recipientName=void 0,this._styleId=void 0,this._text=t,this._chatType=s,this._recipientName=n,this._styleId=r}get text(){return this._text}get chatType(){return this._chatType}get recipientName(){return this._recipientName}get styleId(){return this._styleId}}Is.MESSAGE_CHAT="RWCM_MESSAGE_CHAT",Is.CHAT_DEFAULT=0,Is.CHAT_WHISPER=1,Is.CHAT_SHOUT=2;class Ts extends _s{constructor(e,t,s,n){super(e),this._objectId=void 0,this._userName=void 0,this._roomId=void 0,this._objectId=t,this._userName=s,this._roomId=n}get objectId(){return this._objectId}get userName(){return this._userName}get roomId(){return this._roomId}}Ts.MESSAGE_SELECT_AVATAR="RWCSAM_MESSAGE_SELECT_AVATAR";class Cs extends _s{constructor(e){super(Cs.TYPING_STATUS),this._isTyping=void 0,this._isTyping=e}get isTyping(){return this._isTyping}}Cs.TYPING_STATUS="RWCTM_TYPING_STATUS";class Ss extends _s{constructor(e,t){super(e),this._objectId=void 0,this._objectId=t}get objectId(){return this._objectId}}Ss.REDEEM="RWCFRM_REDEEM";class Ns extends _s{constructor(e){super(Ns.DANCE),this._style=0,this._style=e}get style(){return this._style}}Ns.DANCE="RWDM_MESSAGE_DANCE",Ns.NORMAL_STYLE=0,Ns.CLUB_STYLE=[2,3,4];class vs extends _s{constructor(){super(vs.CHANGE_STATE)}}vs.CHANGE_STATE="RWCDSM_CHANGE_STATE";class Rs extends _s{constructor(e,t,s){super(Rs.PREVIEW_DIMMER_PRESET),this._color=void 0,this._brightness=void 0,this._bgOnly=void 0,this._color=e,this._brightness=t,this._bgOnly=s}get color(){return this._color}get brightness(){return this._brightness}get bgOnly(){return this._bgOnly}}Rs.PREVIEW_DIMMER_PRESET="RWDPM_PREVIEW_DIMMER_PRESET";class As extends _s{constructor(e,t,s,n,r){super(As.SAVE_PRESET),this._presetNumber=void 0,this._effectTypeId=void 0,this._color=void 0,this._brightness=void 0,this._apply=void 0,this._presetNumber=e,this._effectTypeId=t,this._color=s,this._brightness=n,this._apply=r}get presetNumber(){return this._presetNumber}get effectTypeId(){return this._effectTypeId}get color(){return this._color}get brightness(){return this._brightness}get apply(){return this._apply}}As.SAVE_PRESET="RWSDPM_SAVE_PRESET";class ys extends _s{constructor(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;super(e),this._furniId=void 0,this._furniCategory=void 0,this._offerId=void 0,this._objectData=void 0,this._furniId=t,this._furniCategory=s,this._offerId=n,this._objectData=r}get furniId(){return this._furniId}get furniCategory(){return this._furniCategory}get objectData(){return this._objectData}get offerId(){return this._offerId}}ys.ROTATE="RWFAM_ROTATE",ys.MOVE="RWFAM_MOVE",ys.PICKUP="RWFAM_PICKUP",ys.EJECT="RWFAM_EJECT",ys.USE="RWFAM_USE",ys.OPEN_WELCOME_GIFT="RWFAM_OPEN_WELCOME_GIFT",ys.SAVE_STUFF_DATA="RWFAM_SAVE_STUFF_DATA";class ws extends _s{constructor(e,t,s,n){super(e),this._objectId=void 0,this._category=void 0,this._roomId=void 0,this._objectId=t,this._category=s,this._roomId=n}get objectId(){return this._objectId}get category(){return this._category}get roomId(){return this._roomId}}ws.REQUEST_CREDITFURNI="RWFWM_MESSAGE_REQUEST_CREDITFURNI",ws.REQUEST_STICKIE="RWFWM_MESSAGE_REQUEST_STICKIE",ws.REQUEST_PRESENT="RWFWM_MESSAGE_REQUEST_PRESENT",ws.REQUEST_TROPHY="RWFWM_MESSAGE_REQUEST_TROPHY",ws.REQUEST_TEASER="RWFWM_MESSAGE_REQUEST_TEASER",ws.REQUEST_ECOTRONBOX="RWFWM_MESSAGE_REQUEST_ECOTRONBOX",ws.REQUEST_DIMMER="RWFWM_MESSAGE_REQUEST_DIMMER",ws.REQUEST_PLACEHOLDER="RWFWM_MESSAGE_REQUEST_PLACEHOLDER",ws.REQUEST_CLOTHING_CHANGE="RWFWM_MESSAGE_REQUEST_CLOTHING_CHANGE",ws.REQUEST_PLAYLIST_EDITOR="RWFWM_MESSAGE_REQUEST_PLAYLIST_EDITOR",ws.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING="RWFWM_WIDGET_MESSAGE_REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING",ws.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED="RWFWM_WIDGET_MESSAGE_REQUEST_ACHIEVEMENT_RESOLUTION_FAILED",ws.REQUEST_BADGE_DISPLAY_ENGRAVING="RWFWM_WIDGET_MESSAGE_REQUEST_BADGE_DISPLAY_ENGRAVING";class ks extends _s{constructor(e,t){super(e),this._id=-1,this._questionId=0,this._answers=null,this._id=t}get id(){return this._id}get questionId(){return this._questionId}set questionId(e){this._questionId=e}get answers(){return this._answers}set answers(e){this._answers=e}}ks.START="RWPM_START",ks.REJECT="RWPM_REJECT",ks.ANSWER="RWPM_ANSWER";class Ds extends _s{constructor(e,t){super(e),this._objectId=void 0,this._objectId=t}get objectId(){return this._objectId}}Ds.OPEN_PRESENT="RWPOM_OPEN_PRESENT";class Ps extends _s{}Ps.USER_CHOOSER="RWRWM_USER_CHOOSER",Ps.FURNI_CHOOSER="RWRWM_FURNI_CHOOSER",Ps.ME_MENU="RWRWM_ME_MENU",Ps.EFFECTS="RWRWM_EFFECTS",Ps.FLOOR_EDITOR="RWRWM_FLOOR_EDITOR";class Us extends _s{constructor(e,t,s){super(e),this._id=void 0,this._category=void 0,this._id=t,this._category=s}get id(){return this._id}get category(){return this._category}}Us.GET_OBJECT_INFO="RWROM_GET_OBJECT_INFO",Us.GET_OBJECT_NAME="RWROM_GET_OBJECT_NAME",Us.SELECT_OBJECT="RWROM_SELECT_OBJECT",Us.GET_OWN_CHARACTER_INFO="RWROM_GET_OWN_CHARACTER_INFO",Us.GET_AVATAR_LIST="RWROM_GET_AVATAR_LIST";class Ls extends _s{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;super(e),this._objectId=void 0,this._petId=void 0,this._objectId=t,this._petId=s}get objectId(){return this._objectId}get petId(){return this._petId}}Ls.PET_PRODUCT="RWUPM_PET_PRODUCT",Ls.MONSTERPLANT_SEED="RWUPM_MONSTERPLANT_SEED";class Ms extends _s{constructor(e,t){super(e),this._userId=void 0,this._userId=t}get userId(){return this._userId}}Ms.WHISPER_USER="RWUAM_WHISPER_USER",Ms.IGNORE_USER="RWUAM_IGNORE_USER",Ms.IGNORE_USER_BUBBLE="RWUAM_IGNORE_USER_BUBBLE",Ms.UNIGNORE_USER="RWUAM_UNIGNORE_USER",Ms.KICK_USER="RWUAM_KICK_USER",Ms.BAN_USER_HOUR="RWUAM_BAN_USER_HOUR",Ms.BAN_USER_DAY="RWUAM_BAN_USER_DAY",Ms.BAN_USER_PERM="RWUAM_BAN_USER_PERM",Ms.MUTE_USER_2MIN="RWUAM_MUTE_USER_2MIN",Ms.MUTE_USER_5MIN="RWUAM_MUTE_USER_5MIN",Ms.MUTE_USER_10MIN="RWUAM_MUTE_USER_10MIN",Ms.RESPECT_USER="RWUAM_RESPECT_USER",Ms.GIVE_RIGHTS="RWUAM_GIVE_RIGHTS",Ms.TAKE_RIGHTS="RWUAM_TAKE_RIGHTS",Ms.START_TRADING="RWUAM_START_TRADING",Ms.OPEN_HOME_PAGE="RWUAM_OPEN_HOME_PAGE",Ms.REPORT="RWUAM_REPORT",Ms.PICKUP_PET="RWUAM_PICKUP_PET",Ms.MOUNT_PET="RWUAM_MOUNT_PET",Ms.TOGGLE_PET_RIDING_PERMISSION="RWUAM_TOGGLE_PET_RIDING_PERMISSION",Ms.TOGGLE_PET_BREEDING_PERMISSION="RWUAM_TOGGLE_PET_BREEDING_PERMISSION",Ms.DISMOUNT_PET="RWUAM_DISMOUNT_PET",Ms.SADDLE_OFF="RWUAM_SADDLE_OFF",Ms.TRAIN_PET="RWUAM_TRAIN_PET",Ms.RESPECT_PET=" RWUAM_RESPECT_PET",Ms.TREAT_PET="RWUAM_TREAT_PET",Ms.REQUEST_PET_UPDATE="RWUAM_REQUEST_PET_UPDATE",Ms.START_NAME_CHANGE="RWUAM_START_NAME_CHANGE",Ms.PASS_CARRY_ITEM="RWUAM_PASS_CARRY_ITEM",Ms.DROP_CARRY_ITEM="RWUAM_DROP_CARRY_ITEM",Ms.GIVE_CARRY_ITEM_TO_PET="RWUAM_GIVE_CARRY_ITEM_TO_PET",Ms.GIVE_WATER_TO_PET="RWUAM_GIVE_WATER_TO_PET",Ms.GIVE_LIGHT_TO_PET="RWUAM_GIVE_LIGHT_TO_PET",Ms.REQUEST_BREED_PET="RWUAM_REQUEST_BREED_PET",Ms.HARVEST_PET="RWUAM_HARVEST_PET",Ms.REVIVE_PET="RWUAM_REVIVE_PET",Ms.COMPOST_PLANT="RWUAM_COMPOST_PLANT",Ms.GET_BOT_INFO="RWUAM_GET_BOT_INFO",Ms.REPORT_CFH_OTHER="RWUAM_REPORT_CFH_OTHER",Ms.AMBASSADOR_ALERT_USER="RWUAM_AMBASSADOR_ALERT_USER",Ms.AMBASSADOR_KICK_USER="RWUAM_AMBASSADOR_KICK_USER",Ms.AMBASSADOR_MUTE_USER_2MIN="RWUAM_AMBASSADOR_MUTE_2MIN",Ms.AMBASSADOR_MUTE_USER_10MIN="RWUAM_AMBASSADOR_MUTE_10MIN",Ms.AMBASSADOR_MUTE_USER_60MIN="RWUAM_AMBASSADOR_MUTE_60MIN",Ms.AMBASSADOR_MUTE_USER_18HOUR="RWUAM_AMBASSADOR_MUTE_18HOUR",Ms.RELATIONSHIP_NONE="RWUAM_RELATIONSHIP_NONE",Ms.RELATIONSHIP_HEART="RWUAM_RELATIONSHIP_HEART",Ms.RELATIONSHIP_SMILE="RWUAM_RELATIONSHIP_SMILE",Ms.RELATIONSHIP_BOBBA="RWUAM_RELATIONSHIP_BOBBA";class Fs{constructor(){this._container=null}get container(){return this._container}set container(e){this._container=e}}class Hs extends Fs{processEvent(e){}processWidgetMessage(e){if(!e)return null;switch(e.type){case Ps.FURNI_CHOOSER:this.processChooser();break;case Us.SELECT_OBJECT:this.selectRoomObject(e)}return null}processChooser(){const e=this.container.roomSession.roomId,t=[],s=w().getRoomObjects(e,a.zg.WALL),n=w().getRoomObjects(e,a.zg.FLOOR);s.forEach((e=>{let s=e.type;if(s.startsWith("poster"))s=$e(`poster_${s.replace("poster","")}_name`);else{const t=e.model.getValue(a.Fg.FURNITURE_TYPE_ID),n=K().getWallItemData(t);n&&n.name.length&&(s=n.name)}t.push(new de(e.id,a.zg.WALL,s))})),n.forEach((e=>{let s=e.type;const n=e.model.getValue(a.Fg.FURNITURE_TYPE_ID),r=K().getFloorItemData(n);r&&r.name.length&&(s=r.name),t.push(new de(e.id,a.zg.FLOOR,s))})),t.sort(((e,t)=>e.name<t.name?-1:1)),this.container.eventDispatcher.dispatchEvent(new be(be.FURNI_CHOOSER_CONTENT,t))}selectRoomObject(e){e.category!==a.zg.WALL&&e.category!==a.zg.FLOOR||w().selectRoomObject(this.container.roomSession.roomId,e.id,e.category)}get type(){return a.ph.FURNI_CHOOSER}get eventTypes(){return[]}get messageTypes(){return[Ps.FURNI_CHOOSER,Us.SELECT_OBJECT]}}class Bs extends Fs{processEvent(e){}processWidgetMessage(e){if(e.type===Ls.MONSTERPLANT_SEED){const t=e;this.container.roomSession.useMultistateItem(t.objectId)}return null}get type(){return a.ph.FURNITURE_CONTEXT_MENU}get eventTypes(){return[a.jg.OPEN_FURNI_CONTEXT_MENU,a.jg.CLOSE_FURNI_CONTEXT_MENU]}get messageTypes(){return[Ls.MONSTERPLANT_SEED]}}class Gs extends Fs{processEvent(e){}processWidgetMessage(e){switch(e.type){case ws.REQUEST_CREDITFURNI:{const t=e,s=w().getRoomObject(t.roomId,t.objectId,t.category);if(!s||!G(s))return;this.container.eventDispatcher.dispatchEvent(new fe(fe.CREDIT_FURNI_UPDATE,t.objectId,s.model.getValue(a.Fg.FURNITURE_CREDIT_VALUE),s.model.getValue(a.Fg.FURNITURE_TYPE_ID)+"_"+t.type+"_"+t.objectId));break}case Ss.REDEEM:{const t=e;this.container.roomSession.connection.send(new a.Hb(t.objectId));break}}return null}get type(){return a.ph.FURNI_CREDIT_WIDGET}get eventTypes(){return[]}get messageTypes(){return[ws.REQUEST_CREDITFURNI,Ss.REDEEM]}}class Ws extends Fs{constructor(){super(...arguments),this._lastFurniId=-1}processEvent(e){switch(e.type){case a.jg.OPEN_WIDGET:{const t=e,s=w().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return;return this._lastFurniId=t.objectId,void this.container.eventDispatcher.dispatchEvent(new xe(this._lastFurniId,s.getLocation().z))}case a.jg.CLOSE_WIDGET:if(e.objectId!==this._lastFurniId)return;return void this.container.eventDispatcher.dispatchEvent(new xe(-1))}}processWidgetMessage(e){return e.type,null}get type(){return a.ph.CUSTOM_STACK_HEIGHT}get eventTypes(){return[]}get messageTypes(){return[]}}class Vs extends Fs{processEvent(e){switch(e.type){case a.Mg.ROOM_DIMMER_PRESETS:{const t=e,s=new Ce(Ce.PRESETS);s.selectedPresetId=t.selectedPresetId;let n=0;for(;n<t.presetCount;){const e=t.getPreset(n);e&&s.setPresetValues(e.id,e.type,e.color,e.brightness),n++}return void this.container.eventDispatcher.dispatchEvent(s)}case a.fg.ROOM_COLOR:{const t=e;return void this.container.eventDispatcher.dispatchEvent(new Se(t.state,t.presetId,t.effectId,t.color,t.brightness))}case a.jg.REMOVE_DIMMER:return void this.container.eventDispatcher.dispatchEvent(new Ce(Ce.HIDE))}}processWidgetMessage(e){switch(e.type){case ws.REQUEST_DIMMER:this.canOpenWidget()&&this.container.roomSession.requestMoodlightSettings();break;case As.SAVE_PRESET:if(this.canOpenWidget()){const t=e;this.container.roomSession.updateMoodlightData(t.presetNumber,t.effectTypeId,t.color,t.brightness,t.apply)}break;case vs.CHANGE_STATE:this.canOpenWidget()&&this.container.roomSession.toggleMoodlightState();break;case Rs.PREVIEW_DIMMER_PRESET:{const t=this.container.roomSession.roomId,s=e;w().updateObjectRoomColor(t,s.color,s.brightness,s.bgOnly);break}}return null}canOpenWidget(){return this.container.roomSession.isRoomOwner||this.container.roomSession.controllerLevel>=a.Wf.GUEST||K().isModerator}get type(){return a.ph.ROOM_DIMMER}get eventTypes(){return[a.Mg.ROOM_DIMMER_PRESETS,a.fg.ROOM_COLOR,a.jg.REMOVE_DIMMER]}get messageTypes(){return[ws.REQUEST_DIMMER,As.SAVE_PRESET,vs.CHANGE_STATE,Rs.PREVIEW_DIMMER_PRESET]}}class qs extends Fs{constructor(){super(...arguments),this._lastFurniId=-1}processEvent(e){switch(e.type){case a.jg.OPEN_WIDGET:{const t=e,s=w().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return;this._lastFurniId=t.objectId;const n=s.model.getValue(a.Fg.FURNITURE_DATA),r=JSON.parse(n);return void this.container.eventDispatcher.dispatchEvent(new Ne(s.id,r))}case a.jg.CLOSE_WIDGET:if(e.objectId!==this._lastFurniId)return;return void this.container.eventDispatcher.dispatchEvent(new Ne(-1))}}processWidgetMessage(e){return e.type,null}get type(){return a.ph.EXTERNAL_IMAGE}get eventTypes(){return[]}get messageTypes(){return[]}}class zs extends Fs{processEvent(e){if(e&&e.type===a.jg.REQUEST_INTERNAL_LINK){const t=e,s=w();if(!t||!s)return;const n=s.getRoomObject(t.roomId,t.objectId,t.category);if(n){let e=n.model.getValue(a.Fg.FURNITURE_DATA)[zs.INTERNALLINK];e&&e.length||(e=n.model.getValue(a.Fg.FURNITURE_INTERNAL_LINK)),e&&e.length&&C(e)}}}processWidgetMessage(e){return null}get type(){return a.ph.INTERNAL_LINK}get eventTypes(){return[a.jg.REQUEST_INTERNAL_LINK]}get messageTypes(){return[]}}zs.INTERNALLINK="internalLink";class Ys extends Fs{processEvent(e){if(e.type!==a.jg.REQUEST_MANNEQUIN);else{const t=e,s=w().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return;const n=s.model,r=n.getValue(a.Fg.FURNITURE_MANNEQUIN_FIGURE),c=n.getValue(a.Fg.FURNITURE_MANNEQUIN_GENDER),i=n.getValue(a.Fg.FURNITURE_MANNEQUIN_NAME);this.container.eventDispatcher.dispatchEvent(new ke(ke.MANNEQUIN_UPDATE,s.id,r,c,i))}}processWidgetMessage(e){return e.type,null}get type(){return a.ph.MANNEQUIN}get eventTypes(){return[a.jg.REQUEST_MANNEQUIN]}get messageTypes(){return[]}}class Ks extends Fs{constructor(){super(...arguments),this._lastFurniId=-1,this._name=null}processEvent(e){if(e.type!==a.Ug.RSPE_PRESENT_OPENED);else{const t=e;let s=null;t.itemType===p.FLOOR?s=K().getFloorItemData(t.classId):t.itemType===p.WALL&&(s=K().getWallItemData(t.classId));let n=!1;if(t.placedInRoom){const e=w().getRoomObject(this.container.roomSession.roomId,t.placedItemId,a.zg.FLOOR);e&&(n=G(e))}let r=null,c=null;switch(t.itemType){case p.WALL:if(s)switch(s.className){case Ks.FLOOR:c=new De(De.CONTENTS_FLOOR,0,$e("inventory.furni.item.floor.name"),n);break;case Ks.LANDSCAPE:c=new De(De.CONTENTS_LANDSCAPE,0,$e("inventory.furni.item.landscape.name"),n);break;case Ks.WALLPAPER:c=new De(De.CONTENTS_WALLPAPER,0,$e("inventory.furni.item.wallpaper.name"),n);break;case Ks.POSTER:{const e=t.productCode;let i=null;0===e.indexOf("poster")&&(i=e.replace("poster","")),r=w().getFurnitureWallIconUrl(t.classId,i);const a=K().getProductData(e);a?this._name=a.name:s&&(this._name=s.name),c=new De(De.CONTENTS,0,this._name,n,r);break}default:r=w().getFurnitureWallIconUrl(t.classId),s&&(this._name=s.name),c=new De(De.CONTENTS,0,this._name,n,r)}break;case p.HABBO_CLUB:c=new De(De.CONTENTS_CLUB,0,$e("widget.furni.present.hc"),!1);break;default:{if(t.placedItemType===p.PET){const e=t.petFigureString;if(e&&e.length){const t=new a.gf(e),s=w().getRoomObjectPetImage(t.typeId,t.paletteId,t.color,new a.Li(90),64,this,!0,0,t.customParts);s&&(r=s.getImage().src)}}if(!r){const e=w().getFurnitureFloorImage(t.classId,new a.Li(90),64,this);e&&(r=e.getImage().src)}const e=K().getProductData(t.productCode);this._name=e?e.name:s.name,r&&(c=new De(De.CONTENTS,0,this._name,n,r));break}}c&&(c.classId=t.classId,c.itemType=t.itemType,c.placedItemId=t.placedItemId,c.placedInRoom=t.placedInRoom,c.placedItemType=t.placedItemType,this.container.eventDispatcher.dispatchEvent(c))}}processWidgetMessage(e){switch(e.type){case ws.REQUEST_PRESENT:{const t=e,s=w().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return null;this._lastFurniId=t.objectId;const n=s.model.getValue(a.Fg.FURNITURE_DATA)||"",r=s.model.getValue(a.Fg.FURNITURE_PURCHASER_NAME),c=s.model.getValue(a.Fg.FURNITURE_PURCHASER_FIGURE),i=s.model.getValue(a.Fg.FURNITURE_TYPE_ID),o=s.model.getValue(a.Fg.FURNITURE_EXTRAS),l=w().getFurnitureFloorImage(i,new a.Li(180),64,null,0,o);this.container.eventDispatcher.dispatchEvent(new De(De.PACKAGEINFO,t.objectId,n,G(s),l.getImage().src,r,c));break}case Ds.OPEN_PRESENT:{const t=e;if(t.objectId!==this._lastFurniId)return null;this.container.roomSession.openGift(t.objectId),w().changeObjectModelData(w().activeRoomId,t.objectId,a.zg.FLOOR,a.Fg.FURNITURE_DISABLE_PICKING_ANIMATION,1);break}}return null}imageReady(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=null;s?n=s.src:t&&(n=a.Jh.generateImageUrl(t)),this.container.eventDispatcher.dispatchEvent(new De(De.CONTENTS_IMAGE,0,this._name,!1,n))}imageFailed(e){}get type(){return a.ph.FURNI_PRESENT_WIDGET}get eventTypes(){return[a.Ug.RSPE_PRESENT_OPENED]}get messageTypes(){return[ws.REQUEST_PRESENT,Ds.OPEN_PRESENT]}}Ks.FLOOR="floor",Ks.WALLPAPER="wallpaper",Ks.LANDSCAPE="landscape",Ks.POSTER="poster";class Qs extends Fs{onRoomInfo(e){}processEvent(e){if(e&&e.type===a.jg.REQUEST_ROOM_LINK){const t=e,s=w();if(!t||!s)return;const n=s.getRoomObject(t.roomId,t.objectId,t.category);if(n){let e=n.model.getValue(a.Fg.FURNITURE_DATA)[Qs.INTERNALLINK];e&&e.length||(e=n.model.getValue(a.Fg.FURNITURE_INTERNAL_LINK)),e&&e.length&&C("navigator/goto/"+e)}}}processWidgetMessage(e){return null}get type(){return a.ph.ROOM_LINK}get eventTypes(){return[a.jg.REQUEST_ROOM_LINK]}get messageTypes(){return[]}}Qs.INTERNALLINK="internalLink";class $s extends Fs{constructor(){super(...arguments),this._lastFurniId=-1}processEvent(e){switch(e.type){case a.jg.OPEN_WIDGET:{const t=e,s=w().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return;this._lastFurniId=t.objectId;const n=K().hasSecurity(a.yh.EMPLOYEE)||G(s);return this.container.eventDispatcher.dispatchEvent(new He(s.id,n)),void Ln(new a.xc(this._lastFurniId))}case a.jg.CLOSE_WIDGET:if(e.objectId!==this._lastFurniId)return;return void this.container.eventDispatcher.dispatchEvent(new He(-1))}}processWidgetMessage(e){return e.type,null}get type(){return a.ph.YOUTUBE}get eventTypes(){return[]}get messageTypes(){return[]}}$s.CONTROL_COMMAND_PREVIOUS_VIDEO=0,$s.CONTROL_COMMAND_NEXT_VIDEO=1,$s.CONTROL_COMMAND_PAUSE_VIDEO=2,$s.CONTROL_COMMAND_CONTINUE_VIDEO=3;class Xs extends Fs{processEvent(e){const t=e;let s;switch(e.type){case a.Tg.OFFER:s=new me(me.OFFER,t.id),s.summary=t.summary,s.headline=t.headline;break;case a.Tg.ERROR:s=new me(me.ERROR,t.id),s.summary=t.summary,s.headline=t.headline;break;case a.Tg.CONTENT:s=new me(me.CONTENT,t.id),s.startMessage=t.startMessage,s.endMessage=t.endMessage,s.numQuestions=t.numQuestions,s.questionArray=t.questionArray,s.npsPoll=t.npsPoll}s&&this.container.eventDispatcher.dispatchEvent(s)}processWidgetMessage(e){const t=e;switch(e.type){case ks.START:this.container.roomSession.sendPollStartMessage(t.id);break;case ks.REJECT:this.container.roomSession.sendPollRejectMessage(t.id);break;case ks.ANSWER:this.container.roomSession.sendPollAnswerMessage(t.id,t.questionId,t.answers)}return null}get type(){return a.ph.ROOM_POLL}get eventTypes(){return[a.Tg.OFFER,a.Tg.ERROR,a.Tg.CONTENT]}get messageTypes(){return[ks.ANSWER,ks.REJECT,ks.START]}}class Js{constructor(){this.id=-1,this.name=null,this.gender=0,this.online=!1,this.followingAllowed=!1,this.figure=null,this.categoryId=0,this.motto=null,this.realName=null,this.lastAccess=null,this.persistedMessageUser=!1,this.vipMember=!1,this.pocketHabboUser=!1,this.relationshipStatus=-1,this.unread=0}populate(e){this.id=e.id,this.name=e.name,this.gender=e.gender,this.online=e.online,this.followingAllowed=e.followingAllowed,this.figure=e.figure,this.categoryId=e.categoryId,this.motto=e.motto,this.realName=e.realName,this.lastAccess=e.lastAccess,this.persistedMessageUser=e.persistedMessageUser,this.vipMember=e.vipMember,this.pocketHabboUser=e.pocketHabboUser,this.relationshipStatus=e.relationshipStatus}}Js.RELATIONSHIP_NONE=0,Js.RELATIONSHIP_HEART=1,Js.RELATIONSHIP_SMILE=2,Js.RELATIONSHIP_BOBBA=3;class Zs extends Fs{processEvent(e){switch(e.type){case a.Wg.USER_DATA_UPDATED:return void this.container.eventDispatcher.dispatchEvent(new Fe);case a.Lg.RSDE_DANCE:const t=e;let s=!1;const n=this.container.roomSession.userDataManager.getUserData(K().userId);return n&&n.roomIndex===t.roomIndex&&(s=0!==t.danceId),void this.container.eventDispatcher.dispatchEvent(new Ie(s));case a.kg.USE_PRODUCT_FROM_INVENTORY:return;case a.kg.USE_PRODUCT_FROM_ROOM:return void this.processUsableRoomObject(e.objectId);case a.Sg.PET_STATUS_UPDATE:return void this.processRoomSessionPetStatusUpdateEvent(e)}}processWidgetMessage(e){let t=0;switch(e instanceof Ms&&(t=e.userId),e.type){case Us.GET_OWN_CHARACTER_INFO:this.processOwnCharacterInfo();break;case Ms.START_NAME_CHANGE:case Ms.REQUEST_PET_UPDATE:break;case Ls.PET_PRODUCT:{const t=e;this.container.roomSession.usePetProduct(t.objectId,t.petId);break}case Ms.HARVEST_PET:this.container.roomSession.harvestPet(t);break;case Ms.COMPOST_PLANT:this.container.roomSession.compostPlant(t);break;case Ns.DANCE:{const t=e;this.container.roomSession.sendDanceMessage(t.style);break}case Es.AVATAR_EXPRESSION:{const t=e;this.container.roomSession.sendExpressionMessage(t.animation.ordinal);break}case xs.CHANGE_POSTURE:{const t=e;this.container.roomSession.sendPostureMessage(t.posture);break}case Ms.RELATIONSHIP_NONE:Ln(new a.Fh(t,Js.RELATIONSHIP_NONE));break;case Ms.RELATIONSHIP_HEART:Ln(new a.Fh(t,Js.RELATIONSHIP_HEART));break;case Ms.RELATIONSHIP_SMILE:Ln(new a.Fh(t,Js.RELATIONSHIP_SMILE));break;case Ms.RELATIONSHIP_BOBBA:Ln(new a.Fh(t,Js.RELATIONSHIP_BOBBA))}return null}processOwnCharacterInfo(){const e=K().userId,t=K().userName,s=K().canChangeName,n=this.container.roomSession.userDataManager.getUserData(e);n&&this.container.eventDispatcher.dispatchEvent(new je(e,t,n.type,n.roomIndex,s))}processUsableRoomObject(e){const t=this.container.roomSession.roomId,s=w().getRoomObject(t,e,a.zg.FLOOR);if(!s||!G(s))return;const n=s.model.getValue(a.Fg.FURNITURE_OWNER_ID),r=s.model.getValue(a.Fg.FURNITURE_TYPE_ID),c=K().getFloorItemData(r),i=c.customParams.split(" "),o=i.length?parseInt(i[0]):-1;-1!==o&&this.processUseableProduct(t,e,o,c.specialType,n)}processUseableProduct(e,t,s,n,r){let c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;const i=[],o=w().getRoomObjects(e,a.zg.UNIT);for(const l of o){const e=this.container.roomSession.userDataManager.getUserDataByIndex(l.id);let o=!1;if(e&&e.type===a.Dg.PET){if(e.ownerId===r){e.hasSaddle&&n===Bt.PET_SADDLE&&(o=!0);const r=e.figure.split(" ");if((r.length?parseInt(r[0]):-1)===s){if(n===Bt.MONSTERPLANT_REVIVAL&&!e.canRevive)continue;if(n===Bt.MONSTERPLANT_REBREED&&(e.petLevel<7||e.canRevive||e.canBreed))continue;if(n===Bt.MONSTERPLANT_FERTILIZE&&(e.petLevel>=7||e.canRevive))continue;i.push(new We(e.roomIndex,a.zg.UNIT,e.name,t,l.id,c,o))}}}else;}i.length&&this.container.eventDispatcher.dispatchEvent(new Be(Be.USE_PRODUCT_BUBBLES,i))}processRoomSessionPetStatusUpdateEvent(e){}get type(){return a.ph.AVATAR_INFO}get eventTypes(){return[a.Wg.USER_DATA_UPDATED,a.Lg.RSDE_DANCE,a.kg.USE_PRODUCT_FROM_INVENTORY,a.kg.USE_PRODUCT_FROM_ROOM,a.Sg.PET_STATUS_UPDATE]}get messageTypes(){return[Us.GET_OWN_CHARACTER_INFO,Ms.START_NAME_CHANGE,Ms.REQUEST_PET_UPDATE,Ls.PET_PRODUCT,Ms.REQUEST_BREED_PET,Ms.HARVEST_PET,Ms.REVIVE_PET,Ms.COMPOST_PLANT,Ns.DANCE,Es.AVATAR_EXPRESSION,xs.CHANGE_POSTURE,Ms.RELATIONSHIP_NONE,Ms.RELATIONSHIP_HEART,Ms.RELATIONSHIP_SMILE,Ms.RELATIONSHIP_BOBBA]}}class en extends Fs{constructor(){super(...arguments),this._avatarColorCache=new Map,this._avatarImageCache=new Map,this._petImageCache=new Map}processEvent(e){if(e.type!==a.Kg.CHAT_EVENT);else{const t=e,s=w().getRoomObject(t.session.roomId,t.objectId,a.zg.UNIT),n=(s?s.getLocation():new a.Li,ae(t.session.roomId,null===s||void 0===s?void 0:s.id,a.zg.UNIT)),r=s?this.container.roomSession.userDataManager.getUserDataByIndex(t.objectId):new a.kh(-1);let c="",i=0,o=null,l=t.chatType,u=t.style,d=0,h=-1,j=t.message;if(r){d=r.type;const e=r.figure;switch(d){case a.Dg.PET:o=this.getPetImage(e,2,!0,64,s.model.getValue(a.Fg.FIGURE_POSTURE)),h=new a.gf(e).typeId;break;case a.Dg.USER:o=this.getUserImage(e);break;case a.Dg.RENTABLE_BOT:case a.Dg.BOT:u=a.Ih.BOT}i=this._avatarColorCache.get(e),c=r.name}switch(l){case a.Kg.CHAT_TYPE_RESPECT:j=$e("widgets.chatbubble.respect",["username"],[c]),Hn().getValue("respect.options").enabled&&Ft(Hn().getValue("respect.options").sound);break;case a.Kg.CHAT_TYPE_PETREVIVE:case a.Kg.CHAT_TYPE_PET_REBREED_FERTILIZE:case a.Kg.CHAT_TYPE_PET_SPEED_FERTILIZE:{let e="widget.chatbubble.petrevived";l===a.Kg.CHAT_TYPE_PET_REBREED_FERTILIZE?e="widget.chatbubble.petrefertilized;":l===a.Kg.CHAT_TYPE_PET_SPEED_FERTILIZE&&(e="widget.chatbubble.petspeedfertilized");let n=null;if(w().getRoomObject(t.session.roomId,t.extraParam,a.zg.UNIT)){const e=this.container.roomSession.userDataManager.getUserDataByIndex(s.id);e&&(n=e.name)}j=$e(e,["petName","userName"],[c,n]);break}case a.Kg.CHAT_TYPE_PETRESPECT:j=$e("widget.chatbubble.petrespect",["petname"],[c]);break;case a.Kg.CHAT_TYPE_PETTREAT:j=$e("widget.chatbubble.pettreat",["petname"],[c]);break;case a.Kg.CHAT_TYPE_HAND_ITEM_RECEIVED:j=$e("widget.chatbubble.handitem",["username","handitem"],[c,$e("handitem"+t.extraParam)]);break;case a.Kg.CHAT_TYPE_MUTE_REMAINING:j=$e("widget.chatbubble.mutetime",["hours","minutes","seconds"],[(t.extraParam>0?Math.floor(t.extraParam/3600):0).toString(),(t.extraParam>0?Math.floor(t.extraParam%3600/60):0).toString(),(t.extraParam%60).toString()]);break}this.container.eventDispatcher.dispatchEvent(new _e(_e.CHAT_EVENT,r.roomIndex,j,c,a.zg.UNIT,d,h,n.x,n.y,o,i,t.session.roomId,l,u,[]))}}processWidgetMessage(e){return null}getUserImage(e){let t=this._avatarImageCache.get(e);return t||(t=this.setFigureImage(e)),t}setFigureImage(e){const t=f().createAvatarImage(e,a.q.LARGE,null,this);if(!t)return;const s=t.getCroppedImage(a.r.HEAD),n=t.getPartColor(a.p.CHEST);return this._avatarColorCache.set(e,n&&n.rgb||16777215),t.dispose(),this._avatarImageCache.set(e,s.src),s.src}getPetImage(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=this._petImageCache.get(e+r);if(c)return c;const i=new a.gf(e),o=i.typeId,l=w().getRoomObjectPetImage(o,i.paletteId,i.color,new a.Li(45*t),n,null,!1,0,i.customParts,r);return l&&(c=a.Jh.generateImageUrl(l.data),this._petImageCache.set(e+r,c)),c}resetFigure(e){this.setFigureImage(e)}dispose(){}get disposed(){return!1}get type(){return a.ph.CHAT_WIDGET}get eventTypes(){return[a.Kg.CHAT_EVENT]}get messageTypes(){return[]}}class tn extends a.Le{}tn.SHOW_FLOORPLAN_EDITOR="FPEE_SHOW_FLOORPLAN_EDITOR",tn.HIDE_FLOORPLAN_EDITOR="FPEE_HIDE_FLOORPLAN_EDITOR",tn.TOGGLE_FLOORPLAN_EDITOR="FPEE_TOGGLE_FLOORPLAN_EDITOR";class sn extends Fs{processEvent(e){if(e.type===a.Kg.FLOOD_EVENT){const t=e;this.container.eventDispatcher.dispatchEvent(new ge(parseInt(t.message)))}}processWidgetMessage(e){switch(e.type){case Cs.TYPING_STATUS:{const t=e;this.container.roomSession.sendChatTypingMessage(t.isTyping);break}case Is.MESSAGE_CHAT:{const t=e;if(""===t.text)return null;let s=t.text;const n=s.split(" ");if(n.length>0){const e=n[0];let r="";if(n.length>1&&(r=n[1]),":"===e.charAt(0)&&"x"===r){const e=w().selectedAvatarId;if(e>-1){const n=this.container.roomSession.userDataManager.getUserDataByIndex(e);n&&(r=n.name,s=t.text.replace(" x"," "+n.name))}}switch(e.toLowerCase()){case":shake":return a.ch.init(2500,5e3),a.ch.turnVisualizationOn(),null;case":rotate":return a.Ig.init(2500,5e3),a.Ig.turnVisualizationOn(),null;case":d":case";d":Q()===a.xd.VIP&&this.container.roomSession.sendExpressionMessage(a.n.LAUGH.ordinal);break;case"o/":case"_o/":return this.container.roomSession.sendExpressionMessage(a.n.WAVE.ordinal),null;case":kiss":if(Q()===a.xd.VIP)return this.container.roomSession.sendExpressionMessage(a.n.BLOW.ordinal),null;break;case":jump":if(Q()===a.xd.VIP)return this.container.roomSession.sendExpressionMessage(a.n.JUMP.ordinal),null;break;case":idle":return this.container.roomSession.sendExpressionMessage(a.n.IDLE.ordinal),null;case"_b":return this.container.roomSession.sendExpressionMessage(a.n.RESPECT.ordinal),null;case":sign":return this.container.roomSession.sendSignMessage(parseInt(r)),null;case":iddqd":case":flip":return w().events.dispatchEvent(new a.sh(this.container.roomSession.roomId,-1,!0)),null;case":zoom":return w().events.dispatchEvent(new a.sh(this.container.roomSession.roomId,parseFloat(r),!1)),null;case":screenshot":const e=w().createTextureFromRoom(this.container.roomSession.roomId,1),t=new Image;t.src=a.Jh.generateImageUrl(e);return window.open("").document.write(t.outerHTML),null;case":pickall":return(this.container.roomSession.isRoomOwner||K().isModerator)&&jr.confirm($e("room.confirm.pick_all"),(()=>{K().sendSpecialCommandMessage(":pickall")}),null,null,null,$e("generic.alert.title")),null;case":furni":return this.container.processWidgetMessage(new Ps(Ps.FURNI_CHOOSER)),null;case":chooser":return this.container.processWidgetMessage(new Ps(Ps.USER_CHOOSER)),null;case":floor":case":bcfloor":return this.container.roomSession.controllerLevel>=a.Wf.ROOM_OWNER&&ot(new tn(tn.SHOW_FLOORPLAN_EDITOR)),null;case":togglefps":return _().ticker.maxFPS>0?_().ticker.maxFPS=0:_().ticker.maxFPS=N("system.animation.fps"),null;case":client":case":nitro":case":billsonnn":return jr.showNitroAlert(),null;case":settings":return(this.container.roomSession.isRoomOwner||K().isModerator)&&Ln(new a.Zg(this.container.roomSession.roomId)),null}}const r=t.styleId;if(this.container&&this.container.roomSession)switch(t.chatType){case Is.CHAT_DEFAULT:this.container.roomSession.sendChatMessage(s,r);break;case Is.CHAT_SHOUT:this.container.roomSession.sendShoutMessage(s,r);break;case Is.CHAT_WHISPER:this.container.roomSession.sendWhisperMessage(t.recipientName,s,r)}break}case Ts.MESSAGE_SELECT_AVATAR:{const t=e;w().setSelectedAvatar(t.roomId,t.objectId);break}}return null}get type(){return a.ph.CHAT_INPUT_WIDGET}get eventTypes(){return[a.Kg.FLOOD_EVENT]}get messageTypes(){return[Cs.TYPING_STATUS,Is.MESSAGE_CHAT,Ts.MESSAGE_SELECT_AVATAR]}}class nn{constructor(e,t){this._roomSession=void 0,this._eventDispatcher=void 0,this._handlers=[],this._eventMap=new Map,this._messageMap=new Map,this._roomSession=e,this._eventDispatcher=t}registerHandler(e){const t=e.eventTypes;if(t.push(a.jg.OPEN_WIDGET,a.jg.CLOSE_WIDGET),t&&t.length)for(const n of t){if(!n)continue;let t=this._eventMap.get(n);t||(t=[],this._eventMap.set(n,t)),t.push(e)}const s=e.messageTypes;if(s&&s.length)for(const n of s){if(!n)continue;let t=this._messageMap.get(n);t||(t=[],this._messageMap.set(n,t)),t.push(e)}e.container=this,this._handlers.push(e)}processEvent(e){const t=this._eventMap.get(e.type);if(!t||!t.length)return null;for(const s of t){if(!s)continue;let t=!0;e.type!==a.jg.OPEN_WIDGET&&e.type!==a.jg.CLOSE_WIDGET||e instanceof a.jg&&(t=s.type===e.widget),t&&s.processEvent(e)}}processWidgetMessage(e){const t=this._messageMap.get(e.type);if(!t||!t.length)return null;for(const s of t){if(!s)continue;const t=s.processWidgetMessage(e);if(t)return t}return null}get roomSession(){return this._roomSession}get eventDispatcher(){return this._eventDispatcher}}class rn{}rn.WATER=0,rn.LIGHT=1;class cn extends a.Le{}cn.SHOW_CATALOG="CE_SHOW_CATALOG",cn.HIDE_CATALOG="CE_HIDE_CATALOG",cn.TOGGLE_CATALOG="CE_TOGGLE_CATALOG",cn.SOLD_OUT="CE_SOLD_OUT",cn.APPROVE_NAME_RESULT="CE_APPROVE_NAME_RESULT",cn.GIFT_RECEIVER_NOT_FOUND="CE_GIFT_RECEIVER_NOT_FOUND",cn.PURCHASE_APPROVED="CE_PURCHASE_APPROVED",cn.INIT_GIFT="CE_INIT_GIFT",cn.CATALOG_RESET="CE_RESET",cn.CATALOG_INVISIBLE_PAGE_VISITED="CE_CATALOG_INVISIBLE_PAGE_VISITED";class an extends cn{constructor(){super(cn.GIFT_RECEIVER_NOT_FOUND)}}class on extends cn{constructor(e,t,s){super(cn.INIT_GIFT),this._pageId=void 0,this._offerId=void 0,this._extraData=void 0,this._pageId=e,this._offerId=t,this._extraData=s}get pageId(){return this._pageId}get offerId(){return this._offerId}get extraData(){return this._extraData}}class ln extends a.Le{}ln.WIDGETS_INITIALIZED="CWE_CWE_WIDGETS_INITIALIZED",ln.SELECT_PRODUCT="CWE_SELECT_PRODUCT",ln.SET_EXTRA_PARM="CWE_CWE_SET_EXTRA_PARM",ln.PURCHASE="CWE_PURCHASE",ln.COLOUR_ARRAY="CWE_COLOUR_ARRAY",ln.MULTI_COLOUR_ARRAY="CWE_MULTI_COLOUR_ARRAY",ln.COLOUR_INDEX="CWE_COLOUR_INDEX",ln.TEXT_INPUT="CWE_TEXT_INPUT",ln.DROPMENU_SELECT="CWE_CWE_DROPMENU_SELECT",ln.APPROVE_RESULT="CWE_CWE_APPROVE_RESULT",ln.PURCHASE_OVERRIDE="CWE_PURCHASE_OVERRIDE",ln.SELLABLE_PET_PALETTES="CWE_SELLABLE_PET_PALETTES",ln.INIT_PURCHASE="CWE_INIT_PURCHASE",ln.UPDATE_ROOM_PREVIEW="CWE_UPDATE_ROOM_PREVIEW",ln.GUILD_SELECTED="CWE_GUILD_SELECTED",ln.TOTAL_PRICE_WIDGET_INITIALIZED="CWE_TOTAL_PRICE_WIDGET_INITIALIZED",ln.PRODUCT_OFFER_UPDATED="CWE_CWE_PRODUCT_OFFER_UPDATED",ln.SET_PREVIEWER_STUFFDATA="CWE_CWE_SET_PREVIEWER_STUFFDATA",ln.EXTRA_PARAM_REQUIRED_FOR_BUY="CWE_CWE_EXTRA_PARAM_REQUIRED_FOR_BUY",ln.TOGGLE="CWE_CWE_TOGGLE",ln.BUILDER_SUBSCRIPTION_UPDATED="CWE_CWE_BUILDER_SUBSCRIPTION_UPDATED",ln.ROOM_CHANGED="CWE_CWE_ROOM_CHANGED",ln.SHOW_WARNING_TEXT="CWE_CWE_SHOW_WARNING_TEXT";a.Le;class un extends a.Le{constructor(e,t){super(ln.APPROVE_RESULT),this._result=void 0,this._validationInfo=void 0,this._result=e,this._validationInfo=t}get result(){return this._result}get validationInfo(){return this._validationInfo}}class dn extends cn{constructor(e){super(dn.POST_MARKETPLACE),this._item=void 0,this._item=e}get item(){return this._item}}dn.POST_MARKETPLACE="CE_POST_MARKETPLACE";class hn extends a.Le{constructor(e){super(hn.PURCHASE_SUCCESS),this._purchase=void 0,this._purchase=e}get purchase(){return this._purchase}}hn.PURCHASE_SUCCESS="CPE_PURCHASE_SUCCESS";class jn extends a.Le{constructor(e){super(jn.PURCHASE_FAILED),this._code=void 0,this._code=e}get code(){return this._code}}jn.PURCHASE_FAILED="CPFE_PURCHASE_FAILED";class bn extends a.Le{constructor(e){super(bn.NOT_ALLOWED),this._code=void 0,this._code=e}get code(){return this._code}}bn.NOT_ALLOWED="CPNAE_NOT_ALLOWED";a.Le;class gn extends a.Le{constructor(){super(gn.SOLD_OUT)}}gn.SOLD_OUT="CPSOE_SOLD_OUT";a.Le;class On extends a.Le{constructor(e,t){super(On.UPDATE_STUFF_DATA),this._offer=void 0,this._stuffData=void 0,this._offer=e,this._stuffData=t}get offer(){return this._offer}get stuffData(){return this._stuffData}}On.UPDATE_STUFF_DATA="SRPSA_UPDATE_STUFF_DATA";class mn extends a.Le{}mn.SHOW_GUIDE_TOOL="GTE_SHOW_GUIDE_TOOL",mn.HIDE_GUIDE_TOOL="GTE_HIDE_GUIDE_TOOL",mn.TOGGLE_GUIDE_TOOL="GTE_TOGGLE_GUIDE_TOOL",mn.CREATE_HELP_REQUEST="GTE_CREATE_HELP_REQUEST",mn.CREATE_BULLY_REQUEST="GTE_CREATE_BULLY_REQUEST";var pn=s(11);class _n extends pn.a{}_n.INIT="HC_NAME_CHANGE_INIT";class En extends a.Le{constructor(e){super(En.REPORT_USER),this._reportedUserId=void 0,this._reportedUserId=e}get reportedUserId(){return this._reportedUserId}}En.REPORT_USER="HCE_HELP_CENTER_REPORT_USER";class fn extends a.Le{}fn.SHOW_MOD_TOOLS="MTE_SHOW_MOD_TOOLS",fn.HIDE_MOD_TOOLS="MTE_HIDE_MOD_TOOLS",fn.TOGGLE_MOD_TOOLS="MTE_TOGGLE_MOD_TOOLS",fn.OPEN_ROOM_INFO="MTE_OPEN_ROOM_INFO",fn.OPEN_ROOM_CHATLOG="MTE_OPEN_ROOM_CHATLOG",fn.OPEN_USER_INFO="MTE_OPEN_USER_INFO",fn.OPEN_USER_CHATLOG="MTE_OPEN_USER_CHATLOG";class xn extends fn{constructor(e){super(fn.OPEN_ROOM_CHATLOG),this._roomId=void 0,this._roomId=e}get roomId(){return this._roomId}}class In extends fn{constructor(e){super(fn.OPEN_ROOM_INFO),this._roomId=void 0,this._roomId=e}get roomId(){return this._roomId}}class Tn extends fn{constructor(e){super(fn.OPEN_USER_CHATLOG),this._userId=void 0,this._userId=e}get userId(){return this._userId}}class Cn extends fn{constructor(e){super(fn.OPEN_USER_INFO),this._userId=void 0,this._userId=e}get userId(){return this._userId}}class Sn extends a.Le{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;super(Sn.ALERT),this._messages=void 0,this._alertType=void 0,this._clickUrl=void 0,this._clickUrlText=void 0,this._title=void 0,this._imageUrl=void 0,this._messages=e,this._alertType=t,this._clickUrl=s,this._clickUrlText=n,this._title=r,this._imageUrl=c}get messages(){return this._messages}get alertType(){return this._alertType}get clickUrl(){return this._clickUrl}get clickUrlText(){return this._clickUrlText}get title(){return this._title}get imageUrl(){return this._imageUrl}}Sn.ALERT="NAE_ALERT";class Nn extends a.Le{constructor(e,t,s,n){super(Nn.NEW_BUBBLE),this._message=void 0,this._notificationType=void 0,this._imageUrl=void 0,this._linkUrl=void 0,this._message=e,this._notificationType=t,this._imageUrl=s,this._linkUrl=n}get message(){return this._message}get notificationType(){return this._notificationType}get imageUrl(){return this._imageUrl}get linkUrl(){return this._linkUrl}}Nn.NEW_BUBBLE="NBE_NEW_BUBBLE";class vn extends a.Le{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super(e),this._message=void 0,this._clickUrl=void 0,this._headerText=void 0,this._message=t,this._clickUrl=s,this._headerText=n}get message(){return this._message}get clickUrl(){return this._clickUrl}get headerText(){return this._headerText}}vn.HOTEL_ALERT="NCAE_HOTEL_ALERT";class Rn extends a.Le{}Rn.SHOW_NOTIFICATION_CENTER="NCE_SHOW_NOTIFICATION_CENTER",Rn.HIDE_NOTIFICATION_CENTER="NCE_HIDE_NOTIFICATION_CENTER",Rn.TOGGLE_NOTIFICATION_CENTER="NCE_TOGGLE_NOTIFICATION_CENTER",Rn.ADD_NOTIFICATION="NCE_ADD_NOTIFICATION";class An extends a.Le{constructor(e,t,s,n,r,c,i){super(An.CONFIRM),this._confirmType=void 0,this._message=void 0,this._onConfirm=void 0,this._onCancel=void 0,this._confirmText=void 0,this._cancelText=void 0,this._title=void 0,this._confirmType=e,this._message=t,this._onConfirm=s,this._onCancel=n,this._confirmText=r,this._cancelText=c,this._title=i}get confirmType(){return this._confirmType}get message(){return this._message}get onConfirm(){return this._onConfirm}get onCancel(){return this._onCancel}get confirmText(){return this._confirmText}get cancelText(){return this._cancelText}get title(){return this._title}}An.CONFIRM="NCE_CONFIRM";class yn extends a.Le{}yn.SHOW_THUMBNAIL="NE_SHOW_THUMBNAIL",yn.HIDE_THUMBNAIL="NE_HIDE_THUMBNAIL",yn.TOGGLE_THUMBNAIL="NE_TOGGLE_THUMBNAIL";class wn extends a.Le{}wn.SAVE_WIRED="WE_SAVE_WIRED";class kn extends wn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;super(kn.SELECT_OBJECT),this._objectId=void 0,this._category=void 0,this._objectId=e,this._category=t}get objectId(){return this._objectId}get category(){return this._category}}kn.SELECT_OBJECT="WE_SELECT_OBJECT";class Dn extends Fs{processEvent(e){switch(e.type){case a.Rg.PET_INFO:return void this.processPetInfoEvent(e);case a.Vg.RSUBE_BADGES:case a.Xg.USER_FIGURE:case a.Qg.FAVOURITE_GROUP_UPDATE:return void this.container.eventDispatcher.dispatchEvent(e)}}processWidgetMessage(e){let t=0,s=null,n=0,r=0;if(e instanceof Ms){t=e.userId;if(s=[Ms.REQUEST_PET_UPDATE,Ms.RESPECT_PET,Ms.PICKUP_PET,Ms.MOUNT_PET,Ms.TOGGLE_PET_RIDING_PERMISSION,Ms.TOGGLE_PET_BREEDING_PERMISSION,Ms.DISMOUNT_PET,Ms.SADDLE_OFF,Ms.GIVE_CARRY_ITEM_TO_PET,Ms.GIVE_WATER_TO_PET,Ms.GIVE_LIGHT_TO_PET,Ms.TREAT_PET].indexOf(e.type)>=0?this.container.roomSession.userDataManager.getPetData(t):this.container.roomSession.userDataManager.getUserData(t),!s)return null}else e instanceof ys&&(n=e.furniId,r=e.furniCategory);switch(e.type){case Us.GET_OBJECT_NAME:return this.processObjectNameMessage(e);case Us.GET_OBJECT_INFO:return this.processObjectInfoMessage(e);case Ms.RESPECT_USER:K().giveRespect(t);break;case Ms.RESPECT_PET:K().givePetRespect(t);break;case Ms.WHISPER_USER:this.container.eventDispatcher.dispatchEvent(new Ee(Ee.WHISPER,s.name));break;case Ms.IGNORE_USER:K().ignoreUser(s.name);break;case Ms.UNIGNORE_USER:K().unignoreUser(s.name);break;case Ms.KICK_USER:this.container.roomSession.sendKickMessage(e.userId);break;case Ms.BAN_USER_DAY:case Ms.BAN_USER_HOUR:case Ms.BAN_USER_PERM:this.container.roomSession.sendBanMessage(e.userId,e.type);break;case Ms.MUTE_USER_2MIN:this.container.roomSession.sendMuteMessage(e.userId,2);break;case Ms.MUTE_USER_5MIN:this.container.roomSession.sendMuteMessage(e.userId,5);break;case Ms.MUTE_USER_10MIN:this.container.roomSession.sendMuteMessage(e.userId,10);break;case Ms.GIVE_RIGHTS:this.container.roomSession.sendGiveRightsMessage(e.userId);break;case Ms.TAKE_RIGHTS:this.container.roomSession.sendTakeRightsMessage(e.userId);break;case Ms.START_TRADING:Ln(new a.Zh(s.roomIndex));break;case Ms.PICKUP_PET:this.container.roomSession.pickupPet(t);break;case Ms.MOUNT_PET:this.container.roomSession.mountPet(t);break;case Ms.TOGGLE_PET_RIDING_PERMISSION:this.container.roomSession.togglePetRiding(t);break;case Ms.TOGGLE_PET_BREEDING_PERMISSION:this.container.roomSession.togglePetBreeding(t);break;case Ms.DISMOUNT_PET:this.container.roomSession.dismountPet(t);break;case Ms.SADDLE_OFF:this.container.roomSession.removePetSaddle(t);break;case Ms.PASS_CARRY_ITEM:Ln(new a.ih(t));break;case Ms.GIVE_CARRY_ITEM_TO_PET:Ln(new a.jh(t));break;case Ms.GIVE_WATER_TO_PET:Ln(new a.mf(t,rn.WATER));break;case Ms.GIVE_LIGHT_TO_PET:Ln(new a.mf(t,rn.LIGHT));break;case Ms.TREAT_PET:Ln(new a.lf(t));break;case Ms.DROP_CARRY_ITEM:Ln(new a.hh);break;case Ms.REQUEST_PET_UPDATE:return void this.container.roomSession.userDataManager.requestPetInfo(t);case Ms.REPORT:return;case Ms.REPORT_CFH_OTHER:return void ot(new En(t));case Ms.AMBASSADOR_ALERT_USER:return void this.container.roomSession.sendAmbassadorAlertMessage(t);case Ms.AMBASSADOR_KICK_USER:return void this.container.roomSession.sendKickMessage(t);case Ms.AMBASSADOR_MUTE_USER_2MIN:return void this.container.roomSession.sendMuteMessage(t,2);case Ms.AMBASSADOR_MUTE_USER_10MIN:return void this.container.roomSession.sendMuteMessage(t,10);case Ms.AMBASSADOR_MUTE_USER_60MIN:return void this.container.roomSession.sendMuteMessage(t,60);case Ms.AMBASSADOR_MUTE_USER_18HOUR:return void this.container.roomSession.sendMuteMessage(t,1080);case ys.ROTATE:return void w().processRoomObjectOperation(n,r,a.Bg.OBJECT_ROTATE_POSITIVE);case ys.MOVE:return void w().processRoomObjectOperation(n,r,a.Bg.OBJECT_MOVE);case ys.PICKUP:return void w().processRoomObjectOperation(n,r,a.Bg.OBJECT_PICKUP);case ys.EJECT:return void w().processRoomObjectOperation(n,r,a.Bg.OBJECT_EJECT);case ys.USE:return void w().useRoomObject(n,r);case ys.SAVE_STUFF_DATA:{const t=e;if(!t.objectData)return;const s=new Map,c=t.objectData.split("\t");if(c)for(const e of c){const[t,n]=e.split("=",2);s.set(t,n)}return void w().modifyRoomObjectDataWithMap(n,r,a.Bg.OBJECT_SAVE_STUFF_DATA,s)}case fs.CHANGE_MOTTO:return void this.container.roomSession.sendMottoMessage(e.motto)}return null}processObjectNameMessage(e){let t=-1,s=null,n=0;switch(e.category){case a.zg.FLOOR:case a.zg.WALL:{const n=w().getRoomObject(this.container.roomSession.roomId,e.id,e.category);if(!n)break;if(0===n.type.indexOf("poster"))s=$e("${poster_"+parseInt(n.type.replace("poster",""))+"_name}");else{let r=null;const c=n.model.getValue(a.Fg.FURNITURE_TYPE_ID);if(e.category===a.zg.FLOOR?r=K().getFloorItemData(c):e.category===a.zg.WALL&&(r=K().getWallItemData(c)),!r)break;t=r.id,s=r.name}break}case a.zg.UNIT:{const r=this.container.roomSession.userDataManager.getUserDataByIndex(e.id);if(!r)break;t=r.webID,s=r.name,n=r.type;break}}return s&&this.container.eventDispatcher.dispatchEvent(new Oe(Oe.TYPE,e.id,e.category,t,s,n)),null}processObjectInfoMessage(e){const t=this.container.roomSession.roomId;switch(e.category){case a.zg.FLOOR:case a.zg.WALL:this.processFurniInfoMessage(e,t);break;case a.zg.UNIT:{const s=this.container.roomSession.userDataManager.getUserDataByIndex(e.id);if(!s)break;switch(s.type){case a.Dg.PET:this.container.roomSession.userDataManager.requestPetInfo(s.webID);break;case a.Dg.USER:this.processUserInfoMessage(e,t,s);break;case a.Dg.BOT:this.processBotInfoMessage(e,t,s);break;case a.Dg.RENTABLE_BOT:this.processRentableBotInfoMessage(e,t,s)}}}return null}processFurniInfoMessage(e,t){const s=new Re(Re.FURNI);s.id=e.id,s.category=e.category;const n=w().getRoomObject(t,e.id,e.category);if(!n)return;const r=n.model;r.getValue(a.qh.INFOSTAND_EXTRA_PARAM)&&(s.extraParam=r.getValue(a.qh.INFOSTAND_EXTRA_PARAM));const c=r.getValue(a.Fg.FURNITURE_DATA_FORMAT),i=a.Ye.getData(c);i.initializeFromRoomObjectModel(r),s.stuffData=i;const o=n.type;if(0===o.indexOf("poster")){const e=parseInt(o.replace("poster",""));s.name=$e("${poster_"+e+"_name}"),s.description=$e("${poster_"+e+"_desc}")}else{const t=r.getValue(a.Fg.FURNITURE_TYPE_ID);let n=null;e.category===a.zg.FLOOR?n=K().getFloorItemData(t):e.category===a.zg.WALL&&(n=K().getWallItemData(t)),n&&(s.name=n.name,s.description=n.description,s.purchaseOfferId=n.purchaseOfferId,s.purchaseCouldBeUsedForBuyout=n.purchaseCouldBeUsedForBuyout,s.rentOfferId=n.rentOfferId,s.rentCouldBeUsedForBuyout=n.rentCouldBeUsedForBuyout,s.availableForBuildersClub=n.availableForBuildersClub,s.tileSizeX=n.tileSizeX,s.tileSizeY=n.tileSizeY,ot(new kn(s.id,s.category)))}o.indexOf("post_it")>-1&&(s.isStickie=!0);const l=r.getValue(a.Fg.FURNITURE_EXPIRY_TIME),u=r.getValue(a.Fg.FURNITURE_EXPIRTY_TIMESTAMP);s.expiration=l<0?l:Math.max(0,l-(_().time-u)/1e3);let d=w().getRoomObjectImage(t,e.id,e.category,new a.Li(180),64,null);(!d.data||d.data.width>140||d.data.height>200)&&(d=w().getRoomObjectImage(t,e.id,e.category,new a.Li(180),1,null)),s.image=d.getImage(),s.isWallItem=e.category===a.zg.WALL,s.isRoomOwner=this.container.roomSession.isRoomOwner,s.roomControllerLevel=this.container.roomSession.controllerLevel,s.isAnyRoomController=K().isModerator,s.ownerId=r.getValue(a.Fg.FURNITURE_OWNER_ID),s.ownerName=r.getValue(a.Fg.FURNITURE_OWNER_NAME),s.usagePolicy=r.getValue(a.Fg.FURNITURE_USAGE_POLICY);const h=r.getValue(a.Fg.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID);0!==h&&(s.groupId=h),G(n)&&(s.isOwner=!0),this.container.eventDispatcher.dispatchEvent(s)}processUserInfoMessage(e,t,s){let n=we.OWN_USER;s.webID!==K().userId&&(n=we.PEER);const r=new we(n);r.isSpectatorMode=this.container.roomSession.isSpectator,r.name=s.name,r.motto=s.custom,r.achievementScore=s.activityPoints,r.webID=s.webID,r.roomIndex=s.roomIndex,r.userType=a.Dg.USER;const c=w().getRoomObject(t,s.roomIndex,e.category);if(c&&(r.carryItem=c.model.getValue(a.Fg.FIGURE_CARRY_OBJECT)||0),n===we.OWN_USER&&(r.allowNameChange=K().canChangeName),r.amIOwner=this.container.roomSession.isRoomOwner,r.isGuildRoom=this.container.roomSession.isGuildRoom,r.roomControllerLevel=this.container.roomSession.controllerLevel,r.amIAnyRoomController=K().isModerator,r.isAmbassador=K().isAmbassador,n===we.PEER){if(c){const e=c.model.getValue(a.Fg.FIGURE_FLAT_CONTROL);null!==e&&(r.targetRoomControllerLevel=e),r.canBeMuted=this.canBeMuted(r),r.canBeKicked=this.canBeKicked(r),r.canBeBanned=this.canBeBanned(r)}r.isIgnored=K().isUserIgnored(s.name),r.respectLeft=K().respectsLeft;const e=K().isSystemShutdown,t=this.container.roomSession.tradeMode;if(e)r.canTrade=!1;else switch(t){case a.fh.ROOM_CONTROLLER_REQUIRED:{const e=r.roomControllerLevel!==a.Wf.NONE&&r.roomControllerLevel!==a.Wf.GUILD_MEMBER,t=r.targetRoomControllerLevel!==a.Wf.NONE&&r.targetRoomControllerLevel!==a.Wf.GUILD_MEMBER;r.canTrade=e||t;break}case a.fh.NO_TRADING:r.canTrade=!0;break;default:r.canTrade=!1}r.canTradeReason=we.TRADE_REASON_OK,e&&(r.canTradeReason=we.TRADE_REASON_SHUTDOWN),t!==a.fh.FREE_TRADING&&(r.canTradeReason=we.TRADE_REASON_NO_TRADING)}r.groupId=s.groupId,r.groupBadgeId=K().getGroupBadge(r.groupId),r.groupName=s.groupName,r.badges=this.container.roomSession.userDataManager.getUserBadges(s.webID),r.figure=s.figure,this.container.eventDispatcher.dispatchEvent(r)}processBotInfoMessage(e,t,s){const n=new we(we.BOT);n.name=s.name,n.motto=s.custom,n.webID=s.webID,n.roomIndex=s.roomIndex,n.userType=s.type;const r=w().getRoomObject(t,s.roomIndex,e.category);r&&(n.carryItem=r.model.getValue(a.Fg.FIGURE_CARRY_OBJECT)||0),n.amIOwner=this.container.roomSession.isRoomOwner,n.isGuildRoom=this.container.roomSession.isGuildRoom,n.roomControllerLevel=this.container.roomSession.controllerLevel,n.amIAnyRoomController=K().isModerator,n.isAmbassador=K().isAmbassador,n.badges=[we.DEFAULT_BOT_BADGE_ID],n.figure=s.figure,this.container.eventDispatcher.dispatchEvent(n)}processRentableBotInfoMessage(e,t,s){const n=new ye(ye.RENTABLE_BOT);n.name=s.name,n.motto=s.custom,n.webID=s.webID,n.roomIndex=s.roomIndex,n.ownerId=s.ownerId,n.ownerName=s.ownerName,n.botSkills=s.botSkills;const r=w().getRoomObject(t,s.roomIndex,e.category);r&&(n.carryItem=r.model.getValue(a.Fg.FIGURE_CARRY_OBJECT)||0),n.amIOwner=this.container.roomSession.isRoomOwner,n.roomControllerLevel=this.container.roomSession.controllerLevel,n.amIAnyRoomController=K().isModerator,n.badges=[we.DEFAULT_BOT_BADGE_ID],n.figure=s.figure,this.container.eventDispatcher.dispatchEvent(n)}processPetInfoEvent(e){const t=e.petInfo;if(!t)return;const s=this.container.roomSession.userDataManager.getPetData(t.id);if(!s)return;const n=new a.gf(s.figure);let r=null;n.typeId===a.nf.MONSTERPLANT&&(r=t.level>=t.adultLevel?"std":"grw"+t.level);const c=t.ownerId===K().userId,i=new Ae(Ae.PET_INFO);i.name=s.name,i.id=t.id,i.ownerId=t.ownerId,i.ownerName=t.ownerName,i.rarityLevel=t.rarityLevel,i.petType=n.typeId,i.petBreed=n.paletteId,i.petFigure=s.figure,i.posture=r,i.isOwner=c,i.roomIndex=s.roomIndex,i.level=t.level,i.maximumLevel=t.maximumLevel,i.experience=t.experience,i.levelExperienceGoal=t.levelExperienceGoal,i.energy=t.energy,i.maximumEnergy=t.maximumEnergy,i.happyness=t.happyness,i.maximumHappyness=t.maximumHappyness,i.respect=t.respect,i.respectsPetLeft=K().respectsPetLeft,i.age=t.age,i.saddle=t.saddle,i.rider=t.rider,i.breedable=t.breedable,i.fullyGrown=t.fullyGrown,i.dead=t.dead,i.rarityLevel=t.rarityLevel,i.skillTresholds=t.skillTresholds,i.canRemovePet=!1,i.publiclyRideable=t.publiclyRideable,i.maximumTimeToLive=t.maximumTimeToLive,i.remainingTimeToLive=t.remainingTimeToLive,i.remainingGrowTime=t.remainingGrowTime,i.publiclyBreedable=t.publiclyBreedable,(c||this.container.roomSession.isRoomOwner||K().isModerator||this.container.roomSession.controllerLevel>=a.Wf.GUEST)&&(i.canRemovePet=!0),this.container.eventDispatcher.dispatchEvent(i)}checkGuildSetting(e){return e.isGuildRoom?e.roomControllerLevel>=a.Wf.GUILD_ADMIN:e.roomControllerLevel>=a.Wf.GUEST}canBeMuted(e){return this.isValidSetting(e,((e,t)=>t.allowMute===a.xg.MODERATION_LEVEL_USER_WITH_RIGHTS?this.checkGuildSetting(e):e.roomControllerLevel>=a.Wf.ROOM_OWNER))}canBeKicked(e){return this.isValidSetting(e,((e,t)=>{switch(t.allowKick){case a.xg.MODERATION_LEVEL_ALL:return!0;case a.xg.MODERATION_LEVEL_USER_WITH_RIGHTS:return this.checkGuildSetting(e);default:return e.roomControllerLevel>=a.Wf.ROOM_OWNER}}))}canBeBanned(e){return this.isValidSetting(e,((e,t)=>t.allowBan===a.xg.MODERATION_LEVEL_USER_WITH_RIGHTS?this.checkGuildSetting(e):e.roomControllerLevel>=a.Wf.ROOM_OWNER))}isValidSetting(e,t){if(!this.container.roomSession._Str_7411)return!1;const s=this.container.roomSession.moderationSettings;let n=!1;return s&&(n=t(e,s)),n&&e.targetRoomControllerLevel<a.Wf.ROOM_OWNER}get type(){return a.ph.INFOSTAND}get eventTypes(){return[a.Rg.PET_INFO,a.Vg.RSUBE_BADGES,a.Xg.USER_FIGURE,a.Qg.FAVOURITE_GROUP_UPDATE]}get messageTypes(){return[Us.GET_OBJECT_INFO,Us.GET_OBJECT_NAME,Ms.RESPECT_USER,Ms.WHISPER_USER,Ms.IGNORE_USER,Ms.UNIGNORE_USER,Ms.KICK_USER,Ms.BAN_USER_DAY,Ms.BAN_USER_HOUR,Ms.BAN_USER_PERM,Ms.MUTE_USER_2MIN,Ms.MUTE_USER_5MIN,Ms.MUTE_USER_10MIN,Ms.GIVE_RIGHTS,Ms.TAKE_RIGHTS,Ms.START_TRADING,Ms.OPEN_HOME_PAGE,Ms.PASS_CARRY_ITEM,Ms.GIVE_CARRY_ITEM_TO_PET,Ms.DROP_CARRY_ITEM,Ms.REPORT,Ms.PICKUP_PET,Ms.MOUNT_PET,Ms.TOGGLE_PET_RIDING_PERMISSION,Ms.TOGGLE_PET_BREEDING_PERMISSION,Ms.DISMOUNT_PET,Ms.SADDLE_OFF,Ms.TRAIN_PET,Ms.RESPECT_PET,Ms.REQUEST_PET_UPDATE,Ms.GIVE_LIGHT_TO_PET,Ms.GIVE_WATER_TO_PET,Ms.TREAT_PET,Ms.REPORT_CFH_OTHER,Ms.AMBASSADOR_ALERT_USER,Ms.AMBASSADOR_KICK_USER,Ms.AMBASSADOR_MUTE_USER_2MIN,Ms.AMBASSADOR_MUTE_USER_10MIN,Ms.AMBASSADOR_MUTE_USER_60MIN,Ms.AMBASSADOR_MUTE_USER_18HOUR,fs.CHANGE_MOTTO,ys.MOVE,ys.ROTATE,ys.EJECT,ys.PICKUP,ys.USE,ys.SAVE_STUFF_DATA]}}class Pn extends Fs{processEvent(e){}processWidgetMessage(e){if(!e)return null;switch(e.type){case Ps.USER_CHOOSER:this.processChooser();break;case Us.SELECT_OBJECT:this.selectRoomObject(e)}return null}processChooser(){const e=this.container.roomSession.roomId,t=[];w().getRoomObjects(e,a.zg.UNIT).forEach((e=>{const s=this.container.roomSession.userDataManager.getUserDataByIndex(e.id);s&&t.push(new de(s.roomIndex,a.zg.UNIT,s.name))})),t.sort(((e,t)=>e.name<t.name?-1:1)),this.container.eventDispatcher.dispatchEvent(new be(be.USER_CHOOSER_CONTENT,t))}selectRoomObject(e){e.category===a.zg.UNIT&&w().selectRoomObject(this.container.roomSession.roomId,e.id,e.category)}get type(){return a.ph.USER_CHOOSER}get eventTypes(){return[]}get messageTypes(){return[Ps.USER_CHOOSER,Us.SELECT_OBJECT]}}class Un extends Fs{processEvent(e){const t=e;let s;switch(e.type){case a.Yg.ANSWERED:const e=this.container.roomSession.roomId,n=this.container.roomSession.userDataManager.getUserData(t.userId);if(!n)return;s=new Ge(Ge.QUESTION_ANSWERED,t.id),s.value=t.value,s.userId=t.userId,s.answerCounts=t.answerCounts,"0"===s.value?w().updateRoomObjectUserGesture(e,n.roomIndex,a.k.getGestureId(a.k.GESTURE_SAD)):w().updateRoomObjectUserGesture(e,n.roomIndex,a.k.getGestureId(a.k.GESTURE_SMILE));break;case a.Yg.FINISHED:s=new Ge(Ge.QUESTION_FINISHED,t.id),s.pollId=t.pollId,s.questionId=t.questionId,s.answerCounts=t.answerCounts;break;case a.Yg.QUESTION:s=new Ge(Ge.NEW_QUESTION,t.id),s.question=t.question,s.duration=t.duration,s.pollType=t.pollType,s.questionId=t.questionId,s.pollId=t.pollId}s&&this.container.eventDispatcher.dispatchEvent(s)}processWidgetMessage(e){return null}get type(){return a.ph.WORD_QUIZZ}get eventTypes(){return[a.Yg.ANSWERED,a.Yg.FINISHED,a.Yg.QUESTION]}get messageTypes(){return[]}}const Ln=e=>v().send(e),Mn=e=>{_().sendWorkerEvent(e)};function Fn(){return _().core}function Hn(){return Fn().configuration}const Bn=e=>{if(!e||!e.length)return null;const t=e.split("/");return{username:t[0],figure:t[1],userId:parseInt(t[2])}};class Gn{}Gn.GROUP_CHAT=0,Gn.PRIVATE_CHAT=1;class Wn{}Wn.HIDDEN=0,Wn.SHOW=1,Wn.UNREAD=2;class Vn{constructor(){this._id=void 0,this._name=void 0,this._requesterUserId=void 0,this._figureString=void 0}populate(e){return!!e&&(this._id=e.requestId,this._name=e.requesterName,this._figureString=e.figureString,this._requesterUserId=e.requesterUserId,!0)}get id(){return this._id}get name(){return this._name}get requesterUserId(){return this._requesterUserId}get figureString(){return this._figureString}}class qn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];this.userFriendLimit=e,this.normalFriendLimit=t,this.extendedFriendLimit=s,this.categories=n}}class zn{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;this._type=void 0,this._senderId=void 0,this._message=void 0,this._secondsSinceSent=void 0,this._extraData=void 0,this._date=void 0,this._type=r,this._senderId=e,this._message=t,this._secondsSinceSent=s,this._extraData=n,this._date=new Date}get type(){return this._type}get senderId(){return this._senderId}get message(){return this._message}get secondsSinceSent(){return this._secondsSinceSent}get extraData(){return this._extraData}get date(){return this._date}}zn.CHAT=0,zn.ROOM_INVITE=1,zn.STATUS_NOTIFICATION=2,zn.SECURITY_NOTIFICATION=3;class Yn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gn.PRIVATE_CHAT;this._userId=void 0,this._chats=void 0,this._type=void 0,this._userId=e,this._chats=[],this._type=t}addChat(e){this._chats.push(e)}get userId(){return this._userId}get chats(){return this._chats}get type(){return this._type}set type(e){this._type=e}}class Kn{constructor(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._threadId=void 0,this._participant=void 0,this._groups=void 0,this._lastUpdated=void 0,this._unreadCount=void 0,this._threadId=++Kn.THREAD_ID,this._participant=e,this._groups=[],this._lastUpdated=new Date,this._unreadCount=0,t&&(this.addMessage(null,$e("messenger.moderationinfo"),0,null,zn.SECURITY_NOTIFICATION),this._unreadCount=0)}addMessage(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const c=e<0&&n,i=c?Bn(n).userId:e,a=this.getLastGroup(i);if(!a)return;c&&(a.type=Gn.GROUP_CHAT);const o=new zn(e,t,s,n,r);return a.addChat(o),this._lastUpdated=new Date,this._unreadCount++,o}getLastGroup(e){let t=this._groups[this._groups.length-1];return t&&t.userId===e||(t=new Yn(e),this._groups.push(t)),t}setRead(){this._unreadCount=0}get threadId(){return this._threadId}get participant(){return this._participant}get groups(){return this._groups}get lastUpdated(){return this._lastUpdated}get unreadCount(){return this._unreadCount}get unread(){return this._unreadCount>0}}function Qn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;C(0===e?"friends-messenger/open":`friends-messenger/${e}`)}Kn.MESSAGE_RECEIVED="MT_MESSAGE_RECEIVED",Kn.THREAD_ID=0;function $n(e){Ln(new a.Nc(e,!0))}function Xn(e){C(`groups/manage/${e}`)}function Jn(e,t){C(t?`group-members/${e}/${t}`:`group-members/${e}`)}const Zn=e=>Ln(new a.Pc(e));class er{}er.ACTIVE="active",er.NONE="none",er.EXPIRED="expired";const tr=["ACH_VipHC1","ACH_VipHC2","ACH_VipHC3","ACH_VipHC4","ACH_VipHC5","HC1","HC2","HC3","HC4","HC5"];class sr{}sr.NONE=0,sr.START_DOORBELL=1,sr.START_PASSWORD=2,sr.STATE_PENDING_SERVER=3,sr.UPDATE_STATE=4,sr.STATE_WAITING=5,sr.STATE_NO_ANSWER=6,sr.STATE_WRONG_PASSWORD=7,sr.STATE_ACCEPTED=8;class nr{}nr.LIST=0,nr.THUMBNAILS=1,nr.FORCED_THUMBNAILS=2;const rr=[{clubLevel:a.xd.NO_CLUB,tileSize:104,name:"a"},{clubLevel:a.xd.NO_CLUB,tileSize:94,name:"b"},{clubLevel:a.xd.NO_CLUB,tileSize:36,name:"c"},{clubLevel:a.xd.NO_CLUB,tileSize:84,name:"d"},{clubLevel:a.xd.NO_CLUB,tileSize:80,name:"e"},{clubLevel:a.xd.NO_CLUB,tileSize:80,name:"f"},{clubLevel:a.xd.NO_CLUB,tileSize:416,name:"i"},{clubLevel:a.xd.NO_CLUB,tileSize:320,name:"j"},{clubLevel:a.xd.NO_CLUB,tileSize:448,name:"k"},{clubLevel:a.xd.NO_CLUB,tileSize:352,name:"l"},{clubLevel:a.xd.NO_CLUB,tileSize:384,name:"m"},{clubLevel:a.xd.NO_CLUB,tileSize:372,name:"n"},{clubLevel:a.xd.CLUB,tileSize:80,name:"g"},{clubLevel:a.xd.CLUB,tileSize:74,name:"h"},{clubLevel:a.xd.CLUB,tileSize:416,name:"o"},{clubLevel:a.xd.CLUB,tileSize:352,name:"p"},{clubLevel:a.xd.CLUB,tileSize:304,name:"q"},{clubLevel:a.xd.CLUB,tileSize:336,name:"r"},{clubLevel:a.xd.CLUB,tileSize:748,name:"u"},{clubLevel:a.xd.CLUB,tileSize:438,name:"v"},{clubLevel:a.xd.VIP,tileSize:540,name:"t"},{clubLevel:a.xd.VIP,tileSize:512,name:"w"},{clubLevel:a.xd.VIP,tileSize:396,name:"x"},{clubLevel:a.xd.VIP,tileSize:440,name:"y"},{clubLevel:a.xd.VIP,tileSize:456,name:"z"},{clubLevel:a.xd.VIP,tileSize:208,name:"0"},{clubLevel:a.xd.VIP,tileSize:1009,name:"1"},{clubLevel:a.xd.VIP,tileSize:1044,name:"2"},{clubLevel:a.xd.VIP,tileSize:183,name:"3"},{clubLevel:a.xd.VIP,tileSize:254,name:"4"},{clubLevel:a.xd.VIP,tileSize:1024,name:"5"},{clubLevel:a.xd.VIP,tileSize:801,name:"6"},{clubLevel:a.xd.VIP,tileSize:354,name:"7"},{clubLevel:a.xd.VIP,tileSize:888,name:"8"},{clubLevel:a.xd.VIP,tileSize:926,name:"9"}];const cr=(()=>{const e=[];for(let t=10;t<=100;t+=10)e.push(t);return e})(),ir=[{name:"anything",query:null},{name:"room.name",query:"roomname"},{name:"owner",query:"owner"},{name:"tag",query:"tag"},{name:"group",query:"group"}];function ar(e){Ln(new a.tg(e,!1,!0))}class or{}or.DEFAULT="default",or.MOTD="motd",or.MODERATION="moderation",or.EVENT="event",or.NITRO="nitro",or.SEARCH="search",or.ALERT="alert";class lr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:or.DEFAULT,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this._id=void 0,this._messages=void 0,this._alertType=void 0,this._clickUrl=void 0,this._clickUrlText=void 0,this._title=void 0,this._imageUrl=void 0,lr.ITEM_ID+=1,this._id=lr.ITEM_ID,this._messages=e,this._alertType=t,this._clickUrl=s,this._clickUrlText=n,this._title=r,this._imageUrl=c}get id(){return this._id}get messages(){return this._messages}set alertType(e){this._alertType=e}get alertType(){return this._alertType}get clickUrl(){return this._clickUrl}get clickUrlText(){return this._clickUrlText}get title(){return this._title}get imageUrl(){return this._imageUrl}}lr.ITEM_ID=-1;class ur{}ur.FRIENDOFFLINE="friendoffline",ur.FRIENDONLINE="friendonline",ur.THIRDPARTYFRIENDOFFLINE="thirdpartyfriendoffline",ur.THIRDPARTYFRIENDONLINE="thirdpartyfriendonline",ur.ACHIEVEMENT="achievement",ur.BADGE_RECEIVED="badge_received",ur.INFO="info",ur.RECYCLEROK="recyclerok",ur.RESPECT="respect",ur.CLUB="club",ur.SOUNDMACHINE="soundmachine",ur.PETLEVEL="petlevel",ur.CLUBGIFT="clubgift",ur.BUYFURNI="buyfurni",ur.VIP="vip",ur.ROOMMESSAGESPOSTED="roommessagesposted";class dr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ur.INFO,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._id=void 0,this._message=void 0,this._notificationType=void 0,this._iconUrl=void 0,this._linkUrl=void 0,dr.ITEM_ID+=1,this._id=dr.ITEM_ID,this._message=e,this._notificationType=t,this._iconUrl=s,this._linkUrl=n}get id(){return this._id}get message(){return this._message}get notificationType(){return this._notificationType}get iconUrl(){return this._iconUrl}get linkUrl(){return this._linkUrl}}dr.ITEM_ID=-1;class hr{constructor(e,t,s,n,r,c,i){this._id=void 0,this._confirmType=void 0,this._message=void 0,this._onConfirm=void 0,this._onCancel=void 0,this._confirmText=void 0,this._cancelText=void 0,this._title=void 0,hr.ITEM_ID+=1,this._id=hr.ITEM_ID,this._confirmType=e,this._message=t,this._onConfirm=s,this._onCancel=n,this._confirmText=r,this._cancelText=c,this._title=i}get id(){return this._id}get confirmType(){return this._confirmType}get message(){return this._message}get onConfirm(){return this._onConfirm}get onCancel(){return this._onCancel}get confirmText(){return this._confirmText}get cancelText(){return this._cancelText}get title(){return this._title}}hr.ITEM_ID=-1;class jr{static cleanText(e){return e.replace(/\\r/g,"\r")}static getTimeZeroPadded(e){const t="0"+e;return t.substr(t.length-2,t.length)}static getMainNotificationConfig(){return N("notification",{})}static getNotificationConfig(e){const t=this.getMainNotificationConfig();return t?t[e]:null}static getNotificationPart(e,t,s,n){if(e.has(s))return e.get(s);const r=["notification",t,s].join(".");return _().localization.hasValue(r)||n?$e(r,Array.from(e.keys()),Array.from(e.values())):null}static getNotificationImageUrl(e,t){let s=e.get("image");return s||(s=N("image.library.notifications.url","").replace("%image%",t.replace(/\./g,"_"))),$e(s)}static showNotification(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t||(t=new Map);const s=this.getNotificationConfig("notification."+e);if(s)for(const o in s)t.set(o,s[o]);const n=this.getNotificationPart(t,e,"title",!0),r=this.getNotificationPart(t,e,"message",!0).replace(/\\r/g,"\r"),c=this.getNotificationPart(t,e,"linkTitle",!1),i=this.getNotificationPart(t,e,"linkUrl",!1),a=this.getNotificationImageUrl(t,e);"BUBBLE"===t.get("display")?this.showSingleBubble($e(r),ur.INFO,a,i):this.simpleAlert(r,e,i,c,n,a),t.get("sound")&&Ft(t.get("sound"))}static showSingleBubble(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.BUBBLES_DISABLED||ot(new Nn(e,t,s,n))}static showClubGiftNotification(e){e<=0||this.showSingleBubble(e.toString(),ur.CLUBGIFT,null,"catalog/open/"+N("catalog.links")["hc.hc_gifts"])}static handleMOTD(e){e=e.map((e=>this.cleanText(e))),ot(new Sn(e,or.MOTD,null,null,$e("notifications.motd.title")))}static confirm(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;n&&n.length||(n=$e("generic.confirm")),r&&r.length||(r=$e("generic.cancel")),c&&c.length||(c=$e("notifications.broadcast.title")),ot(new An(i,this.cleanText(e),t,s,n,r,c))}static simpleAlert(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;r&&r.length||(r=$e("notifications.broadcast.title")),t&&t.length||(t=or.DEFAULT),ot(new Sn([this.cleanText(e)],t,s,n,r,c))}static showNitroAlert(){ot(new Sn(null,or.NITRO))}static showModeratorMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.simpleAlert(e,or.DEFAULT,t,$e("mod.alert.link"),$e("mod.alert.title"))}static handleModeratorCaution(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.showModeratorMessage(e,t)}static handleModeratorMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.showModeratorMessage(e,t,!1)}static handleUserBannedMessage(e){this.showModeratorMessage(e)}static handleHotelClosedMessage(e,t,s){this.simpleAlert($e("opening.hours."+(s?"disconnected":"closed"),["h","m"],[this.getTimeZeroPadded(e),this.getTimeZeroPadded(t)]),or.DEFAULT,null,null,$e("opening.hours.title"))}static handleHotelMaintenanceMessage(e,t){this.simpleAlert($e("maintenance.shutdown",["m","d"],[e.toString(),t.toString()]),or.DEFAULT,null,null,$e("opening.hours.title"))}static handleHotelClosingMessage(e){this.simpleAlert($e("opening.hours.shutdown",["m"],[e.toString()]),or.DEFAULT,null,null,$e("opening.hours.title"))}static handleLoginFailedHotelClosedMessage(e,t){this.simpleAlert($e("opening.hours.disconnected",["h","m"],[e.toString(),t.toString()]),or.DEFAULT,null,null,$e("opening.hours.title"))}static openUrl(e){e&&e.length&&(e.startsWith("http")?a.Cd.openWebPage(e):C(e))}static showModerationDisclaimer(){if(a.lg.isRunning()){if(this.MODERATION_DISCLAIMER_TIMEOUT)return;this.MODERATION_DISCLAIMER_TIMEOUT=setTimeout((()=>{this.showModerationDisclaimer()}),a.lg.totalRunningTime+this.MODERATION_DISCLAIMER_DELAY_MS)}else{if(this.MODERATION_DISCLAIMER_SHOWN)return;this.showSingleBubble($e("mod.chatdisclaimer"),ur.INFO),this.MODERATION_DISCLAIMER_SHOWN=!0}}}jr.MODERATION_DISCLAIMER_SHOWN=!1,jr.MODERATION_DISCLAIMER_DELAY_MS=5e3,jr.MODERATION_DISCLAIMER_TIMEOUT=null,jr.BUBBLES_DISABLED=!1;class br{constructor(){this._credits=0,this._activityPoints=new Map,this._clubDays=0,this._clubPeriods=0,this._isVIP=!1,this._pastClubDays=0,this._pastVipDays=0,this._isExpiring=!1,this._minutesUntilExpiration=0,this._minutesSinceLastModified=0,this._lastUpdated=0}static from(e){const t=new br;return t._credits=e._credits,t._activityPoints=e._activityPoints,t._clubDays=e._clubDays,t._clubPeriods=e._clubPeriods,t._isVIP=e._isVIP,t._pastClubDays=e._pastClubDays,t._pastVipDays=e._pastVipDays,t._isExpiring=e._isExpiring,t._minutesUntilExpiration=e._minutesUntilExpiration,t._minutesSinceLastModified=e._minutesSinceLastModified,t._lastUpdated=e._lastUpdated,t}get credits(){return this._credits}set credits(e){this._lastUpdated=_().time,this._credits=e}get activityPoints(){return this._activityPoints}set activityPoints(e){this._lastUpdated=_().time,this._activityPoints=e}get clubDays(){return this._clubDays}set clubDays(e){this._lastUpdated=_().time,this._clubDays=e}get clubPeriods(){return this._clubPeriods}set clubPeriods(e){this._lastUpdated=_().time,this._clubPeriods=e}get _Str_13571(){return this._clubDays>0||this._clubPeriods>0}get isVip(){return this._isVIP}set isVip(e){this._isVIP=e}get pastClubDays(){return this._pastClubDays}set pastClubDays(e){this._lastUpdated=_().time,this._pastClubDays=e}get pastVipDays(){return this._pastVipDays}set pastVipDays(e){this._lastUpdated=_().time,this._pastVipDays=e}get isExpiring(){return this._isExpiring}set isExpiring(e){this._isExpiring=e}get minutesUntilExpiration(){var e=(_().time-this._lastUpdated)/6e4,t=this._minutesUntilExpiration-e;return t>0?t:0}set minutesUntilExpiration(e){this._lastUpdated=_().time,this._minutesUntilExpiration=e}get minutesSinceLastModified(){return this._minutesSinceLastModified}set minutesSinceLastModified(e){this._lastUpdated=_().time,this._minutesSinceLastModified=e}get lastUpdated(){return this._lastUpdated}get clubLevel(){return 0===this.clubDays&&0===this.clubPeriods?a.xd.NO_CLUB:this.isVip?a.xd.VIP:a.xd.CLUB}}function gr(e){Ln(new a.zi(e))}const Or=e=>{const t=Math.floor(e/2);return e%2?(t+.5).toString():t.toString()};class mr{}mr.TOGGLE_FURNI_STATE=0,mr.RESET=1,mr.SET_FURNI_STATE=3,mr.MOVE_FURNI=4,mr.GIVE_SCORE=6,mr.CHAT=7,mr.TELEPORT=8,mr.JOIN_TEAM=9,mr.LEAVE_TEAM=10,mr.CHASE=11,mr.FLEE=12,mr.MOVE_AND_ROTATE_FURNI=13,mr.GIVE_SCORE_TO_PREDEFINED_TEAM=14,mr.TOGGLE_TO_RANDOM_STATE=15,mr.MOVE_FURNI_TO=16,mr.GIVE_REWARD=17,mr.CALL_ANOTHER_STACK=18,mr.KICK_FROM_ROOM=19,mr.MUTE_USER=20,mr.BOT_TELEPORT=21,mr.BOT_MOVE=22,mr.BOT_TALK=23,mr.BOT_GIVE_HAND_ITEM=24,mr.BOT_FOLLOW_AVATAR=25,mr.BOT_CHANGE_FIGURE=26,mr.BOT_TALK_DIRECT_TO_AVTR=27;class pr{}pr.STATES_MATCH=0,pr.FURNIS_HAVE_AVATARS=1,pr.ACTOR_IS_ON_FURNI=2,pr.TIME_ELAPSED_MORE=3,pr.TIME_ELAPSED_LESS=4,pr.USER_COUNT_IN=5,pr.ACTOR_IS_IN_TEAM=6,pr.HAS_STACKED_FURNIS=7,pr.STUFF_TYPE_MATCHES=8,pr.STUFFS_IN_FORMATION=9,pr.ACTOR_IS_GROUP_MEMBER=10,pr.ACTOR_IS_WEARING_BADGE=11,pr.ACTOR_IS_WEARING_EFFECT=12,pr.NOT_STATES_MATCH=13,pr.FURNI_NOT_HAVE_HABBO=14,pr.NOT_ACTOR_ON_FURNI=15,pr.NOT_USER_COUNT_IN=16,pr.NOT_ACTOR_IN_TEAM=17,pr.NOT_HAS_STACKED_FURNIS=18,pr.NOT_FURNI_IS_OF_TYPE=19,pr.NOT_STUFFS_IN_FORMATION=20,pr.NOT_ACTOR_IN_GROUP=21,pr.NOT_ACTOR_WEARS_BADGE=22,pr.NOT_ACTOR_WEARING_EFFECT=23,pr.DATE_RANGE_ACTIVE=24,pr.ACTOR_HAS_HANDITEM=25;const _r=e=>`${e.getFullYear()}/${("0"+(e.getMonth()+1)).slice(-2)}/${("0"+e.getDate()).slice(-2)} ${("0"+e.getHours()).slice(-2)}:${("0"+e.getMinutes()).slice(-2)}`;class Er{}Er.STUFF_SELECTION_OPTION_NONE=0,Er.STUFF_SELECTION_OPTION_BY_ID=1,Er.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE=2,Er.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT=3;class fr extends a.Me{constructor(e,t){super("\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec3 lineColor;\nuniform vec3 color;\nvoid main(void) {\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n    vec3 colorLine = lineColor * currentColor.a;\n    vec3 colorOverlay = color * currentColor.a;\n\n    if(currentColor.r == 0.0 && currentColor.g == 0.0 && currentColor.b == 0.0 && currentColor.a > 0.0) {\n        gl_FragColor = vec4(colorLine.r, colorLine.g, colorLine.b, currentColor.a);\n    } else if(currentColor.a > 0.0) {\n        gl_FragColor = vec4(colorOverlay.r, colorOverlay.g, colorOverlay.b, currentColor.a);\n    }\n}"),this._lineColor=void 0,this._color=void 0,this.uniforms.lineColor=new Float32Array(3),this.uniforms.color=new Float32Array(3),this.lineColor=e,this.color=t}get lineColor(){return this._lineColor}set lineColor(e){const t=this.uniforms.lineColor;"number"===typeof e?(a.eb.hex2rgb(e,t),this._lineColor=e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],this._lineColor=a.eb.rgb2hex(t))}get color(){return this._color}set color(e){const t=this.uniforms.color;"number"===typeof e?(a.eb.hex2rgb(e,t),this._color=e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],this._color=a.eb.rgb2hex(t))}}class xr{static show(e){xr.applySelectionShader(xr.getRoomObject(e))}static hide(e){xr.clearSelectionShader(xr.getRoomObject(e))}static clearSelectionShaderFromFurni(e){for(const t of e)xr.clearSelectionShader(xr.getRoomObject(t))}static applySelectionShaderToFurni(e){for(const t of e)xr.applySelectionShader(xr.getRoomObject(t))}static getRoomObject(e){const t=w();return t.getRoomObject(t.activeRoomId,e,a.zg.FLOOR)}static applySelectionShader(e){if(!e)return;const t=e.visualization;if(t)for(const s of t.sprites)1!==s.blendMode&&(s.filters=[xr._selectionShader])}static clearSelectionShader(e){if(!e)return;const t=e.visualization;if(t)for(const s of t.sprites)s.filters=[]}}xr._selectionShader=new fr([1,1,1],[.6,.6,.6]);const Ir="\t";class Tr{}Tr.AVATAR_SAYS_SOMETHING=0,Tr.AVATAR_WALKS_ON_FURNI=1,Tr.AVATAR_WALKS_OFF_FURNI=2,Tr.EXECUTE_ONCE=3,Tr.TOGGLE_FURNI=4,Tr.EXECUTE_PERIODICALLY=6,Tr.AVATAR_ENTERS_ROOM=7,Tr.GAME_STARTS=8,Tr.GAME_ENDS=9,Tr.SCORE_ACHIEVED=10,Tr.COLLISION=11,Tr.EXECUTE_PERIODICALLY_LONG=12,Tr.BOT_REACHED_STUFF=13,Tr.BOT_REACHED_AVATAR=14;var Cr=s(0);const Sr=e=>{const{ref:t=null,innerRef:s=null,display:n=null,fit:r=!1,grow:i=!1,shrink:a=!1,fullWidth:o=!1,fullHeight:l=!1,overflow:u=null,position:d=null,float:h=null,pointer:j=!1,visible:b=null,textColor:g=null,classNames:O=[],className:m="",style:p={},..._}=e,E=Object(c.useMemo)((()=>{const e=[];return n&&n.length&&e.push("d-"+n),(r||o)&&e.push("w-100"),(r||l)&&e.push("h-100"),i&&e.push("flex-grow-1"),a&&e.push("flex-shrink-0"),u&&e.push("overflow-"+u),d&&e.push("position-"+d),h&&e.push("float-"+h),j&&e.push("cursor-pointer"),null!==b&&e.push(b?"visible":"invisible"),g&&e.push("text-"+g),O.length&&e.push(...O),e}),[n,r,i,a,o,l,u,d,h,j,b,g,O]),f=Object(c.useMemo)((()=>{let e=E.join(" ");return m.length&&(e+=" "+m),e.trim()}),[E,m]),x=Object(c.useMemo)((()=>{let e={};return Object.keys(p).length&&(e={...e,...p}),e}),[p]);return Object(Cr.jsx)("div",{ref:s,className:f,style:x,..._})},Nr=Object(c.createContext)({isCssGrid:!1}),vr=e=>Object(Cr.jsx)(Nr.Provider,{value:e.value,children:e.children}),Rr=e=>{const{inline:t=!1,gap:s=2,maxContent:n=!1,columnCount:r=0,center:i=!1,alignSelf:a=null,alignItems:o=null,justifyContent:l=null,fullHeight:u=!0,classNames:d=[],style:h={},...j}=e,b=Object(c.useMemo)((()=>{const e=[];return t?e.push("inline-grid"):e.push("grid"),s?e.push("gap-"+s):0===s&&e.push("gap-0"),n&&e.push("flex-basis-max-content"),a&&e.push("align-self-"+a),o&&e.push("align-items-"+o),l&&e.push("justify-content-"+l),o||l||!i||e.push("align-items-center","justify-content-center"),d.length&&e.push(...d),e}),[t,s,n,a,o,l,i,d]),g=Object(c.useMemo)((()=>{let e={};return r&&(e["--bs-columns"]=r.toString()),Object.keys(h).length&&(e={...e,...h}),e}),[r,h]);return Object(Cr.jsx)(vr,{value:{isCssGrid:!0},children:Object(Cr.jsx)(Sr,{fullHeight:u,classNames:b,style:g,...j})})},Ar=e=>{const{columnMinWidth:t=40,columnMinHeight:s=40,columnCount:n=0,fullHeight:r=!1,maxContent:i=!0,overflow:a="auto",style:o={},...l}=e,u=Object(c.useMemo)((()=>{let e={};return e["--nitro-grid-column-min-height"]=s+"px",n>1&&(e.gridTemplateColumns=`repeat(auto-fill, minmax(${t}px, 1fr))`),Object.keys(o).length&&(e={...e,...o}),e}),[t,s,n,o]);return Object(Cr.jsx)(Rr,{columnCount:n,fullHeight:r,overflow:a,style:u,...l})},yr=e=>{const{display:t="flex",column:s,reverse:n=!1,gap:r=null,center:i=!1,alignSelf:a=null,alignItems:o=null,justifyContent:l=null,classNames:u=[],...d}=e,h=Object(c.useMemo)((()=>{const e=[];return s?n?e.push("flex-column-reverse"):e.push("flex-column"):n&&e.push("flex-row-reverse"),r&&e.push("gap-"+r),a&&e.push("align-self-"+a),o&&e.push("align-items-"+o),l&&e.push("justify-content-"+l),o||l||!i||e.push("align-items-center","justify-content-center"),u.length&&e.push(...u),e}),[s,n,r,i,a,o,l,u]);return Object(Cr.jsx)(Sr,{display:t,classNames:h,...d})},wr=e=>{const{variant:t="primary",size:s="sm",active:n=!1,disabled:r=!1,classNames:i=[],...a}=e,o=Object(c.useMemo)((()=>{const e=["btn"];return t&&e.push("btn-"+t),s&&e.push("btn-"+s),n&&e.push("active"),r&&e.push("disabled"),i.length&&e.push(...i),e}),[t,s,n,r,i]);return Object(Cr.jsx)(yr,{center:!0,classNames:o,...a})},kr=e=>{const{classNames:t=[],...s}=e,n=Object(c.useMemo)((()=>{const e=["btn-group"];return t.length&&e.push(...t),e}),[t]);return Object(Cr.jsx)(Sr,{classNames:n,...s})},Dr=Object(c.createContext)({closers:null,setClosers:null,closeAll:null}),Pr=e=>Object(Cr.jsx)(Dr.Provider,{...e}),Ur=e=>{const{alignItems:t="center",gap:s=1,children:n=null,...r}=e;return Object(Cr.jsx)(yr,{alignItems:t,gap:s,...r,children:n})};var Lr=s(9);const Mr=e=>{const{headerText:t="",isExpanded:s=!1,gap:n=0,classNames:r=[],children:i=null,...a}=e,[o,l]=Object(c.useState)(!1),{setClosers:u=null,closeAll:d=null}=Object(c.useContext)(Dr),h=Object(c.useCallback)((()=>l(!1)),[]),j=Object(c.useMemo)((()=>{const e=["nitro-card-accordion-set"];return o&&e.push("active"),r&&r.length&&e.push(...r),e}),[o,r]);return Object(c.useEffect)((()=>{l(s)}),[s]),Object(c.useEffect)((()=>{const e=h;return u((t=>{const s=[...t];return s.push(e),s})),()=>{u((t=>{const s=[...t],n=s.indexOf(e);return n>=0&&s.splice(n,1),s}))}}),[h,u]),Object(Cr.jsxs)(rc,{classNames:j,gap:n,...a,children:[Object(Cr.jsxs)(yr,{pointer:!0,justifyContent:"between",className:"nitro-card-accordion-set-header px-2 py-1",onClick:()=>{d(),l((e=>!e))},children:[Object(Cr.jsx)(Ac,{children:t}),Object(Cr.jsx)(Lr.a,{icon:o?"caret-up":"caret-down"})]}),o&&Object(Cr.jsx)(rc,{fullHeight:!0,overflow:"auto",gap:0,className:"nitro-card-accordion-set-content",children:i})]})},Fr=e=>{const{...t}=e,[s,n]=Object(c.useState)([]),r=Object(c.useCallback)((()=>{for(const e of s)e()}),[s]);return Object(Cr.jsx)(Pr,{value:{closers:s,setClosers:n,closeAll:r},children:Object(Cr.jsx)(rc,{gap:0,...t})})},Hr=e=>{const{overflow:t="auto",classNames:s=[],...n}=e,r=Object(c.useMemo)((()=>{const e=["container-fluid","content-area"];return s.length&&e.push(...s),e}),[s]);return Object(Cr.jsx)(rc,{classNames:r,overflow:t,...n})},Br=Object(c.createContext)({theme:null}),Gr=e=>Object(Cr.jsx)(Br.Provider,{value:e.value,children:e.children}),Wr=e=>{const{headerText:t=null,noCloseButton:s=!1,onCloseClick:n=null,justifyContent:r="center",alignItems:i="center",classNames:a=[],children:o=null,...l}=e,u=Object(c.useMemo)((()=>{const e=["drag-handler","container-fluid","nitro-card-header"];return a.length&&e.push(...a),e}),[a]),d=Object(c.useCallback)((e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}),[]);return Object(Cr.jsx)(rc,{center:!0,position:"relative",classNames:u,...l,children:Object(Cr.jsxs)(yr,{fullWidth:!0,center:!0,children:[Object(Cr.jsx)("span",{className:"nitro-card-header-text",children:t}),Object(Cr.jsx)(Sr,{position:"absolute",className:"end-2 nitro-card-header-close",onMouseDownCapture:d,onClick:n,children:Object(Cr.jsx)(Lr.a,{icon:"times"})})]})})},Vr=e=>{const{justifyContent:t="center",classNames:s=[],...n}=e,r=Object(c.useMemo)((()=>{const e=["container-fluid","bg-muted","p-1"];return s.length&&e.push(...s),e}),[s]);return Object(Cr.jsx)(yr,{justifyContent:t,classNames:r,...n})};var qr=s(24);class zr{}zr.CENTER="DWP_CENTER",zr.TOP_CENTER="DWP_TOP_CENTER",zr.TOP_LEFT="DWP_TOP_LEFT",zr.NOTHING="DWP_NOTHING";const Yr=[],Kr=new Map,Qr=e=>{const{uniqueKey:t=null,handleSelector:s=".drag-handler",windowPosition:n=zr.CENTER,disableDrag:r=!1,dragStyle:i={},children:o=null,offsetLeft:l=0,offsetTop:u=0}=e,[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)(null),[g,O]=Object(c.useState)({x:0,y:0}),[m,p]=Object(c.useState)(!1),[_,E]=Object(c.useState)(null),f=Object(c.useRef)(),x=Object(c.useCallback)((()=>{let e=400;for(const t of Yr)e+=1,t.style.zIndex=e.toString()}),[]),I=Object(c.useCallback)((()=>{const e=Yr.indexOf(f.current);if(-1===e)Yr.push(f.current);else{if(e===Yr.length-1)return;e>=0&&(Yr.splice(e,1),Yr.push(f.current))}x()}),[x]),T=Object(c.useCallback)((e=>{I()}),[I]),C=Object(c.useCallback)((e=>{I()}),[I]),S=Object(c.useCallback)(((e,t)=>{O({x:e,y:t}),p(!0)}),[]),N=Object(c.useCallback)((e=>{S(e.clientX,e.clientY)}),[S]),v=Object(c.useCallback)((e=>{const t=e.touches[0];S(t.clientX,t.clientY)}),[S]),R=Object(c.useCallback)((e=>{h({x:e.clientX-g.x,y:e.clientY-g.y})}),[g]),A=Object(c.useCallback)((e=>{const t=e.touches[0];h({x:t.clientX-g.x,y:t.clientY-g.y})}),[g]),y=Object(c.useCallback)((()=>{if(!f.current||!_)return;let e=j.x+d.x,s=j.y+d.y;const n=f.current.offsetLeft+e,r=f.current.offsetTop+s;r<0?s=-f.current.offsetTop:r+_.offsetHeight>=document.body.offsetHeight-0&&(s=document.body.offsetHeight-f.current.offsetHeight-f.current.offsetTop),n+f.current.offsetWidth<0?e=-f.current.offsetLeft:n>=document.body.offsetWidth-0&&(e=document.body.offsetWidth-f.current.offsetWidth-f.current.offsetLeft),h({x:0,y:0}),b({x:e,y:s}),p(!1),null!==t&&Kr.set(t,{x:e,y:s})}),[_,d,j,t]),w=Object(c.useCallback)((e=>{y()}),[y]),k=Object(c.useCallback)((e=>{y()}),[y]);return Object(c.useEffect)((()=>{const e=f.current;if(!e)return;if(Yr.push(e),x(),!r){const t=e.querySelector(s);t&&E(t)}let c=0,i=0;switch(n){case zr.TOP_CENTER:e.style.top=50+u+"px",e.style.left=`calc(50vw - ${e.offsetWidth/2+l}px)`;break;case zr.CENTER:e.style.top=`calc(50vh - ${e.offsetHeight/2+u}px)`,e.style.left=`calc(50vw - ${e.offsetWidth/2+l}px)`;break;case zr.TOP_LEFT:e.style.top=50+u+"px",e.style.left=50+l+"px"}if(null!==t){const e=Kr.get(t);e&&(c=e.x,i=e.y)}return h({x:0,y:0}),b({x:c,y:i}),()=>{const t=Yr.indexOf(e);t>=0&&Yr.splice(t,1)}}),[s,n,t,r,l,u,x]),Object(c.useEffect)((()=>{if(!j&&!d)return;const e=f.current;e&&(e.style.transform=`translate(${j.x+d.x}px, ${j.y+d.y}px)`,e.style.visibility="visible")}),[j,d]),Object(c.useEffect)((()=>{if(_)return _.addEventListener(a.ue.MOUSE_DOWN,N),_.addEventListener(a.Kh.TOUCH_START,v),()=>{_.removeEventListener(a.ue.MOUSE_DOWN,N),_.removeEventListener(a.Kh.TOUCH_START,v)}}),[_,N,v]),Object(c.useEffect)((()=>{if(m)return document.addEventListener(a.ue.MOUSE_UP,w),document.addEventListener(a.Kh.TOUCH_END,k),document.addEventListener(a.ue.MOUSE_MOVE,R),document.addEventListener(a.Kh.TOUCH_MOVE,A),()=>{document.removeEventListener(a.ue.MOUSE_UP,w),document.removeEventListener(a.Kh.TOUCH_END,k),document.removeEventListener(a.ue.MOUSE_MOVE,R),document.removeEventListener(a.Kh.TOUCH_MOVE,A)}}),[m,w,R,k,A]),Object(qr.createPortal)(Object(Cr.jsx)(Sr,{position:"absolute",innerRef:f,className:"draggable-window",onMouseDownCapture:T,onTouchStartCapture:C,style:i,children:o}),document.getElementById("draggable-windows-container"))},$r=e=>{const{theme:t="primary",uniqueKey:s=null,handleSelector:n=".drag-handler",windowPosition:r=zr.CENTER,disableDrag:i=!1,overflow:a="hidden",position:o="relative",gap:l=0,classNames:u=[],...d}=e,h=Object(c.useMemo)((()=>{const e=["nitro-card","rounded","shadow"];return e.push(`theme-${t||"primary"}`),u.length&&e.push(...u),e}),[t,u]);return Object(Cr.jsx)(Gr,{value:{theme:t},children:Object(Cr.jsx)(Qr,{uniqueKey:s,handleSelector:n,windowPosition:r,disableDrag:i,children:Object(Cr.jsx)(rc,{overflow:a,position:o,gap:l,classNames:h,...d})})})},Xr=e=>{const{figure:t="",gender:s="M",headOnly:n=!1,direction:r=0,scale:i=1,classNames:o=[],style:l={},...u}=e,[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)(-1),g=Object(c.useRef)(!1),O=Object(c.useMemo)((()=>{const e=["avatar-image"];switch(i){case.5:e.push("scale-0-5");break;case.75:e.push("scale-0-75");break;case 1.25:e.push("scale-1-25");break;case 1.5:e.push("scale-1-50");break;default:e.push(`scale-${i}`)}return o.length&&e.push(...o),e}),[i,o]),m=Object(c.useMemo)((()=>{let e={};return d&&d.length&&(e.backgroundImage=`url('${d}')`),Object.keys(l).length&&(e={...e,...l}),e}),[d,l]);return Object(c.useEffect)((()=>{const e=f().createAvatarImage(t,a.q.LARGE,s,{resetFigure:e=>{g.current||b(Math.random())},dispose:()=>{},disposed:!1},null);if(!e)return;let c=a.r.FULL;n&&(c=a.r.HEAD),e.setDirection(c,r);const i=e.getCroppedImage(c);i&&h(i.src),e.dispose()}),[t,s,r,n,j]),Object(c.useEffect)((()=>(g.current=!1,()=>{g.current=!0})),[]),Object(Cr.jsx)(Sr,{classNames:O,style:m,...u})},Jr=e=>{const{imageUrl:t=null,fit:s=!0,style:n=null,...r}=e,i=Object(c.useMemo)((()=>{const e={...n};return t&&(e.background=`url(${t}) center no-repeat`),e}),[n,t]);return Object(Cr.jsx)(Sr,{fit:s,style:i,...r})},Zr=e=>{const{badgeCode:t=null,isGroup:s=!1,showInfo:n=!1,customTitle:r=null,isGrayscale:i=!1,scale:o=1,classNames:l=[],style:u={},children:d=null,...h}=e,[j,b]=Object(c.useState)(""),g=Object(c.useMemo)((()=>{let e=o.toString();return.5===o?e="0-5":.75===o?e="0-75":1.25===o?e="1-25":1.5===o&&(e="1-50"),`scale-${e}`}),[o]),O=Object(c.useMemo)((()=>{const e=["badge-image"];return s&&e.push("group-badge"),i&&e.push("grayscale"),1!==o&&g.length&&e.push(g),l.length&&e.push(...l),e}),[l,s,i,o,g]),m=Object(c.useMemo)((()=>{let e={};return j&&j.length&&(e.backgroundImage=`url(${j})`),Object.keys(u).length&&(e={...e,...u}),e}),[u,j]);Object(c.useEffect)((()=>{if(!t||!t.length)return;let e=!1;const n=s=>{s.badgeId===t&&(b(a.Jh.generateImageUrl(new a.Se(s.image))),e=!0,K().events.removeEventListener(a.s.IMAGE_READY,n))};K().events.addEventListener(a.s.IMAGE_READY,n);const r=s?K().getGroupBadgeImage(t):K().getBadgeImage(t);return r&&!e&&b(a.Jh.generateImageUrl(new a.Se(r))),()=>K().events.removeEventListener(a.s.IMAGE_READY,n)}),[t,s]);const p=e=>{const{title:t=null,description:s=null}=e;return N("badge.descriptions.enabled",!0)?Object(Cr.jsxs)(Sr,{className:"badge-information text-black py-1 px-2 small",children:[Object(Cr.jsx)("div",{className:"fw-bold mb-1",children:t}),Object(Cr.jsx)("div",{children:s})]}):null};return Object(Cr.jsxs)(Sr,{classNames:O,style:m,...h,children:[n&&Object(Cr.jsx)(p,{title:s?r:Ye(t),description:s?$e("group.badgepopup.body"):ze(t)}),d]})},ec=e=>{const{type:t="",classNames:s=[],style:n={},...r}=e,i=Object(c.useMemo)((()=>{const e=["nitro-currency-icon"];return s.length&&e.push(...s),e}),[s]),a=Object(c.useMemo)((()=>{let e=N("currency.asset.icon.url","");return e=e.replace("%type%",t.toString()),`url(${e})`}),[t]),o=Object(c.useMemo)((()=>{let e={};return e.backgroundImage=a,Object.keys(n).length&&(e={...e,...n}),e}),[n,a]);return Object(Cr.jsx)(Sr,{classNames:i,style:o,...r})},tc=e=>{const{productType:t="s",productClassId:s=-1,extraData:n="",...r}=e;return Object(Cr.jsx)(uc,{imageUrl:(()=>{let e=null;switch(t.toLocaleLowerCase()){case p.FLOOR:e=w().getFurnitureFloorIconUrl(s);break;case p.WALL:e=w().getFurnitureWallIconUrl(s,n)}return e})(),className:"furni-image",...r})},sc=e=>{const{productType:t="s",productClassId:s=-1,direction:n=0,extraData:r="",scale:i=1}=e,[o,l]=Object(c.useState)(null),u=Object(c.useCallback)((()=>{let e=null;const c={imageReady:(e,t,s)=>{!s&&t&&(s=a.Jh.generateImage(t)),s.onload=()=>l(s)},imageFailed:null};switch(t.toLocaleLowerCase()){case p.FLOOR:e=w().getFurnitureFloorImage(s,new a.Li(n),64,c,0,r);break;case p.WALL:e=w().getFurnitureWallImage(s,new a.Li(n),64,c,0,r)}if(e){const t=e.getImage();t.onload=()=>l(t)}}),[t,s,n,r]);if(Object(c.useEffect)((()=>{u()}),[u]),!o)return null;const d=`url('${o.src}')`;return Object(Cr.jsx)(Sr,{classNames:["furni-image",`scale-${i}`],style:{backgroundImage:d,width:o.width,height:o.height}})},nc=e=>{const{figure:t=null,userName:s=null,message:n=null,editable:r=!1,onChange:c=null}=e;return Object(Cr.jsxs)(yr,{overflow:"hidden",className:"nitro-gift-card text-black",children:[Object(Cr.jsxs)("div",{className:"d-flex align-items-center justify-content-center gift-face flex-shrink-0",children:[!s&&Object(Cr.jsx)("div",{className:"gift-incognito"}),t&&Object(Cr.jsx)("div",{className:"gift-avatar",children:Object(Cr.jsx)(Xr,{figure:t,direction:2,headOnly:!0})})]}),Object(Cr.jsx)(yr,{overflow:"hidden",className:"w-100 pt-4 pb-4 pe-4 ps-3",children:Object(Cr.jsxs)(rc,{grow:!0,overflow:"auto",justifyContent:"between",children:[!r&&Object(Cr.jsx)(Ac,{textBreak:!0,className:"gift-message",children:n}),r&&null!==c&&Object(Cr.jsx)("textarea",{className:"gift-message h-100",maxLength:140,value:n,onChange:e=>c(e.target.value),placeholder:$e("catalog.gift_wrapping_new.message_hint")}),s&&Object(Cr.jsx)(Ac,{italics:!0,textEnd:!0,className:"pe-1",children:$e("catalog.gift_wrapping_new.message_from",["name"],[s])})]})})]})},rc=e=>{const{size:t=0,offset:s=0,column:n=!0,gap:r=2,classNames:i=[],...a}=e,{isCssGrid:o=!1}=Object(c.useContext)(Nr),l=Object(c.useMemo)((()=>{const e=[];if(t){let s=`col-${t}`;o&&(s=`g-${s}`),e.push(s)}if(s){let t=`offset-${s}`;o&&(t=`g-start-${s}`),e.push(t)}return i.length&&e.push(...i),e}),[t,s,o,i]);return Object(Cr.jsx)(yr,{classNames:l,column:n,gap:r,...a})},cc=e=>{const{count:t=0,position:s="absolute",classNames:n=[],children:r=null,...i}=e,a=Object(c.useMemo)((()=>{const e=["badge","border","border-black","bg-danger","px-1","nitro-item-count"];return n.length&&e.push(...n),e}),[n]);return Object(Cr.jsxs)(Sr,{position:"absolute",classNames:a,...i,children:[t,r]})},ic=e=>{const{value:t=0}=e,s=t.toString().split("");return Object(Cr.jsx)(Cr.Fragment,{children:s.map(((e,t)=>Object(Cr.jsx)("i",{className:"limited-edition-number n-"+e},t)))})},ac=e=>{const{uniqueNumber:t=0,uniqueSeries:s=0,classNames:n=[],children:r=null,...i}=e,a=Object(c.useMemo)((()=>{const e=["unique-compact-plate","z-index-1"];return n.length&&e.push(...n),e}),[n]);return Object(Cr.jsxs)(Sr,{classNames:a,...i,children:[Object(Cr.jsx)("div",{children:Object(Cr.jsx)(ic,{value:t})}),Object(Cr.jsx)("div",{children:Object(Cr.jsx)(ic,{value:s})}),r]})},oc=e=>{const{uniqueLimitedItemsLeft:t=0,uniqueLimitedSeriesSize:s=0,classNames:n=[],...r}=e,i=Object(c.useMemo)((()=>{const e=["unique-complete-plate"];return n.length&&e.push(...n),e}),[n]);return Object(Cr.jsx)(Sr,{classNames:i,...r,children:Object(Cr.jsxs)(rc,{className:"plate-container",gap:0,children:[Object(Cr.jsxs)(yr,{justifyContent:"between",alignItems:"center",children:[$e("unique.items.left"),Object(Cr.jsx)("div",{children:Object(Cr.jsx)(ic,{value:t})})]}),Object(Cr.jsxs)(yr,{justifyContent:"between",alignItems:"center",children:[$e("unique.items.number.sold"),Object(Cr.jsx)("div",{children:Object(Cr.jsx)(ic,{value:s})})]})]})})},lc=e=>{const{itemImage:t,itemColor:s,itemActive:n=!1,itemCount:r=1,itemCountMinimum:i=1,itemUniqueSoldout:a=!1,itemUniqueNumber:o=-2,itemUnseen:l=!1,itemHighlight:u=!1,disabled:d=!1,center:h=!0,column:j=!0,style:b={},classNames:g=[],position:O="relative",overflow:m="hidden",children:p=null,..._}=e,E=Object(c.useMemo)((()=>{const e=["layout-grid-item","border","border-2","border-muted","rounded"];return n&&e.push("active"),(a||o>0)&&e.push("unique-item"),a&&e.push("sold-out"),l&&e.push("unseen"),u&&e.push("has-highlight"),d&&e.push("disabled"),null===t&&e.push("icon","loading-icon"),g.length&&e.push(...g),e}),[n,a,o,l,u,d,t,g]),f=Object(c.useMemo)((()=>{let e={...b};return t&&(e.backgroundImage=`url(${t})`),s&&(e.backgroundColor=s),Object.keys(b).length&&(e={...e,...b}),e}),[b,t,s]);return Object(Cr.jsxs)(rc,{center:h,pointer:!0,position:O,overflow:m,column:j,classNames:E,style:f,..._,children:[r>i&&Object(Cr.jsx)(cc,{count:r}),o>0&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Sr,{fit:!0,className:"unique-bg-override",style:{backgroundImage:`url(${t})`}}),Object(Cr.jsx)("div",{className:"position-absolute bottom-0 unique-item-counter",children:Object(Cr.jsx)(ic,{value:o})})]}),p]})},uc=e=>{const{imageUrl:t=null,...s}=e;return Object(Cr.jsx)("img",{src:t,alt:"",...s})},dc=e=>{const{...t}=e;return Object(Cr.jsxs)(Sr,{classNames:["spinner-container"],...t,children:[Object(Cr.jsx)(Sr,{className:"spinner"}),Object(Cr.jsx)(Sr,{className:"spinner"}),Object(Cr.jsx)(Sr,{className:"spinner"})]})},hc=e=>{const{roomId:t=-1,textureReceiver:s=null,onClose:n=null}=e,r=Object(c.useRef)(),i=Object(c.useCallback)((()=>{if(!r||!r.current)return null;const e=r.current.getBoundingClientRect();return new a.Qe(Math.floor(e.x),Math.floor(e.y),Math.floor(e.width),Math.floor(e.height))}),[]),o=Object(c.useCallback)((()=>{Ft(ps.CAMERA_SHUTTER),s(w().createTextureFromRoom(t,1,i()))}),[t,i,s]);return Object(Cr.jsx)(Qr,{handleSelector:".nitro-room-thumbnail-camera",children:Object(Cr.jsxs)("div",{className:"nitro-room-thumbnail-camera px-2",children:[Object(Cr.jsx)("div",{ref:r,className:"camera-frame"}),Object(Cr.jsxs)("div",{className:"d-flex align-items-end h-100 pb-2",children:[Object(Cr.jsx)("button",{className:"btn btn-sm btn-danger w-100 mb-1 me-2",onClick:n,children:$e("cancel")}),Object(Cr.jsx)("button",{className:"btn btn-sm btn-success w-100 mb-1",onClick:o,children:$e("navigator.thumbeditor.save")})]})]})})},jc=e=>{const{title:t="",close:s=null,classNames:n=[],children:r=null,type:i=or.DEFAULT,...a}=e,o=Object(c.useMemo)((()=>{const e=["nitro-alert"];return e.push("nitro-alert-"+i),n.length&&e.push(...n),e}),[n,i]);return Object(Cr.jsxs)($r,{classNames:o,theme:"primary-slim",...a,children:[Object(Cr.jsx)(Wr,{headerText:t,onCloseClick:s}),Object(Cr.jsx)(Hr,{grow:!0,justifyContent:"between",overflow:"hidden",className:"text-black",gap:0,children:r})]})};var bc=s(27);class gc{}function Oc(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300;switch(e){case gc.BOUNCE:switch(t){default:return{};case bc.b:return{animationName:"bounceIn",animationDuration:`${s}ms`};case bc.c:return{animationName:"bounceOut",animationDuration:`${s}ms`}}case gc.SLIDE_LEFT:switch(t){default:return{};case bc.b:return{animationName:"slideInLeft",animationDuration:`${s}ms`};case bc.c:return{animationName:"slideOutLeft",animationDuration:`${s}ms`}}case gc.SLIDE_RIGHT:switch(t){default:return{};case bc.b:return{animationName:"slideInRight",animationDuration:`${s}ms`};case bc.c:return{animationName:"slideOutRight",animationDuration:`${s}ms`}}case gc.FLIP_X:switch(t){default:return{};case bc.b:return{animationName:"flipInX",animationDuration:`${s}ms`};case bc.c:return{animationName:"flipOutX",animationDuration:`${s}ms`}}case gc.FADE_UP:switch(t){default:return{};case bc.b:return{animationName:"fadeInUp",animationDuration:`${s}ms`};case bc.c:return{animationName:"fadeOutDown",animationDuration:`${s}ms`}}case gc.FADE_IN:switch(t){default:return{};case bc.b:return{animationName:"fadeIn",animationDuration:`${s}ms`};case bc.c:return{animationName:"fadeOut",animationDuration:`${s}ms`}}case gc.FADE_DOWN:switch(t){default:return{};case bc.b:return{animationName:"fadeInDown",animationDuration:`${s}ms`};case bc.c:return{animationName:"fadeOutUp",animationDuration:`${s}ms`}}case gc.HEAD_SHAKE:return t===bc.b?{animationName:"headShake",animationDuration:`${s}ms`}:{}}return null}gc.BOUNCE="bounce",gc.SLIDE_LEFT="slideLeft",gc.SLIDE_RIGHT="slideRight",gc.FLIP_X="flipX",gc.FADE_IN="fadeIn",gc.FADE_DOWN="fadeDown",gc.FADE_UP="fadeUp",gc.HEAD_SHAKE="headShake";const mc=e=>{const{type:t=null,inProp:s=!1,timeout:n=300,className:r=null,children:i=null}=e,[a,o]=Object(c.useState)(!1);return Object(c.useEffect)((()=>{let e=null;return s?o(!0):e=setTimeout((()=>{o(!1),clearTimeout(n)}),n),()=>{e&&clearTimeout(e)}}),[s,n]),Object(Cr.jsx)(bc.d,{in:s,timeout:n,children:e=>Object(Cr.jsx)("div",{className:(null!==r&&void 0!==r?r:"")+" animate__animated",style:{...Oc(t,e,n)},children:a&&i})})},pc=e=>{const{fadesOut:t=!0,timeoutMs:s=8e3,close:n=null,overflow:r="hidden",classNames:i=[],...a}=e,[o,l]=Object(c.useState)(!1),u=Object(c.useMemo)((()=>{const e=["nitro-notification-bubble","rounded"];return i.length&&e.push(...i),e}),[i]);return Object(c.useEffect)((()=>(l(!0),()=>l(!1))),[]),Object(c.useEffect)((()=>{if(!t)return;const e=setTimeout((()=>{l(!1),setTimeout((()=>n()),300)}),s);return()=>clearTimeout(e)}),[t,s,n]),Object(Cr.jsx)(mc,{type:gc.FADE_IN,inProp:o,timeout:300,children:Object(Cr.jsx)(yr,{overflow:r,classNames:u,onClick:n,...a})})},_c=e=>{const{figure:t="",typeId:s=-1,paletteId:n=-1,color:r=16777215,customParts:i=[],posture:o="std",headOnly:l=!1,direction:u=0,scale:d=1}=e,[h,j]=Object(c.useState)(null),b=Object(c.useRef)(!1);Object(c.useEffect)((()=>{let e=s,c=n,d=r,h=i,g=l;if(t&&t.length){const s=new a.gf(t);e=s.typeId,c=s.paletteId,d=s.color,h=s.customParts}16===e&&(g=!1);const O=w().getRoomObjectPetImage(e,c,d,new a.Li(45*u),64,{imageReady:(e,t,s)=>{b.current||(s?j(s.src):t&&j(a.Jh.generateImageUrl(t)))},imageFailed:e=>{}},g,0,h,o);if(O){const e=O.getImage();e&&j(e.src)}}),[t,s,n,r,i,o,l,u]),Object(c.useEffect)((()=>(b.current=!1,()=>{b.current=!0})),[]);const g=`url('${h}')`;return Object(Cr.jsx)("div",{className:"pet-image scale-"+d.toString().replace(".","-"),style:h&&g.length?{backgroundImage:g}:{}})},Ec=e=>{const{text:t="",progress:s=0,maxProgress:n=100,position:r="relative",justifyContent:i="center",classNames:a=[],children:o=null,...l}=e,u=Object(c.useMemo)((()=>{const e=["nitro-progress-bar","text-white"];return a.length&&e.push(...a),e}),[a]);return Object(Cr.jsxs)(rc,{position:r,justifyContent:i,classNames:u,...l,children:[t&&t.length>0&&Object(Cr.jsx)(yr,{fit:!0,center:!0,position:"absolute",className:"nitro-progress-bar-text small",children:t}),Object(Cr.jsx)(Sr,{className:"nitro-progress-bar-inner",style:{width:~~(100*(s-0)/(n-0)+0)+"%"}}),o]})},fc=e=>{const{level:t=0,classNames:s=[],children:n=null,...r}=e,i=Object(c.useMemo)((()=>{const e=["nitro-rarity-level"];return s.length&&e.push(...s),e}),[s]);return Object(Cr.jsxs)(Sr,{classNames:i,...r,children:[Object(Cr.jsx)("div",{children:t}),n]})},xc=e=>{const{roomPreviewer:t=null,height:s=0}=e,[n,r]=Object(c.useState)(null),i=Object(c.useRef)(),o=Object(c.useCallback)((e=>{t&&n&&i.current&&(t.updatePreviewRoomView(),n.canvasUpdated&&(i.current.style.backgroundImage=`url(${a.Jh.generateImageUrl(n.master)})`))}),[t,n,i]),l=Object(c.useCallback)((()=>{if(!i.current||!t)return;let e=document.defaultView.getComputedStyle(i.current,null).backgroundColor;e=a.eb.rgbStringToHex(e),e=e.replace("#","0x"),t.backgroundColor=parseInt(e,16);const n=i.current.parentElement.clientWidth;t.getRoomCanvas(n,s);const c=t.getRenderingCanvas();r(c),c.canvasUpdated=!0,o(-1)}),[i,s,t,o]);return Object(c.useEffect)((()=>{if(!t)return;n||l(),_().ticker.add(o);const e=new ResizeObserver((()=>{if(!t||!i.current)return;const e=i.current.parentElement.offsetWidth;t.modifyRoomCanvas(e,s),o(-1)}));return e.observe(i.current),()=>{e.disconnect(),_().ticker.remove(o)}}),[n,t,i,s,l,o]),Object(Cr.jsxs)("div",{className:"room-preview-container",children:[Object(Cr.jsx)("div",{ref:i,className:"room-preview-image",style:{height:s},onClick:e=>{t&&(e.shiftKey?t.changeRoomObjectDirection():t.changeRoomObjectState())}}),e.children]})},Ic=e=>{const{roomId:t=-1,customUrl:s=null,shrink:n=!0,overflow:r="hidden",classNames:i=[],children:a=null,...o}=e,l=Object(c.useMemo)((()=>{const e=["room-thumbnail","rounded","border"];return i.length&&e.push(...i),e}),[i]),u=Object(c.useMemo)((()=>s&&s.length?N("image.library.url")+s:N("thumbnails.url").replace("%thumbnail%",t.toString())),[s,t]);return Object(Cr.jsxs)(Sr,{shrink:n,overflow:r,classNames:l,...o,children:[u&&Object(Cr.jsx)("img",{alt:"",src:u}),a]})},Tc=e=>{const{color:t="",message:s="",date:n="",senderName:r="",customTitle:c=null,onCloseClick:i=null}=e;return Object(Cr.jsx)(Qr,{handleSelector:".drag-handler",children:Object(Cr.jsxs)(rc,{gap:0,alignItems:"center",className:`nitro-layout-trophy trophy-${t}`,children:[Object(Cr.jsxs)(yr,{center:!0,fullWidth:!0,position:"relative",className:"trophy-header drag-handler",children:[Object(Cr.jsx)(Sr,{position:"absolute",pointer:!0,className:"trophy-close",onClick:i}),Object(Cr.jsx)(Ac,{bold:!0,children:$e("widget.furni.trophy.title")})]}),Object(Cr.jsxs)(rc,{className:"trophy-content py-1",gap:1,children:[c&&Object(Cr.jsx)(Ac,{bold:!0,children:c}),s]}),Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"between",className:"trophy-footer mt-1",children:[Object(Cr.jsx)(Ac,{bold:!0,children:n}),Object(Cr.jsx)(Ac,{bold:!0,children:r})]})]})})},Cc=e=>{const{userId:t=0,userName:s=null,classNames:n=[],pointer:r=!0,children:i=null,...a}=e,o=Object(c.useMemo)((()=>{const e=["nitro-friends-spritesheet","icon-profile-sm"];return n.length&&e.push(...n),e}),[n]);return Object(Cr.jsx)(Sr,{classNames:o,pointer:r,onClick:e=>gr(t),...a,children:i})},Sc=e=>{const{isActive:t=!1,count:s=0,overflow:n="hidden",position:r="relative",pointer:i=!0,classNames:a=[],children:o=null,...l}=e,u=Object(c.useMemo)((()=>{const e=["nav-item","rounded-top","border"];return t&&e.push("active"),a.length&&e.push(...a),e}),[t,a]);return Object(Cr.jsxs)(yr,{overflow:n,pointer:i,position:r,classNames:u,...l,children:[Object(Cr.jsx)(yr,{shrink:!0,center:!0,children:o}),s>0&&Object(Cr.jsx)(cc,{count:s})]})},Nc=e=>{const{justifyContent:t="center",gap:s=1,classNames:n=[],children:r=null,...i}=e,a=Object(c.useMemo)((()=>{const e=["container-fluid","nitro-card-tabs","pt-1"];return n.length&&e.push(...n),e}),[n]);return Object(Cr.jsx)(yr,{justifyContent:t,gap:s,classNames:a,...i,children:r})},vc=e=>{const{classNames:t=[],...s}=e,n=Object(c.useMemo)((()=>{const e=["form-group"];return t.length&&e.push(...t),e}),[t]);return Object(Cr.jsx)(yr,{classNames:n,...s})},Rc=e=>{const{variant:t="black",height:s=1,classNames:n=[],style:r={},...i}=e,a=Object(c.useMemo)((()=>{const e=[];return t&&e.push("bg-"+t),n.length&&e.push(...n),e}),[t,n]),o=Object(c.useMemo)((()=>{let e={display:"list-item"};return s>0&&(e.height=s),Object.keys(r).length&&(e={...e,...r}),e}),[s,r]);return Object(Cr.jsx)(Sr,{classNames:a,style:o,...i})},Ac=e=>{const{variant:t="black",fontWeight:s=null,fontSize:n=0,align:r=null,bold:i=!1,underline:a=!1,italics:o=!1,truncate:l=!1,center:u=!1,textEnd:d=!1,small:h=!1,wrap:j=!1,noWrap:b=!1,textBreak:g=!1,...O}=e,m=Object(c.useMemo)((()=>{const e=["d-inline"];return t&&e.push("text-"+t),i&&e.push("fw-bold"),s&&e.push("fw-"+s),n&&e.push("fs-"+n),r&&e.push("text-"+r),a&&e.push("text-decoration-underline"),o&&e.push("fst-italic"),l&&e.push("text-truncate"),u&&e.push("text-center"),d&&e.push("text-end"),h&&e.push("small"),j&&e.push("text-wrap"),b&&e.push("text-nowrap"),g&&e.push("text-break"),e}),[t,s,n,r,i,a,o,l,u,d,h,j,b,g]);return Object(Cr.jsx)(Sr,{classNames:m,...O})},yc=e=>{const{isError:t=!1,message:s="",percent:n=0}=e;return Object(c.useEffect)((()=>{t&&jr.simpleAlert(s,null,null,null,"Connection Error")}),[t,s]),Object(Cr.jsx)(rc,{fullHeight:!0,position:"relative",className:"nitro-loading",children:Object(Cr.jsx)(Sr,{fullHeight:!0,className:"container h-100",children:Object(Cr.jsxs)(rc,{fullHeight:!0,alignItems:"center",justifyContent:"end",children:[Object(Cr.jsx)(Sr,{className:"connecting-duck"}),Object(Cr.jsx)(rc,{size:6,className:"text-center py-4",children:t&&s&&s.length?Object(Cr.jsx)(Sr,{className:"fs-4 text-shadow",children:s}):Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(Ac,{fontSize:4,variant:"white",className:"text-shadow",children:[n.toFixed(),"%"]}),Object(Cr.jsx)(Ec,{progress:n,className:"mt-2 large"})]})})]})})})},wc=e=>{const{achievement:t=null,scale:s=1,...n}=e;return t?Object(Cr.jsx)(Zr,{badgeCode:u(t),isGrayscale:!b(t),scale:s,...n}):null},kc=e=>{const{achievement:t=null,selectedAchievementId:s=-1,setSelectedAchievementId:n=null,children:r=null,...c}=e;return t?Object(Cr.jsxs)(lc,{itemActive:s===t.achievementId,itemUnseen:t.unseen>0,onClick:e=>n(t.achievementId),...c,children:[Object(Cr.jsx)(wc,{achievement:t}),r]}):null},Dc=e=>{const{achievements:t=null,selectedAchievementId:s=-1,setSelectedAchievementId:n=null,children:r=null,...c}=e;return Object(Cr.jsxs)(Ar,{columnCount:6,columnMinWidth:50,columnMinHeight:50,...c,children:[t&&t.length>0&&t.map(((e,t)=>Object(Cr.jsx)(kc,{achievement:e,selectedAchievementId:s,setSelectedAchievementId:n},t))),r]})},Pc=e=>{const{achievement:t=null,children:s=null,...n}=e;return t?Object(Cr.jsxs)(yr,{shrink:!0,className:"bg-muted rounded p-2 text-black",gap:2,overflow:"hidden",...n,children:[Object(Cr.jsxs)(rc,{center:!0,gap:1,children:[Object(Cr.jsx)(wc,{className:"nitro-achievements-badge-image",achievement:t,scale:2}),Object(Cr.jsx)(Ac,{fontWeight:"bold",children:$e("achievements.details.level",["level","limit"],[g(t).toString(),t.levelCount.toString()])})]}),Object(Cr.jsxs)(rc,{fullWidth:!0,justifyContent:"center",overflow:"hidden",children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{fontWeight:"bold",truncate:!0,children:Ye(u(t))}),Object(Cr.jsx)(Ac,{textBreak:!0,children:ze(u(t))})]}),(t.levelRewardPoints>0||t.scoreLimit>0)&&Object(Cr.jsxs)(rc,{gap:1,children:[t.levelRewardPoints>0&&Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Ac,{truncate:!0,className:"small",children:$e("achievements.details.reward")}),Object(Cr.jsxs)(yr,{center:!0,className:"fw-bold small",gap:1,children:[t.levelRewardPoints,Object(Cr.jsx)(ec,{type:t.levelRewardPointType})]})]}),t.scoreLimit>0&&Object(Cr.jsx)(Ec,{text:$e("achievements.details.progress",["progress","limit"],[(t.currentPoints+t.scoreAtStartOfLevel).toString(),(t.scoreLimit+t.scoreAtStartOfLevel).toString()]),progress:t.currentPoints+t.scoreAtStartOfLevel,maxProgress:t.scoreLimit+t.scoreAtStartOfLevel})]})]}),s]}):null},Uc=e=>{const{category:t=null,selectedAchievementId:s=-1,setSelectedAchievementId:n=null,setAchievementSeen:r=null}=e,i=Object(c.useMemo)((()=>-1===s?null:t.achievements.find((e=>e.achievementId===s))),[t,s]);return Object(c.useEffect)((()=>{i||t.achievements.length&&n(t.achievements[0].achievementId)}),[i,t,n]),Object(c.useEffect)((()=>{i&&r(t.code,i.achievementId)}),[i,t,r]),t?Object(Cr.jsxs)(rc,{fullHeight:!0,justifyContent:"between",children:[Object(Cr.jsx)(Dc,{achievements:t.achievements,selectedAchievementId:s,setSelectedAchievementId:n}),!!i&&Object(Cr.jsx)(Pc,{achievement:i})]}):null},Lc=e=>{const{category:t=null,selectedCategoryCode:s=null,setSelectedCategoryCode:n=null,children:r=null,...c}=e;if(!t)return null;const i=h(t),a=o(t),l=d(t,i),u=j(t);return Object(Cr.jsxs)(lc,{itemActive:s===t.code,itemCount:u,itemCountMinimum:0,gap:1,onClick:e=>n(t.code),...c,children:[Object(Cr.jsx)(Ac,{fullWidth:!0,center:!0,small:!0,className:"pt-1",children:$e(`quests.${t.code}.name`)}),Object(Cr.jsx)(Jr,{position:"relative",imageUrl:l,children:Object(Cr.jsxs)(Ac,{fullWidth:!0,center:!0,position:"absolute",variant:"white",style:{fontSize:12,bottom:9},children:[i," / ",a]})}),r]})},Mc=e=>{const{categories:t=null,selectedCategoryCode:s=null,setSelectedCategoryCode:n=null,children:r=null,...c}=e;return Object(Cr.jsxs)(Ar,{columnCount:3,columnMinWidth:90,columnMinHeight:100,...c,children:[t&&t.length>0&&t.map(((e,t)=>Object(Cr.jsx)(Lc,{category:e,selectedCategoryCode:s,setSelectedCategoryCode:n},t))),r]})},Fc=e=>{const[t,s]=Object(c.useState)(!1),{achievementCategories:n=[],selectedCategoryCode:r=null,setSelectedCategoryCode:i=null,selectedAchievementId:a=-1,setSelectedAchievementId:o=null,achievementScore:l=0,getProgress:u=0,getMaxProgress:h=0,setAchievementSeen:j=null}=Ze(),b=Object(c.useMemo)((()=>null===r?null:n.find((e=>e.code===r))),[n,r]);return Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e))}},eventUrlPrefix:"achievements/"};return E(e),()=>y(e)}),[]),t?Object(Cr.jsxs)($r,{uniqueKey:"achievements",className:"nitro-achievements",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("inventory.achievements"),onCloseClick:e=>s(!1)}),b&&Object(Cr.jsxs)(Vr,{position:"relative",className:"justify-content-center align-items-center cursor-pointer",gap:3,children:[Object(Cr.jsx)(Sr,{onClick:e=>i(null),className:"nitro-achievements-back-arrow"}),Object(Cr.jsxs)(rc,{grow:!0,gap:0,children:[Object(Cr.jsx)(Ac,{fontSize:4,fontWeight:"bold",className:"text-small",children:$e(`quests.${b.code}.name`)}),Object(Cr.jsx)(Ac,{children:$e("achievements.details.categoryprogress",["progress","limit"],[b.getProgress().toString(),b.getMaxProgress().toString()])})]}),Object(Cr.jsx)(uc,{imageUrl:d(b,null,!0)})]}),Object(Cr.jsxs)(Hr,{gap:1,children:[!b&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Mc,{categories:n,selectedCategoryCode:r,setSelectedCategoryCode:i}),Object(Cr.jsxs)(rc,{grow:!0,justifyContent:"end",gap:1,children:[Object(Cr.jsx)(Ac,{small:!0,center:!0,children:$e("achievements.categories.score",["score"],[l.toString()])}),Object(Cr.jsx)(Ec,{text:$e("achievements.categories.totalprogress",["progress","limit"],[u.toString(),h.toString()]),progress:u,maxProgress:h})]})]}),b&&Object(Cr.jsx)(Uc,{category:b,selectedAchievementId:a,setSelectedAchievementId:o,setAchievementSeen:j})]})]}):null};class Hc{}Hc.ACTION_SAVE="AEA_ACTION_SAVE",Hc.ACTION_CLEAR="AEA_ACTION_CLEAR",Hc.ACTION_RESET="AEA_ACTION_RESET",Hc.ACTION_RANDOMIZE="AEA_ACTION_RANDOMIZE";class Bc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._partColor=void 0,this._isDisabled=void 0,this._isHC=void 0,this._isSelected=void 0,this._notifier=void 0,this._partColor=e,this._isDisabled=t,this._isHC=this._partColor.clubLevel>0,this._isSelected=!1}dispose(){this._partColor=null}get partColor(){return this._partColor}get color(){return a.eb.int2rgb(this._partColor.rgb)}get isDisabled(){return this._isDisabled}get isHC(){return this._isHC}get isSelected(){return this._isSelected}set isSelected(e){this._isSelected=e,this.notify&&this.notify()}get notify(){return this._notifier}set notify(e){this._notifier=e}}class Gc{constructor(){this._data=void 0,this._colors=void 0,this._gender="M",this._direction=Gc.DEFAULT_DIRECTION,this._avatarEffectType=-1,this._notifier=null}loadAvatarData(e,t){this._data=new Map,this._colors=new Map,this._gender=t,this.parseFigureString(e),this.updateView()}parseFigureString(e){if(!e)return;const t=e.split(".");if(t&&t.length)for(const s of t){const e=s.split("-");if(!e.length)continue;const t=e[0],n=parseInt(e[1]),r=[];let c=2;for(;c<e.length;)r.push(parseInt(e[c])),c++;r.length||r.push(0),this.savePartSetId(t,n,!1),this.savePartSetColourId(t,r,!1)}}getPartSetId(e){const t=this._data.get(e);return void 0!==t?t:-1}getColorIds(e){const t=this._colors.get(e);return void 0!==t?t:[qc.avatarSetFirstSelectableColor(e)]}getFigureString(){let e="";const t=[];for(const[n,r]of this._data.entries()){const e=this._colors.get(n);let s=n+"-"+r;if(e&&e.length){let t=0;for(;t<e.length;)s=s+"-"+e[t],t++}t.push(s)}let s=0;for(;s<t.length;)e+=t[s],s<t.length-1&&(e+="."),s++;return e}savePartData(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.savePartSetId(e,t,n),this.savePartSetColourId(e,s,n)}savePartSetId(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(e){case Gc.FACE:case Gc.HAIR:case Gc.HAT:case Gc.HEAD_ACCESSORIES:case Gc.EYE_ACCESSORIES:case Gc.FACE_ACCESSORIES:case Gc.SHIRT:case Gc.JACKET:case Gc.CHEST_ACCESSORIES:case Gc.CHEST_PRINTS:case Gc.TROUSERS:case Gc.SHOES:case Gc.TROUSER_ACCESSORIES:t>=0?this._data.set(e,t):this._data.delete(e)}s&&this.updateView()}savePartSetColourId(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(e){case Gc.FACE:case Gc.HAIR:case Gc.HAT:case Gc.HEAD_ACCESSORIES:case Gc.EYE_ACCESSORIES:case Gc.FACE_ACCESSORIES:case Gc.SHIRT:case Gc.JACKET:case Gc.CHEST_ACCESSORIES:case Gc.CHEST_PRINTS:case Gc.TROUSERS:case Gc.SHOES:case Gc.TROUSER_ACCESSORIES:this._colors.set(e,t)}s&&this.updateView()}getFigureStringWithFace(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s="";const n=[Gc.FACE],r=[];for(const i of n){const s=this._colors.get(i);if(!s)continue;let n=this._data.get(i);i===Gc.FACE&&t&&(n=e);let c=i+"-"+n;if(n>=0){let e=0;for(;e<s.length;)c=c+"-"+s[e],e++}r.push(c)}let c=0;for(;c<r.length;)s+=r[c],c<r.length-1&&(s+="."),c++;return s}updateView(){this.notify&&this.notify()}get gender(){return this._gender}get direction(){return this._direction}set direction(e){this._direction=e,this.updateView()}set avatarEffectType(e){this._avatarEffectType=e}get avatarEffectType(){return this._avatarEffectType}get notify(){return this._notifier}set notify(e){this._notifier=e}}Gc.DEFAULT_DIRECTION=4,Gc.MALE="M",Gc.FEMALE="F",Gc.UNISEX="U",Gc.SCALE="h",Gc.STD="std",Gc.DEFAULT_FRAME="0",Gc.FACE="hd",Gc.HAIR="hr",Gc.HAT="ha",Gc.HEAD_ACCESSORIES="he",Gc.EYE_ACCESSORIES="ea",Gc.FACE_ACCESSORIES="fa",Gc.JACKET="cc",Gc.SHIRT="ch",Gc.CHEST_ACCESSORIES="ca",Gc.CHEST_PRINTS="cp",Gc.TROUSERS="lg",Gc.SHOES="sh",Gc.TROUSER_ACCESSORIES="wa",Gc.SET_TYPES=[Gc.FACE,Gc.HAIR,Gc.HAT,Gc.HEAD_ACCESSORIES,Gc.EYE_ACCESSORIES,Gc.FACE_ACCESSORIES,Gc.JACKET,Gc.SHIRT,Gc.CHEST_ACCESSORIES,Gc.CHEST_PRINTS,Gc.TROUSERS,Gc.SHOES,Gc.TROUSERS];class Wc{constructor(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._renderManager=void 0,this._partSet=void 0,this._partColors=void 0,this._useColors=void 0,this._isDisabled=void 0,this._thumbContainer=void 0,this._imageUrl=void 0,this._maxColorIndex=void 0,this._isValidFigure=void 0,this._isHC=void 0,this._isSellable=void 0,this._isClear=void 0,this._isSelected=void 0,this._disposed=void 0,this._isInitalized=void 0,this._notifier=void 0,this._renderManager=f(),this._partSet=e,this._partColors=t,this._useColors=s,this._isDisabled=n,this._thumbContainer=null,this._imageUrl=null,this._maxColorIndex=0,this._isValidFigure=!1,this._isHC=!1,this._isSellable=!1,this._isClear=!1,this._isSelected=!1,this._disposed=!1,this._isInitalized=!1,e){const t=e.parts;for(const e of t)this._maxColorIndex=Math.max(this._maxColorIndex,e.colorLayerIndex)}}init(){this._isInitalized||(this._isInitalized=!0,this.update())}dispose(){this._disposed||(this._renderManager=null,this._partSet=null,this._partColors=null,this._imageUrl=null,this._disposed=!0,this._isInitalized=!1,this._thumbContainer&&(this._thumbContainer.destroy(),this._thumbContainer=null))}update(){this.updateThumbVisualization()}analyzeFigure(){if(!this._renderManager||!this._partSet||!this._partSet.parts||!this._partSet.parts.length)return!1;const e=this._renderManager.createFigureContainer(this.partSet.type+"-"+this.partSet.id);return this._renderManager.isFigureContainerReady(e)?(this._isValidFigure=!0,!0):(this._renderManager.downloadAvatarFigure(e,this),!1)}renderThumb(){if(!this._renderManager||!this._partSet)return null;if(!this._isValidFigure&&!this.analyzeFigure())return null;const e=this._partSet.parts.concat().sort(this.sortByDrawOrder),t=new a.Ke;for(const s of e){if(!s)continue;let e=null,n=0,r=!1;for(;!r&&n<Wc.THUMB_DIRECTIONS.length;){const t=Gc.SCALE+"_"+Gc.STD+"_"+s.type+"_"+s.id+"_"+Wc.THUMB_DIRECTIONS[n]+"_"+Gc.DEFAULT_FRAME;e=this._renderManager.getAssetByName(t),e&&e.texture?r=!0:n++}if(!r)continue;const c=e.offsetX,i=e.offsetY;let o=null;if(this._useColors&&s.colorLayerIndex>0){const e=this._partColors[s.colorLayerIndex-1];e&&(o=e)}const l=new a.Se(e.texture);l.position.set(c,i),o&&(l.tint=o.rgb),t.addChild(l)}return t}updateThumbVisualization(){if(!this._isInitalized)return;let e=this._thumbContainer;e||(e=this.renderThumb()),e&&(this._partSet?(this._isHC=this._partSet.clubLevel>0,this._isSellable=this._partSet.isSellable):(this._isHC=!1,this._isSellable=!1),this._isDisabled&&this.setAlpha(e,.2),this._imageUrl=a.Jh.generateImageUrl(e),this.notify&&this.notify())}setAlpha(e,t){return e.filters=[Wc.ALPHA_FILTER],e}sortByDrawOrder(e,t){const s=Wc.DRAW_ORDER.indexOf(e.type),n=Wc.DRAW_ORDER.indexOf(t.type);return s<n?-1:s>n?1:e.index<t.index?-1:e.index>t.index?1:0}resetFigure(e){this.analyzeFigure()&&this.update()}get disposed(){return this._disposed}get id(){return this._partSet?this._partSet.id:-1}get partSet(){return this._partSet}set partColors(e){this._partColors=e,this.update()}get isDisabled(){return this._isDisabled}set thumbContainer(e){this._thumbContainer=e,this.update()}get imageUrl(){return this._imageUrl}get maxColorIndex(){return this._maxColorIndex}get isHC(){return this._isHC}get isSellable(){return this._isSellable}get isClear(){return this._isClear}set isClear(e){this._isClear=e}get isSelected(){return this._isSelected}set isSelected(e){this._isSelected=e,this.notify&&this.notify()}get notify(){return this._notifier}set notify(e){this._notifier=e}}Wc.ALPHA_FILTER=new a.Ie(.2),Wc.THUMB_DIRECTIONS=[2,6,0,4,3,1],Wc.DRAW_ORDER=[a.p.LEFT_HAND_ITEM,a.p.LEFT_HAND,a.p.LEFT_SLEEVE,a.p.LEFT_COAT_SLEEVE,a.p.BODY,a.p.SHOES,a.p.LEGS,a.p.CHEST,a.p.CHEST_ACCESSORY,a.p.COAT_CHEST,a.p.CHEST_PRINT,a.p.WAIST_ACCESSORY,a.p.RIGHT_HAND,a.p.RIGHT_SLEEVE,a.p.RIGHT_COAT_SLEEVE,a.p.HEAD,a.p.FACE,a.p.EYES,a.p.HAIR,a.p.HAIR_BIG,a.p.FACE_ACCESSORY,a.p.EYE_ACCESSORY,a.p.HEAD_ACCESSORY,a.p.HEAD_ACCESSORY_EXTRA,a.p.RIGHT_HAND_ITEM];class Vc{constructor(e,t,s){this._name=void 0,this._parts=void 0,this._palettes=void 0,this._selectedPartIndex=-1,this._paletteIndexes=void 0,this._name=e,this._parts=t,this._palettes=s,this._selectedPartIndex=-1}static defaultColorId(e,t){if(!e||!e.length)return-1;let s=0;for(;s<e.length;){const n=e[s];if(n.partColor&&n.partColor.clubLevel<=t)return n.partColor.id;s++}return-1}init(){for(const e of this._parts)e&&e.init()}dispose(){if(this._parts){for(const e of this._parts)e.dispose();this._parts=null}if(this._palettes){for(const e of this._palettes)for(const t of e)t.dispose();this._palettes=null}this._selectedPartIndex=-1,this._paletteIndexes=null}selectPartId(e){if(!this._parts)return;let t=0;for(;t<this._parts.length;){if(this._parts[t].id===e)return void this.selectPartIndex(t);t++}}selectColorIds(e){if(!e||!this._palettes)return;this._paletteIndexes=new Array(e.length);let t=0;for(;t<this._palettes.length;){const s=this.getPalette(t);if(s){let n=0;if(e.length>t)n=e[t];else{const e=s[0];e&&e.partColor&&(n=e.partColor.id)}let r=0;for(;r<s.length;){const e=s[r];e.partColor.id===n?(this._paletteIndexes[t]=r,e.isSelected=!0):e.isSelected=!1,r++}}t++}this.updatePartColors()}selectPartIndex(e){if(!this._parts)return null;if(this._selectedPartIndex>=0&&this._parts.length>this._selectedPartIndex){const e=this._parts[this._selectedPartIndex];e&&(e.isSelected=!1)}if(this._parts.length>e){const t=this._parts[e];if(t)return t.isSelected=!0,this._selectedPartIndex=e,t}return null}selectColorIndex(e,t){const s=this.getPalette(t);if(!s)return null;if(s.length<=e)return null;this.deselectColorIndex(this._paletteIndexes[t],t),this._paletteIndexes[t]=e;const n=s[e];return n?(n.isSelected=!0,this.updatePartColors(),n):null}getCurrentColorIndex(e){return this._paletteIndexes[e]}deselectColorIndex(e,t){const s=this.getPalette(t);if(!s)return;if(s.length<=e)return;const n=s[e];n&&(n.isSelected=!1)}getSelectedColorIds(){if(!this._paletteIndexes||!this._paletteIndexes.length)return null;if(!this._palettes||!this._palettes.length)return null;const e=this._palettes[0];if(!e||!e.length)return null;const t=e[0];if(!t||!t.partColor)return null;const s=t.partColor.id,n=[];let r=0;for(;r<this._paletteIndexes.length;){const e=this._palettes[r];if(e&&!(e.length<=r))if(e.length>this._paletteIndexes[r]){const t=e[this._paletteIndexes[r]];t&&t.partColor?n.push(t.partColor.id):n.push(s)}else n.push(s);r++}const c=this.getCurrentPart();return c?n.slice(0,Math.max(c.maxColorIndex,1)):null}getSelectedColors(){const e=[];let t=0;for(;t<this._paletteIndexes.length;){const s=this.getSelectedColor(t);s?e.push(s.partColor):e.push(null),t++}return e}getSelectedColor(e){const t=this.getPalette(e);return!t||t.length<=this._paletteIndexes[e]?null:t[this._paletteIndexes[e]]}getSelectedColorId(e){const t=this.getSelectedColor(e);return t&&t.partColor?t.partColor.id:0}getPalette(e){return!this._paletteIndexes||!this._palettes||this._palettes.length<=e?null:this._palettes[e]}getCurrentPart(){return this._parts[this._selectedPartIndex]}updatePartColors(){const e=this.getSelectedColors();for(const t of this._parts)t&&(t.partColors=e)}hasClubSelectionsOverLevel(e){let t=!1;const s=this.getSelectedColors();if(s){let n=0;for(;n<s.length;){const r=s[n];r&&r.clubLevel>e&&(t=!0),n++}}const n=this.getCurrentPart();if(n&&n.partSet){const s=n.partSet;s&&s.clubLevel>e&&(t=!0)}return t}hasInvalidSelectedItems(e){const t=this.getCurrentPart();if(!t)return!1;const s=t.partSet;return s&&s.isSellable?e.indexOf(s.id)>-1:void 0}stripClubItemsOverLevel(e){const t=this.getCurrentPart();if(t&&t.partSet){if(t.partSet.clubLevel>e){const e=this.selectPartIndex(0);return e&&!e.partSet&&this.selectPartIndex(1),!0}}return!1}stripClubColorsOverLevel(e){const t=[],s=this.getSelectedColors(),n=this.getPalette(0);let r=!1;const c=Vc.defaultColorId(n,e);if(-1===c)return!1;let i=0;for(;i<s.length;){const n=s[i];n?n.clubLevel>e?(t.push(c),r=!0):t.push(n.id):(t.push(c),r=!0),i++}return r&&this.selectColorIds(t),r}get name(){return this._name}get parts(){return this._parts}get selectedPartIndex(){return this._selectedPartIndex}}class qc{static getGender(e){switch(e){case Gc.MALE:case"m":case"M":e=Gc.MALE;break;case Gc.FEMALE:case"f":case"F":e=Gc.FEMALE;break;default:e=Gc.MALE}return e}static hasFigureSetId(e){return this.FIGURE_SET_IDS.indexOf(e)>=0}static createCategory(e,t){if(!e||!t||!this.CURRENT_FIGURE)return null;const s=[],n=[];let r=0;for(;r<this.MAX_PALETTES;)n.push([]),r++;const c=I(t);if(!c)return null;const i=x(c.paletteID);if(!i)return null;let a=this.CURRENT_FIGURE.getColorIds(t);a||(a=[]);const o=new Array(a.length),l=this.clubItemsDimmed,u=Q();for(const b of i.colors.getValues())if(b.isSelectable&&(l||u>=b.clubLevel)){let e=0;for(;e<this.MAX_PALETTES;){const t=u<b.clubLevel,s=new Bc(b,t);n[e].push(s),e++}if(t!==Gc.FACE){let e=0;for(;e<a.length;)b.id===a[e]&&(o[e]=b),e++}}let d=[];d=l?f().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,2):f().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,u);if(-1===d.indexOf(t)){const e=new Wc(null,null,!1);e.isClear=!0,s.push(e)}const h=t!==Gc.FACE,j=c.partSets;for(r=j.length-1;r>=0;){const e=j.getWithIndex(r);let t=!1;if((e.gender===Gc.UNISEX||e.gender===this.CURRENT_FIGURE.gender)&&(t=!0),e.isSelectable&&t&&(l||u>=e.clubLevel)){const t=u<e.clubLevel;let n=!0;e.isSellable&&(n=this.hasFigureSetId(e.id)),n&&s.push(new Wc(e,o,h,t))}r--}for(s.sort(this.clubItemsFirst?this.clubSorter:this.noobSorter),r=0;r<this.MAX_PALETTES;)n[r].sort(this.colorSorter),r++;return new Vc(t,s,n)}static clubSorter(e,t){const s=e.partSet?e.partSet.clubLevel:9999999999,n=t.partSet?t.partSet.clubLevel:9999999999,r=!!e.partSet&&e.partSet.isSellable,c=!!t.partSet&&t.partSet.isSellable;return r&&!c?1:c&&!r||s>n?-1:s<n?1:e.partSet.id>t.partSet.id?-1:e.partSet.id<t.partSet.id?1:0}static colorSorter(e,t){const s=e.partColor?e.partColor.clubLevel:-1,n=t.partColor?t.partColor.clubLevel:-1;return s<n?-1:s>n?1:e.partColor.index<t.partColor.index?-1:e.partColor.index>t.partColor.index?1:0}static noobSorter(e,t){const s=e.partSet?e.partSet.clubLevel:-1,n=t.partSet?t.partSet.clubLevel:-1,r=!!e.partSet&&e.partSet.isSellable,c=!!t.partSet&&t.partSet.isSellable;return r&&!c?1:c&&!r||s<n?-1:s>n?1:e.partSet.id<t.partSet.id?-1:e.partSet.id>t.partSet.id?1:0}static avatarSetFirstSelectableColor(e){const t=I(e);if(!t)return-1;const s=x(t.paletteID);if(!s)return-1;for(const n of s.colors.getValues())if(n.isSelectable&&!(Q()<n.clubLevel))return n.id;return-1}static get clubItemsFirst(){return N("avatareditor.show.clubitems.first",!0)}static get clubItemsDimmed(){return N("avatareditor.show.clubitems.dimmed",!0)}}qc.MAX_PALETTES=2,qc.CURRENT_FIGURE=null,qc.FIGURE_SET_IDS=[],qc.BOUND_FURNITURE_NAMES=[];class zc{constructor(){this._categories=void 0,this._isInitalized=void 0,this._maxPaletteCount=void 0,this._disposed=void 0,this._isInitalized=!1,this._maxPaletteCount=0}dispose(){this._categories=null,this._disposed=!0}get disposed(){return this._disposed}init(){this._categories||(this._categories=new Map)}reset(){if(this._isInitalized=!1,this._categories)for(const e of this._categories.values())e&&e.dispose();this._categories=new Map}addCategory(e){let t=this._categories.get(e);t||(t=qc.createCategory(this,e),t&&(this._categories.set(e,t),this.updateSelectionsFromFigure(e)))}updateSelectionsFromFigure(e){const t=this._categories.get(e);if(!t)return;const s=qc.CURRENT_FIGURE.getPartSetId(e);let n=qc.CURRENT_FIGURE.getColorIds(e);n||(n=[]),t.selectPartId(s),t.selectColorIds(n)}hasClubSelectionsOverLevel(e){if(!this._categories)return!1;for(const t of this._categories.values())if(t&&t.hasClubSelectionsOverLevel(e))return!0;return!1}hasInvalidSelectedItems(e){if(!this._categories)return!1;for(const t of this._categories.values())if(t.hasInvalidSelectedItems(e))return!0;return!1}stripClubItemsOverLevel(e){if(!this._categories)return!1;let t=!1;for(const[s,n]of this._categories.entries()){let r=!1;if(n.stripClubItemsOverLevel(e)&&(r=!0),n.stripClubColorsOverLevel(e)&&(r=!0),r){const e=n.getCurrentPart();e&&qc.CURRENT_FIGURE&&qc.CURRENT_FIGURE.savePartData(s,e.id,n.getSelectedColorIds(),!0),t=!0}}return t}stripInvalidSellableItems(){if(!this._categories)return!1;let e=!1;for(const[t,s]of this._categories.entries()){if(!1){const n=s.getCurrentPart();n&&qc.CURRENT_FIGURE&&qc.CURRENT_FIGURE.savePartData(t,n.id,s.getSelectedColorIds(),!0),e=!0}}return e}selectPart(e,t){const s=this._categories.get(e);if(!s)return;const n=s.selectedPartIndex;s.selectPartIndex(t);const r=s.getCurrentPart();r&&(r.isDisabled?s.selectPartIndex(n):(this._maxPaletteCount=r.maxColorIndex,qc.CURRENT_FIGURE.savePartData(e,r.id,s.getSelectedColorIds(),!0)))}selectColor(e,t,s){const n=this._categories.get(e);if(!n)return;const r=n.getCurrentColorIndex(s);n.selectColorIndex(t,s);n.getSelectedColor(s).isDisabled?n.selectColorIndex(r,s):qc.CURRENT_FIGURE.savePartSetColourId(e,n.getSelectedColorIds(),!0)}getCategoryData(e){return this._isInitalized||this.init(),this._categories?this._categories.get(e):null}get categories(){return this._categories}get canSetGender(){return!1}get maxPaletteCount(){return this._maxPaletteCount||1}set maxPaletteCount(e){this._maxPaletteCount=e}get name(){return null}}class Yc extends zc{constructor(){super(...arguments),this._imageCallBackHandled=!1}init(){super.init(),this.addCategory(Gc.FACE),this._isInitalized=!0}selectColor(e,t,s){super.selectColor(e,t,s),this.updateSelectionsFromFigure(Gc.FACE)}updateSelectionsFromFigure(e){if(!this._categories||!qc.CURRENT_FIGURE)return;const t=this._categories.get(e);if(!t)return;const s=qc.CURRENT_FIGURE.getPartSetId(e);let n=qc.CURRENT_FIGURE.getColorIds(e);n||(n=[]),t.selectPartId(s),t.selectColorIds(n);for(const r of t.parts){const e=t=>{const s=qc.CURRENT_FIGURE.getFigureStringWithFace(r.id),n=f().createAvatarImage(s,a.q.LARGE,null,{resetFigure:e,dispose:null,disposed:!1}),c=n.getImageAsSprite(a.r.HEAD);c&&(c.y=10,r.thumbContainer=c,setTimeout((()=>n.dispose()),0))};e(null)}}get canSetGender(){return!0}get name(){return a.m.GENERIC}}function Kc(e){const t=e.parts;let s=0;for(const n of t)s=Math.max(s,n.colorLayerIndex);return s}function Qc(e,t){return t=t.filter((t=>-1===e.indexOf(t))),[...e,...gs.getRandomElements(t,gs.getRandomNumber(t.length)+1)]}function $c(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!e)return null;const r=e.partSets.getValues().filter((e=>!e.isSelectable||"U"!==e.gender&&e.gender!==t||e.clubLevel>s||e.isSellable&&-1===n.indexOf(e.id)?null:e));return r&&r.length?gs.getRandomElement(r):null}function Xc(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e)return[];const n=e.colors.getValues().filter((e=>!e.isSelectable||e.clubLevel>s?null:e));return n&&n.length?gs.getRandomElements(n,Kc(t)):null}class Jc extends zc{init(){super.init(),this.addCategory(Gc.HAIR),this.addCategory(Gc.HAT),this.addCategory(Gc.HEAD_ACCESSORIES),this.addCategory(Gc.EYE_ACCESSORIES),this.addCategory(Gc.FACE_ACCESSORIES),this._isInitalized=!0}get name(){return a.m.HEAD}}class Zc extends zc{init(){super.init(),this.addCategory(Gc.TROUSERS),this.addCategory(Gc.SHOES),this.addCategory(Gc.TROUSER_ACCESSORIES),this._isInitalized=!0}get name(){return a.m.LEGS}}class ei extends zc{init(){super.init(),this.addCategory(Gc.SHIRT),this.addCategory(Gc.CHEST_PRINTS),this.addCategory(Gc.JACKET),this.addCategory(Gc.CHEST_ACCESSORIES),this._isInitalized=!0}get name(){return a.m.TORSO}}const ti=e=>{const{icon:t=null,selected:s=!1,classNames:n=[],children:r=null,...i}=e,a=Object(c.useMemo)((()=>{const e=["nitro-avatar-editor-spritesheet"];return t&&t.length&&e.push(t+"-icon"),s&&e.push("selected"),n.length&&e.push(...n),e}),[t,s,n]);return Object(Cr.jsx)(Sr,{classNames:a,...i})},si=e=>{const{figureData:t=null}=e,[s,n]=Object(c.useState)(-1),r=Object(c.useCallback)((()=>{n((e=>e+1))}),[]),i=Object(c.useCallback)((e=>{e<a.l.MIN_DIRECTION&&(e=a.l.MAX_DIRECTION+(e+1)),e>a.l.MAX_DIRECTION&&(e-=a.l.MAX_DIRECTION+1),t.direction=e}),[t]);return Object(c.useEffect)((()=>{if(t)return t.notify=r,()=>{t.notify=null}}),[t,r]),Object(Cr.jsxs)(rc,{className:"figure-preview-container",overflow:"hidden",position:"relative",children:[Object(Cr.jsx)(Xr,{figure:t.getFigureString(),direction:t.direction,scale:2}),Object(Cr.jsx)(ti,{className:"avatar-spotlight",icon:"spotlight"}),Object(Cr.jsx)(Sr,{className:"avatar-shadow"}),Object(Cr.jsxs)(Sr,{className:"arrow-container",children:[Object(Cr.jsx)(ti,{pointer:!0,icon:"arrow-left",onClick:e=>i(t.direction+1)}),Object(Cr.jsx)(ti,{pointer:!0,icon:"arrow-right",onClick:e=>i(t.direction-1)})]})]})},ni=e=>{const{partItem:t=null,children:s=null,...n}=e,[r,i]=Object(c.useState)(-1),a=Object(c.useCallback)((()=>{i((e=>e+1))}),[]);return Object(c.useEffect)((()=>(t.notify=a,()=>{t.notify=null})),[t,a]),Object(Cr.jsxs)(lc,{itemImage:t.isClear?void 0:t.imageUrl,itemActive:t.isSelected,...n,children:[t.isHC&&Object(Cr.jsx)(ec,{className:"position-absolute end-1 bottom-1",type:"hc"}),t.isClear&&Object(Cr.jsx)(ti,{icon:"clear"}),t.isSellable&&Object(Cr.jsx)(ti,{icon:"sellable",position:"absolute",className:"end-1 bottom-1"}),s]})},ri=e=>{const{model:t=null,category:s=null,setMaxPaletteCount:n=null}=e,r=Object(c.useCallback)((e=>{const r=s.parts.indexOf(e);if(-1===r)return;t.selectPart(s.name,r);const c=s.getCurrentPart();n(c.maxColorIndex||1)}),[t,s,n]);return Object(Cr.jsx)(Ar,{columnCount:3,columnMinHeight:50,children:s.parts.length>0&&s.parts.map(((e,t)=>Object(Cr.jsx)(ni,{partItem:e,onClick:t=>r(e)},t)))})},ci=e=>{const{colorItem:t=null,children:s=null,...n}=e,[r,i]=Object(c.useState)(-1),a=Object(c.useCallback)((()=>{i((e=>e+1))}),[]);return Object(c.useEffect)((()=>(t.notify=a,()=>t.notify=null))),Object(Cr.jsxs)(lc,{itemHighlight:!0,itemColor:t.color,itemActive:t.isSelected,className:"clear-bg",...n,children:[t.isHC&&Object(Cr.jsx)(ec,{className:"position-absolute end-1 bottom-1",type:"hc"}),s]})},ii=e=>{const{model:t=null,category:s=null,paletteSet:n=[],paletteIndex:r=-1}=e,i=Object(c.useCallback)((e=>{const c=n.indexOf(e);-1!==c&&t.selectColor(s.name,c,r)}),[t,s,n,r]);return Object(Cr.jsx)(Ar,{gap:1,columnCount:5,columnMinWidth:30,children:n.length>0&&n.map(((e,t)=>Object(Cr.jsx)(ci,{colorItem:e,onClick:t=>i(e)},t)))})},ai=e=>{const{model:t=null,gender:s=null,setGender:n=null}=e,[r,i]=Object(c.useState)(null),[a,o]=Object(c.useState)(1),l=Object(c.useCallback)((e=>{const s=t.categories.get(e);if(s){s.init(),i(s);for(const e of s.parts)if(e&&e.isSelected){o(e.maxColorIndex||1);break}}}),[t]);return Object(c.useEffect)((()=>{t.init();for(const e of t.categories.keys()){l(e);break}}),[t,l]),t&&r?Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsxs)(rc,{size:2,children:[t.canSetGender&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(yr,{center:!0,pointer:!0,className:"category-item",onClick:e=>n(Gc.MALE),children:Object(Cr.jsx)(ti,{icon:"male",selected:s===Gc.MALE})}),Object(Cr.jsx)(yr,{center:!0,pointer:!0,className:"category-item",onClick:e=>n(Gc.FEMALE),children:Object(Cr.jsx)(ti,{icon:"female",selected:s===Gc.FEMALE})})]}),!t.canSetGender&&t.categories&&t.categories.size>0&&Array.from(t.categories.keys()).map((e=>{const s=t.categories.get(e);return Object(Cr.jsx)(yr,{center:!0,pointer:!0,className:"category-item",onClick:t=>l(e),children:Object(Cr.jsx)(ti,{icon:s.name,selected:r===s})},e)}))]}),Object(Cr.jsx)(rc,{size:5,overflow:"hidden",children:Object(Cr.jsx)(ri,{model:t,category:r,setMaxPaletteCount:o})}),Object(Cr.jsxs)(rc,{size:5,overflow:"hidden",children:[a>=1&&Object(Cr.jsx)(ii,{model:t,category:r,paletteSet:r.getPalette(0),paletteIndex:0}),2===a&&Object(Cr.jsx)(ii,{model:t,category:r,paletteSet:r.getPalette(1),paletteIndex:1})]})]}):null},oi=e=>{const{figureData:t=null,savedFigures:s=[],setSavedFigures:n=null,loadAvatarInEditor:r=null}=e,i=Object(c.useCallback)((e=>{if(e>=s.length||e<0)return;const[t,n]=s[e];r(t.getFigureString(),n)}),[s,r]),o=Object(c.useCallback)((e=>{if(!t||e>=s.length||e<0)return;const r=[...s],c=t.getFigureString(),i=t.gender;r[e]=[f().createFigureContainer(c),i],n(r),Ln(new a.vh(e+1,c,i))}),[t,s,n]),l=Object(c.useMemo)((()=>{if(!s||!s.length)return[];const e=[];return s.forEach(((t,s)=>{let[n,r]=t,c=0;n&&(c=f().getFigureClubLevel(n,r)),e.push(Object(Cr.jsxs)(lc,{position:"relative",overflow:"hidden",className:"nitro-avatar-editor-wardrobe-figure-preview",children:[n&&Object(Cr.jsx)(Xr,{figure:n.getFigureString(),gender:r,direction:2}),Object(Cr.jsx)(Sr,{className:"avatar-shadow"}),c>0&&Object(Cr.jsx)(ec,{className:"position-absolute top-1 start-1",type:"hc"}),Object(Cr.jsxs)(yr,{gap:1,className:"button-container",children:[Object(Cr.jsx)(wr,{variant:"link",fullWidth:!0,onClick:e=>o(s),children:$e("avatareditor.wardrobe.save")}),n&&Object(Cr.jsx)(wr,{variant:"link",fullWidth:!0,onClick:e=>i(s),disabled:c>Q(),children:$e("generic_usable.button.use")})]})]},s))})),e}),[s,o,i]);return Object(Cr.jsx)(Ar,{columnCount:5,columnMinWidth:80,columnMinHeight:140,children:l})},li=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)([]),[g,O]=Object(c.useState)([]),[m,p]=Object(c.useState)([]),[_,x]=Object(c.useState)(!1),[I,T]=Object(c.useState)(null),[C,S]=Object(c.useState)(null),[v,R]=Object(c.useState)(!0),[A,w]=Object(c.useState)(!1),k=Object(c.useMemo)((()=>N("avatar.wardrobe.max.slots",10)),[]),D=Object(c.useCallback)((e=>{const t=e.getParser();b(t.figureSetIds),O(t.boundsFurnitureNames)}),[]);Je(a.tb,D);const P=Object(c.useCallback)((e=>{const t=e.getParser(),s=[];let n=0;for(;n<k;)s.push([null,null]),n++;for(let[r,[c,i]]of t.looks.entries()){const e=f().createFigureContainer(c);s[r-1]=[e,i]}p(s)}),[k]);Je(a.Ki,P);const U=Object(c.useCallback)((e=>{l&&h(l.get(e))}),[l]),L=Object(c.useCallback)((()=>{const e=new Map;e.set(a.m.GENERIC,new Yc),e.set(a.m.HEAD,new Jc),e.set(a.m.TORSO,new ei),e.set(a.m.LEGS,new Zc),u(e)}),[]),M=Object(c.useCallback)((()=>{const e=new Map,t=new Gc,s=new Gc;t.loadAvatarData("hr-100.hd-180-7.ch-215-66.lg-270-79.sh-305-62.ha-1002-70.wa-2007",Gc.MALE),s.loadAvatarData("hr-515-33.hd-600-1.ch-635-70.lg-716-66-62.sh-735-68",Gc.FEMALE),e.set(Gc.MALE,t),e.set(Gc.FEMALE,s),r(e),o(e.get(Gc.MALE))}),[]),F=Object(c.useCallback)((function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t=qc.getGender(t);let r=i;t!==r.gender&&(r=n.get(t)),e!==r.getFigureString()&&r.loadAvatarData(e,t),r!==i&&o(r),s&&(T(i.getFigureString()),S(i.gender))}),[n,i]),H=Object(c.useCallback)((e=>{switch(e){case Hc.ACTION_CLEAR:return F(i.getFigureStringWithFace(0,!1),i.gender,!1),void L();case Hc.ACTION_RESET:return F(I,C),void L();case Hc.ACTION_RANDOMIZE:const e=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];const c=f().structure,i=new a.o(""),o=Qc(c.getMandatorySetTypeIds(t,s),Gc.SET_TYPES);for(const a of r){const t=e.getPartSetId(a),s=e.getColorIds(a);i.updatePart(a,t,s)}for(const a of o){if(i.hasPartType(a))continue;const e=c.figureData.getSetType(a),r=$c(e,t,s,n);if(!r)continue;let o=[];r.isColorable&&(o=Xc(c.figureData.getPalette(e.paletteID),r,s).map((e=>e.id))),i.updatePart(e.type,r.id,o)}return i.getFigureString()}(i,i.gender,Q(),j,[Gc.FACE]);return F(e,i.gender,!1),void L();case Hc.ACTION_SAVE:return Ln(new a.ui(i.gender,i.getFigureString())),void s(!1)}}),[i,I,C,j,F,L]),B=Object(c.useCallback)((e=>{e=qc.getGender(e),o(n.get(e))}),[n]),G=Object(c.useCallback)((e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e))}}),[]);return Object(c.useEffect)((()=>{const e={linkReceived:G,eventUrlPrefix:"avatar-editor/"};return E(e),()=>y(e)}),[G]),Object(c.useEffect)((()=>{p(new Array(k))}),[k]),Object(c.useEffect)((()=>{_&&(h(null),Ln(new a.wc))}),[_]),Object(c.useEffect)((()=>{d&&x(!1)}),[d]),Object(c.useEffect)((()=>{l&&U(a.m.GENERIC)}),[l,U]),Object(c.useEffect)((()=>{if(i)return qc.CURRENT_FIGURE=i,L(),()=>qc.CURRENT_FIGURE=null}),[i,L]),Object(c.useEffect)((()=>(qc.FIGURE_SET_IDS=j,qc.BOUND_FURNITURE_NAMES=g,L(),()=>{qc.FIGURE_SET_IDS=null,qc.BOUND_FURNITURE_NAMES=null})),[j,g,L]),Object(c.useEffect)((()=>{if(t)return n?void 0:(M(),void w(!0))}),[t,n,M]),Object(c.useEffect)((()=>{t&&A&&v&&(F(K().figure,K().gender),R(!1))}),[t,A,v,F]),Object(c.useEffect)((()=>{if(!t)return()=>{R(!0)}}),[t]),t&&i?Object(Cr.jsxs)($r,{uniqueKey:"avatar-editor",className:"nitro-avatar-editor",children:[Object(Cr.jsx)(Wr,{headerText:$e("avatareditor.title"),onCloseClick:e=>s(!1)}),Object(Cr.jsxs)(Nc,{children:[l&&l.size>0&&Array.from(l.keys()).map((e=>{const t=d&&d.name===e;return Object(Cr.jsx)(Sc,{isActive:t,onClick:t=>U(e),children:$e(`avatareditor.category.${e}`)},e)})),Object(Cr.jsx)(Sc,{isActive:_,onClick:e=>x(!0),children:$e("avatareditor.category.wardrobe")})]}),Object(Cr.jsx)(Hr,{children:Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsxs)(rc,{size:9,overflow:"hidden",children:[d&&!_&&Object(Cr.jsx)(ai,{model:d,gender:i.gender,setGender:B}),_&&Object(Cr.jsx)(oi,{figureData:i,savedFigures:m,setSavedFigures:p,loadAvatarInEditor:F})]}),Object(Cr.jsxs)(rc,{size:3,overflow:"hidden",children:[Object(Cr.jsx)(si,{figureData:i}),Object(Cr.jsxs)(rc,{grow:!0,gap:1,children:[Object(Cr.jsxs)(kr,{children:[Object(Cr.jsx)(wr,{variant:"secondary",onClick:e=>H(Hc.ACTION_RESET),children:Object(Cr.jsx)(Lr.a,{icon:"undo"})}),Object(Cr.jsx)(wr,{variant:"secondary",onClick:e=>H(Hc.ACTION_CLEAR),children:Object(Cr.jsx)(Lr.a,{icon:"trash"})}),Object(Cr.jsx)(wr,{variant:"secondary",onClick:e=>H(Hc.ACTION_RANDOMIZE),children:Object(Cr.jsx)(Lr.a,{icon:"dice"})})]}),Object(Cr.jsx)(wr,{className:"w-100",variant:"success",onClick:e=>H(Hc.ACTION_SAVE),children:$e("avatareditor.save")})]})]})]})})]}):null},ui=Object(c.createContext)({cameraRoll:null,setCameraRoll:null,selectedPictureIndex:null,setSelectedPictureIndex:null}),di=e=>Object(Cr.jsx)(ui.Provider,{value:e.value,children:e.children});class hi{constructor(e,t){this.texture=e,this.imageUrl=t}}const ji=e=>{const{onClose:t=null,onEdit:s=null,onDelete:n=null}=e,{cameraRoll:r=null,setCameraRoll:i=null,selectedPictureIndex:o=-1,setSelectedPictureIndex:l=null}=Object(c.useContext)(ui),u=Object(c.useRef)(),d=o>-1?r[o]:null,h=Object(c.useCallback)((()=>{if(!u||!u.current)return null;const e=u.current.getBoundingClientRect();return new a.Qe(Math.floor(e.x),Math.floor(e.y),Math.floor(e.width),Math.floor(e.height))}),[]),j=Object(c.useCallback)((()=>{if(o>-1)return void l(-1);const e=w().createTextureFromRoom(ee().roomId,1,h()),t=[...r];t.length>=5&&(jr.simpleAlert($e("camera.full.body")),t.pop()),Ft(ps.CAMERA_SHUTTER),t.push(new hi(e,a.Jh.generateImageUrl(e))),i(t)}),[r,o,h,i,l]);return Object(Cr.jsx)(Qr,{uniqueKey:"nitro-camera-capture",children:Object(Cr.jsxs)(rc,{center:!0,className:"nitro-camera-capture",gap:0,children:[d&&Object(Cr.jsx)("img",{alt:"",className:"camera-area",src:d.imageUrl}),Object(Cr.jsxs)("div",{className:"camera-canvas drag-handler",children:[Object(Cr.jsx)("div",{className:"position-absolute header-close",onClick:t,children:Object(Cr.jsx)(Lr.a,{icon:"times"})}),!d&&Object(Cr.jsx)("div",{ref:u,className:"camera-area camera-view-finder"}),d&&Object(Cr.jsx)("div",{className:"camera-area camera-frame",children:Object(Cr.jsxs)("div",{className:"camera-frame-preview-actions w-100 position-absolute bottom-0 py-2 text-center",children:[Object(Cr.jsx)("button",{className:"btn btn-success me-3",title:$e("camera.editor.button.tooltip"),onClick:s,children:$e("camera.editor.button.text")}),Object(Cr.jsx)("button",{className:"btn btn-danger",onClick:n,children:$e("camera.delete.button.text")})]})}),Object(Cr.jsx)("div",{className:"d-flex justify-content-center",children:Object(Cr.jsx)("div",{className:"camera-button",title:$e("camera.take.photo.button.tooltip"),onClick:j})})]}),r.length>0&&Object(Cr.jsx)(yr,{gap:2,justifyContent:"center",className:"camera-roll d-flex justify-content-center py-2",children:r.map(((e,t)=>Object(Cr.jsx)("img",{alt:"",src:e.imageUrl,onClick:e=>l(t)},t)))})]})})},bi=e=>{const{base64Url:t=null,onCloseClick:s=null,onCancelClick:n=null,price:r=null}=e,[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(0),[j,b]=Object(c.useState)(!1),[g,O]=Object(c.useState)(!1),[m,p]=Object(c.useState)(0),_=Object(c.useMemo)((()=>N("camera.publish.disabled",!1)),[]),E=Object(c.useCallback)((e=>{h((e=>e+1)),O(!1)}),[]);Je(a.I,E);const f=Object(c.useCallback)((e=>{const t=e.getParser();u(t.extraDataId),p(t.secondsToWait),b(t.ok),O(!1)}),[]);Je(a.H,f);const x=Object(c.useCallback)((e=>{const t=e.getParser();o(N("camera.url")+"/"+t.url)}),[]);Je(a.J,x);const I=function(e){switch(e){case"close":return void s();case"buy":if(g)return;return O(!0),void Ln(new a.yf(""));case"publish":if(g)return;return O(!0),void Ln(new a.sf);case"cancel":return void n()}};return Object(c.useEffect)((()=>{t&&w().saveBase64AsScreenshot(t)}),[t]),r?Object(Cr.jsxs)($r,{className:"nitro-camera-checkout",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("camera.confirm_phase.title"),onCloseClick:e=>I("close")}),Object(Cr.jsxs)(Hr,{children:[Object(Cr.jsxs)(yr,{center:!0,children:[i&&i.length&&Object(Cr.jsx)(uc,{className:"picture-preview border",imageUrl:i}),(!i||!i.length)&&Object(Cr.jsx)(yr,{center:!0,className:"picture-preview border",children:Object(Cr.jsx)(Ac,{bold:!0,children:$e("camera.loading")})})]}),Object(Cr.jsxs)(yr,{justifyContent:"between",alignItems:"center",className:"bg-muted rounded p-2",children:[Object(Cr.jsxs)(rc,{size:_?10:6,gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("camera.purchase.header")}),(r.credits>0||r.duckets>0)&&Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(Ac,{children:$e("catalog.purchase.confirmation.dialog.cost")}),r.credits>0&&Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:r.credits}),Object(Cr.jsx)(ec,{type:-1})]}),r.duckets>0&&Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:r.duckets}),Object(Cr.jsx)(ec,{type:5})]})]}),d>0&&Object(Cr.jsxs)(Ac,{children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("camera.purchase.count.info")})," ",d,Object(Cr.jsx)("u",{className:"ms-1 cursor-pointer",onClick:()=>C("inventory/open"),children:$e("camera.open.inventory")})]})]}),Object(Cr.jsx)(yr,{alignItems:"center",children:Object(Cr.jsx)(wr,{variant:"success",disabled:g,onClick:e=>I("buy"),children:$e(d?"camera.buy.another.button.text":"buy")})})]}),!_&&Object(Cr.jsxs)(yr,{justifyContent:"between",alignItems:"center",className:"bg-muted rounded p-2",children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e(j?"camera.publish.successful":"camera.publish.explanation")}),Object(Cr.jsx)(Ac,{children:$e(j?"camera.publish.success.short.info":"camera.publish.detailed.explanation")}),j&&Object(Cr.jsx)("a",{href:l,rel:"noreferrer",target:"_blank",children:$e("camera.link.to.published")}),!j&&r.publishDucketPrice>0&&Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(Ac,{children:$e("catalog.purchase.confirmation.dialog.cost")}),Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:r.publishDucketPrice}),Object(Cr.jsx)(ec,{type:5})]})]}),m>0&&Object(Cr.jsx)("div",{className:"mt-1 text-center fw-bold",children:$e("camera.publish.wait",["minutes"],[Math.ceil(m/60).toString()])})]}),!j&&Object(Cr.jsx)(yr,{className:"d-flex align-items-end",children:Object(Cr.jsx)(wr,{variant:"success",disabled:g||m>0,onClick:e=>I("publish"),children:$e("camera.publish.button.text")})})]}),Object(Cr.jsx)(Ac,{center:!0,children:$e("camera.warning.disclaimer")}),Object(Cr.jsx)(yr,{justifyContent:"end",children:Object(Cr.jsx)(wr,{onClick:e=>I("cancel"),children:$e("generic.cancel")})})]})]}):null};var gi=s(16);class Oi{}Oi.COLORMATRIX="colormatrix",Oi.COMPOSITE="composite";class mi{constructor(e,t){this.effectName=e,this.thumbnailUrl=t}}const pi=e=>{const{effect:t=null,thumbnailUrl:s=null,isActive:n=!1,isLocked:r=!1,selectEffect:c=null,removeEffect:i=null}=e;return Object(Cr.jsxs)(lc,{title:$e(r?`camera.effect.required.level ${t.minLevel}`:`camera.effect.name.${t.name}`),itemActive:n,onClick:e=>!n&&c(),children:[n&&Object(Cr.jsx)(wr,{variant:"danger",className:"rounded-circle remove-effect",onClick:i,children:Object(Cr.jsx)(Lr.a,{icon:"times"})}),!r&&s&&s.length>0&&Object(Cr.jsx)("div",{className:"effect-thumbnail-image border",children:Object(Cr.jsx)("img",{alt:"",src:s})}),r&&Object(Cr.jsxs)(Ac,{center:!0,bold:!0,children:[Object(Cr.jsx)("div",{children:Object(Cr.jsx)(Lr.a,{icon:"lock"})}),t.minLevel]})]})},_i=e=>{const{myLevel:t=0,selectedEffects:s=[],effects:n=[],thumbnails:r=[],processAction:c=null}=e;return Object(Cr.jsx)(Ar,{columnCount:2,columnMinHeight:60,children:n&&n.length>0&&n.map(((e,n)=>{const i=r.find((t=>t.effectName===e.name)),a=s.findIndex((t=>t.effect.name===e.name))>-1;return Object(Cr.jsx)(pi,{effect:e,thumbnailUrl:i&&i.thumbnailUrl||null,isActive:a,isLocked:e.minLevel>t,selectEffect:()=>c("select_effect",e.name),removeEffect:()=>c("remove_effect",e.name)},n)}))})},Ei=[Oi.COLORMATRIX,Oi.COMPOSITE],fi=e=>{const{picture:t=null,availableEffects:s=null,myLevel:n=1,onClose:r=null,onCancel:i=null,onCheckout:o=null}=e,[l,u]=Object(c.useState)(Ei[0]),[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)([]),[g,O]=Object(c.useState)([]),[m,p]=Object(c.useState)(!1),_=Object(c.useMemo)((()=>s.filter((e=>e.colorMatrix))),[s]),E=Object(c.useMemo)((()=>s.filter((e=>e.texture))),[s]),f=Object(c.useCallback)((()=>l===Oi.COLORMATRIX?_:E),[l,_,E]),x=Object(c.useCallback)((e=>e&&e.length&&j&&j.length?j.findIndex((t=>t.effect.name===e)):-1),[j]),I=Object(c.useMemo)((()=>x(d)),[d,x]),C=Object(c.useMemo)((()=>d&&j[I]||null),[d,I,j]),S=Object(c.useCallback)((e=>{const t=I;-1!==t&&b((s=>{const n=[...s],r=n[t];return n[I]=new a.Sf(r.effect,e),n}))}),[I,b]),N=Object(c.useMemo)((()=>T().applyEffects(t.texture,j,m).src),[t,j,m]),v=Object(c.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case"close":return void r();case"cancel":return void i();case"checkout":return void o(N);case"change_tab":return void u(String(t));case"select_effect":{if(x(t)>=0)return;const e=s.find((e=>e.name===t));if(!e)return;return b((t=>[...t,new a.Sf(e,1)])),void h(e.name)}case"remove_effect":{let e=x(t);if(-1===e)return;return b((t=>{const s=[...t];return s.splice(e,1),s})),void(d===t&&h(null))}case"clear_effects":return h(null),void b([]);case"download":{const e=new Image;e.src=N;return void window.open("").document.write(e.outerHTML)}case"zoom":return void p(!m)}}),[m,s,d,N,x,i,o,r,p,b]);return Object(c.useEffect)((()=>{const e=[];for(const n of s)e.push(new mi(n.name,T().applyEffects(t.texture,[new a.Sf(n,1)],!1).src));O(e)}),[t,s]),Object(Cr.jsxs)($r,{className:"nitro-camera-editor",children:[Object(Cr.jsx)(Wr,{headerText:$e("camera.editor.button.text"),onCloseClick:e=>v("close")}),Object(Cr.jsx)(Nc,{children:Ei.map((e=>Object(Cr.jsx)(Sc,{isActive:l===e,onClick:t=>v("change_tab",e),children:Object(Cr.jsx)("i",{className:"icon icon-camera-"+e})},e)))}),Object(Cr.jsx)(Hr,{children:Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsx)(rc,{size:5,overflow:"hidden",children:Object(Cr.jsx)(_i,{myLevel:n,selectedEffects:j,effects:f(),thumbnails:g,processAction:v})}),Object(Cr.jsxs)(rc,{size:7,justifyContent:"between",overflow:"hidden",children:[Object(Cr.jsxs)(rc,{center:!0,children:[Object(Cr.jsx)(uc,{imageUrl:N,className:"picture-preview"}),d&&Object(Cr.jsxs)(rc,{center:!0,fullWidth:!0,gap:1,children:[Object(Cr.jsx)(Ac,{children:$e("camera.effect.name."+d)}),Object(Cr.jsx)(gi.a,{className:"nitro-slider",min:0,max:1,step:.01,value:C.alpha,onChange:e=>S(e),renderThumb:(e,t)=>Object(Cr.jsx)("div",{...e,children:t.valueNow})})]})]}),Object(Cr.jsxs)(yr,{justifyContent:"between",children:[Object(Cr.jsxs)(kr,{children:[Object(Cr.jsx)(wr,{onClick:e=>v("clear_effects"),children:Object(Cr.jsx)(Lr.a,{icon:"trash"})}),Object(Cr.jsx)(wr,{onClick:e=>v("download"),children:Object(Cr.jsx)(Lr.a,{icon:"save"})}),Object(Cr.jsx)(wr,{onClick:e=>v("zoom"),children:Object(Cr.jsx)(Lr.a,{icon:m?"search-minus":"search-plus"})})]}),Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(wr,{onClick:e=>v("cancel"),children:$e("generic.cancel")}),Object(Cr.jsx)(wr,{onClick:e=>v("checkout"),children:$e("camera.preview.button.text")})]})]})]})]})})]})},xi=e=>{const[t,s]=Object(c.useState)(0),[n,r]=Object(c.useState)([]),[i,o]=Object(c.useState)([]),[l,u]=Object(c.useState)(-1),[d,h]=Object(c.useState)(10),[j,b]=Object(c.useState)(null),[g,O]=Object(c.useState)(null),m=Object(c.useCallback)((e=>{r(Array.from(T().effects.values()))}),[]);var p,f;p=a.Rf.INITIALIZED,f=m,et(p,_().cameraManager.events,f);const x=Object(c.useCallback)((e=>{const t=e.getParser();O({credits:t.creditPrice,duckets:t.ducketPrice,publishDucketPrice:t.publishDucketPrice})}),[]);Je(a.Hd,x);const I=Object(c.useCallback)((e=>{s(0)}),[]);it(a.Pg.ENDED,I),Object(c.useEffect)((()=>{if(!T().isLoaded)return T().init(),void Ln(new a.Lf)}),[]);const C=Object(c.useCallback)((e=>{switch(e){case"close":return void s(0);case"edit":return void s(2);case"delete":return void o((e=>{const t=[...e];return t.splice(l,1),t}));case"editor_cancel":return void s(1)}}),[l]),S=Object(c.useCallback)((e=>{b(e),s(3)}),[]),N=Object(c.useCallback)((e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(1);case"hide":return void s(0);case"toggle":return void s((e=>e?0:1))}}),[]);return Object(c.useEffect)((()=>{const e={linkReceived:N,eventUrlPrefix:"camera/"};return E(e),()=>y(e)}),[N]),0===t?null:Object(Cr.jsxs)(di,{value:{cameraRoll:i,setCameraRoll:o,selectedPictureIndex:l,setSelectedPictureIndex:u},children:[1===t&&Object(Cr.jsx)(ji,{onClose:()=>C("close"),onEdit:()=>C("edit"),onDelete:()=>C("delete")}),2===t&&Object(Cr.jsx)(fi,{picture:i[l],myLevel:d,onClose:()=>C("close"),onCancel:()=>C("editor_cancel"),onCheckout:S,availableEffects:n}),3===t&&Object(Cr.jsx)(bi,{base64Url:j,onCloseClick:()=>C("close"),onCancelClick:()=>C("editor_cancel"),price:g})]})},Ii=e=>{const{itemId:t=-1,state:s=null,product:n=null,active:r=!1,onClick:c=null}=e;return Object(Cr.jsxs)(rc,{fit:!0,center:!0,pointer:!0,className:"campaign-spritesheet campaign-day-generic-bg rounded calendar-item "+(r?"active":""),onClick:()=>c(t),children:[s===m.STATE_UNLOCKED&&Object(Cr.jsx)(yr,{center:!0,className:"campaign-spritesheet unlocked-bg",children:Object(Cr.jsx)(yr,{center:!0,className:"campaign-spritesheet campaign-opened",children:n&&Object(Cr.jsx)(uc,{imageUrl:n.customImage?N("image.library.url")+n.customImage:(e=>{let t=K().getFloorItemDataByName(e),s=null;return t?s=w().getFurnitureFloorIconUrl(t.id):(t=K().getWallItemDataByName(e),t&&(s=w().getFurnitureWallIconUrl(t.id))),s})(n.productName)})})}),s!==m.STATE_UNLOCKED&&Object(Cr.jsxs)(yr,{center:!0,className:"campaign-spritesheet locked-bg",children:[s===m.STATE_LOCKED_AVAILABLE&&Object(Cr.jsx)(Sr,{className:"campaign-spritesheet available"}),(s===m.STATE_LOCKED_EXPIRED||s===m.STATE_LOCKED_FUTURE)&&Object(Cr.jsx)(Sr,{className:"campaign-spritesheet unavailable"})]})]})},Ti=e=>{const{close:t=null,campaignName:s=null,currentDay:n=null,numDays:r=null,missedDays:i=null,openedDays:a=null,openPackage:o=null,receivedProducts:l=null}=e,[u,d]=Object(c.useState)(n),[h,j]=Object(c.useState)(Math.max(0,u-1)),b=e=>a.includes(e)?m.STATE_UNLOCKED:e>n?m.STATE_LOCKED_FUTURE:i.includes(e)?m.STATE_LOCKED_EXPIRED:m.STATE_LOCKED_AVAILABLE,g=e=>{if(u!==e)d(e);else{b(e)===m.STATE_LOCKED_AVAILABLE&&o(e,!1)}};return Object(Cr.jsxs)($r,{className:"nitro-campaign-calendar",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e(`campaign.calendar.${s}.title`),onCloseClick:t}),Object(Cr.jsxs)(Hr,{children:[Object(Cr.jsxs)(Rr,{fullHeight:!1,justifyContent:"between",alignItems:"center",children:[Object(Cr.jsx)(rc,{size:1}),Object(Cr.jsx)(rc,{size:10,children:Object(Cr.jsxs)(yr,{justifyContent:"between",alignItems:"center",gap:1,children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{fontSize:3,children:$e("campaign.calendar.heading.day",["number"],[(u+1).toString()])}),Object(Cr.jsx)(Ac,{children:(e=>{switch(b(e)){case m.STATE_UNLOCKED:return $e("campaign.calendar.info.unlocked");case m.STATE_LOCKED_FUTURE:return $e("campaign.calendar.info.future");case m.STATE_LOCKED_EXPIRED:return $e("campaign.calendar.info.expired");default:return $e("campaign.calendar.info.available.desktop")}})(u)})]}),Object(Cr.jsx)("div",{children:K().isModerator&&Object(Cr.jsx)(wr,{variant:"danger",onClick:()=>{const e=u;b(e)!==m.STATE_UNLOCKED&&o(e,!0)},children:"Force open"})})]})}),Object(Cr.jsx)(rc,{size:1})]}),Object(Cr.jsxs)(yr,{fullHeight:!0,gap:2,children:[Object(Cr.jsx)(yr,{center:!0,children:Object(Cr.jsx)(Sr,{pointer:!0,className:"campaign-spritesheet prev",onClick:()=>{const e=u-1;e<0||(d(e),h>e&&j(h-1))}})}),Object(Cr.jsx)(rc,{center:!0,fullWidth:!0,children:Object(Cr.jsx)(Rr,{fit:!0,columnCount:5,gap:1,children:[...Array(5)].map(((e,t)=>{const s=h+t;return Object(Cr.jsx)(rc,{overflow:"hidden",children:Object(Cr.jsx)(Ii,{itemId:s,state:b(s),active:u===s,product:l.has(s)?l.get(s):null,onClick:g})},t)}))})}),Object(Cr.jsx)(yr,{center:!0,children:Object(Cr.jsx)(Sr,{pointer:!0,className:"campaign-spritesheet next",onClick:()=>{const e=u+1;e!==r&&(d(e),h+5<e+1&&j(h+1))}})})]})]})]})},Ci=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(new Map),[l,u]=Object(c.useState)(!1),d=Object(c.useCallback)((e=>{const t=e.getParser();t&&s(t.calendarData)}),[]);Je(a.K,d);const h=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const c=n;t.doorOpened&&(s((e=>{const t=e.clone();return t.openedDays.push(n),t})),o((e=>{const s=new Map(e);return s.set(c,new O(t.productName,t.customImage,t.furnitureClassName)),s}))),r(-1)}),[n]);Je(a.L,h);const j=Object(c.useCallback)((function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(r(e),Ln(s?new a.Ze(t.campaignName,e):new a.af(t.campaignName,e)))}),[t]),b=Object(c.useCallback)((()=>{u(!1)}),[]),g=Object(c.useCallback)((e=>{const t=e.split("/");if(!(t.length<2)&&"calendar"===t[1])u(!0)}),[]);return Object(c.useEffect)((()=>{const e={linkReceived:g,eventUrlPrefix:"openView/"};return E(e),()=>{y(e)}}),[g]),Object(Cr.jsx)(Cr.Fragment,{children:t&&l&&Object(Cr.jsx)(Ti,{close:b,campaignName:t.campaignName,currentDay:t.currentDay,numDays:t.campaignDays,openedDays:t.openedDays,missedDays:t.missedDays,openPackage:j,receivedProducts:i})})},Si=Object(c.createContext)({isVisible:null,isBusy:null,setIsBusy:null,pageId:null,currentType:null,setCurrentType:null,rootNode:null,setRootNode:null,offersToNodes:null,setOffersToNodes:null,currentPage:null,setCurrentPage:null,currentOffer:null,setCurrentOffer:null,activeNodes:null,setActiveNodes:null,searchResult:null,setSearchResult:null,frontPageItems:null,setFrontPageItems:null,roomPreviewer:null,purchaseOptions:null,setPurchaseOptions:null,catalogOptions:null,setCatalogOptions:null,resetState:null,getNodesByOfferId:null,loadCatalogPage:null,showCatalogPage:null,activateNode:null}),Ni=e=>Object(Cr.jsx)(Si.Provider,{value:e.value,children:e.children}),vi=()=>Object(c.useContext)(Si);var Ri=s(45);class Ai{constructor(e,t,s){this._depth=0,this._localization="",this._pageId=-1,this._pageName="",this._iconId=0,this._children=void 0,this._offerIds=void 0,this._parent=void 0,this._isVisible=void 0,this._isActive=void 0,this._isOpen=void 0,this._depth=t,this._parent=s,this._localization=e.localization,this._pageId=e.pageId,this._pageName=e.pageName,this._iconId=e.icon,this._children=[],this._offerIds=e.offerIds,this._isVisible=e.visible,this._isActive=!1,this._isOpen=!1}activate(){this._isActive=!0}deactivate(){this._isActive=!1}open(){this._isOpen=!0}close(){this._isOpen=!1}addChild(e){e&&this._children.push(e)}get depth(){return this._depth}get isBranch(){return this._children.length>0}get isLeaf(){return 0===this._children.length}get localization(){return this._localization}get pageId(){return this._pageId}get pageName(){return this._pageName}get iconId(){return this._iconId}get children(){return this._children}get offerIds(){return this._offerIds}get parent(){return this._parent}get isVisible(){return this._isVisible}get isActive(){return this._isActive}get isOpen(){return this._isOpen}}class yi{constructor(e,t){this.breed=e,this.palettes=t}}class wi{}wi.NORMAL="NORMAL",wi.BUILDER="BUILDERS_CLUB";class ki{constructor(e){this._isEnabled=!1,this._price=null,this._stuffTypes=null,this._boxTypes=null,this._ribbonTypes=null,this._defaultStuffTypes=null,this._isEnabled=e.isEnabled,this._price=e.price,this._boxTypes=e.boxTypes,this._ribbonTypes=e.ribbonTypes,this._stuffTypes=e.giftWrappers,this._defaultStuffTypes=e.giftFurnis}get isEnabled(){return this._isEnabled}get price(){return this._price}get stuffTypes(){return this._stuffTypes}get boxTypes(){return this._boxTypes}get ribbonTypes(){return this._ribbonTypes}get defaultStuffTypes(){return this._defaultStuffTypes}}const Di=(e,t)=>{const s=e.get(t),n=[];if(s&&s.length)for(const r of s)r.isVisible&&n.push(r);return n},Pi=(e,t,s,n)=>{if(s.isVisible&&s.pageId>0){let r=!1;const c=[s.pageName,s.localization].join(" ").toLowerCase().replace(/ /gi,"");if(c.indexOf(e)>-1&&(n.push(s),r=!0),!r)for(const e of t)if(c.indexOf(e)>=0){n.push(s);break}}for(const r of s.children)Pi(e,t,r,n)};class Ui{constructor(e,t,s,n,r,c){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,o=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;this._productType=void 0,this._productClassId=void 0,this._extraParam=void 0,this._productCount=void 0,this._productData=void 0,this._furnitureData=void 0,this._isUniqueLimitedItem=void 0,this._uniqueLimitedItemSeriesSize=void 0,this._uniqueLimitedItemsLeft=void 0,this._productType=e.toLowerCase(),this._productClassId=t,this._extraParam=s,this._productCount=n,this._productData=r,this._furnitureData=c,this._isUniqueLimitedItem=i,this._uniqueLimitedItemSeriesSize=a,this._uniqueLimitedItemsLeft=o}static stripAddonProducts(e){return 1===e.length?e:e.filter((e=>e.productType!==p.BADGE&&e.productType!==p.EFFECT&&e.productClassId!==Ui.EFFECT_CLASSID_NINJA_DISAPPEAR))}getIconUrl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;switch(this._productType){case p.FLOOR:return w().getFurnitureFloorIconUrl(this.productClassId);case p.WALL:if(e&&this._furnitureData){let t="";switch(this._furnitureData.className){case"floor":t=["th",this._furnitureData.className,e.product.extraParam].join("_");break;case"wallpaper":t=["th","wall",e.product.extraParam].join("_");break;case"landscape":t=["th",this._furnitureData.className,(e.product.extraParam||"").replace(".","_"),"001"].join("_")}if(""!==t){return`${N("catalog.asset.url")}/${t}.png`}}return w().getFurnitureWallIconUrl(this.productClassId,this._extraParam);case p.EFFECT:case p.HABBO_CLUB:return this.productClassId,"";case p.BADGE:return K().getBadgeUrl(this._extraParam);case p.ROBOT:return null}return null}get productType(){return this._productType}get productClassId(){return this._productClassId}get extraParam(){return this._extraParam}set extraParam(e){this._extraParam=e}get productCount(){return this._productCount}get productData(){return this._productData}get furnitureData(){return this._furnitureData}get isUniqueLimitedItem(){return this._isUniqueLimitedItem}get uniqueLimitedItemSeriesSize(){return this._uniqueLimitedItemSeriesSize}get uniqueLimitedItemsLeft(){return this._uniqueLimitedItemsLeft}set uniqueLimitedItemsLeft(e){this._uniqueLimitedItemsLeft=e}}Ui.EFFECT_CLASSID_NINJA_DISAPPEAR=108;class Li{constructor(e,t,s,n,r,c,i,a,o,l){this._pricingModel=void 0,this._priceType=void 0,this._offerId=void 0,this._localizationId=void 0,this._priceInCredits=void 0,this._priceInActivityPoints=void 0,this._activityPointType=void 0,this._giftable=void 0,this._isRentOffer=void 0,this._page=void 0,this._clubLevel=0,this._products=void 0,this._badgeCode=void 0,this._bundlePurchaseAllowed=!1,this._offerId=e,this._localizationId=t,this._isRentOffer=s,this._priceInCredits=n,this._priceInActivityPoints=r,this._activityPointType=c,this._giftable=i,this._clubLevel=a,this._products=o,this._bundlePurchaseAllowed=l,this.setPricingModelForProducts(),this.setPricingType();for(const u of o)if(u.productType===p.BADGE){this._badgeCode=u.extraParam;break}}activate(){}get clubLevel(){return this._clubLevel}get page(){return this._page}set page(e){this._page=e}get offerId(){return this._offerId}get localizationId(){return this._localizationId}get priceInCredits(){return this._priceInCredits}get priceInActivityPoints(){return this._priceInActivityPoints}get activityPointType(){return this._activityPointType}get giftable(){return this._giftable}get product(){if(!this._products||!this._products.length)return null;if(1===this._products.length)return this._products[0];const e=Ui.stripAddonProducts(this._products);return e.length?e[0]:null}get pricingModel(){return this._pricingModel}get priceType(){return this._priceType}get bundlePurchaseAllowed(){return this._bundlePurchaseAllowed}get isRentOffer(){return this._isRentOffer}get badgeCode(){return this._badgeCode}get localizationName(){const e=Z(this._localizationId);return e?e.name:$e(this._localizationId)}get localizationDescription(){const e=Z(this._localizationId);return e?e.description:$e(this._localizationId)}get isLazy(){return!1}get products(){return this._products}setPricingModelForProducts(){const e=Ui.stripAddonProducts(this._products);1===e.length?1===e[0].productCount?this._pricingModel=Li.PRICING_MODEL_SINGLE:this._pricingModel=Li.PRICING_MODEL_MULTI:e.length>1?this._pricingModel=Li.PRICING_MODEL_BUNDLE:this._pricingModel=Li.PRICING_MODEL_UNKNOWN}setPricingType(){this._priceInCredits>0&&this._priceInActivityPoints>0?this._priceType=Li.PRICE_TYPE_CREDITS_ACTIVITYPOINTS:this._priceInCredits>0?this._priceType=Li.PRICE_TYPE_CREDITS:this._priceInActivityPoints>0?this._priceType=Li.PRICE_TYPE_ACTIVITYPOINTS:this._priceType=Li.PRICE_TYPE_NONE}clone(){const e=[],t=Z(this.localizationId);for(const n of this._products){const s=$(n.productClassId,n.productType);e.push(new Ui(n.productType,n.productClassId,n.extraParam,n.productCount,t,s))}const s=new Li(this.offerId,this.localizationId,this.isRentOffer,this.priceInCredits,this.priceInActivityPoints,this.activityPointType,this.giftable,this.clubLevel,e,this.bundlePurchaseAllowed);return s.page=this.page,s}}Li.PRICING_MODEL_UNKNOWN="pricing_model_unknown",Li.PRICING_MODEL_SINGLE="pricing_model_single",Li.PRICING_MODEL_MULTI="pricing_model_multi",Li.PRICING_MODEL_BUNDLE="pricing_model_bundle",Li.PRICING_MODEL_FURNITURE="pricing_model_furniture",Li.PRICE_TYPE_NONE="price_type_none",Li.PRICE_TYPE_CREDITS="price_type_credits",Li.PRICE_TYPE_ACTIVITYPOINTS="price_type_activitypoints",Li.PRICE_TYPE_CREDITS_ACTIVITYPOINTS="price_type_credits_and_activitypoints";class Mi{constructor(e,t){this._images=void 0,this._texts=void 0,this._images=e,this._texts=t}getText(e){let t=this._texts[e]||"";return t&&t.length&&(t=t.replace(/\r\n|\r|\n/g,"<br />")),t}getImage(e){const t=this._images[e]||"";if(!t||!t.length)return null;let s=N("catalog.asset.image.url");return s=s.replace("%name%",t),s}}const Fi=e=>{const{setIsBusy:t,pageId:s,currentType:n,setRootNode:r,setOffersToNodes:i,currentPage:o,setCurrentOffer:l,setFrontPageItems:u,resetState:d,showCatalogPage:h,setCatalogOptions:j,setPurchaseOptions:b}=vi(),g=Object(c.useCallback)((e=>{const t=e.getParser(),s=new Map,n=(e,t,r)=>{const c=new Ai(e,t,r);for(const n of c.offerIds)s.has(n)?s.get(n).push(c):s.set(n,[c]);t++;for(const s of e.children)c.addChild(n(s,t,c));return c};r(n(t.root,0,null)),i(s)}),[r,i]),O=Object(c.useCallback)((e=>{const r=e.getParser();if(r.catalogType!==n)return;const c=[];for(const t of r.offers){const e=[],s=Z(t.localizationId);for(const n of t.products){const t=$(n.furniClassId,n.productType);e.push(new Ui(n.productType,n.furniClassId,n.extraParam,n.productCount,s,t,n.uniqueLimitedItem,n.uniqueLimitedSeriesSize,n.uniqueLimitedItemsLeft))}if(!e.length)continue;const r=new Li(t.offerId,t.localizationId,t.rent,t.priceCredits,t.priceActivityPoints,t.priceActivityPointsType,t.giftable,t.clubLevel,e,t.bundlePurchaseAllowed);(n===wi.NORMAL||r.pricingModel!==Li.PRICING_MODEL_BUNDLE&&r.pricingModel!==Li.PRICING_MODEL_MULTI)&&c.push(r)}r.frontPageItems&&r.frontPageItems.length&&u(r.frontPageItems),t(!1),s===r.pageId&&h(r.pageId,r.layoutCode,new Mi(r.localization.images.concat(),r.localization.texts.concat()),c,r.offerId,r.acceptSeasonCurrencyAsCredits)}),[n,s,u,t,h]),m=Object(c.useCallback)((e=>{const t=e.getParser();ot(new hn(t.offer))}),[]),_=Object(c.useCallback)((e=>{const t=e.getParser();ot(new jn(t.code))}),[]),E=Object(c.useCallback)((e=>{const t=e.getParser();ot(new bn(t.code))}),[]),f=Object(c.useCallback)((e=>{e.getParser();ot(new gn)}),[]),x=Object(c.useCallback)((e=>{const t=e.getParser().offer;if(!t||!t.products.length)return;t.products[0].uniqueLimitedItem;const s=[],r=Z(t.localizationId);for(const n of t.products){const e=$(n.furniClassId,n.productType);s.push(new Ui(n.productType,n.furniClassId,n.extraParam,n.productCount,r,e,n.uniqueLimitedItem,n.uniqueLimitedSeriesSize,n.uniqueLimitedItemsLeft))}const c=new Li(t.offerId,t.localizationId,t.rent,t.priceCredits,t.priceActivityPoints,t.priceActivityPointsType,t.giftable,t.clubLevel,s,t.bundlePurchaseAllowed);(n===wi.NORMAL||c.pricingModel!==Li.PRICING_MODEL_BUNDLE&&c.pricingModel!==Li.PRICING_MODEL_MULTI)&&(c.page=o,l(c),c.product&&c.product.productType===p.WALL&&c.product&&c.product.productType===p.WALL&&b((e=>{const t={...e};return t.extraData=c.product.extraParam||null,t})))}),[n,o,l,b]),I=Object(c.useCallback)((e=>{const t=e.getParser(),s=new yi(t.productCode,t.palettes.slice());j((e=>{const t=[];e.petPalettes&&t.push(...e.petPalettes);for(let n=0;n<t.length;n++){if(t[n].breed===s.breed){t.splice(n,1);break}}return t.push(s),{...e,petPalettes:t}}))}),[j]),T=Object(c.useCallback)((e=>{const t=e.getParser();ot(new un(t.result,t.validationInfo))}),[]),C=Object(c.useCallback)((()=>{ot(new an)}),[]),S=Object(c.useCallback)((e=>{const t=e.getParser();j((e=>({...e,clubOffers:t.offers})))}),[j]),N=Object(c.useCallback)((e=>{const t=e.getParser();j((e=>({...e,groups:t.groups})))}),[j]),v=Object(c.useCallback)((e=>{const t=e.getParser();j((e=>({...e,giftConfiguration:new ki(t)})))}),[j]),R=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;let s="";s=1===t.result?$e("inventory.marketplace.result.title.success"):$e("inventory.marketplace.result.title.failure");const n=$e(`inventory.marketplace.result.${t.result}`);jr.simpleAlert(n,or.DEFAULT,null,null,s)}),[]),A=Object(c.useCallback)((e=>{const t=e.getParser();j((e=>({...e,clubGifts:t})))}),[j]);return Je(a.S,g),Je(a.Q,O),Je(a.xf,m),Je(a.tf,_),Je(a.wf,E),Je(a.Pd,f),Je(a.qf,x),Je(Ri.a,N),Je(a.Ah,I),Je(a.j,T),Je(a.yc,C),Je(a.yd,S),Je(a.zc,v),Je(a.bb,A),Je(a.ae,R),null};class Hi{constructor(e,t,s,n,r){let c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;this._pageId=void 0,this._layoutCode=void 0,this._localization=void 0,this._offers=void 0,this._acceptSeasonCurrencyAsCredits=void 0,this._mode=void 0,this._pageId=e,this._layoutCode=t,this._localization=s,this._offers=n,this._acceptSeasonCurrencyAsCredits=r;for(const i of n)i.page=this;this._mode=-1===c?Hi.MODE_NORMAL:c}get pageId(){return this._pageId}get layoutCode(){return this._layoutCode}get localization(){return this._localization}get offers(){return this._offers}get acceptSeasonCurrencyAsCredits(){return this._acceptSeasonCurrencyAsCredits}get mode(){return this._mode}}Hi.MODE_NORMAL=0;class Bi{constructor(){this._requestType=void 0,this._requestById=void 0,this._requestedByOfferId=void 0,this._requestByName=void 0,this._requestType=Bi.REQUEST_TYPE_NONE}resetRequest(){this._requestType=Bi.REQUEST_TYPE_NONE,this._requestById=-1,this._requestedByOfferId=-1,this._requestByName=null}get requestType(){return this._requestType}get requestById(){return this._requestById}set requestById(e){this._requestType=Bi.REQUEST_TYPE_ID,this._requestById=e}get requestedByOfferId(){return this._requestedByOfferId}set requestedByOfferId(e){this._requestType=Bi.REQUEST_TYPE_OFFER,this._requestedByOfferId=e}get requestByName(){return this._requestByName}set requestByName(e){this._requestType=Bi.REQUEST_TYPE_NAME,this._requestByName=e}}Bi.REQUEST_TYPE_NONE=0,Bi.REQUEST_TYPE_ID=1,Bi.REQUEST_TYPE_OFFER=2,Bi.REQUEST_TYPE_NAME=3;var Gi=s(25),Wi=s.n(Gi);const Vi=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(0),[l,u]=Object(c.useState)(""),[d,h]=Object(c.useState)(""),[j,b]=Object(c.useState)(!0),[g,O]=Object(c.useState)(""),[m,_]=Object(c.useState)([]),[E,f]=Object(c.useState)(0),[x,I]=Object(c.useState)(0),[T,C]=Object(c.useState)(0),[S,N]=Object(c.useState)(0),[v,R]=Object(c.useState)(0),[A,y]=Object(c.useState)(!1),{catalogOptions:w=null}=vi(),{giftConfiguration:k=null}=w,D=Object(c.useCallback)((()=>{s(!1),r(0),o(0),u(""),h(""),b(!0),O(""),f(0),I(0),m.length&&C(m[0].id)}),[m]),P=Object(c.useCallback)((e=>{switch(e.type){case hn.PURCHASE_SUCCESS:return void D();case cn.INIT_GIFT:const t=e;return D(),r(t.pageId),o(t.offerId),u(t.extraData),void s(!0);case cn.GIFT_RECEIVER_NOT_FOUND:return void y(!0)}}),[D]);lt(hn.PURCHASE_SUCCESS,P),lt(cn.INIT_GIFT,P),lt(cn.GIFT_RECEIVER_NOT_FOUND,P);const U=Object(c.useMemo)((()=>!k||k.defaultStuffTypes.findIndex((e=>e===k.boxTypes[E]))>-1),[k,E]),L=Object(c.useMemo)((()=>k?(1e3*k.boxTypes[E]+k.ribbonTypes[x]).toString():""),[k,E,x]),M=Object(c.useMemo)((()=>{if(!k)return!1;const e=k.boxTypes[E];return!(8===e||e>=3&&e<=6)}),[k,E]),F=Object(c.useCallback)((e=>{switch(e){case"prev_box":return void f((e=>0===e?S:e-1));case"next_box":return void f((e=>e===S?0:e+1));case"prev_ribbon":return void I((e=>0===e?v:e-1));case"next_ribbon":return void I((e=>e===v?0:e+1));case"buy":return d&&0!==d.length?void Ln(new a.uf(n,i,l,d,g,T,E,x,j)):void y(!0)}}),[l,S,v,g,i,n,d,E,T,x,j]);if(Object(c.useEffect)((()=>{y(!1)}),[d]),Object(c.useEffect)((()=>{if(!k)return;const e=[];for(const t of k.stuffTypes){const s=K().getFloorItemData(t);s&&(s.colors&&s.colors.length>0&&e.push({id:t,color:`#${s.colors[0].toString(16)}`}))}N(k.boxTypes.length-1),R(k.ribbonTypes.length-1),e.length&&(C(e[0].id),_(e))}),[k]),!k||!k.isEnabled||!t)return null;const H="catalog.gift_wrapping_new.box."+(U?"default":E),B=`catalog.gift_wrapping_new.ribbon.${x}`,G="catalog.gift_wrapping_new."+(U?"freeprice":"price");return Object(Cr.jsxs)($r,{uniqueKey:"catalog-gift",className:"nitro-catalog-gift",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("catalog.gift_wrapping.title"),onCloseClick:D}),Object(Cr.jsxs)(Hr,{className:"text-black",children:[Object(Cr.jsxs)(vc,{column:!0,children:[Object(Cr.jsx)(Ac,{children:$e("catalog.gift_wrapping.receiver")}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm"+Wi()({" is-invalid":A}),value:d,onChange:e=>h(e.target.value)}),A&&Object(Cr.jsx)(Sr,{className:"invalid-feedback",children:$e("catalog.gift_wrapping.receiver_not_found.title")})]}),Object(Cr.jsx)(nc,{figure:K().figure,userName:K().userName,message:g,editable:!0,onChange:e=>O(e)}),Object(Cr.jsxs)(Sr,{className:"form-check",children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",name:"showMyFace",checked:j,onChange:e=>b((e=>!e))}),Object(Cr.jsx)("label",{className:"form-check-label",children:$e("catalog.gift_wrapping.show_face.title")})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:2,children:[T&&Object(Cr.jsx)(Sr,{className:"gift-preview",children:Object(Cr.jsx)(sc,{productType:p.FLOOR,productClassId:T,extraData:L})}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{gap:2,children:[Object(Cr.jsxs)(kr,{children:[Object(Cr.jsx)(wr,{variant:"primary",onClick:()=>F("prev_box"),children:Object(Cr.jsx)(Lr.a,{icon:"chevron-left"})}),Object(Cr.jsx)(wr,{variant:"primary",onClick:()=>F("next_box"),children:Object(Cr.jsx)(Lr.a,{icon:"chevron-right"})})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{fontWeight:"bold",children:$e(H)}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[$e(G,["price"],[k.price.toString()]),Object(Cr.jsx)(ec,{type:-1})]})]})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:2,children:[Object(Cr.jsxs)(kr,{children:[Object(Cr.jsx)(wr,{variant:"primary",onClick:()=>F("prev_ribbon"),children:Object(Cr.jsx)(Lr.a,{icon:"chevron-left"})}),Object(Cr.jsx)(wr,{variant:"primary",onClick:()=>F("next_ribbon"),children:Object(Cr.jsx)(Lr.a,{icon:"chevron-right"})})]}),Object(Cr.jsx)(Ac,{fontWeight:"bold",children:$e(B)})]})]})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{fontWeight:"bold",children:$e("catalog.gift_wrapping.pick_color")}),Object(Cr.jsx)(kr,{fullWidth:!0,children:m.map((e=>Object(Cr.jsx)(wr,{variant:"dark",active:e.id===T,disabled:!M,style:{backgroundColor:e.color},onClick:()=>C(e.id)},e.id)))})]}),Object(Cr.jsxs)(yr,{justifyContent:"between",alignItems:"center",children:[Object(Cr.jsx)(wr,{variant:"link",onClick:D,className:"text-black",children:$e("cancel")}),Object(Cr.jsx)(wr,{variant:"success",onClick:()=>F("buy"),children:$e("catalog.gift_wrapping.give_gift")})]})]})]})};class qi{constructor(e){this._furniData=void 0,this._page=void 0,this._product=void 0,this._furniData=e,this._product=new Ui(this._furniData.type,this._furniData.id,this._furniData.customParams,1,Z(this._furniData.className),this._furniData)}activate(){Ln(new a.pc(this._furniData.rentOfferId>-1?this._furniData.rentOfferId:this._furniData.purchaseOfferId))}get offerId(){return this.isRentOffer?this._furniData.rentOfferId:this._furniData.purchaseOfferId}get priceInActivityPoints(){return 0}get activityPointType(){return 0}get priceInCredits(){return 0}get page(){return this._page}set page(e){this._page=e}get priceType(){return""}get product(){return this._product}get products(){return[this._product]}get localizationId(){return"roomItem.name."+this._furniData.id}get bundlePurchaseAllowed(){return!1}get isRentOffer(){return this._furniData.rentOfferId>-1}get giftable(){return!1}get pricingModel(){return Li.PRICING_MODEL_FURNITURE}get clubLevel(){return 0}get badgeCode(){return""}get localizationName(){return this._furniData.name}get localizationDescription(){return this._furniData.description}get isLazy(){return!0}}class zi{constructor(e,t,s){this.searchValue=e,this.offers=t,this.filteredNodes=s}}const Yi=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(!1),{currentType:i=null,rootNode:a=null,setActiveNodes:o=null,offersToNodes:l=null,searchResult:u=null,setSearchResult:d=null,setCurrentPage:h=null}=vi(),j=e=>{e&&e.length?(s(e),r(!0)):(s(""),u&&d(null))},b=Object(c.useCallback)((e=>{if(r(!1),!(e=e.toLocaleLowerCase().replace(" ",""))||!e.length)return;const t=K().getAllFurnitureData({loadFurnitureData:null});if(!t||!t.length)return;const s=[],n=[];for(const r of t){if(i===wi.BUILDER&&!r.availableForBuildersClub)continue;if(i===wi.NORMAL&&r.excludeDynamic)continue;const t=[r.className,r.name,r.description].join(" ").replace(/ /gi,"").toLowerCase();if(i===wi.BUILDER&&-1===r.purchaseOfferId&&-1===r.rentOfferId)""!==r.furniLine&&n.indexOf(r.furniLine)<0&&t.indexOf(e)>=0&&n.push(r.furniLine);else{if([...Di(l,r.purchaseOfferId),...Di(l,r.rentOfferId)].length&&(t.indexOf(e)>=0&&s.push(r),250===s.length))break}}const c=[];for(const r of s)c.push(new qi(r));let o=[];Pi(e,n,a,o),h(new Hi(-1,"default_3x3",new Mi([],[]),c,!1,1)),d(new zi(e,c,o.filter((e=>e.isVisible))))}),[l,i,a,h,d]);return Object(c.useEffect)((()=>{if(!n)return;const e=setTimeout((()=>b(t)),300);return()=>clearTimeout(e)}),[t,n,b]),Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(yr,{fullWidth:!0,alignItems:"center",position:"relative",children:Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:$e("generic.search"),value:t,onChange:e=>j(e.target.value),onKeyDown:e=>("Enter"===e.code||"NumpadEnter"===e.code)&&b(t)})}),(!t||!t.length)&&Object(Cr.jsx)(wr,{variant:"primary",className:"catalog-search-button",children:Object(Cr.jsx)(Lr.a,{icon:"search"})}),t&&!!t.length&&Object(Cr.jsx)(wr,{variant:"primary",className:"catalog-search-button",onClick:e=>j(""),children:Object(Cr.jsx)(Lr.a,{icon:"times"})})]})},Ki=e=>{const{icon:t=0}=e,s=Object(c.useMemo)((()=>N("catalog.asset.icon.url").replace("%name%",t.toString())),[t]);return Object(Cr.jsx)(uc,{imageUrl:s,style:{width:20,height:20}})},Qi=e=>{const{node:t=null}=e;return Object(Cr.jsx)(Cr.Fragment,{children:t&&t.children.length>0&&t.children.map(((e,t)=>e.isVisible?Object(Cr.jsx)($i,{node:e},t):null))})},$i=e=>{const{node:t=null}=e,{activateNode:s=null}=vi();return Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(lc,{gap:1,column:!1,itemActive:t.isActive,onClick:e=>s(t),children:[Object(Cr.jsx)(Ki,{icon:t.iconId}),Object(Cr.jsx)(Ac,{grow:!0,truncate:!0,children:t.localization}),t.isBranch&&Object(Cr.jsx)(Lr.a,{icon:t.isOpen?"caret-up":"caret-down"})]}),t.isOpen&&t.isBranch&&Object(Cr.jsx)(Qi,{node:t})]})},Xi=e=>{const{node:t=null}=e,{searchResult:s=null}=vi();return Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Yi,{}),Object(Cr.jsx)(rc,{fullHeight:!0,className:"nitro-catalog-navigation-grid-container rounded p-1",overflow:"hidden",children:Object(Cr.jsxs)(Ar,{gap:1,columnCount:1,children:[s&&s.filteredNodes.length>0&&s.filteredNodes.map(((e,t)=>Object(Cr.jsx)($i,{node:e},t))),!s&&Object(Cr.jsx)(Qi,{node:t})]})})]})},Ji=e=>{const{columnCount:t=5,...s}=e,[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)(null),{currentOffer:l=null,setPurchaseOptions:u=null}=vi(),{badgeCodes:d=[],activate:h=null,deactivate:j=null}=_t(),b=Object(c.useMemo)((()=>{if(!i)return null;const e=new a.Hh;return e.setValue(["0",i,"",""]),e}),[i]);return Object(c.useEffect)((()=>{l&&u((e=>{const t={...e};return t.extraParamRequired=!0,t.extraData=b&&b.getValue(1)||null,t.previewStuffData=b,t}))}),[l,b,u]),Object(c.useEffect)((()=>{if(!n)return;const e=h();return()=>j(e)}),[n,h,j]),Object(c.useEffect)((()=>(r(!0),()=>r(!1))),[]),Object(Cr.jsx)(Ar,{columnCount:t,...s,children:d&&d.length>0&&d.map(((e,t)=>Object(Cr.jsx)(lc,{itemActive:i===e,onClick:t=>o(e),children:Object(Cr.jsx)(Zr,{badgeCode:e})},t)))})},Zi=e=>{const{currentPage:t=null,setCurrentOffer:s=null}=vi();return Object(c.useEffect)((()=>{t&&t.offers.length&&s(t.offers[0])}),[t,s]),null},ea=e=>{const{offer:t=null,...s}=e,n=Object(c.useMemo)((()=>t.pricingModel===Li.PRICING_MODEL_BUNDLE?null:t.product.getIconUrl(t)),[t]),r=t.product;return r?Object(Cr.jsx)(lc,{itemImage:n,itemCount:t.pricingModel===Li.PRICING_MODEL_MULTI?r.productCount:1,itemUniqueSoldout:r.uniqueLimitedItemSeriesSize&&!r.uniqueLimitedItemsLeft,itemUniqueNumber:r.uniqueLimitedItemSeriesSize,...s,children:t.product.productType===p.ROBOT&&Object(Cr.jsx)(Xr,{figure:t.product.extraParam,headOnly:!0,direction:3})}):null},ta=e=>{const{columnCount:t=5,children:s=null,...n}=e,{currentOffer:r=null,setCurrentOffer:c=null,currentPage:i=null,setPurchaseOptions:a=null}=vi();if(!i)return null;return Object(Cr.jsxs)(Ar,{columnCount:t,...n,children:[i.offers&&i.offers.length>0&&i.offers.map(((e,t)=>Object(Cr.jsx)(ea,{itemActive:r&&r.offerId===e.offerId,offer:e,onClick:t=>(e=>{e.activate(),e.isLazy||(c(e),e.product&&e.product.productType===p.WALL&&a((t=>{const s={...t};return s.extraData=e.product.extraParam||null,s})))})(e)},t))),s]})},sa=e=>{const{children:t=null,...s}=e,{currentOffer:n=null}=vi();return n&&n.pricingModel===Li.PRICING_MODEL_SINGLE&&n.product.isUniqueLimitedItem?Object(Cr.jsxs)(Sr,{...s,children:[Object(Cr.jsx)(oc,{className:"mx-auto",uniqueLimitedItemsLeft:n.product.uniqueLimitedItemsLeft,uniqueLimitedSeriesSize:n.product.uniqueLimitedItemSeriesSize}),t]}):null};class na{}na.NONE=0,na.CONFIRM=1,na.PURCHASE=2,na.NO_CREDITS=3,na.NO_POINTS=4,na.SOLD_OUT=5,na.FAILED=6;const ra=e=>{const{noGiftOption:t=!1,purchaseCallback:s=null}=e,[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)(na.NONE),{currentOffer:l=null,currentPage:u=null,purchaseOptions:d=null,setPurchaseOptions:h=null}=vi(),{getCurrencyAmount:j=null}=kt(),b=Object(c.useCallback)((e=>{}),[l]);lt(ln.INIT_PURCHASE,b);const g=Object(c.useCallback)((e=>{switch(e.type){case hn.PURCHASE_SUCCESS:return void o(na.NONE);case jn.PURCHASE_FAILED:case bn.NOT_ALLOWED:return void o(na.FAILED);case gn.SOLD_OUT:return void o(na.SOLD_OUT)}}),[]);lt(hn.PURCHASE_SUCCESS,g),lt(jn.PURCHASE_FAILED,g),lt(bn.NOT_ALLOWED,g),lt(gn.SOLD_OUT,g);const O=Object(c.useMemo)((()=>{if(!l)return!1;if(d.extraParamRequired&&(!d.extraData||!d.extraData.length))return!1;if(l.pricingModel===Li.PRICING_MODEL_SINGLE){const e=l.product;if(e&&e.isUniqueLimitedItem)return!e.uniqueLimitedItemsLeft}return!1}),[l,d]),m=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!l)return;if(Q()<l.clubLevel)return void C("habboUI/open/hccenter");if(e)return void ot(new on(l.page.pageId,l.offerId,d.extraData));if(o(na.PURCHASE),s)return void s();let t=l.page.pageId;Ln(new a.vf(t,l.offerId,d.extraData,d.quantity))};if(Object(c.useEffect)((()=>{if(l)return()=>{o(na.NONE),h({quantity:1,extraData:null,extraParamRequired:!1,previewStuffData:null})}}),[l,h]),Object(c.useEffect)((()=>{let e=null;return i!==na.CONFIRM&&i!==na.FAILED||(e=setTimeout((()=>o(na.NONE)),3e3)),()=>{e&&clearTimeout(e)}}),[i]),!l)return null;const p=()=>{const e=l.priceInCredits*d.quantity,t=l.priceInActivityPoints*d.quantity;if(Q()<l.clubLevel)return Object(Cr.jsx)(wr,{variant:"danger",disabled:!0,children:$e("catalog.alert.hc.required")});if(O)return Object(Cr.jsx)(wr,{variant:"danger",disabled:!0,children:$e("catalog.alert.limited_edition_sold_out.title")});if(e>j(-1))return Object(Cr.jsx)(wr,{variant:"danger",disabled:!0,children:$e("catalog.alert.notenough.title")});if(t>j(l.activityPointType))return Object(Cr.jsx)(wr,{variant:"danger",disabled:!0,children:$e("catalog.alert.notenough.activitypoints.title."+l.activityPointType)});switch(i){case na.CONFIRM:return Object(Cr.jsx)(wr,{variant:"warning",onClick:e=>m(),children:$e("catalog.marketplace.confirm_title")});case na.PURCHASE:return Object(Cr.jsx)(wr,{disabled:!0,children:Object(Cr.jsx)(dc,{})});case na.FAILED:return Object(Cr.jsx)(wr,{variant:"danger",children:$e("generic.failed")});case na.SOLD_OUT:return Object(Cr.jsx)(wr,{variant:"danger",children:$e("generic.failed")+" - "+$e("catalog.alert.limited_edition_sold_out.title")});case na.NONE:default:return Object(Cr.jsx)(wr,{disabled:d.extraParamRequired&&(!d.extraData||!d.extraData.length),onClick:e=>o(na.CONFIRM),children:$e("catalog.purchase_confirmation."+(l.isRentOffer?"rent":"buy"))})}};return Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(p,{}),!t&&!l.isRentOffer&&Object(Cr.jsx)(wr,{disabled:d.quantity>1||!l.giftable||O||d.extraParamRequired&&(!d.extraData||!d.extraData.length),onClick:e=>m(!0),children:$e("catalog.purchase_confirmation.gift")})]})},ca=e=>{const{offer:t=null,separator:s=!1}=e,{purchaseOptions:n=null}=vi(),{quantity:r=1}=n;return t?Object(Cr.jsxs)(Cr.Fragment,{children:[t.priceInCredits>0&&Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:t.priceInCredits*r}),Object(Cr.jsx)(ec,{type:-1})]}),s&&t.priceInCredits>0&&t.priceInActivityPoints>0&&Object(Cr.jsx)(Lr.a,{size:"xs",color:"black",icon:"plus"}),t.priceInActivityPoints>0&&Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:t.priceInActivityPoints*r}),Object(Cr.jsx)(ec,{type:t.activityPointType})]})]}):null},ia=e=>{const{gap:t=1,...s}=e,{currentOffer:n=null}=vi();return Object(Cr.jsx)(rc,{gap:t,...s,children:Object(Cr.jsx)(ca,{offer:n})})};class aa{}aa.DEFAULT=1,aa.WALL_PAPER=2,aa.FLOOR=3,aa.LANDSCAPE=4,aa.POST_IT=5,aa.POSTER=6,aa.SOUND_SET=7,aa.TRAX_SONG=8,aa.PRESENT=9,aa.ECOTRON_BOX=10,aa.TROPHY=11,aa.CREDIT_FURNI=12,aa.PET_SHAMPOO=13,aa.PET_CUSTOM_PART=14,aa.PET_CUSTOM_PART_SHAMPOO=15,aa.PET_SADDLE=16,aa.GUILD_FURNI=17,aa.GAME_FURNI=18,aa.MONSTERPLANT_SEED=19,aa.MONSTERPLANT_REVIVAL=20,aa.MONSTERPLANT_REBREED=21,aa.MONSTERPLANT_FERTILIZE=22,aa.FIGURE_PURCHASABLE_SET=23;const oa=e=>{const{currentOffer:t=null,roomPreviewer:s=null,purchaseOptions:n=null}=vi(),{previewStuffData:r=null}=n;return Object(c.useEffect)((()=>{if(!t||t.pricingModel===Li.PRICING_MODEL_BUNDLE||!s)return;const e=t.product;if(e)switch(e.productType){case p.FLOOR:if(!e.furnitureData)return;if(e.furnitureData.specialType===aa.FIGURE_PURCHASABLE_SET){const t=K().getFloorItemData(e.furnitureData.id).customParams.split(",").map((e=>parseInt(e))),n=[];for(const e of t)f().isValidFigureSetForGender(e,K().gender)&&n.push(e);const r=f().getFigureStringWithFigureIds(K().figure,K().gender,n);s.addAvatarIntoRoom(r,e.productClassId)}else s.addFurnitureIntoRoom(e.productClassId,new a.Li(90),r,e.extraParam);return;case p.WALL:if(!e.furnitureData)return;switch(e.furnitureData.specialType){case aa.FLOOR:return s.reset(!1),void s.updateObjectRoom(e.extraParam);case aa.WALL_PAPER:return s.reset(!1),void s.updateObjectRoom(null,e.extraParam);case aa.LANDSCAPE:{s.reset(!1),s.updateObjectRoom(null,null,e.extraParam);const t=K().getWallItemDataByName("ads_twi_windw");return void(t&&s.addWallItemIntoRoom(t.id,new a.Li(90),t.customParams))}default:return s.updateObjectRoom("default","default","default"),void s.addWallItemIntoRoom(e.productClassId,new a.Li(90),e.extraParam)}case p.ROBOT:return void s.addAvatarIntoRoom(e.extraParam,0);case p.EFFECT:return void s.addAvatarIntoRoom(K().figure,e.productClassId)}}),[t,r,s]),t?t.pricingModel===Li.PRICING_MODEL_BUNDLE?Object(Cr.jsx)(rc,{fit:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:Object(Cr.jsx)(Ar,{fullWidth:!0,columnCount:4,className:"nitro-catalog-layout-bundle-grid",children:t.products.length>0&&t.products.map(((e,s)=>Object(Cr.jsx)(lc,{itemImage:e.getIconUrl(t),itemCount:e.productCount},s)))})}):Object(Cr.jsx)(xc,{roomPreviewer:s,height:140}):null},la=e=>{const{page:t=null}=e,{currentOffer:s=null}=vi();return Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Zi,{}),Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsxs)(rc,{size:7,overflow:"hidden",children:[Object(Cr.jsx)(ta,{shrink:!0}),Object(Cr.jsxs)(rc,{gap:1,overflow:"hidden",children:[Object(Cr.jsx)(Ac,{truncate:!0,shrink:!0,fontWeight:"bold",children:$e("catalog_selectbadge")}),Object(Cr.jsx)(Ji,{})]})]}),Object(Cr.jsxs)(rc,{center:!s,size:5,overflow:"hidden",children:[!s&&Object(Cr.jsxs)(Cr.Fragment,{children:[!!t.localization.getImage(1)&&Object(Cr.jsx)("img",{alt:"",src:t.localization.getImage(1)}),Object(Cr.jsx)(Ac,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),s&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(Sr,{position:"relative",overflow:"hidden",children:[Object(Cr.jsx)(oa,{}),Object(Cr.jsx)(sa,{fullWidth:!0,position:"absolute",className:"top-1"})]}),Object(Cr.jsxs)(rc,{grow:!0,gap:1,children:[Object(Cr.jsx)(Ac,{grow:!0,truncate:!0,children:s.localizationName}),Object(Cr.jsx)(yr,{justifyContent:"end",children:Object(Cr.jsx)(ia,{alignItems:"end"})}),Object(Cr.jsx)(ra,{})]})]})]})]})]})},ua=e=>{const{...t}=e,{currentOffer:s=null}=vi();return s&&s.badgeCode&&s.badgeCode.length?Object(Cr.jsx)(Zr,{badgeCode:s.badgeCode,...t}):null},da=e=>{const{currentOffer:t=null,purchaseOptions:s=null,setPurchaseOptions:n=null}=vi(),{quantity:r=1}=s,c=e=>{isNaN(e)&&(e=1),e=Math.max(e,1),(e=Math.min(e,100))!==r&&n((t=>{const s={...t};return s.quantity=e,s}))};return t&&t.bundlePurchaseAllowed?Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Ac,{children:$e("catalog.bundlewidget.spinner.select.amount")}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Lr.a,{icon:"caret-left",className:"text-black cursor-pointer",onClick:e=>c(r-1)}),Object(Cr.jsx)("input",{type:"number",className:"form-control form-control-sm quantity-input",value:r,onChange:e=>c(e.target.valueAsNumber)}),Object(Cr.jsx)(Lr.a,{icon:"caret-right",className:"text-black cursor-pointer",onClick:e=>c(r+1)})]})]}):null},ha=e=>{const{page:t=null}=e,{currentOffer:s=null}=vi();return Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsx)(rc,{size:7,overflow:"hidden",children:Object(Cr.jsx)(ta,{})}),Object(Cr.jsxs)(rc,{center:!s,size:5,overflow:"hidden",children:[!s&&Object(Cr.jsxs)(Cr.Fragment,{children:[!!t.localization.getImage(1)&&Object(Cr.jsx)("img",{alt:"",src:t.localization.getImage(1)}),Object(Cr.jsx)(Ac,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),s&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(Sr,{position:"relative",overflow:"hidden",children:[Object(Cr.jsx)(oa,{}),Object(Cr.jsx)(sa,{fullWidth:!0,position:"absolute",className:"top-1"}),Object(Cr.jsx)(ua,{position:"absolute",className:"bg-muted rounded bottom-1 end-1"})]}),Object(Cr.jsxs)(rc,{grow:!0,gap:1,children:[Object(Cr.jsx)(Ac,{grow:!0,truncate:!0,children:s.localizationName}),Object(Cr.jsxs)(yr,{justifyContent:"between",children:[Object(Cr.jsx)(rc,{gap:1,children:Object(Cr.jsx)(da,{})}),Object(Cr.jsx)(ia,{justifyContent:"end",alignItems:"end"})]}),Object(Cr.jsx)(ra,{})]})]})]})]})},ja=e=>{const{...t}=e,{currentOffer:s=null,purchaseOptions:n=null}=vi(),{previewStuffData:r=null}=n,i=Object(c.useMemo)((()=>{if(!s||!r)return null;const e=r.getValue(2);return e&&e.length?e:null}),[s,r]);return i?Object(Cr.jsx)(Zr,{badgeCode:i,isGroup:!0,...t}):null},ba=e=>{const[t,s]=Object(c.useState)(0),{currentOffer:n=null,catalogOptions:r=null,setPurchaseOptions:i=null}=vi(),{groups:o=null}=r,l=Object(c.useMemo)((()=>{if(!o||!o.length)return null;const e=o[t];if(!e)return null;const s=new a.Hh;return s.setValue(["0",e.groupId.toString(),e.badgeCode,e.colorA,e.colorB]),s}),[t,o]);if(Object(c.useEffect)((()=>{n&&i((e=>{const t={...e};return t.extraParamRequired=!0,t.extraData=l&&l.getValue(1)||null,t.previewStuffData=l,t}))}),[n,l,i]),Object(c.useEffect)((()=>{Ln(new a.P)}),[]),!o||!o.length)return Object(Cr.jsxs)(Sr,{className:"bg-muted rounded p-1 text-black text-center",children:[$e("catalog.guild_selector.members_only"),Object(Cr.jsx)(wr,{className:"mt-1",children:$e("catalog.guild_selector.find_groups")})]});const u=o[t];return Object(Cr.jsxs)(yr,{gap:1,children:[!!u&&Object(Cr.jsxs)(yr,{overflow:"hidden",className:"rounded border",children:[Object(Cr.jsx)(Sr,{fullHeight:!0,style:{width:"20px",backgroundColor:"#"+u.colorA}}),Object(Cr.jsx)(Sr,{fullHeight:!0,style:{width:"20px",backgroundColor:"#"+u.colorB}})]}),Object(Cr.jsx)("select",{className:"form-select form-select-sm",value:t,onChange:e=>s(parseInt(e.target.value)),children:o.map(((e,t)=>Object(Cr.jsx)("option",{value:t,children:e.groupName},t)))})]})},ga=e=>{const{page:t=null}=e,{currentOffer:s=null}=vi();return Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsx)(rc,{size:7,overflow:"hidden",children:Object(Cr.jsx)(ta,{})}),Object(Cr.jsxs)(rc,{center:!s,size:5,overflow:"hidden",children:[!s&&Object(Cr.jsxs)(Cr.Fragment,{children:[!!t.localization.getImage(1)&&Object(Cr.jsx)("img",{alt:"",src:t.localization.getImage(1)}),Object(Cr.jsx)(Ac,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),s&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(Sr,{position:"relative",overflow:"hidden",children:[Object(Cr.jsx)(oa,{}),Object(Cr.jsx)(ja,{position:"absolute",className:"bottom-1 end-1"})]}),Object(Cr.jsxs)(rc,{grow:!0,gap:1,children:[Object(Cr.jsx)(Ac,{truncate:!0,children:s.localizationName}),Object(Cr.jsx)(Sr,{grow:!0,children:Object(Cr.jsx)(ba,{})}),Object(Cr.jsx)(yr,{justifyContent:"end",children:Object(Cr.jsx)(ia,{alignItems:"end"})}),Object(Cr.jsx)(ra,{})]})]})]})]})},Oa=e=>{const{page:t=null}=e,[s,n]=Object(c.useState)(0),{currentOffer:r=null,setCurrentOffer:i=null,catalogOptions:o=null}=vi(),{groups:l=null}=o;return Object(c.useEffect)((()=>{Ln(new a.P)}),[t]),Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Zi,{}),Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsx)(rc,{className:"bg-muted rounded p-2 text-black",size:7,overflow:"hidden",children:Object(Cr.jsx)(Sr,{className:"overflow-auto",dangerouslySetInnerHTML:{__html:t.localization.getText(1)}})}),Object(Cr.jsx)(rc,{size:5,overflow:"hidden",gap:1,children:!!r&&Object(Cr.jsx)(Cr.Fragment,{children:Object(Cr.jsxs)(rc,{grow:!0,gap:1,children:[Object(Cr.jsx)(Ac,{truncate:!0,children:r.localizationName}),Object(Cr.jsx)(Sr,{grow:!0,children:Object(Cr.jsx)(ba,{})}),Object(Cr.jsx)(yr,{justifyContent:"end",children:Object(Cr.jsx)(ia,{alignItems:"end"})}),Object(Cr.jsx)(ra,{noGiftOption:!0})]})})})]})]})},ma=e=>{const{page:t=null}=e;return Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsxs)(rc,{size:7,overflow:"hidden",className:"bg-muted rounded p-2 text-black",children:[Object(Cr.jsx)(Sr,{dangerouslySetInnerHTML:{__html:t.localization.getText(2)}}),Object(Cr.jsx)(Sr,{overflow:"auto",dangerouslySetInnerHTML:{__html:t.localization.getText(0)}}),Object(Cr.jsx)(Sr,{dangerouslySetInnerHTML:{__html:t.localization.getText(1)}})]}),Object(Cr.jsxs)(rc,{center:!0,size:5,overflow:"hidden",children:[Object(Cr.jsx)(uc,{imageUrl:t.localization.getImage(1)}),Object(Cr.jsx)(wr,{onClick:()=>C("groups/create"),children:$e("catalog.start.guild.purchase.button")})]})]})},pa=e=>{const{page:t=null}=e;return Object(Cr.jsx)("div",{className:"h-100 nitro-catalog-layout-info-loyalty text-black d-flex flex-row",children:Object(Cr.jsx)("div",{className:"overflow-auto h-100 d-flex flex-column info-loyalty-content",children:Object(Cr.jsx)("div",{dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})})})},_a=e=>{const{page:t=null}=e,s=t.localization.getImage(1);return Object(Cr.jsxs)(rc,{grow:!0,className:"bg-muted rounded text-black p-2",overflow:"hidden",children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:2,children:[s&&Object(Cr.jsx)("img",{alt:"",src:s}),Object(Cr.jsx)(Sr,{className:"fs-5",dangerouslySetInnerHTML:{__html:t.localization.getText(1)}})]}),Object(Cr.jsx)(rc,{grow:!0,alignItems:"center",overflow:"auto",children:Object(Cr.jsx)(Sr,{dangerouslySetInnerHTML:{__html:t.localization.getText(2)}})}),Object(Cr.jsx)(yr,{alignItems:"center",children:Object(Cr.jsx)(Sr,{className:"fw-bold",dangerouslySetInnerHTML:{__html:t.localization.getText(3)}})})]})},Ea=e=>Object(Cr.jsx)(_a,{...e}),fa=e=>{const{columnCount:t=5,children:s=null,...n}=e,{currentOffer:r=null}=vi();return r?Object(Cr.jsxs)(Ar,{columnCount:5,...n,children:[r.products&&r.products.length>0&&r.products.map(((e,t)=>Object(Cr.jsx)(lc,{itemImage:e.getIconUrl(),itemCount:e.productCount},t))),s]}):null},xa=e=>{const{gap:t=1,...s}=e,{currentOffer:n=null}=vi();return Object(Cr.jsx)(yr,{gap:t,alignItems:"center",classNames:["bg-muted","p-1","rounded"],...s,children:Object(Cr.jsx)(ca,{separator:!0,offer:n})})},Ia=e=>{const{page:t=null}=e;return Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Zi,{}),Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsxs)(rc,{size:7,overflow:"hidden",children:[!!t.localization.getText(2)&&Object(Cr.jsx)(Ac,{dangerouslySetInnerHTML:{__html:t.localization.getText(2)}}),Object(Cr.jsx)(rc,{grow:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:Object(Cr.jsx)(fa,{fullWidth:!0,className:"nitro-catalog-layout-bundle-grid"})})]}),Object(Cr.jsxs)(rc,{size:5,overflow:"hidden",gap:1,children:[!!t.localization.getText(1)&&Object(Cr.jsx)(Ac,{center:!0,small:!0,overflow:"auto",children:t.localization.getText(1)}),Object(Cr.jsxs)(rc,{grow:!0,position:"relative",overflow:"hidden",gap:0,children:[!!t.localization.getImage(1)&&Object(Cr.jsx)("img",{alt:"",className:"flex-grow-1",src:t.localization.getImage(1)}),Object(Cr.jsx)(ua,{position:"absolute",className:"bg-muted rounded bottom-0 start-0"}),Object(Cr.jsx)(xa,{position:"absolute",className:"bottom-0 end-0"})]}),Object(Cr.jsx)(rc,{gap:1,children:Object(Cr.jsx)(ra,{})})]})]})]})},Ta=e=>{const{page:t=null}=e;return Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Zi,{}),Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsxs)(rc,{size:7,overflow:"hidden",children:[!!t.localization.getText(2)&&Object(Cr.jsx)(Ac,{dangerouslySetInnerHTML:{__html:t.localization.getText(2)}}),Object(Cr.jsx)(rc,{grow:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:Object(Cr.jsx)(fa,{fullWidth:!0,className:"nitro-catalog-layout-bundle-grid"})})]}),Object(Cr.jsxs)(rc,{size:5,overflow:"hidden",gap:1,children:[!!t.localization.getText(1)&&Object(Cr.jsx)(Ac,{center:!0,small:!0,overflow:"auto",children:t.localization.getText(1)}),Object(Cr.jsxs)(rc,{grow:!0,position:"relative",overflow:"hidden",gap:0,children:[!!t.localization.getImage(1)&&Object(Cr.jsx)("img",{alt:"",className:"flex-grow-1",src:t.localization.getImage(1)}),Object(Cr.jsx)(ua,{position:"absolute",className:"bg-muted rounded bottom-0 start-0"}),Object(Cr.jsx)(xa,{position:"absolute",className:"bottom-0 end-0"})]}),Object(Cr.jsx)(rc,{gap:1,children:Object(Cr.jsx)(ra,{})})]})]})]})},Ca=["floors","walls","views"],Sa=e=>{const{columnCount:t=5,children:s=null,...n}=e,[r,i]=Object(c.useState)(null),[a,o]=Object(c.useState)(-1),[l,u]=Object(c.useState)(null),{currentPage:d=null,currentOffer:h=null,setCurrentOffer:j=null,setPurchaseOptions:b=null}=vi();if(Object(c.useEffect)((()=>{if(!d)return;const e=[[],[],[]];for(const t of d.offers){if(t.pricingModel!==Li.PRICING_MODEL_SINGLE&&t.pricingModel!==Li.PRICING_MODEL_MULTI)continue;const s=t.product;if(!s||s.productType!==p.WALL&&s.productType!==p.FLOOR||!s.furnitureData)continue;switch(s.furnitureData.className){case"floor":e[0].push(t);break;case"wallpaper":e[1].push(t);break;case"landscape":e[2].push(t)}}i(e),o(0),u([e[0][0],e[1][0],e[2][0]])}),[d]),Object(c.useEffect)((()=>{-1!==a&&l&&j(l[a])}),[a,l,j]),Object(c.useEffect)((()=>{-1!==a&&l&&h&&b((e=>{const t={...e};return t.extraData=l[a].product.extraParam,t.extraParamRequired=!0,t}))}),[h,a,l,b]),!r||-1===a)return null;const g=r[a];return Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(kr,{children:Ca.map(((e,t)=>Object(Cr.jsx)(wr,{active:a===t,onClick:e=>o(t),children:$e(`catalog.spaces.tab.${e}`)},t)))}),Object(Cr.jsxs)(Ar,{columnCount:t,...n,children:[g&&g.length>0&&g.map(((e,t)=>Object(Cr.jsx)(ea,{itemActive:h&&h===e,offer:e,onClick:()=>{u((t=>{const s=[...t];return s[a]=e,s}))}},t))),s]})]})},Na=e=>{const{page:t=null}=e,{currentOffer:s=null,roomPreviewer:n=null}=vi();return Object(c.useEffect)((()=>{n.updatePreviewObjectBoundingRectangle(new a.Pe)}),[n]),Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsx)(rc,{size:7,overflow:"hidden",children:Object(Cr.jsx)(Sa,{})}),Object(Cr.jsxs)(rc,{center:!s,size:5,overflow:"hidden",children:[!s&&Object(Cr.jsxs)(Cr.Fragment,{children:[!!t.localization.getImage(1)&&Object(Cr.jsx)("img",{alt:"",src:t.localization.getImage(1)}),Object(Cr.jsx)(Ac,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),s&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Sr,{position:"relative",overflow:"hidden",children:Object(Cr.jsx)(oa,{})}),Object(Cr.jsxs)(rc,{grow:!0,gap:1,children:[Object(Cr.jsx)(Ac,{grow:!0,truncate:!0,children:s.localizationName}),Object(Cr.jsx)(yr,{justifyContent:"end",children:Object(Cr.jsx)(ia,{alignItems:"end"})}),Object(Cr.jsx)(ra,{})]})]})]})]})},va=e=>{const{page:t=null}=e,[s,n]=Object(c.useState)(""),{currentOffer:r=null,setPurchaseOptions:i=null}=vi();return Object(c.useEffect)((()=>{r&&i((e=>{const t={...e};return t.extraData=s,t}))}),[r,s,i]),Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsxs)(rc,{size:7,overflow:"hidden",children:[Object(Cr.jsx)(ta,{}),Object(Cr.jsx)("textarea",{className:"flex-grow-1 form-control w-100",defaultValue:s||"",onChange:e=>n(e.target.value)})]}),Object(Cr.jsxs)(rc,{center:!r,size:5,overflow:"hidden",children:[!r&&Object(Cr.jsxs)(Cr.Fragment,{children:[!!t.localization.getImage(1)&&Object(Cr.jsx)("img",{alt:"",src:t.localization.getImage(1)}),Object(Cr.jsx)(Ac,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),r&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(oa,{}),Object(Cr.jsxs)(rc,{grow:!0,gap:1,children:[Object(Cr.jsx)(Ac,{grow:!0,truncate:!0,children:r.localizationName}),Object(Cr.jsx)(yr,{justifyContent:"end",children:Object(Cr.jsx)(ia,{alignItems:"end"})}),Object(Cr.jsx)(ra,{})]})]})]})]})},Ra=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(na.NONE),{currentPage:i=null,catalogOptions:o=null}=vi(),{purse:l=null,getCurrencyAmount:u=null}=kt(),{clubOffers:d=null}=o,h=Object(c.useCallback)((e=>{switch(e.type){case hn.PURCHASE_SUCCESS:return void r(na.NONE);case jn.PURCHASE_FAILED:return void r(na.FAILED)}}),[]);lt(hn.PURCHASE_SUCCESS,h),lt(jn.PURCHASE_FAILED,h);const j=Object(c.useCallback)((e=>{let t="";return e.months>0&&(t=$e("catalog.vip.item.header.months",["num_months"],[e.months.toString()])),e.extraDays>0&&(""!==t&&(t+=" "),t+=" "+$e("catalog.vip.item.header.days",["num_days"],[e.extraDays.toString()])),t}),[]),b=Object(c.useCallback)((()=>{if(!l)return"";const e=l.clubDays>0||l.clubPeriods>0?"extension.":"subscription.",s=0===t.months?"days":"months",n=0===t.months?t.extraDays:t.months;return $e("catalog.vip.buy.confirm."+e+s).replace("%NUM_"+s.toUpperCase()+"%",n.toString())}),[t,l]),g=Object(c.useCallback)((()=>{let e=$e("catalog.vip.buy.confirm.end_date");return e=e.replace("%month%",t.month.toString()),e=e.replace("%day%",t.day.toString()),e=e.replace("%year%",t.year.toString()),e}),[t]),O=Object(c.useMemo)((()=>{const e=l.clubDays;return $e("catalog.vip.extend.info",["days"],[(31*l.clubPeriods+e).toString()])}),[l]),m=Object(c.useCallback)((()=>{t&&(r(na.PURCHASE),Ln(new a.vf(i.pageId,t.offerId,null,1)))}),[t,i]),p=Object(c.useCallback)((e=>{r(na.NONE),s(e)}),[]),_=Object(c.useCallback)((()=>{if(!t)return null;if(t.priceCredits>u(-1))return Object(Cr.jsx)(wr,{fullWidth:!0,variant:"danger",children:$e("catalog.alert.notenough.title")});if(t.priceActivityPoints>u(t.priceActivityPointsType))return Object(Cr.jsx)(wr,{fullWidth:!0,variant:"danger",children:$e("catalog.alert.notenough.activitypoints.title."+t.priceActivityPointsType)});switch(n){case na.CONFIRM:return Object(Cr.jsx)(wr,{fullWidth:!0,variant:"warning",onClick:m,children:$e("catalog.marketplace.confirm_title")});case na.PURCHASE:return Object(Cr.jsx)(wr,{fullWidth:!0,variant:"primary",disabled:!0,children:Object(Cr.jsx)(dc,{})});case na.FAILED:return Object(Cr.jsx)(wr,{fullWidth:!0,variant:"danger",disabled:!0,children:$e("generic.failed")});case na.NONE:default:return Object(Cr.jsx)(wr,{fullWidth:!0,variant:"success",onClick:()=>r(na.CONFIRM),children:$e("buy")})}}),[t,n,m,u]);return Object(c.useEffect)((()=>{d||Ln(new a.dc(1))}),[d]),Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsxs)(rc,{fullHeight:!0,size:7,overflow:"hidden",justifyContent:"between",children:[Object(Cr.jsx)(Ar,{columnCount:1,className:"nitro-catalog-layout-vip-buy-grid",children:d&&d.length>0&&d.map(((e,s)=>Object(Cr.jsxs)(lc,{column:!1,center:!1,alignItems:"center",justifyContent:"between",itemActive:t===e,className:"p-1",onClick:()=>p(e),children:[Object(Cr.jsx)("i",{className:"icon-hc-banner"}),Object(Cr.jsxs)(rc,{justifyContent:"end",gap:0,children:[Object(Cr.jsx)(Ac,{textEnd:!0,children:j(e)}),Object(Cr.jsxs)(yr,{justifyContent:"end",gap:1,children:[e.priceCredits>0&&Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"end",gap:1,children:[Object(Cr.jsx)(Ac,{children:e.priceCredits}),Object(Cr.jsx)(ec,{type:-1})]}),e.priceActivityPoints>0&&Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"end",gap:1,children:[Object(Cr.jsx)(Ac,{children:e.priceActivityPoints}),Object(Cr.jsx)(ec,{type:e.priceActivityPointsType})]})]})]})]},s)))}),Object(Cr.jsx)(Ac,{center:!0,dangerouslySetInnerHTML:{__html:$e("catalog.vip.buy.hccenter")}})]}),Object(Cr.jsxs)(rc,{size:5,overflow:"hidden",children:[Object(Cr.jsxs)(rc,{fullHeight:!0,center:!0,overflow:"hidden",children:[i.localization.getImage(1)&&Object(Cr.jsx)("img",{alt:"",src:i.localization.getImage(1)}),Object(Cr.jsx)(Ac,{center:!0,overflow:"auto",dangerouslySetInnerHTML:{__html:O}})]}),t&&Object(Cr.jsxs)(rc,{fullWidth:!0,grow:!0,justifyContent:"end",children:[Object(Cr.jsxs)(yr,{alignItems:"end",children:[Object(Cr.jsxs)(rc,{grow:!0,gap:0,children:[Object(Cr.jsx)(Ac,{fontWeight:"bold",children:b()}),Object(Cr.jsx)(Ac,{children:g()})]}),Object(Cr.jsxs)(rc,{gap:1,children:[t.priceCredits>0&&Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"end",gap:1,children:[Object(Cr.jsx)(Ac,{children:t.priceCredits}),Object(Cr.jsx)(ec,{type:-1})]}),t.priceActivityPoints>0&&Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"end",gap:1,children:[Object(Cr.jsx)(Ac,{children:t.priceActivityPoints}),Object(Cr.jsx)(ec,{type:t.priceActivityPointsType})]})]})]}),_()]})]})]})},Aa=e=>{const{text:t=null}=e,[s,n]=Object(c.useState)(""),[r,i]=Object(c.useState)(!1),o=Object(c.useCallback)((e=>{const t=e.getParser();let s=$e("catalog.alert.voucherredeem.ok.description");t.productName&&(s=$e("catalog.alert.voucherredeem.ok.description.furni",["productName","productDescription"],[t.productName,t.productDescription])),jr.simpleAlert(s,null,null,null,$e("catalog.alert.voucherredeem.ok.title")),i(!1),n("")}),[]);Je(a.Ni,o);const l=Object(c.useCallback)((e=>{const t=e.getParser();jr.simpleAlert($e(`catalog.alert.voucherredeem.error.description.${t.errorCode}`),null,null,null,$e("catalog.alert.voucherredeem.error.title")),i(!1)}),[]);return Je(a.Mi,l),Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:t,value:s,onChange:e=>n(e.target.value)}),Object(Cr.jsx)(wr,{variant:"primary",onClick:()=>{s&&s.length&&!r&&(Ln(new a.Cf(s)),i(!0))},disabled:r,children:Object(Cr.jsx)(Lr.a,{icon:"tag"})})]})},ya=e=>{const{item:t=null,position:s="relative",pointer:n=!0,overflow:r="hidden",fullHeight:i=!0,classNames:a=[],children:o=null,...l}=e,u=Object(c.useMemo)((()=>{const e=["rounded","nitro-front-page-item"];return a.length&&e.push(...a),e}),[a]);if(!t)return null;const d=N("image.library.url")+t.itemPromoImage;return Object(Cr.jsxs)(Jr,{imageUrl:d,classNames:u,position:s,fullHeight:i,pointer:n,overflow:r,...l,children:[Object(Cr.jsx)(Ac,{position:"absolute",variant:"white",className:"bg-dark rounded p-2 m-2 bottom-0",children:t.itemName}),o]})},wa=e=>{const{page:t=null,hideNavigation:s=null}=e,{frontPageItems:n=[]}=vi(),r=Object(c.useCallback)((e=>{switch(e.type){case a.Gb.ITEM_CATALOGUE_PAGE:return void C(`catalog/open/${e.catalogPageLocation}`);case a.Gb.ITEM_PRODUCT_OFFER:return void C(`catalog/open/${e.productOfferId}`)}}),[]);return Object(c.useEffect)((()=>{s()}),[t,s]),Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsx)(rc,{size:4,children:n[0]&&Object(Cr.jsx)(ya,{item:n[0],onClick:e=>r(n[0])})}),Object(Cr.jsxs)(rc,{size:8,children:[n[1]&&Object(Cr.jsx)(ya,{item:n[1],onClick:e=>r(n[1])}),n[2]&&Object(Cr.jsx)(ya,{item:n[2],onClick:e=>r(n[2])}),n[3]&&Object(Cr.jsx)(ya,{item:n[3],onClick:e=>r(n[3])}),Object(Cr.jsx)(Aa,{text:t.localization.getText(1)})]})]})};class ka{constructor(e,t,s,n,r,c,i,a){let o=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1;this._offerId=void 0,this._furniId=void 0,this._furniType=void 0,this._extraData=void 0,this._stuffData=void 0,this._price=void 0,this._averagePrice=void 0,this._imageCallback=void 0,this._status=void 0,this._timeLeftMinutes=-1,this._offerCount=void 0,this._image=void 0,this._offerId=e,this._furniId=t,this._furniType=s,this._extraData=n,this._stuffData=r,this._price=c,this._status=i,this._averagePrice=a,this._offerCount=o}get offerId(){return this._offerId}set offerId(e){this._offerId=e}get furniId(){return this._furniId}get furniType(){return this._furniType}get extraData(){return this._extraData}get stuffData(){return this._stuffData}get price(){return this._price}set price(e){this._price=e}get averagePrice(){return this._averagePrice}get image(){return this._image}set image(e){this._image=e}get imageCallback(){return this._imageCallback}set imageCallback(e){this._imageCallback=e}get status(){return this._status}get timeLeftMinutes(){return this._timeLeftMinutes}set timeLeftMinutes(e){this._timeLeftMinutes=e}get offerCount(){return this._offerCount}set offerCount(e){this._offerCount=e}get isUniqueLimitedItem(){return this.stuffData&&this.stuffData.uniqueSeries>0}}ka.TYPE_FLOOR=1,ka.TYPE_WALL=2;class Da{}Da.ONGOING=1,Da.ONGOING_OWN=1,Da.SOLD=2,Da.EXPIRED=3;const Pa=2,Ua=e=>{const{offerData:t=null,type:s=Pa,onClick:n=null}=e,r=Object(c.useMemo)((()=>t?$e((2===t.furniType?"wallItem":"roomItem")+`.name.${t.furniId}`):""),[t]),i=Object(c.useCallback)((()=>{if(!t)return"";if(t.status===Da.SOLD)return $e("catalog.marketplace.offer.sold");if(t.timeLeftMinutes<=0)return $e("catalog.marketplace.offer.expired");const e=Math.max(1,t.timeLeftMinutes),s=Math.floor(e/60);let n=e-60*s+" "+$e("catalog.marketplace.offer.minutes");return s>0&&(n=s+" "+$e("catalog.marketplace.offer.hours")+" "+n),$e("catalog.marketplace.offer.time_left",["time"],[n])}),[t]);return Object(Cr.jsxs)(lc,{shrink:!0,center:!1,column:!1,alignItems:"center",className:"p-1",children:[Object(Cr.jsx)(tc,{productType:t.furniType===ka.TYPE_FLOOR?p.FLOOR:p.WALL,productClassId:t.furniId,extraData:t.extraData,style:{width:50,height:50}}),Object(Cr.jsxs)(rc,{grow:!0,gap:0,children:[Object(Cr.jsx)(Ac,{fontWeight:"bold",children:r}),1===s&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Ac,{children:$e("catalog.marketplace.offer.price_own_item",["price"],[t.price.toString()])}),Object(Cr.jsx)(Ac,{children:i()})]}),s===Pa&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Ac,{children:$e("catalog.marketplace.offer.price_public_item",["price","average"],[t.price.toString(),t.averagePrice.toString()])}),Object(Cr.jsx)(Ac,{children:$e("catalog.marketplace.offer_count",["count"],[t.offerCount.toString()])})]})]}),Object(Cr.jsxs)(rc,{gap:1,children:[1===s&&t.status!==Da.SOLD&&Object(Cr.jsx)(wr,{variant:"secondary",onClick:()=>n(t),children:$e("catalog.marketplace.offer.pick")}),s===Pa&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(wr,{variant:"secondary",onClick:()=>n(t),children:$e("buy")}),Object(Cr.jsx)(wr,{variant:"secondary",disabled:!0,children:$e("catalog.marketplace.view_more")})]})]})]})},La=e=>{const[t,s]=Object(c.useState)(0),[n,r]=Object(c.useState)([]),i=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const n=t.offers.map((e=>{const t=new ka(e.offerId,e.furniId,e.furniType,e.extraData,e.stuffData,e.price,e.status,e.averagePrice,e.offerCount);return t.timeLeftMinutes=e.timeLeftMinutes,t}));s(t.creditsWaiting),r(n)}),[]);Je(a.be,i);const o=Object(c.useCallback)((e=>{const t=e.getParser();t&&(t.success?r((e=>e.filter((e=>e.offerId!==t.offerId)))):jr.simpleAlert($e("catalog.marketplace.cancel_failed"),or.DEFAULT,null,null,$e("catalog.marketplace.operation_failed.topic")))}),[]);Je(a.Yd,o);const l=Object(c.useMemo)((()=>n.filter((e=>e.status===Da.SOLD))),[n]),u=Object(c.useCallback)((()=>{r((e=>{const t=l.map((e=>e.offerId));return e.filter((e=>-1===t.indexOf(e.offerId)))})),Ln(new a.Bf)}),[l]),d=e=>{Ln(new a.N(e.offerId))};return Object(c.useEffect)((()=>{Ln(new a.kc)}),[]),Object(Cr.jsxs)(rc,{overflow:"hidden",children:[t<=0&&Object(Cr.jsx)(Ac,{center:!0,className:"bg-muted rounded p-1",children:$e("catalog.marketplace.redeem.no_sold_items")}),t>0&&Object(Cr.jsxs)(rc,{center:!0,gap:1,className:"bg-muted rounded p-2",children:[Object(Cr.jsx)(Ac,{children:$e("catalog.marketplace.redeem.get_credits",["count","credits"],[l.length.toString(),t.toString()])}),Object(Cr.jsx)(wr,{className:"mt-1",onClick:u,children:$e("catalog.marketplace.offer.redeem")})]}),Object(Cr.jsxs)(rc,{gap:1,overflow:"hidden",children:[Object(Cr.jsx)(Ac,{truncate:!0,shrink:!0,fontWeight:"bold",children:$e("catalog.marketplace.items_found",["count"],[n.length.toString()])}),Object(Cr.jsx)(rc,{overflow:"auto",className:"nitro-catalog-layout-marketplace-grid",children:n.length>0&&n.map((e=>Object(Cr.jsx)(Ua,{offerData:e,type:1,onClick:d},e.offerId)))})]})]})};class Ma{}Ma.BY_ACTIVITY=1,Ma.BY_VALUE=2,Ma.ADVANCED=3;const Fa=e=>{const{searchType:t=null,sortTypes:s=null,onSearch:n=null}=e,[r,i]=Object(c.useState)(s?s[0]:3),[a,o]=Object(c.useState)(""),[l,u]=Object(c.useState)(0),[d,h]=Object(c.useState)(0),j=Object(c.useCallback)((e=>{i(e),t!==Ma.BY_ACTIVITY&&t!==Ma.BY_VALUE||n({minPrice:-1,maxPrice:-1,query:"",type:e})}),[n,t]),b=Object(c.useCallback)((()=>{n({minPrice:l>0?l:-1,maxPrice:d>0?d:-1,type:r,query:a})}),[d,l,n,a,r]);return Object(c.useEffect)((()=>{if(!s||!s.length)return;const e=s[0];i(e),t!==Ma.BY_ACTIVITY&&Ma.BY_VALUE!==t||n({minPrice:-1,maxPrice:-1,query:"",type:e})}),[n,t,s]),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Ac,{className:"col-3",children:$e("catalog.marketplace.sort_order")}),Object(Cr.jsx)("select",{className:"form-select form-select-sm",value:r,onChange:e=>j(parseInt(e.target.value)),children:s.map((e=>Object(Cr.jsx)("option",{value:e,children:$e(`catalog.marketplace.sort.${e}`)},e)))})]}),t===Ma.ADVANCED&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Ac,{className:"col-3",children:$e("catalog.marketplace.search_name")}),Object(Cr.jsx)("input",{className:"form-control form-control-sm",type:"text",value:a,onChange:e=>o(e.target.value)})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Ac,{className:"col-3",children:$e("catalog.marketplace.search_price")}),Object(Cr.jsxs)(yr,{fullWidth:!0,gap:1,children:[Object(Cr.jsx)("input",{className:"form-control form-control-sm",type:"number",min:0,value:l,onChange:e=>u(e.target.valueAsNumber)}),Object(Cr.jsx)("input",{className:"form-control form-control-sm",type:"number",min:0,value:d,onChange:e=>h(e.target.valueAsNumber)})]})]}),Object(Cr.jsx)(wr,{variant:"secondary",className:"mx-auto",onClick:b,children:$e("generic.search")})]})]})},Ha=[1,2],Ba=[3,4,5,6],Ga=[1,2,3,4,5,6],Wa=e=>{const[t,s]=Object(c.useState)(Ma.BY_ACTIVITY),[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(new Map),[l,u]=Object(c.useState)({minPrice:-1,maxPrice:-1,query:"",type:3}),{getCurrencyAmount:d=null}=kt(),h=Object(c.useCallback)((e=>{u(e),Ln(new a.jc(e.minPrice,e.maxPrice,e.query,e.type))}),[]),j=Object(c.useMemo)((()=>{switch(t){case Ma.BY_ACTIVITY:return Ba;case Ma.BY_VALUE:return Ha;case Ma.ADVANCED:return Ga}return[]}),[t]),b=Object(c.useCallback)((e=>{if(e.price>d(-1))return void jr.simpleAlert($e("catalog.alert.notenough.credits.description"),or.DEFAULT,null,null,$e("catalog.alert.notenough.title"));const t=e.offerId;jr.confirm($e("catalog.marketplace.confirm_header"),(()=>{Ln(new a.E(t))}),null,null,null,$e("catalog.marketplace.confirm_title"))}),[d]),g=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const s=new Map;t.offers.forEach((e=>{const t=new ka(e.offerId,e.furniId,e.furniType,e.extraData,e.stuffData,e.price,e.status,e.averagePrice,e.offerCount);t.timeLeftMinutes=e.timeLeftMinutes,s.set(e.offerId,t)})),r(t.totalItemsFound),o(s)}),[]),O=Object(c.useCallback)((e=>{const t=e.getParser();if(t)switch(t.result){case 1:h(l);break;case 2:o((e=>{const s=new Map(e);return s.delete(t.requestedOfferId),s})),jr.simpleAlert($e("catalog.marketplace.not_available_header"),or.DEFAULT,null,null,$e("catalog.marketplace.not_available_title"));break;case 3:o((e=>{const s=new Map(e),n=s.get(t.requestedOfferId);return n&&(n.offerId=t.offerId,n.price=t.newPrice,n.offerCount--,s.set(n.offerId,n)),s.delete(t.requestedOfferId),s})),jr.confirm($e("catalog.marketplace.confirm_higher_header")+"\n"+$e("catalog.marketplace.confirm_price",["price"],[t.newPrice.toString()]),(()=>{Ln(new a.E(t.offerId))}),null,null,null,$e("catalog.marketplace.confirm_higher_title"));break;case 4:jr.simpleAlert($e("catalog.alert.notenough.credits.description"),or.DEFAULT,null,null,$e("catalog.alert.notenough.title"))}}),[l,h]);return Je(a.Wd,g),Je(a.Xd,O),Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(kr,{children:[Object(Cr.jsx)(wr,{active:t===Ma.BY_ACTIVITY,onClick:()=>s(Ma.BY_ACTIVITY),children:$e("catalog.marketplace.search_by_activity")}),Object(Cr.jsx)(wr,{active:t===Ma.BY_VALUE,onClick:()=>s(Ma.BY_VALUE),children:$e("catalog.marketplace.search_by_value")}),Object(Cr.jsx)(wr,{active:t===Ma.ADVANCED,onClick:()=>s(Ma.ADVANCED),children:$e("catalog.marketplace.search_advanced")})]}),Object(Cr.jsx)(Fa,{sortTypes:j,searchType:t,onSearch:h}),Object(Cr.jsxs)(rc,{gap:1,overflow:"hidden",children:[Object(Cr.jsx)(Ac,{truncate:!0,shrink:!0,fontWeight:"bold",children:$e("catalog.marketplace.items_found",["count"],[i.size.toString()])}),Object(Cr.jsx)(rc,{className:"nitro-catalog-layout-marketplace-grid",overflow:"auto",children:Array.from(i.values()).map(((e,t)=>Object(Cr.jsx)(Ua,{offerData:e,type:Pa,onClick:b},t)))})]})]})},Va=e=>{const{page:t=null}=e,[s,n]=Object(c.useState)(-1),[r,i]=Object(c.useState)([]),[o,l]=Object(c.useState)(-1),[u,d]=Object(c.useState)([]),[h,j]=Object(c.useState)(-1),[b,g]=Object(c.useState)(!1),[O,m]=Object(c.useState)(""),[p,_]=Object(c.useState)(!0),[E,f]=Object(c.useState)(-1),{currentOffer:x=null,setCurrentOffer:I=null,setPurchaseOptions:T=null,catalogOptions:C=null,roomPreviewer:S=null}=vi(),{petPalettes:N=null}=C,v=Object(c.useMemo)((()=>u.length&&-1!==h?u[h][0]:16777215),[u,h]),R=Object(c.useMemo)((()=>-1!==s&&r.length&&-1!==o?$e(`pet.breed.${s}.${r[o].breedId}`):""),[s,r,o]),A=Object(c.useMemo)((()=>{if(!r.length||-1===o)return"";const e=r[o].paletteId;let t=16777215;if(s<=7){if(-1===h)return"";t=u[h][0]}let n=t.toString(16).toUpperCase();for(;n.length<6;)n="0"+n;return`${e}\n${n}`}),[r,o,s,u,h]),y=Object(c.useMemo)((()=>{let e="";switch(E){case 1:e="catalog.alert.petname.long";break;case 2:e="catalog.alert.petname.short";break;case 3:e="catalog.alert.petname.chars";break;case 4:e="catalog.alert.petname.bobba"}return e&&e.length?$e(e):""}),[E]),k=Object(c.useCallback)((()=>{-1!==E?0!==E||Ln(new a.vf(t.pageId,x.offerId,`${O}\n${A}`,1)):Ln(new a.i(O,1))}),[t,x,O,A,E]),D=Object(c.useCallback)((e=>{f(e.result),0===e.result?k():ot(new jn(-1))}),[k]);return lt(ln.APPROVE_RESULT,D),Object(c.useEffect)((()=>{if(!t||!t.offers.length)return;const e=t.offers[0];I(e),n(function(e){if(!e.length)return 0;let t=e.length-1;for(;t>=0&&!isNaN(parseInt(e.charAt(t)));)t--;return t>0?parseInt(e.substring(t+1)):-1}(e.localizationId)),g(!1)}),[t,I]),Object(c.useEffect)((()=>{if(!x)return;const e=x.product.productData;if(e){if(N)for(const t of N){if(t.breed!==e.type)continue;const s=[];for(const e of t.palettes)e.sellable&&s.push(e);return l(s.length?0:-1),void i(s)}l(-1),i([]),Ln(new a.uc(e.type))}}),[x,N]),Object(c.useEffect)((()=>{if(-1===s)return;const e=function(e,t){switch(e){case 0:case 1:return[[16743226],[16750435],[16764339],[16094464],[16498012],[16704690],[15586304],[16115545],[16513201],[8694111],[11585939],[14413767],[6664599],[9553845],[12971486],[8358322],[10002885],[13292268],[10780600],[12623573],[14403561],[12418717],[14327229],[15517403],[14515069],[15764368],[16366271],[11250603],[13948116],[16777215],[14256481],[14656129],[15848130],[14005087],[14337152],[15918540],[15118118],[15531929],[9764857],[11258085]];case 2:return[[16579283],[15378351],[8830016],[15257125],[9340985],[8949607],[6198292],[8703620],[9889626],[8972045],[12161285],[13162269],[8620113],[12616503],[8628101],[13827840],[9764857]];case 3:case 5:return[[16777215],[15658734],[14540253]];case 4:return[[16777215],[16053490],[15464440],[16248792],[15396319],[15007487]];case 6:return[[16777215],[15658734],[14540253],[16767177],[16770205],[16751331]];case 7:return[[13421772],[11447982],[16751331],[10149119],[16763290],[16743786]];default:{const s=[];for(const n of t){const t=w().getPetColorResult(e,n.paletteId);t&&(t.primaryColor===t.secondaryColor?s.push([t.primaryColor]):s.push([t.primaryColor,t.secondaryColor]))}return s}}}(s,r);j(e.length?0:-1),d(e)}),[s,r]),Object(c.useEffect)((()=>{if(!S)return;if(S.reset(!1),-1===s||!r.length||-1===o)return;let e=`${s} ${r[o].paletteId}`;s<=7&&(e+=` ${v.toString(16)}`),S.addPetIntoRoom(e)}),[S,s,r,o,v]),Object(c.useEffect)((()=>{f(-1)}),[O]),x?Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsx)(rc,{size:7,overflow:"hidden",children:Object(Cr.jsxs)(Ar,{columnCount:5,children:[!b&&r.length>0&&r.map(((e,t)=>Object(Cr.jsx)(lc,{itemActive:o===t,onClick:e=>l(t),children:Object(Cr.jsx)(_c,{typeId:s,paletteId:e.paletteId,direction:2,headOnly:!0})},t))),b&&u.length>0&&u.map(((e,t)=>Object(Cr.jsx)(lc,{itemHighlight:!0,itemActive:h===t,itemColor:a.eb.int2rgb(e[0]),className:"clear-bg",onClick:e=>j(t)},t)))]})}),Object(Cr.jsxs)(rc,{center:!x,size:5,overflow:"hidden",children:[!x&&Object(Cr.jsxs)(Cr.Fragment,{children:[!!t.localization.getImage(1)&&Object(Cr.jsx)("img",{alt:"",src:t.localization.getImage(1)}),Object(Cr.jsx)(Ac,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),x&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(Sr,{position:"relative",overflow:"hidden",children:[Object(Cr.jsx)(oa,{}),Object(Cr.jsx)(ua,{position:"absolute",className:"bg-muted rounded bottom-1 end-1"}),s>-1&&s<=7&&Object(Cr.jsx)(wr,{position:"absolute",className:"bottom-1 start-1",onClick:e=>g(!b),children:Object(Cr.jsx)(Lr.a,{icon:"fill-drip"})})]}),Object(Cr.jsxs)(rc,{grow:!0,gap:1,children:[Object(Cr.jsx)(Ac,{truncate:!0,children:R}),Object(Cr.jsxs)(rc,{grow:!0,gap:1,children:[Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm w-100",placeholder:$e("widgets.petpackage.name.title"),value:O,onChange:e=>m(e.target.value)}),E>0&&Object(Cr.jsx)(Sr,{className:"invalid-feedback d-block m-0",children:y})]}),Object(Cr.jsx)(yr,{justifyContent:"end",children:Object(Cr.jsx)(ia,{justifyContent:"end",alignItems:"end"})}),Object(Cr.jsx)(ra,{purchaseCallback:k})]})]})]})]}):null},qa=e=>{const{offer:t=null,isAvailable:s=!1,onSelect:n=null}=e,r=Object(c.useCallback)((()=>{if(!t||!t.products.length)return"";const e=t.products[0];return bs.getProductImageUrl(e.productType,e.furniClassId,e.extraParam)}),[t]),i=Object(c.useCallback)((()=>{if(!t||!t.products.length)return"";const e=t.products[0];return $e(2===bs.getProductCategory(e.productType,e.furniClassId)?"wallItem.name."+e.furniClassId:"roomItem.name."+e.furniClassId)}),[t]);Object(c.useCallback)((()=>{if(!t||!t.products.length)return"";const e=t.products[0];return $e(2===bs.getProductCategory(e.productType,e.furniClassId)?"wallItem.desc."+e.furniClassId:"roomItem.desc."+e.furniClassId)}),[t]);return Object(Cr.jsxs)(lc,{center:!1,column:!1,alignItems:"center",className:"p-1",children:[Object(Cr.jsx)(uc,{imageUrl:r()}),Object(Cr.jsx)(Ac,{grow:!0,fontWeight:"bold",children:i()}),Object(Cr.jsx)(wr,{variant:"secondary",onClick:()=>n(t.localizationId),disabled:!s,children:$e("catalog.club_gift.select")})]})},za=e=>{const{purse:t=null}=kt(),{catalogOptions:s=null,setCatalogOptions:n=null}=vi(),{clubGifts:r=null}=s,i=Object(c.useCallback)((()=>r?r.giftsAvailable>0?$e("catalog.club_gift.available",["amount"],[r.giftsAvailable.toString()]):r.daysUntilNextGift>0?$e("catalog.club_gift.days_until_next",["days"],[r.daysUntilNextGift.toString()]):t.isVip?$e("catalog.club_gift.not_available"):$e("catalog.club_gift.no_club"):""),[r,t]),o=Object(c.useCallback)((e=>{jr.confirm($e("catalog.club_gift.confirm"),(()=>{Ln(new a.zh(e)),n((e=>(e.clubGifts.giftsAvailable--,{...e})))}),null)}),[n]);return Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Ac,{truncate:!0,shrink:!0,fontWeight:"bold",children:i()}),Object(Cr.jsx)(Ar,{columnCount:1,className:"nitro-catalog-layout-vip-gifts-grid",children:r.offers.length>0&&r.offers.map((e=>Object(Cr.jsx)(qa,{offer:e,isAvailable:r.getOfferExtraData(e.offerId).isSelectable&&r.giftsAvailable>0,onSelect:o},e.offerId)))})]})},Ya=(e,t)=>{if(!e)return null;const s={page:e,hideNavigation:t};switch(e.layoutCode){case"frontpage_featured":return null;case"frontpage4":return Object(Cr.jsx)(wa,{...s});case"pets":return Object(Cr.jsx)(Va,{...s});case"pets2":return Object(Cr.jsx)(Ea,{...s});case"pets3":return Object(Cr.jsx)(_a,{...s});case"vip_buy":return Object(Cr.jsx)(Ra,{...s});case"guild_frontpage":return Object(Cr.jsx)(ma,{...s});case"guild_forum":return Object(Cr.jsx)(Oa,{...s});case"guild_custom_furni":return Object(Cr.jsx)(ga,{...s});case"club_gifts":return Object(Cr.jsx)(za,{...s});case"marketplace_own_items":return Object(Cr.jsx)(La,{...s});case"marketplace":return Object(Cr.jsx)(Wa,{...s});case"single_bundle":return Object(Cr.jsx)(Ta,{...s});case"room_bundle":return Object(Cr.jsx)(Ia,{...s});case"spaces_new":return Object(Cr.jsx)(Na,{...s});case"trophies":return Object(Cr.jsx)(va,{...s});case"info_loyalty":return Object(Cr.jsx)(pa,{...s});case"badge_display":return Object(Cr.jsx)(la,{...s});default:return Object(Cr.jsx)(ha,{...s})}},Ka=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(0),{catalogOptions:i=null,setCatalogOptions:o=null}=vi(),{marketplaceConfiguration:l=null}=i,u=Object(c.useCallback)((e=>{const t=e.getParser();o((e=>{const s={...e};return s.marketplaceConfiguration=t,s}))}),[o]);Je(a.Zd,u);const d=Object(c.useCallback)((e=>{s(e.item)}),[]);if(lt(dn.POST_MARKETPLACE,d),Object(c.useEffect)((()=>{t&&!l&&Ln(new a.ic)}),[t,l]),Object(c.useEffect)((()=>{if(t)return()=>r(0)}),[t]),!l||!t)return null;const h=t?$e(t.isWallItem?"wallItem.name."+t.type:"roomItem.name."+t.type):"",j=t?$e(t.isWallItem?"wallItem.desc."+t.type:"roomItem.desc."+t.type):"";return Object(Cr.jsxs)($r,{className:"nitro-catalog-layout-marketplace-post-offer",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("inventory.marketplace.make_offer.title"),onCloseClick:e=>s(null)}),Object(Cr.jsx)(Hr,{overflow:"hidden",children:Object(Cr.jsxs)(Rr,{fullHeight:!0,children:[Object(Cr.jsx)(rc,{center:!0,className:"bg-muted rounded p-2",size:4,overflow:"hidden",children:Object(Cr.jsx)(sc,{productType:t.isWallItem?p.WALL:p.FLOOR,productClassId:t.type,extraData:t.extra.toString()})}),Object(Cr.jsxs)(rc,{size:8,justifyContent:"between",overflow:"hidden",children:[Object(Cr.jsxs)(rc,{grow:!0,gap:1,children:[Object(Cr.jsx)(Ac,{fontWeight:"bold",children:h}),Object(Cr.jsx)(Ac,{truncate:!0,shrink:!0,children:j})]}),Object(Cr.jsxs)(rc,{overflow:"auto",children:[Object(Cr.jsx)(Ac,{italics:!0,children:$e("inventory.marketplace.make_offer.expiration_info",["time"],[l.offerTime.toString()])}),Object(Cr.jsxs)("div",{className:"input-group has-validation",children:[Object(Cr.jsx)("input",{className:"form-control form-control-sm",type:"number",min:0,value:n,onChange:e=>r(parseInt(e.target.value)),placeholder:$e("inventory.marketplace.make_offer.price_request")}),(n<l.minimumPrice||isNaN(n))&&Object(Cr.jsx)(Sr,{className:"invalid-feedback d-block",children:$e("inventory.marketplace.make_offer.min_price",["minprice"],[l.minimumPrice.toString()])}),n>l.maximumPrice&&!isNaN(n)&&Object(Cr.jsx)(Sr,{className:"invalid-feedback d-block",children:$e("inventory.marketplace.make_offer.max_price",["maxprice"],[l.maximumPrice.toString()])}),!(n<l.minimumPrice||n>l.maximumPrice||isNaN(n))&&Object(Cr.jsx)(Sr,{className:"invalid-feedback d-block",children:$e("inventory.marketplace.make_offer.final_price",["commission","finalprice"],[l.commission.toString(),(n+l.commission).toString()])})]}),Object(Cr.jsx)(wr,{disabled:n<l.minimumPrice||n>l.maximumPrice||isNaN(n),onClick:()=>{!t||n<=l.minimumPrice||jr.confirm($e("inventory.marketplace.confirm_offer.info",["furniname","price"],[h,n.toString()]),(()=>{Ln(new a.Vd(n,t.isWallItem?2:1,t.id)),s(null)}),(()=>{s(null)}),null,null,$e("inventory.marketplace.confirm_offer.title"))},children:$e("inventory.marketplace.make_offer.post")})]})]})]})})]})},Qa=new Bi,$a=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)(-1),[l,u]=Object(c.useState)(-1),[d,h]=Object(c.useState)(wi.NORMAL),[j,b]=Object(c.useState)(null),[g,O]=Object(c.useState)(null),[m,p]=Object(c.useState)(null),[_,f]=Object(c.useState)(null),[x,I]=Object(c.useState)([]),[T,C]=Object(c.useState)(null),[S,N]=Object(c.useState)([]),[v,R]=Object(c.useState)(null),[A,k]=Object(c.useState)(!1),[D,P]=Object(c.useState)({quantity:1,extraData:null,extraParamRequired:!1,previewStuffData:null}),[U,L]=Object(c.useState)({}),M=Object(c.useCallback)((()=>{o(-1),u(-1),b(null),O(null),p(null),f(null),I([]),C(null),N([]),s(!1)}),[]),F=Object(c.useCallback)((e=>{const s=t;M(),s&&jr.simpleAlert($e("catalog.alert.published.description"),or.ALERT,null,null,$e("catalog.alert.published.title"))}),[t,M]);Je(a.T,F);const H=Object(c.useCallback)(((e,t)=>{if(t.pageId===e&&t!==j)return t;for(const s of t.children){const t=H(e,s);if(t)return t}return null}),[j]),B=Object(c.useCallback)(((e,t)=>{if(t.pageName===e&&t!==j)return t;for(const s of t.children){const t=B(e,s);if(t)return t}return null}),[j]),G=Object(c.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!g||!g.size)return null;if(t){const t=[],s=g.get(e);if(s&&s.length)for(const e of s)e.isVisible&&t.push(e);if(t.length)return t}return g.get(e)}),[g]),W=Object(c.useCallback)(((e,t)=>{e<0||(r(!0),o(e),e>-1&&Ln(new a.Zb(e,t,d)))}),[d]),V=Object(c.useCallback)(((e,t,s,n,r,c)=>{const i=new Hi(e,t,s,n,c);if(p(i),u((t=>-1!==e?e:t)),k(!1),r>-1&&i.offers.length)for(const a of i.offers)if(a.offerId===r){f(a);break}}),[]),q=Object(c.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if("root"===e.parent.pageName&&e.children.length)for(const r of e.children)if(r.isVisible){e=r;break}const s=[];let n=e;for(;n&&"root"!==n.pageName;)s.push(n),n=n.parent;s.reverse(),I((t=>{const n=t.indexOf(e)>=0,r=e.isOpen;for(const e of t)e.deactivate(),-1===s.indexOf(e)&&e.close();for(const c of s)c.activate(),c.parent&&c.open(),c===e.parent&&c.children.length&&c.open();return n&&r?e.close():e.open(),s})),e.pageId>-1&&W(e.pageId,t)}),[I,W]),z=Object(c.useCallback)((e=>{if(C(null),t){const t=H(e,j);t&&q(t)}else Qa.requestById=e,s(!0)}),[t,j,H,q]),Y=Object(c.useCallback)((e=>{if(C(null),t){const t=B(e,j);t&&q(t)}else Qa.requestByName=e,s(!0)}),[t,j,B,q]),K=Object(c.useCallback)((e=>{if(C(null),t){const t=G(e);if(!t||!t.length)return;q(t[0],e)}else Qa.requestedByOfferId=e,s(!0)}),[t,G,q]),Q=Object(c.useCallback)((e=>{Ft(ps.CREDITS)}),[]);lt(hn.PURCHASE_SUCCESS,Q);const $=Object(c.useCallback)((e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e));case"open":if(t.length>2)if(4===t.length){if("offerId"===t[2])return void K(parseInt(t[3]))}else Y(t[2]);else s(!0);return}}),[K,Y]);return Object(c.useEffect)((()=>{const e={linkReceived:$,eventUrlPrefix:"catalog/"};return E(e),()=>y(e)}),[$]),Object(c.useEffect)((()=>(R(new a.Hg(w(),++a.Hg.PREVIEW_COUNTER)),()=>{R((e=>(e.dispose(),null)))})),[]),Object(c.useEffect)((()=>{t&&!j&&(Ln(new a.gc),Ln(new a.cc),Ln(new a.Yb(d)))}),[t,j,d]),Object(c.useEffect)((()=>{if(t&&j)switch(Qa.requestType){case Bi.REQUEST_TYPE_NONE:if(x&&x.length)return;if(j.isBranch)for(const e of j.children)if(e&&e.isVisible)return void q(e);return;case Bi.REQUEST_TYPE_ID:return z(Qa.requestById),void Qa.resetRequest();case Bi.REQUEST_TYPE_OFFER:return K(Qa.requestedByOfferId),void Qa.resetRequest();case Bi.REQUEST_TYPE_NAME:return Y(Qa.requestByName),void Qa.resetRequest()}}),[t,j,x,q,z,K,Y]),Object(c.useEffect)((()=>{!T&&m&&-1===m.pageId&&z(l)}),[T,m,l,z]),Object(c.useEffect)((()=>()=>f(null)),[m]),Object(Cr.jsxs)(Ni,{value:{isVisible:t,isBusy:n,setIsBusy:r,pageId:i,currentType:d,setCurrentType:h,rootNode:j,setRootNode:b,offersToNodes:g,setOffersToNodes:O,currentPage:m,setCurrentPage:p,currentOffer:_,setCurrentOffer:f,activeNodes:x,setActiveNodes:I,searchResult:T,setSearchResult:C,frontPageItems:S,setFrontPageItems:N,roomPreviewer:v,purchaseOptions:D,setPurchaseOptions:P,catalogOptions:U,setCatalogOptions:L,resetState:M,getNodesByOfferId:G,loadCatalogPage:W,showCatalogPage:V,activateNode:q},children:[Object(Cr.jsx)(Fi,{}),t&&Object(Cr.jsxs)($r,{uniqueKey:"catalog",className:"nitro-catalog",children:[Object(Cr.jsx)(Wr,{headerText:$e("catalog.title"),onCloseClick:e=>{s(!1)}}),Object(Cr.jsx)(Nc,{children:j&&j.children.length>0&&j.children.map((e=>e.isVisible?Object(Cr.jsx)(Sc,{isActive:e.isActive,onClick:t=>{T&&C(null),q(e)},children:e.localization},e.pageId):null))}),Object(Cr.jsx)(Hr,{children:Object(Cr.jsxs)(Rr,{children:[!A&&Object(Cr.jsx)(rc,{size:3,overflow:"hidden",children:x&&x.length>0&&Object(Cr.jsx)(Xi,{node:x[0]})}),Object(Cr.jsx)(rc,{size:A?12:9,overflow:"hidden",children:Ya(m,(()=>k(!0)))})]})})]}),Object(Cr.jsx)(Vi,{}),Object(Cr.jsx)(Ka,{})]})};var Xa=s(28);const Ja=Object(c.createContext)({chatHistoryState:null,roomHistoryState:null}),Za=e=>Object(Cr.jsx)(Ja.Provider,{value:e.value,children:e.children});class eo{}eo.TYPE_CHAT=1,eo.TYPE_ROOM_INFO=2;const to=()=>{const e=new Date;return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},so=e=>{const{chatHistoryState:t=null,roomHistoryState:s=null}=Object(c.useContext)(Ja),[n,r]=Object(c.useState)(!1),i=Object(c.useCallback)((e=>{e.id=t.chats.length,t.chats.push(e),t.chats.length>1e3&&t.chats.shift(),t.notify()}),[t]),o=Object(c.useCallback)((e=>{s.roomHistory.push(e),s.roomHistory.length>10&&s.roomHistory.shift(),s.notify()}),[s]),l=Object(c.useCallback)((e=>{const t=ee();if(!t)return;const s=t.userDataManager.getUserDataByIndex(e.objectId);if(!s)return;const n=to(),r={id:-1,entityId:s.webID,name:s.name,look:s.figure,entityType:s.type,message:e.message,timestamp:n,type:eo.TYPE_CHAT,roomId:t.roomId};i(r)}),[i]);it(a.Kg.CHAT_EVENT,l);const u=Object(c.useCallback)((e=>{switch(e.type){case a.Pg.STARTED:r(!0);case a.Pg.ENDED:}}),[]);it(a.Pg.ENDED,u),it(a.Pg.STARTED,u);const d=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const s=ee();if(s&&s.roomId===t.data.roomId&&n){const e={id:-1,entityId:t.data.roomId,name:t.data.roomName,timestamp:to(),type:eo.TYPE_ROOM_INFO,roomId:t.data.roomId};i(e);const s={id:t.data.roomId,name:t.data.roomName};o(s),r(!1)}}),[i,o,n]);return Je(a.hc,d),null};class no{constructor(){this._chats=void 0,this._notifier=void 0,this._chats=[]}notify(){this._notifier&&this._notifier()}get chats(){return this._chats}get notifier(){return this._notifier}set notifier(e){this._notifier=e}}let ro=null;const co=()=>ro;class io{constructor(){this._roomHistory=void 0,this._notifier=void 0,this._roomHistory=[]}get roomHistory(){return this._roomHistory}get notifier(){return this._notifier}set notifier(e){this._notifier=e}notify(){this._notifier&&this._notifier()}}const ao=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(-1),[i,a]=Object(c.useState)(-1),[o,l]=Object(c.useState)(new no),[u,d]=Object(c.useState)(new io),h=Object(c.useRef)(null),j=Object(c.useMemo)((()=>new Xa.c({defaultHeight:25,fixedWidth:!0})),[]),b=e=>{const t=o.chats[e.index];e.index;return Object(Cr.jsx)(Xa.b,{cache:j,columnIndex:0,parent:e.parent,rowIndex:e.index,children:Object(Cr.jsxs)(yr,{style:e.style,className:"p-1",gap:1,children:[Object(Cr.jsx)(Ac,{variant:"muted",children:t.timestamp}),t.type===eo.TYPE_CHAT&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Ac,{pointer:!0,noWrap:!0,dangerouslySetInnerHTML:{__html:t.name+":"}}),Object(Cr.jsx)(Ac,{textBreak:!0,wrap:!0,grow:!0,children:t.message})]}),t.type===eo.TYPE_ROOM_INFO&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)("i",{className:"icon icon-small-room"}),Object(Cr.jsx)(Ac,{textBreak:!0,wrap:!0,grow:!0,children:t.name})]})]},e.key)},e.key)},g=Object(c.useCallback)((e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e))}}),[]);return Object(c.useEffect)((()=>{const e={linkReceived:g,eventUrlPrefix:"chat-history/"};return E(e),()=>y(e)}),[g]),Object(c.useEffect)((()=>{const e=new no,t=new io;return ro=e,e.notifier=()=>r((e=>e+1)),t.notifier=()=>a((e=>e+1)),l(e),d(t),()=>{e.notifier=null,t.notifier=null}}),[]),Object(c.useEffect)((()=>{h&&h.current&&t&&h.current.scrollToRow(-1)}),[t]),Object(Cr.jsxs)(Za,{value:{chatHistoryState:o,roomHistoryState:u},children:[Object(Cr.jsx)(so,{}),t&&Object(Cr.jsxs)($r,{uniqueKey:"chat-history",className:"nitro-chat-history",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("room.chathistory.button.text"),onCloseClick:e=>s(!1)}),Object(Cr.jsx)(Hr,{children:Object(Cr.jsx)(Xa.a,{defaultWidth:300,defaultHeight:200,onResize:e=>j.clearAll(),children:e=>{let{height:t,width:s}=e;return Object(Cr.jsx)(Xa.d,{ref:h,width:s,height:t,rowCount:o.chats.length,rowHeight:j.rowHeight,className:"chat-history-list",rowRenderer:b,deferredMeasurementCache:j})}})})]})]})},oo=32,lo=64,uo="x0123456789abcdefghijklmnopq";class ho{}ho.DOOR=0,ho.UP=1,ho.DOWN=2,ho.SET=3,ho.UNSET=4;const jo={x:"101010",0:"0065ff",1:"0091ff",2:"00bcff",3:"00e8ff",4:"00ffea",5:"00ffbf",6:"00ff93",7:"00ff68",8:"00ff3d",9:"19ff00",a:"44ff00",b:"70ff00",c:"9bff00",d:"f2ff00",e:"ffe000",f:"ffb500",g:"ff8900",h:"ff5e00",i:"ff3200",j:"ff0700",k:"ff0023",l:"ff007a",m:"ff00a5",n:"ff00d1",o:"ff00fc",p:"d600ff",q:"aa00ff"};class bo{constructor(){this._currentAction=void 0,this._currentHeight=void 0,this._currentAction=ho.SET,this._currentHeight=uo[1]}get currentAction(){return this._currentAction}set currentAction(e){this._currentAction=e}get currentHeight(){return this._currentHeight}set currentHeight(e){this._currentHeight=e}clear(){this._currentAction=ho.SET,this._currentHeight=uo[1]}}class go{constructor(e,t){this._height=void 0,this._isBlocked=void 0,this._height=e,this._isBlocked=t}get height(){return this._height}set height(e){this._height=e}get isBlocked(){return this._isBlocked}set isBlocked(e){this._isBlocked=e}}const Oo=(e,t)=>{let s=e*oo/2-t*oo/2;return s+=1024,[s,e*oo/4+t*oo/4]},mo=(e,t)=>{const s=e-1024;return[(s/16+t/8)/2,(t/8-s/16)/2]},po=e=>{switch(e=parseInt(e.toString())){case 0:return-2;case 1:return-1;case 3:return 1;default:return 0}},_o=e=>{switch(e){case.25:return 0;case.5:return 1;case 2:return 3;default:return 2}};class Eo extends a.pf{constructor(){super({width:2068,height:1124,backgroundColor:0,antialias:!0,autoDensity:!0,resolution:1,sharedLoader:!0,sharedTicker:!0}),this._tilemap=void 0,this._width=void 0,this._height=void 0,this._isHolding=void 0,this._doorLocation=void 0,this._lastUsedTile=void 0,this._tilemapRenderer=void 0,this._actionSettings=void 0,this._isInitialized=void 0,this._assetCollection=void 0,this._tilemap=[],this._doorLocation=new a.Pe(0,0),this._width=0,this._height=0,this._isHolding=!1,this._lastUsedTile=new a.Pe(-1,-1),this._actionSettings=new bo}initialize(){if(this._isInitialized)return;const e=Fn().asset.getCollection("floor_editor");e&&(this._assetCollection=e,this._tilemapRenderer=new a.Ue(e.baseTexture),this.registerEventListeners(),this.stage.addChild(this._tilemapRenderer),this._isInitialized=!0)}registerEventListeners(){const e=new a.Pe;this._tilemapRenderer.containsPoint=t=>(this._tilemapRenderer.worldTransform.applyInverse(t,e),this.tileHitDetection(e,!1)),this._tilemapRenderer.on("pointerup",(()=>{this._isHolding=!1})),this._tilemapRenderer.on("pointerout",(()=>{this._isHolding=!1})),this._tilemapRenderer.on("pointerdown",(e=>{if(!(e.data.originalEvent instanceof PointerEvent)&&!(e.data.originalEvent instanceof TouchEvent))return;const t=e.data.originalEvent;if(t instanceof MouseEvent&&2===t.button)return;const s=e.data.global;this.tileHitDetection(s,!0)})),this._tilemapRenderer.on("click",(e=>{if(!(e.data.originalEvent instanceof PointerEvent))return;if(2===e.data.originalEvent.button)return;const t=e.data.global;this.tileHitDetection(t,!0,!0)}))}tileHitDetection(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=this._tilemapRenderer.pointsBuf,r=a.bf,c=n.length;t&&(this._isHolding=!0);for(let i=0;i<c;i+=r){const t=i+r,c=n.slice(i,t),a=oo,o=16,l=Math.floor(e.x),u=Math.floor(e.y),d=c[2],h=c[3],j=d+a/2,b=h+o/2;if(Math.abs(l-j)/(.5*a)+Math.abs(u-b)/(.5*o)<=1){if(this._isHolding){const[e,t]=mo(d,h);s?this.onClick(e,t):this._lastUsedTile.x===e&&this._lastUsedTile.y===t||(this._lastUsedTile.x=e,this._lastUsedTile.y=t,this.onClick(e,t))}return!0}}return!1}onClick(e,t){const s=this._tilemap[t][e],n=uo.indexOf(s.height);let r=0;switch(this._actionSettings.currentAction){case ho.DOOR:return void("x"!==s.height&&(this._doorLocation.x=e,this._doorLocation.y=t,this.renderTiles()));case ho.UP:if("x"===s.height)return;r=n+1;break;case ho.DOWN:if("x"===s.height||n<=1)return;r=n-1;break;case ho.SET:r=uo.indexOf(this._actionSettings.currentHeight);break;case ho.UNSET:r=0}if(-1===r)return;if(n===r)return;r>0&&(e+1>this._width&&(this._width=e+1),t+1>this._height&&(this._height=t+1));const c=uo[r];c&&(s.isBlocked||(this._tilemap[t][e].height=c,this.renderTiles()))}renderTiles(){this.tilemapRenderer.clear();for(let e=0;e<this._tilemap.length;e++)for(let t=0;t<this.tilemap[e].length;t++){const s=this.tilemap[e][t];let n=s.height;this._doorLocation.x===t&&this._doorLocation.y===e&&(n=Eo.TILE_DOOR),s.isBlocked&&(n=Eo.TILE_BLOCKED);const[r,c]=Oo(t,e);this._tilemapRenderer.tile(this._assetCollection.getTexture(`floor_editor_${n}`),r,c)}}setTilemap(e,t){this._tilemap=[];const s=e.split("\r");let n=0,r=s.length;for(let c=0;c<r;c++){const e=s[c];0!==e.length?e.length>n&&(n=e.length):(s.splice(c,1),r=s.length,c--)}for(let c=0;c<r;c++){this._tilemap[c]=[];const e=s[c];for(let s=0;s<n;s++){const n=t[c]&&t[c][s]||!1,r=e[s];this._tilemap[c][s]=new go("x"!==r&&"X"!==r&&r?r:"x",n)}for(let t=n;t<lo;t++)this.tilemap[c][t]=new go("x",!1)}for(let c=r;c<lo;c++){this.tilemap[c]||(this.tilemap[c]=[]);for(let e=0;e<lo;e++)this.tilemap[c][e]=new go("x",!1)}this._width=n,this._height=r}getCurrentTilemapString(){if("x"===this._tilemap[this._height-1][this._width-1].height){this._width=-1,this._height=-1;for(let e=63;e>=0;e--)if(this._tilemap[e])for(let t=63;t>=0;t--){if(!this._tilemap[e][t])continue;"x"!==this._tilemap[e][t].height&&(t+1>this._width&&(this._width=t+1),e+1>this._height&&(this._height=e+1))}}const e=[];for(let t=0;t<this._height;t++){const s=[];for(let e=0;e<this._width;e++){const n=this._tilemap[t][e];s[e]=n.height}e[t]=s.join("")}return e.join("\r")}clear(){this._tilemapRenderer.interactive=!1,this._tilemap=[],this._doorLocation.set(-1,-1),this._width=0,this._height=0,this._isHolding=!1,this._lastUsedTile.set(-1,-1),this._actionSettings.clear(),this._tilemapRenderer.clear()}get tilemapRenderer(){return this._tilemapRenderer}get tilemap(){return this._tilemap}get doorLocation(){return this._doorLocation}set doorLocation(e){this._doorLocation=e}get actionSettings(){return this._actionSettings}static get instance(){return Eo._INSTANCE||(Eo._INSTANCE=new Eo),Eo._INSTANCE}}Eo._INSTANCE=null,Eo.TILE_BLOCKED="r_blocked",Eo.TILE_DOOR="r_door";const fo=Object(c.createContext)({originalFloorplanSettings:null,setOriginalFloorplanSettings:null,visualizationSettings:null,setVisualizationSettings:null}),xo=e=>Object(Cr.jsx)(fo.Provider,{value:e.value,children:e.children}),Io=()=>Object(c.useContext)(fo),To=e=>{const{gap:t=1,children:s=null,...n}=e,[r,i]=Object(c.useState)(!1),[o,l]=Object(c.useState)(!1),{originalFloorplanSettings:u=null,setOriginalFloorplanSettings:d=null,setVisualizationSettings:h=null}=Io(),j=Object(c.useRef)(null),b=Object(c.useCallback)((e=>{const t=e.getParser();let s=null;d((e=>{const n={...e};return n.reservedTiles=t.blockedTilesMap,s=n,n})),Eo.instance.setTilemap(s.tilemap,t.blockedTilesMap),i(!0),j.current.scrollTo(Eo.instance.view.width/3,0)}),[d]);Je(a.Gg,b);const g=Object(c.useCallback)((e=>{const t=e.getParser();d((e=>{const s={...e};return s.entryPoint=[t.x,t.y],s.entryPointDir=t.direction,s})),h((e=>{const s={...e};return s.entryPointDir=t.direction,s})),Eo.instance.doorLocation=new a.Pe(t.x,t.y),l(!0)}),[d,h]);Je(a.pg,g);const O=e=>{const t=j.current;if(t)switch(e){case"up":t.scrollBy({top:-10});break;case"down":t.scrollBy({top:10});break;case"left":t.scrollBy({left:-10});break;case"right":t.scrollBy({left:10})}};return Object(c.useEffect)((()=>()=>{Eo.instance.clear(),h((e=>({wallHeight:u.wallHeight,thicknessWall:u.thicknessWall,thicknessFloor:u.thicknessFloor,entryPointDir:e.entryPointDir})))}),[u.thicknessFloor,u.thicknessWall,u.wallHeight,h]),Object(c.useEffect)((()=>{o&&r&&Eo.instance.renderTiles()}),[o,r]),Object(c.useEffect)((()=>{Ln(new a.sc),Ln(new a.nc),Eo.instance.tilemapRenderer.interactive=!0,j.current&&j.current.appendChild(Eo.instance.renderer.view)}),[]),Object(Cr.jsxs)(rc,{gap:t,...n,children:[Object(Cr.jsxs)(Rr,{overflow:"hidden",gap:1,children:[Object(Cr.jsx)(rc,{center:!0,size:1,children:Object(Cr.jsx)(wr,{className:"d-md-none",onClick:e=>O("left"),children:Object(Cr.jsx)(Lr.a,{icon:"arrow-left"})})}),Object(Cr.jsxs)(rc,{overflow:"hidden",size:10,gap:1,children:[Object(Cr.jsx)(yr,{justifyContent:"center",className:"d-md-none",children:Object(Cr.jsx)(wr,{shrink:!0,onClick:e=>O("up"),children:Object(Cr.jsx)(Lr.a,{icon:"arrow-up"})})}),Object(Cr.jsx)(Sr,{overflow:"auto",innerRef:j}),Object(Cr.jsx)(yr,{justifyContent:"center",className:"d-md-none",children:Object(Cr.jsx)(wr,{shrink:!0,onClick:e=>O("down"),children:Object(Cr.jsx)(Lr.a,{icon:"arrow-down"})})})]}),Object(Cr.jsx)(rc,{center:!0,size:1,children:Object(Cr.jsx)(wr,{className:"d-md-none",onClick:e=>O("right"),children:Object(Cr.jsx)(Lr.a,{icon:"arrow-right"})})})]}),s]})},Co=e=>e.replace(/\r\n|\r|\n/g,"\n").toLowerCase(),So=e=>{const{onCloseClick:t=null}=e,[s,n]=Object(c.useState)(""),{originalFloorplanSettings:r=null}=Io();return Lt((()=>{n(Co(r.tilemap))})),Object(Cr.jsxs)($r,{theme:"primary-slim",className:"floorplan-import-export",children:[Object(Cr.jsx)(Wr,{headerText:$e("floor.plan.editor.import.export"),onCloseClick:t}),Object(Cr.jsxs)(Hr,{children:[Object(Cr.jsx)("textarea",{className:"h-100",value:s,onChange:e=>n(e.target.value)}),Object(Cr.jsxs)(yr,{justifyContent:"between",children:[Object(Cr.jsx)(wr,{onClick:e=>n(Co(r.tilemap)),children:$e("floor.plan.editor.revert.to.last.received.map")}),Object(Cr.jsx)(wr,{onClick:()=>{Ln(new a.li(s.split("\n").join("\r"),r.entryPoint[0],r.entryPoint[1],r.entryPointDir,po(r.thicknessWall),po(r.thicknessFloor),r.wallHeight-1))},children:$e("floor.plan.editor.save")})]})]})]})},No=e=>{const{visualizationSettings:t=null,setVisualizationSettings:s=null}=Io(),[n,r]=Object(c.useState)(ho.SET),[i,a]=Object(c.useState)(0),o=e=>{r(e),Eo.instance.actionSettings.currentAction=e},l=e=>{(isNaN(e)||e<=0)&&(e=0),e>16&&(e=16),s((t=>{const s={...t};return s.wallHeight=e,s}))};return Object(Cr.jsxs)(rc,{children:[Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsxs)(rc,{size:5,gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("floor.plan.editor.draw.mode")}),Object(Cr.jsxs)(yr,{gap:3,children:[Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(lc,{itemActive:n===ho.SET,onClick:e=>o(ho.SET),children:Object(Cr.jsx)("i",{className:"icon icon-set-tile"})}),Object(Cr.jsx)(lc,{itemActive:n===ho.UNSET,onClick:e=>o(ho.UNSET),children:Object(Cr.jsx)("i",{className:"icon icon-unset-tile"})})]}),Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(lc,{itemActive:n===ho.UP,onClick:e=>o(ho.UP),children:Object(Cr.jsx)("i",{className:"icon icon-increase-height"})}),Object(Cr.jsx)(lc,{itemActive:n===ho.DOWN,onClick:e=>o(ho.DOWN),children:Object(Cr.jsx)("i",{className:"icon icon-decrease-height"})})]}),Object(Cr.jsx)(lc,{itemActive:n===ho.DOOR,onClick:e=>o(ho.DOOR),children:Object(Cr.jsx)("i",{className:"icon icon-set-door"})})]})]}),Object(Cr.jsxs)(rc,{alignItems:"center",size:4,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("floor.plan.editor.enter.direction")}),Object(Cr.jsx)("i",{className:`icon icon-door-direction-${t.entryPointDir} cursor-pointer`,onClick:()=>{s((e=>{const t={...e};return t.entryPointDir<7?++t.entryPointDir:t.entryPointDir=0,t}))}})]}),Object(Cr.jsxs)(rc,{size:3,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("floor.editor.wall.height")}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Lr.a,{icon:"caret-left",className:"cursor-pointer",onClick:()=>{let e=t.wallHeight-1;e<=0&&(e=0),l(e)}}),Object(Cr.jsx)("input",{type:"number",className:"form-control form-control-sm quantity-input",value:t.wallHeight,onChange:e=>l(e.target.valueAsNumber)}),Object(Cr.jsx)(Lr.a,{icon:"caret-right",className:"cursor-pointer",onClick:()=>{let e=t.wallHeight+1;e>16&&(e=16),l(e)}})]})]})]}),Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsxs)(rc,{size:6,children:[Object(Cr.jsxs)(Ac,{bold:!0,children:[$e("floor.plan.editor.tile.height"),": ",i]}),Object(Cr.jsx)(gi.a,{className:"nitro-slider",min:0,max:26,step:1,value:i,onChange:e=>{return t=e,(isNaN(t)||t<=0)&&(t=0),t>26&&(t=26),a(t),void(Eo.instance.actionSettings.currentHeight=t.toString(36));var t},renderThumb:(e,t)=>{let{style:s,...n}=e;return Object(Cr.jsx)("div",{style:{backgroundColor:`#${jo[t.valueNow.toString(33)]}`,...s},...n,children:t.valueNow})}})]}),Object(Cr.jsxs)(rc,{size:6,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("floor.plan.editor.room.options")}),Object(Cr.jsxs)(yr,{className:"align-items-center",children:[Object(Cr.jsxs)("select",{className:"form-control form-control-sm",value:t.thicknessWall,onChange:e=>{return t=parseInt(e.target.value),void s((e=>{const s={...e};return s.thicknessWall=t,s}));var t},children:[Object(Cr.jsx)("option",{value:0,children:$e("navigator.roomsettings.wall_thickness.thinnest")}),Object(Cr.jsx)("option",{value:1,children:$e("navigator.roomsettings.wall_thickness.thin")}),Object(Cr.jsx)("option",{value:2,children:$e("navigator.roomsettings.wall_thickness.normal")}),Object(Cr.jsx)("option",{value:3,children:$e("navigator.roomsettings.wall_thickness.thick")})]}),Object(Cr.jsxs)("select",{className:"form-control form-control-sm",value:t.thicknessFloor,onChange:e=>{return t=parseInt(e.target.value),void s((e=>{const s={...e};return s.thicknessFloor=t,s}));var t},children:[Object(Cr.jsx)("option",{value:0,children:$e("navigator.roomsettings.floor_thickness.thinnest")}),Object(Cr.jsx)("option",{value:1,children:$e("navigator.roomsettings.floor_thickness.thin")}),Object(Cr.jsx)("option",{value:2,children:$e("navigator.roomsettings.floor_thickness.normal")}),Object(Cr.jsx)("option",{value:3,children:$e("navigator.roomsettings.floor_thickness.thick")})]})]})]})]})]})},vo=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)({tilemap:"",reservedTiles:[],entryPoint:[0,0],entryPointDir:2,wallHeight:-1,thicknessWall:1,thicknessFloor:1}),[l,u]=Object(c.useState)({entryPointDir:2,wallHeight:-1,thicknessWall:1,thicknessFloor:1}),d=Object(c.useCallback)((e=>{switch(e.type){case tn.HIDE_FLOORPLAN_EDITOR:s(!1);break;case tn.SHOW_FLOORPLAN_EDITOR:s(!0);break;case tn.TOGGLE_FLOORPLAN_EDITOR:s((e=>!e))}}),[]);lt(tn.HIDE_FLOORPLAN_EDITOR,d),lt(tn.SHOW_FLOORPLAN_EDITOR,d),lt(tn.TOGGLE_FLOORPLAN_EDITOR,d);const h=Object(c.useCallback)((e=>{s(!1)}),[]);ct(a.gg.DISPOSED,h);const j=Object(c.useCallback)((e=>{const t=e.getParser();o((e=>{const s={...e};return s.tilemap=t.model,s.wallHeight=t.wallHeight+1,s})),u((e=>{const s={...e};return s.wallHeight=t.wallHeight+1,s}))}),[]);Je(a.zb,j);const b=Object(c.useCallback)((e=>{const t=e.getParser();o((e=>{const s={...e};return s.thicknessFloor=_o(t.thicknessFloor),s.thicknessWall=_o(t.thicknessWall),s})),u((e=>{const s={...e};return s.thicknessFloor=_o(t.thicknessFloor),s.thicknessWall=_o(t.thicknessWall),s}))}),[]);Je(a.oh,b);return Object(c.useEffect)((()=>{Eo.instance.initialize()}),[]),Object(Cr.jsxs)(xo,{value:{originalFloorplanSettings:i,setOriginalFloorplanSettings:o,visualizationSettings:l,setVisualizationSettings:u},children:[t&&Object(Cr.jsxs)($r,{uniqueKey:"floorpan-editor",className:"nitro-floorplan-editor",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("floor.plan.editor.title"),onCloseClick:()=>s(!1)}),Object(Cr.jsxs)(Hr,{overflow:"hidden",children:[Object(Cr.jsx)(No,{}),Object(Cr.jsx)(To,{overflow:"hidden"}),Object(Cr.jsxs)(yr,{justifyContent:"between",children:[Object(Cr.jsx)(wr,{onClick:()=>{u({wallHeight:i.wallHeight,thicknessWall:i.thicknessWall,thicknessFloor:i.thicknessFloor,entryPointDir:i.entryPointDir}),Eo.instance.doorLocation=new a.Pe(i.entryPoint[0],i.entryPoint[1]),Eo.instance.setTilemap(i.tilemap,i.reservedTiles),Eo.instance.renderTiles()},children:$e("floor.plan.editor.reload")}),Object(Cr.jsxs)(kr,{children:[Object(Cr.jsx)(wr,{disabled:!0,children:$e("floor.plan.editor.preview")}),Object(Cr.jsx)(wr,{onClick:e=>r(!0),children:$e("floor.plan.editor.import.export")}),Object(Cr.jsx)(wr,{onClick:()=>{Ln(new a.li(Eo.instance.getCurrentTilemapString(),Eo.instance.doorLocation.x,Eo.instance.doorLocation.y,l.entryPointDir,po(l.thicknessWall),po(l.thicknessFloor),l.wallHeight-1))},children:$e("floor.plan.editor.save")})]})]})]})]}),n&&Object(Cr.jsx)(So,{onCloseClick:()=>r(!1)})]})},Ro=e=>{const{friend:t=null}=e,[s,n]=Object(c.useState)(!1),{followFriend:r=null}=ht(),i=Object(c.useRef)();return Object(c.useEffect)((()=>{const e=e=>{const t=i.current;t&&(e.target===t||t.contains(e.target)||n(!1))};return document.addEventListener(a.ue.MOUSE_CLICK,e),()=>document.removeEventListener(a.ue.MOUSE_CLICK,e)}),[]),t?Object(Cr.jsxs)("div",{ref:i,className:"btn btn-success friend-bar-item "+(s?"friend-bar-item-active":""),onClick:e=>n((e=>!e)),children:[Object(Cr.jsxs)("div",{className:"friend-bar-item-head position-absolute "+(t.id>0?"avatar":"group"),children:[t.id>0&&Object(Cr.jsx)(Xr,{headOnly:!0,figure:t.figure,direction:2}),t.id<=0&&Object(Cr.jsx)(Zr,{isGroup:!0,badgeCode:t.figure})]}),Object(Cr.jsx)("div",{className:"text-truncate",children:t.name}),s&&Object(Cr.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(Cr.jsx)(Sr,{className:"nitro-friends-spritesheet icon-friendbar-chat cursor-pointer",onClick:e=>Qn(t.id)}),t.followingAllowed&&Object(Cr.jsx)(Sr,{className:"nitro-friends-spritesheet icon-friendbar-visit cursor-pointer",onClick:e=>r(t)}),Object(Cr.jsx)(Sr,{className:"nitro-friends-spritesheet icon-profile cursor-pointer",onClick:e=>gr(t.id)})]})]}):Object(Cr.jsxs)("div",{ref:i,className:"btn btn-primary friend-bar-item friend-bar-search",children:[Object(Cr.jsx)("div",{className:"friend-bar-item-head position-absolute"}),Object(Cr.jsx)("div",{className:"text-truncate",children:$e("friend.bar.find.title")})]})},Ao=e=>{const{onlineFriends:t=null}=e,[s,n]=Object(c.useState)(0),r=Object(c.useRef)();return Object(Cr.jsxs)(yr,{innerRef:r,alignItems:"center",className:"friend-bar",children:[Object(Cr.jsx)(wr,{variant:"black",className:"friend-bar-button",disabled:s<=0,onClick:e=>n(s-1),children:Object(Cr.jsx)(Lr.a,{icon:"chevron-left"})}),Array.from(Array(3),((e,n)=>Object(Cr.jsx)(Ro,{friend:t[s+n]||null},n))),Object(Cr.jsx)(wr,{variant:"black",className:"friend-bar-button",disabled:!(t.length>3&&s+3<=t.length-1),onClick:e=>n(s+1),children:Object(Cr.jsx)(Lr.a,{icon:"chevron-right"})})]})},yo=e=>{const{friend:t=null,selected:s=!1,selectFriend:n=null}=e,[r,i]=Object(c.useState)(!1),{followFriend:a=null,updateRelationship:o=null}=ht(),l=(e,s)=>{e.stopPropagation(),o(t,s),i(!1)};return t?Object(Cr.jsxs)(Ur,{justifyContent:"between",className:`px-2 py-1 ${s&&"bg-primary text-white"}`,onClick:e=>n(t.id),children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Sr,{onClick:e=>e.stopPropagation(),children:Object(Cr.jsx)(Cc,{userId:t.id})}),Object(Cr.jsx)("div",{children:t.name})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[!r&&Object(Cr.jsxs)(Cr.Fragment,{children:[t.followingAllowed&&Object(Cr.jsx)(Sr,{pointer:!0,onClick:e=>{e.stopPropagation(),a(t)},className:"nitro-friends-spritesheet icon-follow",title:$e("friendlist.tip.follow")}),t.online&&Object(Cr.jsx)(Sr,{pointer:!0,className:"nitro-friends-spritesheet icon-chat",onClick:e=>{e.stopPropagation(),Qn(t.id)},title:$e("friendlist.tip.im")}),t.id>0&&Object(Cr.jsx)(Sr,{className:`nitro-friends-spritesheet icon-${(()=>{if(!t)return"none";switch(t.relationshipStatus){case Js.RELATIONSHIP_HEART:return"heart";case Js.RELATIONSHIP_SMILE:return"smile";case Js.RELATIONSHIP_BOBBA:return"bobba";default:return"none"}})()} cursor-pointer`,onClick:e=>{e.stopPropagation(),i(!0)},title:$e("infostand.link.relationship")})]}),r&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Sr,{pointer:!0,className:"nitro-friends-spritesheet icon-heart",onClick:e=>l(e,Js.RELATIONSHIP_HEART)}),Object(Cr.jsx)(Sr,{pointer:!0,className:"nitro-friends-spritesheet icon-smile",onClick:e=>l(e,Js.RELATIONSHIP_SMILE)}),Object(Cr.jsx)(Sr,{pointer:!0,className:"nitro-friends-spritesheet icon-bobba",onClick:e=>l(e,Js.RELATIONSHIP_BOBBA)}),Object(Cr.jsx)(Sr,{pointer:!0,className:"nitro-friends-spritesheet icon-none",onClick:e=>l(e,Js.RELATIONSHIP_NONE)})]})]})]}):null},wo=e=>{const{list:t=null,selectedFriendsIds:s=null,selectFriend:n=null}=e;return t&&t.length?Object(Cr.jsx)(Cr.Fragment,{children:t.map(((e,t)=>Object(Cr.jsx)(yo,{friend:e,selected:s&&s.indexOf(e.id)>=0,selectFriend:n},t)))}):null},ko=e=>{const{request:t=null}=e,{requestResponse:s=null}=ht();return t?Object(Cr.jsxs)(Ur,{justifyContent:"between",className:"px-2 py-1",children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Cc,{userId:t.id}),Object(Cr.jsx)("div",{children:t.name})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Sr,{className:"nitro-friends-spritesheet icon-accept cursor-pointer",onClick:e=>s(t.id,!0)}),Object(Cr.jsx)(Sr,{className:"nitro-friends-spritesheet icon-deny cursor-pointer",onClick:e=>s(t.id,!1)})]})]}):null},Do=e=>{const{children:t=null,...s}=e,{requests:n=[],requestResponse:r=null}=ht();return n.length?Object(Cr.jsxs)(Mr,{...s,children:[Object(Cr.jsxs)(rc,{fullHeight:!0,justifyContent:"between",gap:1,children:[Object(Cr.jsx)(rc,{gap:0,children:n.map(((e,t)=>Object(Cr.jsx)(ko,{request:e},t)))}),Object(Cr.jsx)(yr,{justifyContent:"center",className:"px-2 py-1",children:Object(Cr.jsx)(wr,{onClick:e=>r(-1,!1),children:$e("friendlist.requests.dismissall")})})]}),t]}):null},Po=e=>{const{selectedFriendsIds:t=null,removeFriendsText:s=null,removeSelectedFriends:n=null,onCloseClick:r=null}=e;return Object(Cr.jsxs)($r,{className:"nitro-friends-remove-confirmation",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("friendlist.removefriendconfirm.title"),onCloseClick:r}),Object(Cr.jsxs)(Hr,{className:"text-black",children:[Object(Cr.jsx)("div",{children:s}),Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(wr,{fullWidth:!0,variant:"danger",disabled:0===t.length,onClick:n,children:$e("generic.ok")}),Object(Cr.jsx)(wr,{fullWidth:!0,onClick:r,children:$e("generic.cancel")})]})]})]})},Uo=e=>{const{selectedFriendsIds:t=null,onCloseClick:s=null,sendRoomInvite:n=null}=e,[r,i]=Object(c.useState)("");return Object(Cr.jsxs)($r,{className:"nitro-friends-room-invite",uniqueKey:"nitro-friends-room-invite",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("friendlist.invite.title"),onCloseClick:s}),Object(Cr.jsxs)(Hr,{className:"text-black",children:[$e("friendlist.invite.summary",["count"],[t.length.toString()]),Object(Cr.jsx)("textarea",{className:"form-control",value:r,onChange:e=>i(e.target.value)}),Object(Cr.jsx)(Ac,{center:!0,className:"bg-muted rounded p-1",children:$e("friendlist.invite.note")}),Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(wr,{fullWidth:!0,variant:"success",disabled:0===r.length||0===t.length,onClick:()=>n(r),children:$e("friendlist.invite.send")}),Object(Cr.jsx)(wr,{fullWidth:!0,onClick:s,children:$e("generic.cancel")})]})]})]})},Lo=e=>{const{...t}=e,[s,n]=Object(c.useState)(""),[r,i]=Object(c.useState)(null),[o,l]=Object(c.useState)(null),{canRequestFriend:u=null,requestFriend:d=null}=ht(),h=Object(c.useCallback)((e=>{const t=e.getParser();i(t.friends),l(t.others)}),[]);return Je(a.Bd,h),Object(c.useEffect)((()=>{if(!s||!s.length)return;const e=setTimeout((()=>{s&&s.length&&Ln(new a.Ad(s))}),500);return()=>clearTimeout(e)}),[s]),Object(Cr.jsxs)(Mr,{...t,children:[Object(Cr.jsx)("input",{type:"text",className:"search-input form-control form-control-sm w-100 rounded-0",placeholder:$e("generic.search"),value:s,maxLength:50,onChange:e=>n(e.target.value)}),Object(Cr.jsxs)(rc,{children:[r&&Object(Cr.jsxs)(Cr.Fragment,{children:[0===r.length&&Object(Cr.jsx)(Ac,{bold:!0,small:!0,className:"px-2 py-1",children:$e("friendlist.search.nofriendsfound")}),r.length>0&&Object(Cr.jsxs)(rc,{gap:0,children:[Object(Cr.jsx)(Ac,{bold:!0,small:!0,className:"px-2 py-1",children:$e("friendlist.search.friendscaption",["cnt"],[r.length.toString()])}),Object(Cr.jsx)("hr",{className:"mx-2 mt-0 mb-1 text-black"}),Object(Cr.jsx)(rc,{gap:0,children:r.map((e=>Object(Cr.jsxs)(Ur,{justifyContent:"between",className:"px-2 py-1",children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Cc,{userId:e.avatarId}),Object(Cr.jsx)("div",{children:e.avatarName})]}),Object(Cr.jsx)(yr,{alignItems:"center",gap:1,children:e.isAvatarOnline&&Object(Cr.jsx)(Sr,{className:"nitro-friends-spritesheet icon-chat cursor-pointer",onClick:t=>Qn(e.avatarId),title:$e("friendlist.tip.im")})})]},e.avatarId)))})]})]}),o&&Object(Cr.jsxs)(Cr.Fragment,{children:[0===o.length&&Object(Cr.jsx)(Ac,{bold:!0,small:!0,className:"px-2 py-1",children:$e("friendlist.search.noothersfound")}),o.length>0&&Object(Cr.jsxs)(rc,{gap:0,children:[Object(Cr.jsx)(Ac,{bold:!0,small:!0,className:"px-2 py-1",children:$e("friendlist.search.otherscaption",["cnt"],[o.length.toString()])}),Object(Cr.jsx)("hr",{className:"mx-2 mt-0 mb-1 text-black"}),Object(Cr.jsx)(rc,{gap:0,children:o.map((e=>Object(Cr.jsxs)(Ur,{justifyContent:"between",className:"px-2 py-1",children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Cc,{userId:e.avatarId}),Object(Cr.jsx)("div",{children:e.avatarName})]}),Object(Cr.jsx)(yr,{alignItems:"center",gap:1,children:u(e.avatarId)&&Object(Cr.jsx)(Sr,{className:"nitro-friends-spritesheet icon-add cursor-pointer",onClick:t=>d(e.avatarId,e.avatarName),title:$e("friendlist.tip.addfriend")})})]},e.avatarId)))})]})]})]})]})},Mo=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)([]),[i,o]=Object(c.useState)(!1),[l,u]=Object(c.useState)(!1),{onlineFriends:d=[],offlineFriends:h=[],requests:j=[],requestFriend:b=null}=ht(),g=Object(c.useMemo)((()=>{if(!n||!n.length)return"";const e=[];for(const t of n){let s=d.find((e=>e.id===t));s||(s=h.find((e=>e.id===t))),s&&e.push(s.name)}return $e("friendlist.removefriendconfirm.userlist",["user_names"],[e.join(", ")])}),[h,d,n]),O=Object(c.useCallback)((e=>{e<0||r((t=>{const s=[...t],n=s.indexOf(e);return n>-1?s.splice(n,1):s.push(e),s}))}),[r]);return Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e));case"request":if(t.length<4)return;b(parseInt(t[2]),t[3])}},eventUrlPrefix:"friends/"};return E(e),()=>y(e)}),[b]),t?Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)($r,{className:"nitro-friends",uniqueKey:"nitro-friends",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("friendlist.friends"),onCloseClick:e=>s(!1)}),Object(Cr.jsxs)(Hr,{overflow:"hidden",gap:1,className:"text-black p-0",children:[Object(Cr.jsxs)(Fr,{fullHeight:!0,overflow:"hidden",children:[Object(Cr.jsx)(Mr,{headerText:$e("friendlist.friends")+` (${d.length})`,isExpanded:!0,children:Object(Cr.jsx)(wo,{list:d,selectedFriendsIds:n,selectFriend:O})}),Object(Cr.jsx)(Mr,{headerText:$e("friendlist.friends.offlinecaption")+` (${h.length})`,children:Object(Cr.jsx)(wo,{list:h,selectedFriendsIds:n,selectFriend:O})}),Object(Cr.jsx)(Do,{headerText:$e("friendlist.tab.friendrequests")+` (${j.length})`,isExpanded:!0}),Object(Cr.jsx)(Lo,{headerText:$e("people.search.title")})]}),n&&n.length>0&&Object(Cr.jsxs)(yr,{gap:1,className:"p-1",children:[Object(Cr.jsx)(wr,{fullWidth:!0,onClick:()=>o(!0),children:$e("friendlist.tip.invite")}),Object(Cr.jsx)(wr,{fullWidth:!0,variant:"danger",onClick:e=>u(!0),children:$e("generic.delete")})]})]})]}),i&&Object(Cr.jsx)(Uo,{selectedFriendsIds:n,onCloseClick:()=>o(!1),sendRoomInvite:e=>{0!==n.length&&e&&0!==e.length&&(Ln(new a.Ch(e,n)),o(!1))}}),l&&Object(Cr.jsx)(Po,{selectedFriendsIds:n,removeFriendsText:g,onCloseClick:()=>u(!1),removeSelectedFriends:()=>{0!==n.length&&(r((e=>(Ln(new a.Hf(...e)),[]))),u(!1))}})]}):null},Fo=e=>{const{thread:t=null,group:s=null}=e,n=Object(c.useMemo)((()=>s.type===Gn.GROUP_CHAT&&Bn(s.chats[0].extraData)),[s]),r=Object(c.useMemo)((()=>!(!t||!s)&&(s.type===Gn.PRIVATE_CHAT&&s.userId===K().userId||!(!n||!s.chats.length||n.userId!==K().userId))),[t,s,n]);return t&&s?s.userId?Object(Cr.jsxs)(yr,{fullWidth:!0,justifyContent:r?"end":"start",gap:2,children:[Object(Cr.jsxs)(Sr,{shrink:!0,className:"message-avatar",children:[s.type===Gn.PRIVATE_CHAT&&!r&&Object(Cr.jsx)(Xr,{figure:t.participant.figure,direction:2}),n&&!r&&Object(Cr.jsx)(Xr,{figure:n.figure,direction:2})]}),Object(Cr.jsxs)(Sr,{className:"bg-light text-black border-radius mb-2 rounded py-1 px-2 messages-group-"+(r?"right":"left"),children:[Object(Cr.jsxs)(Sr,{className:"fw-bold",children:[r&&K().userName,!r&&(n?n.username:t.participant.name)]}),s.chats.map(((e,t)=>Object(Cr.jsx)(Sr,{className:"text-break",children:e.message},t)))]}),r&&Object(Cr.jsx)(Sr,{shrink:!0,className:"message-avatar",children:Object(Cr.jsx)(Xr,{figure:K().figure,direction:4})})]}):Object(Cr.jsx)(Cr.Fragment,{children:s.chats.map(((e,t)=>Object(Cr.jsx)(yr,{fullWidth:!0,gap:2,justifyContent:"start",children:Object(Cr.jsxs)(Sr,{className:"w-100 text-break",children:[e.type===zn.SECURITY_NOTIFICATION&&Object(Cr.jsxs)(yr,{gap:2,alignItems:"center",className:"bg-light rounded mb-2 px-2 py-1 small text-muted",children:[Object(Cr.jsx)(Sr,{className:"nitro-friends-spritesheet icon-warning flex-shrink-0"}),Object(Cr.jsx)(Sr,{children:e.message})]}),e.type===zn.ROOM_INVITE&&Object(Cr.jsxs)(yr,{gap:2,alignItems:"center",className:"bg-light rounded mb-2 px-2 py-1 small text-black",children:[Object(Cr.jsx)(Sr,{className:"messenger-notification-icon flex-shrink-0"}),Object(Cr.jsxs)(Sr,{children:[$e("messenger.invitation")+" ",e.message]})]})]})},t)))}):null},Ho=e=>{const{thread:t=null}=e;return t.setRead(),Object(Cr.jsx)(Cr.Fragment,{children:t.groups.length>0&&t.groups.map(((e,s)=>Object(Cr.jsx)(Fo,{thread:t,group:e},s)))})},Bo=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(""),{visibleThreads:l=[],activeThread:u=null,getMessageThread:d=null,sendMessage:h=null,setActiveThreadId:j=null,closeThread:b=null}=bt(),g=Object(c.useRef)(),O=()=>u&&u.participant&&gr(u.participant.id),m=()=>{u&&i.length&&(h(u,i),o(""))};return Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(2===t.length){if("open"===t[1])return void s(!0);{const e=d(parseInt(t[1]));if(!e)return;j(e.threadId),s(!0)}}},eventUrlPrefix:"friends-messenger/"};return E(e),()=>y(e)}),[d,j]),Object(c.useEffect)((()=>{t&&u&&(g.current.scrollTop=g.current.scrollHeight)}),[t,u]),Object(c.useEffect)((()=>{!t||u?!t&&u&&(r(u.threadId),j(-1)):n>0?j(n):l.length>0&&j(l[0].threadId)}),[t,u,n,l,j]),t?Object(Cr.jsxs)($r,{className:"nitro-friends-messenger",uniqueKey:"nitro-friends-messenger",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("messenger.window.title",["OPEN_CHAT_COUNT"],[l.length.toString()]),onCloseClick:e=>s(!1)}),Object(Cr.jsx)(Hr,{children:Object(Cr.jsxs)(Rr,{overflow:"hidden",children:[Object(Cr.jsxs)(rc,{size:4,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("toolbar.icon.label.messenger")}),Object(Cr.jsx)(rc,{fullHeight:!0,overflow:"auto",children:l&&l.length>0&&l.map((e=>Object(Cr.jsxs)(lc,{itemActive:u===e,onClick:t=>j(e.threadId),children:[e.unread&&Object(Cr.jsx)(cc,{count:e.unreadCount}),Object(Cr.jsxs)(yr,{fullWidth:!0,alignItems:"center",gap:1,children:[Object(Cr.jsxs)(yr,{alignItems:"center",className:"friend-head px-1",children:[e.participant.id>0&&Object(Cr.jsx)(Xr,{figure:e.participant.figure,headOnly:!0,direction:3}),e.participant.id<=0&&Object(Cr.jsx)(Zr,{isGroup:!0,badgeCode:e.participant.figure})]}),Object(Cr.jsx)(Ac,{truncate:!0,grow:!0,children:e.participant.name})]})]},e.threadId)))})]}),Object(Cr.jsx)(rc,{size:8,overflow:"hidden",children:u&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Ac,{bold:!0,center:!0,children:$e("messenger.window.separator",["FRIEND_NAME"],[u.participant.name])}),Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsxs)(kr,{children:[Object(Cr.jsx)(wr,{onClick:()=>u&&u.participant&&Ln(new a.Ab(u.participant.id)),children:Object(Cr.jsx)(Sr,{className:"nitro-friends-spritesheet icon-follow"})}),Object(Cr.jsx)(wr,{onClick:O,children:Object(Cr.jsx)(Sr,{className:"nitro-friends-spritesheet icon-profile-sm"})})]}),Object(Cr.jsx)(wr,{variant:"danger",onClick:O,children:$e("messenger.window.button.report")})]}),Object(Cr.jsx)(wr,{onClick:e=>b(u.threadId),children:Object(Cr.jsx)(Lr.a,{icon:"times"})})]}),Object(Cr.jsx)(rc,{fit:!0,className:"bg-muted p-2 rounded chat-messages",children:Object(Cr.jsx)(rc,{innerRef:g,overflow:"auto",children:Object(Cr.jsx)(Ho,{thread:u})})}),Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:255,placeholder:$e("messenger.window.input.default",["FRIEND_NAME"],[u.participant.name]),value:i,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"===e.key&&m()}}),Object(Cr.jsx)(wr,{variant:"success",onClick:m,children:$e("widgets.chatinput.say")})]})]})})]})})]}):null},Go=e=>{const{settings:t=null,onlineFriends:s=[]}=ht();return t?Object(Cr.jsxs)(Cr.Fragment,{children:[Object(qr.createPortal)(Object(Cr.jsx)(Ao,{onlineFriends:s}),document.getElementById("toolbar-friend-bar-container")),Object(Cr.jsx)(Mo,{}),Object(Cr.jsx)(Bo,{})]}):null},Wo=(e,t)=>e.id<t.id?-1:e.id>t.id?1:0,Vo=Object(c.createContext)({groupCustomize:null,setGroupCustomize:null}),qo=e=>Object(Cr.jsx)(Vo.Provider,{value:e.value,children:e.children}),zo=()=>Object(c.useContext)(Vo);class Yo{constructor(e,t,s,n){this.type=void 0,this.key=void 0,this.color=void 0,this.position=void 0,this.type=e,this.key=t||0,this.color=s||0,this.position=n||4}get code(){return 0===this.key?null:Yo.getCode(this.type,this.key,this.color,this.position)}static getCode(e,t,s,n){return e+(t<10?"0":"")+t+(s<10?"0":"")+s+n}}Yo.BASE="b",Yo.SYMBOL="s";const Ko=[0,1,2,3,4,5,6,7,8],Qo=e=>{const{badgeParts:t=[],setBadgeParts:s=null}=e,[n,r]=Object(c.useState)(-1),{groupCustomize:i=null}=zo(),a=(e,n,c)=>{const i=[...t];i[e][n]=c,s(i),"key"===n&&r(-1)};return t&&t.length?Object(Cr.jsxs)(Cr.Fragment,{children:[n<0&&t&&t.length>0&&t.map(((e,s)=>Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"between",gap:2,className:"bg-muted rounded px-2 py-1",children:[Object(Cr.jsxs)(yr,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:e=>r(s),children:[t[s].code&&t[s].code.length>0&&Object(Cr.jsx)(Zr,{badgeCode:t[s].code,isGroup:!0}),(!t[s].code||!t[s].code.length)&&Object(Cr.jsx)(yr,{center:!0,className:"badge-image group-badge",children:Object(Cr.jsx)(Lr.a,{icon:"plus"})})]}),e.type!==Yo.BASE&&Object(Cr.jsx)(Rr,{gap:1,columnCount:3,children:Ko.map(((e,n)=>Object(Cr.jsx)(Sr,{pointer:!0,className:"group-badge-position-swatch "+(t[s].position===e?"active":""),onClick:t=>a(s,"position",e)},n)))}),Object(Cr.jsx)(Rr,{gap:1,columnCount:8,children:i.badgePartColors.length>0&&i.badgePartColors.map(((e,n)=>Object(Cr.jsx)(Sr,{pointer:!0,className:"group-badge-color-swatch "+(t[s].color===n+1?"active":""),style:{backgroundColor:"#"+e.color},onClick:e=>a(s,"color",n+1)},n)))})]},s))),n>=0&&Object(Cr.jsxs)(Rr,{gap:1,columnCount:5,children:[t[n].type===Yo.SYMBOL&&Object(Cr.jsx)(rc,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:e=>a(n,"key",0),children:Object(Cr.jsx)(yr,{center:!0,className:"badge-image group-badge",children:Object(Cr.jsx)(Lr.a,{icon:"times"})})}),(t[n].type===Yo.BASE?i.badgeBases:i.badgeSymbols).map(((e,s)=>Object(Cr.jsx)(rc,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:t=>a(n,"key",e.id),children:Object(Cr.jsx)(Zr,{badgeCode:Yo.getCode(t[n].type,e.id,t[n].color,4),isGroup:!0})},s)))]})]}):null},$o=e=>{const{groupData:t=null,setGroupData:s=null,setCloseAction:n=null,skipDefault:r=null}=e,[i,o]=Object(c.useState)(null),{groupCustomize:l=null}=zo(),u=Object(c.useCallback)((()=>{if(!t||!i||!i.length)return!1;if(t.groupBadgeParts===i)return!0;if(t.groupId<=0)return s((e=>{const t={...e};return t.groupBadgeParts=i,t})),!0;const e=[];return i.forEach((t=>{t.code&&(e.push(t.key),e.push(t.color),e.push(t.position))})),Ln(new a.Xc(t.groupId,e)),!0}),[t,i,s]);return Object(c.useEffect)((()=>{if(t.groupBadgeParts)return;const e=[new Yo(Yo.BASE,l.badgeBases[0].id,l.badgePartColors[0].id),new Yo(Yo.SYMBOL,0,l.badgePartColors[0].id),new Yo(Yo.SYMBOL,0,l.badgePartColors[0].id),new Yo(Yo.SYMBOL,0,l.badgePartColors[0].id),new Yo(Yo.SYMBOL,0,l.badgePartColors[0].id)];s((t=>({...t,groupBadgeParts:e})))}),[t.groupBadgeParts,l,s]),Object(c.useEffect)((()=>{t.groupId<=0?o(t.groupBadgeParts?[...t.groupBadgeParts]:null):o(t.groupBadgeParts)}),[t]),Object(c.useEffect)((()=>(n({action:u}),()=>n(null))),[n,u]),Object(Cr.jsxs)(Rr,{overflow:"hidden",gap:1,children:[Object(Cr.jsx)(rc,{size:2,children:Object(Cr.jsx)(yr,{center:!0,className:"bg-muted rounded p-1",children:Object(Cr.jsx)(Zr,{badgeCode:(()=>{if(!i||!i.length)return"";let e="";return i.forEach((t=>t.code&&(e+=t.code))),e})(),isGroup:!0})})}),Object(Cr.jsx)(rc,{size:10,overflow:"auto",children:Object(Cr.jsx)(Qo,{badgeParts:i,setBadgeParts:o})})]})},Xo=e=>{const{groupData:t=null,setGroupData:s=null,setCloseAction:n=null}=e,[r,i]=Object(c.useState)(null),{groupCustomize:o=null}=zo(),l=e=>0===e?o.groupColorsA.find((t=>t.id===r[e])).color:o.groupColorsB.find((t=>t.id===r[e])).color,u=(e,t)=>{i((s=>{const n=[...s];return n[e]=t,n}))},d=Object(c.useCallback)((()=>!!(t&&r&&r.length)&&(t.groupColors===r||(t.groupId<=0?(s((e=>{const t={...e};return t.groupColors=[...r],t})),!0):(Ln(new a.Yc(t.groupId,r[0],r[1])),!0)))),[t,r,s]);return Object(c.useEffect)((()=>{if(!o.groupColorsA||!o.groupColorsB||t.groupColors)return;const e=[o.groupColorsA[0].id,o.groupColorsB[0].id];s((t=>({...t,groupColors:e})))}),[o,t.groupColors,s]),Object(c.useEffect)((()=>{t.groupId<=0?i(t.groupColors?[...t.groupColors]:null):i(t.groupColors)}),[t]),Object(c.useEffect)((()=>(n({action:d}),()=>n(null))),[n,d]),r?Object(Cr.jsxs)(Rr,{overflow:"hidden",children:[Object(Cr.jsxs)(rc,{size:2,gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("group.edit.color.guild.color")}),t.groupColors&&t.groupColors.length>0&&Object(Cr.jsxs)(yr,{overflow:"hidden",className:"rounded border",children:[Object(Cr.jsx)(Sr,{className:"group-color-swatch",style:{backgroundColor:"#"+l(0)}}),Object(Cr.jsx)(Sr,{className:"group-color-swatch",style:{backgroundColor:"#"+l(1)}})]})]}),Object(Cr.jsxs)(rc,{size:5,gap:1,overflow:"hidden",children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("group.edit.color.primary.color")}),Object(Cr.jsx)(Ar,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:t.groupColors&&o.groupColorsA&&o.groupColorsA.map(((e,s)=>Object(Cr.jsx)("div",{className:"group-badge-color-swatch cursor-pointer"+Wi()({" active":t.groupColors[0]===e.id}),style:{backgroundColor:"#"+e.color},onClick:()=>u(0,e.id)},s)))})]}),Object(Cr.jsxs)(rc,{size:5,gap:1,overflow:"hidden",children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("group.edit.color.secondary.color")}),Object(Cr.jsx)(Ar,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:t.groupColors&&o.groupColorsB&&o.groupColorsB.map(((e,s)=>Object(Cr.jsx)("div",{className:"group-badge-color-swatch cursor-pointer"+Wi()({" active":t.groupColors[1]===e.id}),style:{backgroundColor:"#"+e.color},onClick:()=>u(1,e.id)},s)))})]})]}):null},Jo=e=>{const{groupData:t=null,setGroupData:s=null,purchaseCost:n=0}=e,{groupCustomize:r=null}=zo(),c=e=>0===e?r.groupColorsA.find((s=>s.id===t.groupColors[e])).color:r.groupColorsB.find((s=>s.id===t.groupColors[e])).color;return t?Object(Cr.jsxs)(Rr,{overflow:"hidden",gap:1,children:[Object(Cr.jsxs)(rc,{size:3,children:[Object(Cr.jsxs)(rc,{center:!0,className:"bg-muted rounded p-1",gap:2,children:[Object(Cr.jsx)(Ac,{bold:!0,center:!0,children:$e("group.create.confirm.guildbadge")}),Object(Cr.jsx)(Zr,{badgeCode:(()=>{if(!t||!t.groupBadgeParts||!t.groupBadgeParts.length)return"";let e="";return t.groupBadgeParts.forEach((t=>t.code&&(e+=t.code))),e})(),isGroup:!0})]}),Object(Cr.jsxs)(rc,{center:!0,className:"bg-muted rounded p-1",gap:2,children:[Object(Cr.jsx)(Ac,{bold:!0,center:!0,children:$e("group.edit.color.guild.color")}),Object(Cr.jsxs)(yr,{overflow:"hidden",className:"rounded border",children:[Object(Cr.jsx)(Sr,{className:"group-color-swatch",style:{backgroundColor:"#"+c(0)}}),Object(Cr.jsx)(Sr,{className:"group-color-swatch",style:{backgroundColor:"#"+c(1)}})]})]})]}),Object(Cr.jsxs)(rc,{size:9,justifyContent:"between",children:[Object(Cr.jsxs)(rc,{children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:t.groupName}),Object(Cr.jsx)(Ac,{children:t.groupDescription})]}),Object(Cr.jsx)(Ac,{overflow:"auto",children:$e("group.create.confirm.info")})]}),Object(Cr.jsx)(Ac,{center:!0,variant:"white",className:"bg-primary rounded p-1",children:$e("group.create.confirm.buyinfo",["amount"],[n.toString()])})]})]}):null},Zo=e=>{const{groupData:t=null,setGroupData:s=null,setCloseAction:n=null,close:r=null,isCreator:i=!1,availableRooms:o=[]}=e,[l,u]=Object(c.useState)(""),[d,h]=Object(c.useState)(""),[j,b]=Object(c.useState)(-1),g=Object(c.useCallback)((()=>!!(t&&l&&l.length)&&(l===t.groupName&&d===t.groupDescription||(t.groupId<=0?!(j<=0)&&(s((e=>{const t={...e};return t.groupName=l,t.groupDescription=d,t.groupHomeroomId=j,t})),!0):(Ln(new a.Zc(t.groupId,l,d||"")),!0)))),[t,l,d,j,s]);return Object(c.useEffect)((()=>{u(t.groupName||""),h(t.groupDescription||""),b(t.groupHomeroomId)}),[t]),Object(c.useEffect)((()=>(n({action:g}),()=>n(null))),[n,g]),t?Object(Cr.jsxs)(rc,{justifyContent:"between",overflow:"auto",children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Ac,{center:!0,className:"col-3",children:$e("group.edit.name")}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:l,maxLength:29,onChange:e=>u(e.target.value)})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Ac,{center:!0,className:"col-3",children:$e("group.edit.desc")}),Object(Cr.jsx)("textarea",{className:"form-control form-control-sm",value:d,maxLength:254,onChange:e=>h(e.target.value)})]}),i&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Ac,{center:!0,className:"col-3",children:$e("group.edit.base")}),Object(Cr.jsx)(rc,{fullWidth:!0,gap:1,children:Object(Cr.jsxs)("select",{className:"form-select form-select-sm",value:j,onChange:e=>b(parseInt(e.target.value)),children:[Object(Cr.jsx)("option",{value:-1,disabled:!0,children:$e("group.edit.base.select.room")}),o&&o.map(((e,t)=>Object(Cr.jsx)("option",{value:e.id,children:e.name},t)))]})})]}),Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(Sr,{className:"col-3",children:"\xa0"}),Object(Cr.jsx)(Ac,{small:!0,children:$e("group.edit.base.warning")})]})]})]}),!i&&Object(Cr.jsx)(wr,{variant:"danger",onClick:()=>{!t||t.groupId<=0||jr.confirm($e("group.deleteconfirm.desc"),(()=>{Ln(new a.Kc(t.groupId)),r&&r()}),null,null,null,$e("group.deleteconfirm.title"))},children:$e("group.delete")}),i&&Object(Cr.jsx)(Ac,{underline:!0,center:!0,fullWidth:!0,pointer:!0,onClick:e=>C("navigator/create"),children:$e("group.createroom")})]}):null},el=[1,2,3,4],tl=e=>{const{onClose:t=null}=e,[s,n]=Object(c.useState)(1),[r,i]=Object(c.useState)(null),[o,l]=Object(c.useState)(null),[u,d]=Object(c.useState)(null),[h,j]=Object(c.useState)(0),b=Object(c.useCallback)((e=>{const t=e.getParser(),s=[];t.availableRooms.forEach(((e,t)=>s.push({id:t,name:e}))),d(s),j(t.groupCost)}),[]);return Je(a.Hc,b),Object(c.useEffect)((()=>{n(1),l({groupId:-1,groupName:null,groupDescription:null,groupHomeroomId:-1,groupState:1,groupCanMembersDecorate:!0,groupColors:null,groupBadgeParts:null}),Ln(new a.Gc)}),[l]),o?Object(Cr.jsxs)($r,{className:"nitro-group-creator",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("group.create.title"),onCloseClick:()=>{i(null),l(null),t&&t()}}),Object(Cr.jsxs)(Hr,{children:[Object(Cr.jsx)(yr,{center:!0,className:"creator-tabs",children:el.map(((e,t)=>Object(Cr.jsx)(yr,{center:!0,className:`tab tab-${1===e?"blue-flat":4===e?"yellow":"blue-arrow"} ${s===e?"active":""}`,children:Object(Cr.jsx)(Ac,{variant:"white",children:$e(`group.create.steplabel.${e}`)})},t)))}),Object(Cr.jsxs)(rc,{overflow:"hidden",children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:2,children:[Object(Cr.jsx)(Sr,{className:`nitro-group-tab-image tab-${s}`}),Object(Cr.jsxs)(rc,{grow:!0,gap:0,children:[Object(Cr.jsx)(Ac,{bold:!0,fontSize:4,children:$e(`group.create.stepcaption.${s}`)}),Object(Cr.jsx)(Ac,{children:$e(`group.create.stepdesc.${s}`)})]})]}),Object(Cr.jsxs)(rc,{overflow:"hidden",children:[1===s&&Object(Cr.jsx)(Zo,{groupData:o,setGroupData:l,setCloseAction:i,close:null,isCreator:!0,availableRooms:u}),2===s&&Object(Cr.jsx)($o,{groupData:o,setGroupData:l,setCloseAction:i}),3===s&&Object(Cr.jsx)(Xo,{groupData:o,setGroupData:l,setCloseAction:i}),4===s&&Object(Cr.jsx)(Jo,{groupData:o,setGroupData:l,purchaseCost:h})]}),Object(Cr.jsxs)(yr,{justifyContent:"between",children:[Object(Cr.jsx)(wr,{variant:"link",className:"text-black",onClick:()=>{r&&r.action&&!r.action()||(1!==s?n((e=>e-1)):t())},children:$e(1===s?"generic.cancel":"group.create.previousstep")}),Object(Cr.jsx)(wr,{disabled:4===s&&!se(),variant:4===s?se()?"success":"danger":"primary",onClick:()=>{r&&r.action&&!r.action()||(4!==s?n((e=>4===e?e:e+1)):(()=>{if(!o)return;const e=[];o.groupBadgeParts.forEach((t=>{t.code&&(e.push(t.key),e.push(t.color),e.push(t.position))})),Ln(new a.Fc(o.groupName,o.groupDescription,o.groupHomeroomId,o.groupColors[0],o.groupColors[1],e))})())},children:$e(4===s?se()?"group.create.confirm.buy":"group.create.confirm.viprequired":"group.create.nextstep")})]})]})]})]}):null};class sl{}sl.DUCKET_INFO="ducket_info",sl.CREDITS="credits",sl.AVATAR_EFFECTS="avatar_effects",sl.HC_MEMBERSHIP="hc_membership",sl.CLUB_GIFTS="club_gifts",sl.LIMITED_SOLD="limited_sold",sl.PET_ACCESSORIES="pet_accessories",sl.TRAX_SONGS="trax_songs",sl.NEW_ADDITIONS="new_additions",sl.QUEST_SHELL="quest_shell",sl.QUEST_SNOWFLAKES="quest_snowflakes",sl.VAL_QUESTS="val_quests",sl.GUILD_CUSTOM_FURNI="guild_custom_furni",sl.GIFT_SHOP="gift_shop",sl.HORSE_STYLES="horse_styles",sl.HORSE_SHOE="horse_shoe",sl.SET_EASTER="set_easter",sl.ECOTRON_TRANSFORM="ecotron_transform",sl.LOYALTY_INFO="loyalty_info",sl.ROOM_BUNDLES="room_bundles",sl.ROOM_BUNDLES_MOBILE="room_bundles_mobile",sl.HABBO_CLUB_DESKTOP="habbo_club_desktop",sl.MOBILE_SUBSCRIPTIONS="mobile_subscriptions";class nl{}nl.NOT_MEMBER=0,nl.MEMBER=1,nl.REQUEST_PENDING=2;class rl{}rl.REGULAR=0,rl.EXCLUSIVE=1,rl.PRIVATE=2;const cl=["regular","exclusive","private"],il=e=>{const{groupInformation:t=null,onClose:s=null,overflow:n="hidden",...r}=e,i=t&&t.ownerName===K().userName,o=Object(c.useCallback)((e=>{switch(e){case"members":Jn(t.id);break;case"members_pending":Jn(t.id,2);break;case"manage":Xn(t.id);break;case"homeroom":ar(t.roomId);break;case"furniture":C("catalog/open/"+sl.GUILD_CUSTOM_FURNI);break;case"popular_groups":C("navigator/search/groups")}}),[t]);return t?Object(Cr.jsxs)(Rr,{overflow:n,...r,children:[Object(Cr.jsxs)(rc,{center:!0,size:3,overflow:"hidden",children:[Object(Cr.jsx)(yr,{alignItems:"center",overflow:"hidden",className:"group-badge",children:Object(Cr.jsx)(Zr,{badgeCode:t.badge,isGroup:!0,scale:2})}),Object(Cr.jsxs)(rc,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Ac,{small:!0,underline:!0,pointer:!0,onClick:()=>o("members"),children:$e("group.membercount",["totalMembers"],[t.membersCount.toString()])}),t.pendingRequestsCount>0&&Object(Cr.jsx)(Ac,{small:!0,underline:!0,pointer:!0,onClick:()=>o("members_pending"),children:$e("group.pendingmembercount",["amount"],[t.pendingRequestsCount.toString()])}),t.isOwner&&Object(Cr.jsx)(Ac,{small:!0,underline:!0,pointer:!0,onClick:()=>o("manage"),children:$e("group.manage")})]}),t.membershipType===nl.NOT_MEMBER||t.membershipType===nl.REQUEST_PENDING?null:i?Object(Cr.jsx)("i",{className:"icon icon-group-owner",title:$e("group.youareowner")}):t.isAdmin?Object(Cr.jsx)("i",{className:"icon icon-group-admin",title:$e("group.youareadmin")}):Object(Cr.jsx)("i",{className:"icon icon-group-member",title:$e("group.youaremember")})]}),Object(Cr.jsxs)(rc,{size:9,justifyContent:"between",overflow:"auto",children:[Object(Cr.jsxs)(rc,{overflow:"hidden",children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:2,children:[Object(Cr.jsx)(Ac,{bold:!0,children:t.title}),Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)("i",{className:"icon icon-group-type-"+t.type,title:$e(`group.edit.settings.type.${cl[t.type]}.help`)}),t.canMembersDecorate&&Object(Cr.jsx)("i",{className:"icon icon-group-decorate",title:$e("group.memberscandecorate")})]})]}),Object(Cr.jsx)(Ac,{small:!0,children:$e("group.created",["date","owner"],[t.createdAt,t.ownerName])})]}),Object(Cr.jsx)(Ac,{small:!0,overflow:"auto",className:"group-description",children:t.description})]}),Object(Cr.jsxs)(rc,{children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{small:!0,underline:!0,pointer:!0,onClick:()=>o("homeroom"),children:$e("group.linktobase")}),Object(Cr.jsx)(Ac,{small:!0,underline:!0,pointer:!0,onClick:()=>o("furniture"),children:$e("group.buyfurni")}),Object(Cr.jsx)(Ac,{small:!0,underline:!0,pointer:!0,onClick:()=>o("popular_groups"),children:$e("group.showgroups")})]}),t.type!==rl.PRIVATE&&Object(Cr.jsx)(wr,{disabled:t.membershipType===nl.REQUEST_PENDING||i,onClick:()=>{t.type===rl.PRIVATE&&t.membershipType===nl.NOT_MEMBER||(t.membershipType!==nl.MEMBER?t&&Zn(t.id):jr.confirm($e("group.leaveconfirm.desc"),(()=>{Ln(new a.Wc(t.id,K().userId)),s&&s()}),null))},children:$e(i?"group.youareowner":t.type===rl.PRIVATE?"":t.membershipType===nl.MEMBER?"group.leave":t.membershipType===nl.NOT_MEMBER&&t.type===rl.REGULAR?"group.join":t.membershipType===nl.REQUEST_PENDING?"group.membershippending":t.membershipType===nl.NOT_MEMBER&&t.type===rl.EXCLUSIVE?"group.requestmembership":void 0)})]})]})]}):null},al=e=>{const[t,s]=Object(c.useState)(null),n=Object(c.useCallback)((e=>{const n=e.getParser();(t&&t.id===n.id||n.flag)&&s(n)}),[t]);return Je(a.Oc,n),t?Object(Cr.jsxs)($r,{className:"nitro-group-information-standalone",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("group.window.title"),onCloseClick:e=>s(null)}),Object(Cr.jsx)(Hr,{children:Object(Cr.jsx)(il,{groupInformation:t,onClose:()=>s(null)})})]}):null},ol=["regular","exclusive","private"],ll=e=>{const{groupData:t=null,setGroupData:s=null,setCloseAction:n=null}=e,[r,i]=Object(c.useState)(t.groupState),[o,l]=Object(c.useState)(t.groupCanMembersDecorate),u=Object(c.useCallback)((()=>!!t&&(r===t.groupState&&o===t.groupCanMembersDecorate||(t.groupId<=0?(s((e=>{const t={...e};return t.groupState=r,t.groupCanMembersDecorate=o,t})),!0):(Ln(new a.ad(t.groupId,r,o?0:1)),!0)))),[t,r,o,s]);return Object(c.useEffect)((()=>{i(t.groupState),l(t.groupCanMembersDecorate)}),[t]),Object(c.useEffect)((()=>(n({action:u}),()=>n(null))),[n,u]),Object(Cr.jsxs)(rc,{overflow:"auto",children:[Object(Cr.jsx)(rc,{children:ol.map(((e,t)=>Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"groupState",checked:r===t,onChange:e=>i(t)}),Object(Cr.jsxs)(rc,{gap:0,children:[Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)("i",{className:`icon icon-group-type-${t}`}),Object(Cr.jsx)(Ac,{bold:!0,children:$e(`group.edit.settings.type.${e}.label`)})]}),Object(Cr.jsx)(Ac,{children:$e(`group.edit.settings.type.${e}.help`)})]})]},t)))}),Object(Cr.jsx)(Rc,{}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:o,onChange:e=>l((e=>!e))}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("group.edit.settings.rights.caption")}),Object(Cr.jsx)(Ac,{children:$e("group.edit.settings.rights.members.help")})]})]})]})},ul=[1,2,3,5],dl=e=>{const[t,s]=Object(c.useState)(1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),l=()=>{r((e=>(e&&e.action&&e.action(),null))),o(null)},u=Object(c.useCallback)((e=>{const t=e.getParser();i&&i.groupId===t.id&&o((e=>{const s={...e};return s.groupName=t.title,s.groupDescription=t.description,s.groupState=t.type,s.groupCanMembersDecorate=t.canMembersDecorate,s}))}),[i]);Je(a.Oc,u);const d=Object(c.useCallback)((e=>{const t=e.getParser(),s=[];t.badgeParts.forEach(((e,t)=>{s.push(new a.Cc(e.isBase?a.Cc.BASE:a.Cc.SYMBOL,e.key,e.color,e.position))})),o({groupId:t.id,groupName:t.title,groupDescription:t.description,groupHomeroomId:t.roomId,groupState:t.state,groupCanMembersDecorate:t.canMembersDecorate,groupColors:[t.colorA,t.colorB],groupBadgeParts:s})}),[o]);return Je(a.cd,d),!i||i.groupId<=0?null:Object(Cr.jsxs)($r,{className:"nitro-group-manager",children:[Object(Cr.jsx)(Wr,{headerText:$e("group.window.title"),onCloseClick:l}),Object(Cr.jsx)(Nc,{children:ul.map((e=>Object(Cr.jsx)(Sc,{isActive:t===e,onClick:()=>(e=>{n&&n.action&&n.action(),s(e)})(e),children:$e(`group.edit.tab.${e}`)},e)))}),Object(Cr.jsxs)(Hr,{children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:2,children:[Object(Cr.jsx)(Sr,{className:`nitro-group-tab-image tab-${t}`}),Object(Cr.jsxs)(rc,{grow:!0,gap:0,children:[Object(Cr.jsx)(Ac,{bold:!0,fontSize:4,children:$e(`group.edit.tabcaption.${t}`)}),Object(Cr.jsx)(Ac,{children:$e(`group.edit.tabdesc.${t}`)})]})]}),Object(Cr.jsxs)(rc,{grow:!0,overflow:"hidden",children:[1===t&&Object(Cr.jsx)(Zo,{groupData:i,setGroupData:o,setCloseAction:r,close:l}),2===t&&Object(Cr.jsx)($o,{groupData:i,setGroupData:o,setCloseAction:r,skipDefault:!0}),3===t&&Object(Cr.jsx)(Xo,{groupData:i,setGroupData:o,setCloseAction:r}),5===t&&Object(Cr.jsx)(ll,{groupData:i,setGroupData:o,setCloseAction:r})]})]})]})},hl=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(-1),[d,h]=Object(c.useState)(0),[j,b]=Object(c.useState)(""),[g,O]=Object(c.useState)(null),m=e=>{if(e.rank===a.Vc.OWNER)return"group.members.owner";if(i.admin){if(e.rank===a.Vc.ADMIN)return"group.members.removerights";if(e.rank===a.Vc.MEMBER)return"group.members.giverights"}return""},p=Object(c.useCallback)((()=>{-1!==t&&-1!==n&&-1!==l&&Ln(new a.Qc(t,l,j,n))}),[t,n,l,j]),_=Object(c.useCallback)((e=>{const t=e.getParser();o(t),r(t.level),h(Math.ceil(t.totalMembersCount/t.pageSize))}),[]);Je(a.Rc,_);const f=Object(c.useCallback)((e=>{const t=e.getParser();jr.confirm($e(t.furnitureCount>0?"group.kickconfirm.desc":"group.kickconfirm_nofurni.desc",["user","amount"],[g,t.furnitureCount.toString()]),(()=>{Ln(new a.Wc(i.groupId,t.userId)),p()}),null),O(null)}),[i,g,p]);Je(a.Ic,f);const x=Object(c.useCallback)((e=>{const t=e.split("/");if(t.length<2)return;const n=parseInt(t[1])||-1,c=parseInt(t[2])||3;s(n),r(c)}),[]);return Object(c.useEffect)((()=>{const e={linkReceived:x,eventUrlPrefix:"group-members/"};return E(e),()=>y(e)}),[x]),Object(c.useEffect)((()=>{u(0)}),[t,n,j]),Object(c.useEffect)((()=>{-1!==t&&-1!==n&&-1!==l&&Ln(new a.Qc(t,l,j,n))}),[t,n,l,j]),Object(c.useEffect)((()=>{-1!==t&&(r(-1),o(null),h(0),b(""),O(null))}),[t]),-1!==t&&i?Object(Cr.jsxs)($r,{className:"nitro-group-members",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("group.members.title",["groupName"],[i?i.groupTitle:""]),onCloseClick:e=>s(-1)}),Object(Cr.jsxs)(Hr,{overflow:"hidden",children:[Object(Cr.jsxs)(yr,{gap:2,children:[Object(Cr.jsx)(yr,{center:!0,className:"group-badge",children:Object(Cr.jsx)(Zr,{badgeCode:i.badge,isGroup:!0,className:"mx-auto d-block"})}),Object(Cr.jsxs)(rc,{fullWidth:!0,gap:1,children:[Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm w-100",placeholder:$e("group.members.searchinfo"),value:j,onChange:e=>b(e.target.value)}),Object(Cr.jsxs)("select",{className:"form-select form-select-sm w-100",value:n,onChange:e=>r(parseInt(e.target.value)),children:[Object(Cr.jsx)("option",{value:"0",children:$e("group.members.search.all")}),Object(Cr.jsx)("option",{value:"1",children:$e("group.members.search.admins")}),Object(Cr.jsx)("option",{value:"2",children:$e("group.members.search.pending")})]})]})]}),Object(Cr.jsx)(Rr,{columnCount:2,overflow:"auto",className:"nitro-group-members-list-grid",children:i.result.map(((e,t)=>Object(Cr.jsxs)(yr,{gap:2,alignItems:"center",overflow:"hidden",className:"member-list-item bg-white rounded p-2",children:[Object(Cr.jsx)("div",{className:"avatar-head cursor-pointer",onClick:()=>gr(e.id),children:Object(Cr.jsx)(Xr,{figure:e.figure,headOnly:!0,direction:2})}),Object(Cr.jsxs)(rc,{grow:!0,gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,small:!0,pointer:!0,onClick:t=>gr(e.id),children:e.name}),e.rank!==a.Vc.REQUESTED&&Object(Cr.jsx)(Ac,{small:!0,italics:!0,variant:"muted",children:$e("group.members.since",["date"],[e.joinedAt])})]}),Object(Cr.jsxs)(rc,{gap:1,children:[e.rank!==a.Vc.REQUESTED&&Object(Cr.jsx)(yr,{center:!0,children:Object(Cr.jsx)(Sr,{pointer:i.admin,className:"icon icon-group-small-"+(e.rank===a.Vc.OWNER?"owner":e.rank===a.Vc.ADMIN?"admin":i.admin&&e.rank===a.Vc.MEMBER?"not-admin":""),title:$e(m(e)),onClick:t=>(e=>{i.admin&&e.rank!==a.Vc.OWNER&&(e.rank!==a.Vc.ADMIN?Ln(new a.Ac(i.groupId,e.id)):Ln(new a.Bc(i.groupId,e.id)),p())})(e)})}),i.admin&&e.rank===a.Vc.REQUESTED&&Object(Cr.jsx)(yr,{alignItems:"center",children:Object(Cr.jsx)(Sr,{pointer:!0,className:"nitro-friends-spritesheet icon-accept",title:$e("group.members.accept"),onClick:t=>(e=>{i.admin&&e.rank===a.Vc.REQUESTED&&(Ln(new a.Sc(i.groupId,e.id)),p())})(e)})}),i.admin&&e.rank!==a.Vc.OWNER&&e.id!==K().userId&&Object(Cr.jsx)(yr,{alignItems:"center",children:Object(Cr.jsx)(Sr,{pointer:!0,className:"nitro-friends-spritesheet icon-deny",title:$e(e.rank===a.Vc.REQUESTED?"group.members.reject":"group.members.kick"),onClick:t=>(e=>{if(i.admin){if(e.rank===a.Vc.REQUESTED)return Ln(new a.Tc(i.groupId,e.id)),void p();O(e.name),Ln(new a.Jc(i.groupId,e.id))}})(e)})})]})]},t)))}),Object(Cr.jsxs)(yr,{gap:1,justifyContent:"between",alignItems:"center",children:[Object(Cr.jsx)(wr,{disabled:0===i.pageIndex,onClick:e=>u((e=>e-1)),children:Object(Cr.jsx)(Lr.a,{icon:"chevron-left"})}),Object(Cr.jsx)(Ac,{small:!0,children:$e("group.members.pageinfo",["amount","page","totalPages"],[i.totalMembersCount.toString(),(i.pageIndex+1).toString(),d.toString()])}),Object(Cr.jsx)(wr,{disabled:i.pageIndex===d-1,onClick:e=>u((e=>e+1)),children:Object(Cr.jsx)(Lr.a,{icon:"chevron-right"})})]})]})]}):null},jl=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),i=Object(c.useCallback)((e=>{const t=e.getParser();s(!1),ar(t.roomId)}),[]);Je(a.Uc,i);const o=Object(c.useCallback)((e=>{const t=e.getParser(),s={badgeBases:[],badgeSymbols:[],badgePartColors:[],groupColorsA:[],groupColorsB:[]};t.bases.forEach(((e,t)=>s.badgeBases.push({id:t,images:e}))),t.symbols.forEach(((e,t)=>s.badgeSymbols.push({id:t,images:e}))),t.partColors.forEach(((e,t)=>s.badgePartColors.push({id:t,color:e}))),t.colorsA.forEach(((e,t)=>s.groupColorsA.push({id:t,color:e}))),t.colorsB.forEach(((e,t)=>s.groupColorsB.push({id:t,color:e}))),s.badgeBases.sort(Wo),s.badgeSymbols.sort(Wo),s.badgePartColors.sort(Wo),s.groupColorsA.sort(Wo),s.groupColorsB.sort(Wo),r(s)}),[r]);Je(a.Ec,o);const l=Object(c.useCallback)((e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"create":return void s(!0);case"manage":if(!t[2])return;return s(!1),void Ln(new a.bd(Number(t[2])))}}),[]);return Object(c.useEffect)((()=>{const e={linkReceived:l,eventUrlPrefix:"groups/"};return E(e),()=>y(e)}),[l]),Object(c.useEffect)((()=>{Ln(new a.Dc)}),[]),Object(Cr.jsxs)(qo,{value:{groupCustomize:n,setGroupCustomize:r},children:[t&&Object(Cr.jsx)(tl,{onClose:()=>s(!1)}),!t&&Object(Cr.jsx)(dl,{}),Object(Cr.jsx)(hl,{}),Object(Cr.jsx)(al,{})]})};class bl{}bl.NONE="NONE",bl.ERROR="ERROR",bl.REJECTED="REJECTED",bl.USER_CREATE="USER_CREATE",bl.USER_PENDING="USER_PENDING",bl.USER_ONGOING="USER_ONGOING",bl.USER_FEEDBACK="USER_FEEDBACK",bl.USER_THANKS="USER_THANKS",bl.USER_GUIDE_DISCONNECTED="USER_GUIDE_DISCONNECTED",bl.GUIDE_TOOL_MENU="GUIDE_TOOL_MENU",bl.GUIDE_ACCEPT="GUIDE_ACCEPT",bl.GUIDE_ONGOING="GUIDE_ONGOING",bl.GUIDE_CLOSED="GUIDE_CLOSED",bl.GUARDIAN_CHAT_REVIEW_ACCEPT="GUARDIAN_CHAT_REVIEW_ACCEPT",bl.GUARDIAN_CHAT_REVIEW_WAIT_FOR_VOTERS="GUARDIAN_CHAT_REVIEW_WAIT_FOR_VOTERS",bl.GUARDIAN_CHAT_REVIEW_VOTE="GUARDIAN_CHAT_REVIEW_VOTE",bl.GUARDIAN_CHAT_REVIEW_WAIT_FOR_RESULTS="GUARDIAN_CHAT_REVIEW_WAIT_FOR_RESULTS",bl.GUARDIAN_CHAT_REVIEW_RESULTS="GUARDIAN_CHAT_REVIEW_RESULTS";class gl{constructor(e,t){this._message=void 0,this._roomId=void 0,this._message=e,this._roomId=t}get message(){return this._message}get roomId(){return this._roomId}}class Ol{constructor(e){this._userId=void 0,this._messages=void 0,this._userId=e,this._messages=[]}addChat(e){this._messages.push(e)}get userId(){return this._userId}get messages(){return this._messages}}const ml=e=>{const{helpRequestDescription:t=null,helpRequestAverageTime:s=0}=e,n=e=>Ln(new a.ld(e));return Object(Cr.jsxs)(rc,{children:[Object(Cr.jsxs)(rc,{gap:0,className:"bg-muted p-2 rounded",children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("guide.help.request.guide.accept.request.title")}),Object(Cr.jsx)(Ac,{variant:"muted",children:$e("guide.help.request.type.1")}),Object(Cr.jsx)(Ac,{wrap:!0,textBreak:!0,children:t})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(wr,{variant:"success",onClick:e=>n(!0),children:$e("guide.help.request.guide.accept.accept.button")}),Object(Cr.jsx)(wr,{variant:"danger",onClick:e=>n(!1),children:$e("guide.help.request.guide.accept.skip.link")})]})]})},pl=e=>{const{isOnDuty:t=!1,isHandlingGuideRequests:s=!1,setIsHandlingGuideRequests:n=null,isHandlingHelpRequests:r=!1,setIsHandlingHelpRequests:c=null,isHandlingBullyReports:i=!1,setIsHandlingBullyReports:a=null,guidesOnDuty:o=0,helpersOnDuty:l=0,guardiansOnDuty:u=0,processAction:d=null}=e;return Object(Cr.jsxs)(rc,{children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:2,className:"bg-muted p-2 rounded",children:[Object(Cr.jsx)(Sr,{className:"duty-switch"+(t?"":" off"),onClick:e=>d("toggle_duty")}),Object(Cr.jsxs)(rc,{gap:0,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("guide.help.guide.tool.yourstatus")}),Object(Cr.jsx)(Ac,{children:$e("guide.help.guide.tool.duty."+(t?"on":"off"))})]})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("guide.help.guide.tool.tickettypeselection.caption")}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",disabled:t,type:"checkbox",checked:s,onChange:e=>n(e.target.checked)}),Object(Cr.jsx)(Ac,{children:$e("guide.help.guide.tool.tickettypeselection.guiderequests")})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",disabled:t,type:"checkbox",checked:r,onChange:e=>c(e.target.checked)}),Object(Cr.jsx)(Ac,{children:$e("guide.help.guide.tool.tickettypeselection.onlyhelprequests")})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",disabled:t,type:"checkbox",checked:i,onChange:e=>a(e.target.checked)}),Object(Cr.jsx)(Ac,{children:$e("guide.help.guide.tool.tickettypeselection.bullyreports")})]})]}),Object(Cr.jsx)("hr",{className:"bg-dark m-0"}),Object(Cr.jsxs)(yr,{center:!0,gap:2,children:[Object(Cr.jsx)(Sr,{className:"info-icon"}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Sr,{dangerouslySetInnerHTML:{__html:$e("guide.help.guide.tool.guidesonduty",["amount"],[o.toString()])}}),Object(Cr.jsx)(Sr,{dangerouslySetInnerHTML:{__html:$e("guide.help.guide.tool.helpersonduty",["amount"],[l.toString()])}}),Object(Cr.jsx)(Sr,{dangerouslySetInnerHTML:{__html:$e("guide.help.guide.tool.guardiansonduty",["amount"],[u.toString()])}})]})]}),Object(Cr.jsx)("hr",{className:"bg-dark m-0"}),Object(Cr.jsxs)(yr,{justifyContent:"between",gap:2,children:[Object(Cr.jsx)(wr,{disabled:!0,onClick:e=>d("forum_link"),children:$e("guide.help.guide.tool.forum.link")}),Object(Cr.jsx)(wr,{disabled:!0,children:$e("guide.help.guide.tool.skill.link")})]})]})},_l=e=>{const{isGuide:t=!1,userId:s=0,userName:n=null,userFigure:r=null,isTyping:i=!1,messageGroups:o=[]}=e,[l,u]=Object(c.useState)(""),d=Object(c.useCallback)((()=>{Ln(new a.kd)}),[]),h=Object(c.useCallback)((()=>{Ln(new a.md)}),[]),j=Object(c.useCallback)((()=>{Ln(new a.ud)}),[]),b=Object(c.useCallback)((e=>{ar(e.getParser().requesterRoomId)}),[]);Je(a.td,b);const g=Object(c.useCallback)((()=>{l&&l.length&&(Ln(new a.od(l)),u(""))}),[l]),O=Object(c.useCallback)((e=>{"Enter"===e.key&&g()}),[g]),m=Object(c.useCallback)((e=>e===K().userId),[]);return Object(Cr.jsxs)(rc,{fullHeight:!0,children:[Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"between",gap:1,className:"bg-muted p-2 rounded",children:[t&&Object(Cr.jsxs)(kr,{children:[Object(Cr.jsx)(wr,{onClick:d,children:$e("guide.help.request.guide.ongoing.visit.button")}),Object(Cr.jsx)(wr,{disabled:!0,onClick:h,children:$e("guide.help.request.guide.ongoing.invite.button")})]}),!t&&Object(Cr.jsxs)(rc,{gap:0,children:[Object(Cr.jsx)(Ac,{bold:!0,children:n}),Object(Cr.jsx)(Ac,{children:$e("guide.help.request.user.ongoing.guide.desc")})]}),Object(Cr.jsx)(wr,{variant:"danger",disabled:!0,children:$e("guide.help.common.report.link")})]}),Object(Cr.jsx)(rc,{overflow:"hidden",gap:1,className:"bg-muted rounded chat-messages p-2",children:Object(Cr.jsx)(rc,{overflow:"auto",children:o.map(((e,t)=>Object(Cr.jsxs)(yr,{fullWidth:!0,justifyContent:m(e.userId)?"end":"start",gap:2,children:[Object(Cr.jsx)(Sr,{shrink:!0,className:"message-avatar",children:!m(e.userId)&&Object(Cr.jsx)(Xr,{figure:r,direction:2})}),Object(Cr.jsxs)(Sr,{className:"bg-light text-black border-radius mb-2 rounded py-1 px-2 messages-group-"+(m(e.userId)?"right":"left"),children:[Object(Cr.jsxs)(Ac,{bold:!0,children:[m(e.userId)&&K().userName,!m(e.userId)&&n]}),e.messages.map(((e,t)=>Object(Cr.jsx)(Sr,{className:"text-break",children:e.message},t)))]}),m(e.userId)&&Object(Cr.jsx)(Sr,{className:"message-avatar flex-shrink-0",children:Object(Cr.jsx)(Xr,{figure:K().figure,direction:4})})]},t)))})}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:$e("guide.help.request.guide.ongoing.input.empty",["name"],[n]),value:l,onChange:e=>u(e.target.value),onKeyDown:O}),Object(Cr.jsx)(wr,{variant:"success",onClick:g,children:$e("widgets.chatinput.say")})]}),i&&Object(Cr.jsx)(Ac,{variant:"muted",children:$e("guide.help.common.typing")})]}),Object(Cr.jsx)(wr,{fullWidth:!0,variant:"success",onClick:j,children:$e("guide.help.request."+(t?"guide":"user")+".ongoing.close.link")})]})},El=e=>{const{userRequest:t="",setUserRequest:s=null}=e,[n,r]=Object(c.useState)(!1);return Object(Cr.jsxs)(rc,{children:[Object(Cr.jsx)(Ac,{children:$e("guide.help.request.user.create.help")}),Object(Cr.jsx)("textarea",{className:"request-message",maxLength:140,value:t,onChange:e=>s(e.target.value),placeholder:$e("guide.help.request.user.create.input.help")}),Object(Cr.jsx)(wr,{fullWidth:!0,variant:"success",disabled:t.length<15||n,onClick:()=>{r(!0),Ln(new a.gd(1,t))},children:$e("guide.help.request.user.create.input.button")})]})},fl=e=>{const{userName:t=null}=e,s=Object(c.useCallback)((e=>{Ln(new a.jd(e))}),[]);return Object(Cr.jsxs)(rc,{children:[Object(Cr.jsxs)(yr,{justifyContent:"between",gap:1,className:"bg-muted p-2 rounded",children:[Object(Cr.jsxs)(rc,{gap:0,children:[Object(Cr.jsx)(Ac,{bold:!0,children:t}),Object(Cr.jsx)(Ac,{children:$e("guide.help.request.user.feedback.guide.desc")})]}),Object(Cr.jsx)(wr,{variant:"danger",disabled:!0,children:$e("guide.help.common.report.link")})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("guide.help.request.user.feedback.closed.title")}),Object(Cr.jsx)(Ac,{children:$e("guide.help.request.user.feedback.closed.desc")})]}),t&&t.length>0&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)("hr",{className:"bg-dark m-0 mt-auto"}),Object(Cr.jsxs)(rc,{children:[Object(Cr.jsx)(Ac,{center:!0,bold:!0,children:$e("guide.help.request.user.feedback.question")}),Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(wr,{fullWidth:!0,variant:"success",onClick:e=>s(!0),children:$e("guide.help.request.user.feedback.positive.button")}),Object(Cr.jsx)(wr,{fullWidth:!0,variant:"danger",onClick:e=>s(!1),children:$e("guide.help.request.user.feedback.negative.button")})]})]})]})]})},xl=e=>{const{helpRequestDescription:t=null,helpRequestAverageTime:s=0}=e;return Object(Cr.jsxs)(rc,{children:[Object(Cr.jsxs)(rc,{gap:0,className:"bg-muted rounded p-2",children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("guide.help.request.guide.accept.request.title")}),Object(Cr.jsx)(Ac,{variant:"muted",children:$e("guide.help.request.type.1")}),Object(Cr.jsx)(Ac,{wrap:!0,textBreak:!0,children:t})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("guide.help.request.user.pending.info.title")}),Object(Cr.jsx)(Ac,{children:$e("guide.help.request.user.pending.info.message")}),Object(Cr.jsx)(Ac,{children:$e("guide.help.request.user.pending.info.waiting",["waitingtime"],[s.toString()])})]}),Object(Cr.jsx)(wr,{variant:"danger",onClick:()=>Ln(new a.sd),children:$e("guide.help.request.user.pending.cancel.button")})]})},Il=e=>Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("guide.help.request.user.thanks.info.title")}),Object(Cr.jsx)(Ac,{children:$e("guide.help.request.user.thanks.info.desc")})]}),Tl=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)($e("guide.help.guide.tool.title")),[i,o]=Object(c.useState)(!1),[l,u]=Object(c.useState)(bl.GUIDE_TOOL_MENU),[d,h]=Object(c.useState)(!1),[j,b]=Object(c.useState)(!1),[g,O]=Object(c.useState)(!1),[m,p]=Object(c.useState)(!1),[_,f]=Object(c.useState)(0),[x,I]=Object(c.useState)(0),[T,C]=Object(c.useState)(0),[S,v]=Object(c.useState)(""),[R,A]=Object(c.useState)(null),[w,k]=Object(c.useState)(0),[D,P]=Object(c.useState)(0),[U,L]=Object(c.useState)(null),[M,F]=Object(c.useState)(null),[H,B]=Object(c.useState)(!1),[G,W]=Object(c.useState)([]),V=Object(c.useCallback)(((e,t)=>{switch(e){case bl.GUIDE_TOOL_MENU:r($e("guide.help.guide.tool.title")),o(!1);break;case bl.GUIDE_ACCEPT:r($e("guide.help.request.guide.accept.title")),o(!0);break;case bl.GUIDE_ONGOING:r($e("guide.help.request.guide.ongoing.title",["name"],[t])),o(!0);break;case bl.USER_CREATE:r($e("guide.help.request.user.create.title")),o(!1);break;case bl.USER_PENDING:r($e("guide.help.request.user.pending.title")),o(!0);break;case bl.USER_ONGOING:r($e("guide.help.request.user.ongoing.title",["name"],[t])),o(!0);break;case bl.USER_FEEDBACK:r($e("guide.help.request.user.feedback.title")),o(!0);break;case bl.USER_THANKS:r($e("guide.help.request.user.thanks.title")),o(!1)}u(e),s(!0)}),[]),q=Object(c.useCallback)((e=>{switch(e.type){case mn.SHOW_GUIDE_TOOL:return void s(!0);case mn.HIDE_GUIDE_TOOL:return void s(!1);case mn.TOGGLE_GUIDE_TOOL:return void s((e=>!e));case mn.CREATE_HELP_REQUEST:return void V(bl.USER_CREATE)}}),[V]);lt(mn.SHOW_GUIDE_TOOL,q),lt(mn.HIDE_GUIDE_TOOL,q),lt(mn.TOGGLE_GUIDE_TOOL,q),lt(mn.CREATE_HELP_REQUEST,q);const z=Object(c.useCallback)((e=>{!e.getParser().isAllowed(a.df.USE_GUIDE_TOOL)&&d&&(h(!1),Ln(new a.qd(!1,!1,!1,!1)))}),[d,h]);Je(a.cf,z);const Y=Object(c.useCallback)((e=>{const t=e.getParser();h(t.onDuty),I(t.guidesOnDuty),f(t.helpersOnDuty),C(t.guardiansOnDuty)}),[h,f,I,C]);Je(a.ed,Y);const Q=Object(c.useCallback)((e=>{const t=e.getParser();A(t.helpRequestDescription),k(t.roleSpecificWaitTime),t.asGuide&&d&&V(bl.GUIDE_ACCEPT),t.asGuide||V(bl.USER_PENDING)}),[d,V]);Je(a.fd,Q);const $=Object(c.useCallback)((e=>{const t=e.getParser();d?(P(t.requesterUserId),L(t.requesterName),F(t.requesterFigure),V(bl.GUIDE_ONGOING,t.requesterName)):(P(t.guideUserId),L(t.guideName),F(t.guideFigure),V(bl.USER_ONGOING,t.guideName))}),[d,V]);Je(a.vd,$);const X=Object(c.useCallback)((e=>{const t=e.getParser();B(t.isTyping)}),[]);Je(a.rd,X);const J=Object(c.useCallback)((e=>{const t=e.getParser(),s=[...G];let n=s[s.length-1];n&&n.userId===t.senderId||(n=new Ol(t.senderId),s.push(n)),n.addChat(new gl(t.chatMessage)),W(s)}),[G]);Je(a.pd,J);const Z=Object(c.useCallback)((e=>{const t=e.getParser(),s=[...G];let n=s[s.length-1];const r=d?K().userId:D;n&&n.userId===r||(n=new Ol(r),s.push(n)),n.addChat(new gl(t.roomName,t.roomId)),W(s)}),[d,G,D]);Je(a.nd,Z);const ee=Object(c.useCallback)((e=>{d?(P(0),L(null),F(null),B(!1),W([]),V(bl.GUIDE_TOOL_MENU)):V(bl.USER_FEEDBACK)}),[d,V]);Je(a.id,ee);const te=Object(c.useCallback)((e=>{P(0),L(null),F(null),B(!1),W([]),V(d?bl.GUIDE_TOOL_MENU:bl.USER_THANKS)}),[d,V]);Je(a.hd,te);const se=Object(c.useCallback)((e=>{const t=e.split("/");t.length<2||t[1]}),[]);Object(c.useEffect)((()=>{const e={linkReceived:se,eventUrlPrefix:"help/"};return E(e),()=>y(e)}),[se]);const ne=Object(c.useCallback)((e=>{switch(e){case"close":return s(!1),v(""),void u(bl.GUIDE_TOOL_MENU);case"toggle_duty":return j||g||m?void h((e=>(Ln(new a.qd(!e,!e&&g,!e&&m,!e&&j)),!e))):void ot(new Sn([$e("guide.help.guide.tool.noqueueselected.message")],null,null,null,$e("guide.help.guide.tool.noqueueselected.caption"),null));case"forum_link":const e=N("group.homepage.url","").replace("%groupid%",N("guide.help.alpha.groupid","0"));return void window.open(e)}}),[j,g,m]);return t?Object(Cr.jsxs)($r,{className:"nitro-guide-tool",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:n,onCloseClick:e=>ne("close"),noCloseButton:i}),Object(Cr.jsxs)(Hr,{className:"text-black",children:[l===bl.GUIDE_TOOL_MENU&&Object(Cr.jsx)(pl,{isOnDuty:d,isHandlingGuideRequests:g,setIsHandlingGuideRequests:O,isHandlingHelpRequests:m,setIsHandlingHelpRequests:p,isHandlingBullyReports:j,setIsHandlingBullyReports:b,guidesOnDuty:x,helpersOnDuty:_,guardiansOnDuty:T,processAction:ne}),l===bl.GUIDE_ACCEPT&&Object(Cr.jsx)(ml,{helpRequestDescription:R,helpRequestAverageTime:w}),[bl.GUIDE_ONGOING,bl.USER_ONGOING].includes(l)&&Object(Cr.jsx)(_l,{isGuide:d,userId:D,userName:U,userFigure:M,isTyping:H,messageGroups:G}),l===bl.USER_CREATE&&Object(Cr.jsx)(El,{userRequest:S,setUserRequest:v}),l===bl.USER_PENDING&&Object(Cr.jsx)(xl,{helpRequestDescription:R,helpRequestAverageTime:w}),l===bl.USER_FEEDBACK&&Object(Cr.jsx)(fl,{userName:U}),l===bl.USER_THANKS&&Object(Cr.jsx)(Il,{})]})]}):null};var Cl=s(87),Sl=s(133);const Nl=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(0),[l,u]=Object(c.useState)(null),{userFigure:d=null}=Ut(),{purse:h=null,clubStatus:j=null}=kt(),{badgeCodes:b=[],activate:g=null,deactivate:O=null}=_t(),m=()=>$e("hccenter.special.sum",["credits"],[(n.creditRewardForStreakBonus+n.creditRewardForMonthlySpent).toString()]),p=Object(c.useCallback)((e=>{const t=e.getParser();o(t.giftsAvailable)}),[]);Je(a.bb,p);const _=Object(c.useCallback)((e=>{const t=e.getParser();r(t.data)}),[]);if(Je(a.xh,_),Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))if("open"!==t[1]);else if(t.length>2&&"hccenter"===t[2])s(!0)},eventUrlPrefix:"habboUI/"};return E(e),()=>y(e)}),[]),Object(c.useEffect)((()=>{u((e=>{let t=null;return tr.forEach((s=>e.indexOf(s)>-1&&(t=s))),t||"HC1"})(b))}),[b]),Object(c.useEffect)((()=>{if(!t)return;const e=g();return()=>O(e)}),[t,g,O]),Object(c.useEffect)((()=>{Ln(new a.cc),Ln(new a.wh)}),[]),!t)return null;const f=Object(Cr.jsx)(Cl.a,{id:"popover-basic",children:Object(Cr.jsxs)(Cl.a.Body,{className:"text-black py-2 px-3",children:[Object(Cr.jsx)("h5",{children:$e("hccenter.breakdown.title")}),Object(Cr.jsx)("div",{children:$e("hccenter.breakdown.creditsspent",["credits"],[n.totalCreditsSpent.toString()])}),Object(Cr.jsx)("div",{children:$e("hccenter.breakdown.paydayfactor.percent",["percent"],[(100*n.kickbackPercentage).toString()])}),Object(Cr.jsx)("div",{children:$e("hccenter.breakdown.streakbonus",["credits"],[n.creditRewardForStreakBonus.toString()])}),Object(Cr.jsx)("hr",{className:"w-100 text-black my-1"}),Object(Cr.jsx)("div",{children:$e("hccenter.breakdown.total",["credits","actual"],[m(),(100*(n.kickbackPercentage*n.totalCreditsSpent+n.creditRewardForStreakBonus)/100).toString()])}),Object(Cr.jsx)("div",{className:"btn btn-link text-primary p-0",onClick:()=>C("habbopages/"+N("hc.center")["payday.habbopage"]),children:$e("hccenter.special.infolink")})]})});return Object(Cr.jsxs)($r,{theme:"primary-slim",className:"nitro-hc-center",children:[Object(Cr.jsx)(Wr,{headerText:$e("generic.hccenter"),onCloseClick:()=>s(!1)}),Object(Cr.jsxs)(yr,{position:"relative",className:"bg-muted p-2",children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)("div",{className:"hc-logo"}),Object(Cr.jsx)(yr,{children:Object(Cr.jsx)(wr,{variant:"success",onClick:e=>C("catalog/open/"+N("catalog.links")["hc.buy_hc"]),children:$e(j===er.ACTIVE?"hccenter.btn.extend":"hccenter.btn.buy")})})]}),Object(Cr.jsx)(Sr,{position:"absolute",className:"end-0 p-4 top-0 habbo-avatar",children:Object(Cr.jsx)(Xr,{figure:d,direction:4,scale:2})})]}),Object(Cr.jsxs)(Hr,{children:[Object(Cr.jsxs)(yr,{gap:2,children:[Object(Cr.jsx)(Zr,{badgeCode:l,className:"align-self-center flex-shrink-0 me-1"}),Object(Cr.jsxs)(rc,{size:5,className:"streak-info",gap:0,children:[Object(Cr.jsx)(Ac,{children:$e("hccenter.status."+j)}),Object(Cr.jsx)(Ac,{dangerouslySetInnerHTML:{__html:(()=>{switch(j){case er.ACTIVE:return $e(`hccenter.status.${j}.info`,["timeleft","joindate","streakduration"],[h.clubDays<=0?$e("purse.clubdays.zero.amount.text"):h.minutesUntilExpiration>-1&&h.minutesUntilExpiration<1440?a.Fb.shortFormat(60*h.minutesUntilExpiration):a.Fb.shortFormat(86400*(31*h.clubPeriods+h.clubDays)),n.firstSubscriptionDate,a.Fb.shortFormat(86400*n.currentHcStreak)]);case er.EXPIRED:return $e(`hccenter.status.${j}.info`,["joindate"],[n.firstSubscriptionDate]);default:return $e(`hccenter.status.${j}.info`)}})()}})]})]}),N("hc.center")["payday.info"]&&Object(Cr.jsxs)(yr,{alignItems:"center",children:[Object(Cr.jsxs)(rc,{className:"rounded-start bg-primary p-2 payday-special mb-1",children:[Object(Cr.jsx)("h4",{className:"mb-1",children:$e("hccenter.special.title")}),Object(Cr.jsx)("div",{children:$e("hccenter.special.info")}),Object(Cr.jsx)("div",{className:"btn btn-link text-white p-0 mt-auto align-self-baseline",onClick:()=>C("habbopages/"+N("hc.center")["payday.habbopage"]),children:$e("hccenter.special.infolink")})]}),Object(Cr.jsxs)("div",{className:"payday flex-shrink-0 p-2",children:[Object(Cr.jsx)("h5",{className:"mb-2 ms-2",children:$e("hccenter.special.time.title")}),Object(Cr.jsxs)("div",{className:"d-flex flex-row mb-2",children:[Object(Cr.jsx)("div",{className:"clock me-2"}),Object(Cr.jsx)("h6",{className:"mb-0 align-self-center",children:n.timeUntilPayday<60?$e("hccenter.special.time.soon"):a.Fb.shortFormat(60*n.timeUntilPayday)})]}),j===er.ACTIVE&&Object(Cr.jsxs)("div",{className:"pe-3",children:[Object(Cr.jsx)("h5",{className:"ms-2 mb-1 bolder",children:$e("hccenter.special.amount.title")}),Object(Cr.jsxs)("div",{className:"d-flex flex-column",children:[Object(Cr.jsx)("div",{className:"w-100 text-center ms-4n",children:m()}),Object(Cr.jsx)(Sl.a,{trigger:["hover","focus"],placement:"left",overlay:f,children:Object(Cr.jsx)("div",{className:"btn btn-link align-self-end text-primary",children:$e("hccenter.breakdown.infolink")})})]})]})]})]}),N("hc.center")["gift.info"]&&Object(Cr.jsxs)("div",{className:"rounded bg-success p-2 d-flex flex-row mb-0",children:[Object(Cr.jsxs)("div",{children:[Object(Cr.jsx)("h4",{className:"mb-1",children:$e("hccenter.gift.title")}),Object(Cr.jsx)("div",{dangerouslySetInnerHTML:{__html:i>0?$e("hccenter.unclaimedgifts",["unclaimedgifts"],[i.toString()]):$e("hccenter.gift.info")}})]}),Object(Cr.jsx)("button",{className:"btn btn-primary btn-lg align-self-center ms-auto",onClick:()=>C("catalog/open/"+N("catalog.links")["hc.hc_gifts"]),children:$e(j===er.ACTIVE?"hccenter.btn.gifts.redeem":"hccenter.btn.gifts.view")})]}),N("hc.center")["benefits.info"]&&Object(Cr.jsxs)("div",{className:"benefits text-black py-2",children:[Object(Cr.jsx)("h5",{className:"mb-1 text-primary",children:$e("hccenter.general.title")}),Object(Cr.jsx)("div",{className:"mb-2",dangerouslySetInnerHTML:{__html:$e("hccenter.general.info")}}),Object(Cr.jsx)("button",{className:"btn btn-link p-0 text-primary",onClick:()=>C("habbopages/"+N("hc.center")["benefits.habbopage"]),children:$e("hccenter.general.infolink")})]})]})]})},vl=Object(c.createContext)({helpReportState:null,setHelpReportState:null}),Rl=e=>Object(Cr.jsx)(vl.Provider,{value:e.value,children:e.children}),Al=()=>Object(c.useContext)(vl);class yl{}yl.TOO_MANY_PENDING_CALLS_CODE=1,yl.HAS_ABUSIVE_CALL_CODE=2;const wl=e=>{const t=Object(c.useCallback)((e=>{const t=e.getParser();let s=t.messageText;switch(t.resultType){case yl.TOO_MANY_PENDING_CALLS_CODE:Ln(new a.oc),jr.simpleAlert($e("help.cfh.error.pending"),or.MODERATION,null,null,$e("help.cfh.error.title"));break;case yl.HAS_ABUSIVE_CALL_CODE:jr.simpleAlert($e("help.cfh.error.abusive"),or.MODERATION,null,null,$e("help.cfh.error.title"));break;default:0===s.trim().length&&(s=$e("help.cfh.sent.text")),jr.simpleAlert(s,or.MODERATION,null,null,$e("help.cfh.sent.title"))}}),[]);Je(a.G,t);const s=Object(c.useCallback)((e=>{const t=e.getParser(),s=0===t.messageText.length?$e("help.cfh.closed."+(1===(n=t.closeReason)?"useless":2===n?"abusive":"resolved")):t.messageText;var n;jr.simpleAlert(s,or.MODERATION,null,null,$e("mod.alert.title"))}),[]);return Je(a.Id,s),null},kl=e=>{const[t,s]=Object(c.useState)(""),{helpReportState:n=null,setHelpReportState:r=null}=Al(),{reportedChats:i,cfhTopic:o,reportedUserId:l}=n;return Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{fontSize:4,children:$e("help.emergency.chat_report.subtitle")}),Object(Cr.jsx)(Ac,{children:$e("help.cfh.input.text")})]}),Object(Cr.jsx)("textarea",{className:"form-control h-100",value:t,onChange:e=>s(e.target.value)}),Object(Cr.jsx)(wr,{variant:"success",disabled:t.length<15,onClick:()=>{if(t.length<15)return;const e=i[0].roomId,s=[];i.forEach((e=>{s.push(e.entityId),s.push(e.message)})),Ln(new a.F(t,o,l,e,s)),C("help/hide")},children:$e("help.bully.submit")})]})},Dl=e=>{const{helpReportState:t=null,setHelpReportState:s=null}=Al(),n=Object(c.useCallback)((()=>{const e=Object.assign({},t);e.currentStep=1,s(e)}),[t,s]),r=Object(c.useCallback)((()=>{Ln(new a.bc(!1))}),[]),i=Object(c.useCallback)((()=>{ot(new mn(mn.CREATE_HELP_REQUEST))}),[]);return Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{fontSize:3,children:$e("help.main.frame.title")}),Object(Cr.jsx)(Ac,{children:$e("help.main.self.description")})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(wr,{onClick:n,children:$e("help.main.bully.subtitle")}),Object(Cr.jsx)(wr,{onClick:i,children:$e("help.main.help.title")}),Object(Cr.jsx)(wr,{disabled:!0,children:$e("help.main.self.tips.title")}),Object(Cr.jsx)(wr,{variant:"link",className:"text-black",onClick:r,children:$e("help.main.my.sanction.status")})]})]})},Pl=e=>{const{username:t="",onAction:s=null}=e,[n,r]=Object(c.useState)(!1),i=Object(c.useCallback)((e=>{const t=e.getParser();t&&t.webId===K().userId&&s("close")}),[s]);Je(a.xi,i);const o=Object(c.useCallback)((()=>{n||(r(!0),Ln(new a.X(t)))}),[n,t]);return Object(Cr.jsxs)("div",{className:"d-flex flex-column gap-4 h-100",children:[Object(Cr.jsx)("div",{className:"bg-muted rounded p-2 text-center",children:$e("tutorial.name_change.info.confirm")}),Object(Cr.jsxs)("div",{className:"d-flex flex-column align-items-center gap-1 h-100",children:[Object(Cr.jsx)("div",{children:$e("tutorial.name_change.confirm")}),Object(Cr.jsx)("div",{className:"fw-bold",children:t})]}),Object(Cr.jsxs)("div",{className:"d-flex gap-2",children:[Object(Cr.jsx)("button",{className:"btn btn-success w-100",disabled:n,onClick:o,children:$e("generic.ok")}),Object(Cr.jsx)("button",{className:"btn btn-primary w-100",onClick:()=>s("close"),children:$e("cancel")})]})]})},Ul=e=>{const{onAction:t=null}=e;return Object(Cr.jsxs)("div",{className:"d-flex flex-column gap-4 h-100",children:[Object(Cr.jsx)("div",{className:"bg-muted rounded p-2 text-center",children:$e("tutorial.name_change.info.main")}),Object(Cr.jsx)("div",{className:"fw-bold d-flex align-items-center justify-content-center h-100 w-100",children:$e("tutorial.name_change.current",["name"],[K().userName])}),Object(Cr.jsxs)("div",{className:"d-flex gap-2",children:[Object(Cr.jsx)("button",{className:"btn btn-success w-100",onClick:()=>t("start"),children:$e("tutorial.name_change.change")}),Object(Cr.jsx)("button",{className:"btn btn-primary w-100",onClick:()=>t("confirmation",K().userName),children:$e("tutorial.name_change.keep")})]})]})},Ll=e=>{const{onAction:t=null}=e,[s,n]=Object(c.useState)(""),[r,i]=Object(c.useState)(!1),[o,l]=Object(c.useState)(!1),[u,d]=Object(c.useState)(null),[h,j]=Object(c.useState)([]),b=Object(c.useCallback)((e=>{l(!1);const t=e.getParser();if(t)switch(t.resultCode){case 0:i(!0);break;case 2:d("short");break;case 3:d("long");break;case 4:d("invalid");break;case 5:j(t.nameSuggestions),d("taken");break;case 6:d("change_not_allowed")}}),[]);Je(a.Z,b);const g=Object(c.useCallback)((()=>{""!==s&&(i(!1),j([]),d(null),l(!0),Ln(new a.Y(s)))}),[s]),O=Object(c.useCallback)((e=>{i(!1),j([]),d(null),n(e)}),[]);return Object(Cr.jsxs)("div",{className:"d-flex flex-column gap-3 h-100",children:[Object(Cr.jsx)("div",{children:$e("tutorial.name_change.info.select")}),Object(Cr.jsxs)("div",{className:"d-flex gap-2",children:[Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:s,onChange:e=>O(e.target.value)}),Object(Cr.jsx)("button",{className:"btn btn-primary",disabled:""===s||o,onClick:g,children:$e("tutorial.name_change.check")})]}),!u&&!r&&Object(Cr.jsx)("div",{className:"bg-muted rounded p-2 text-center",children:$e("help.tutorial.name.info")}),u&&Object(Cr.jsx)("div",{className:"bg-danger rounded p-2 text-center text-white",children:$e(`help.tutorial.name.${u}`,["name"],[s])}),r&&Object(Cr.jsx)("div",{className:"bg-success rounded p-2 text-center text-white",children:$e("help.tutorial.name.available",["name"],[s])}),h&&Object(Cr.jsx)("div",{className:"d-flex flex-column gap-2",children:h.map(((e,t)=>Object(Cr.jsx)("div",{className:"col bg-muted rounded p-1 cursor-pointer",onClick:()=>O(e),children:e},t)))}),Object(Cr.jsxs)("div",{className:"d-flex gap-2",children:[Object(Cr.jsx)("button",{className:"btn btn-success w-100",disabled:!r,onClick:()=>t("confirmation",s),children:$e("tutorial.name_change.pick")}),Object(Cr.jsx)("button",{className:"btn btn-primary w-100",onClick:()=>t("close"),children:$e("cancel")})]})]})},Ml="INIT",Fl="INPUT",Hl="CONFIRMATION",Bl=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(Ml),[i,a]=Object(c.useState)(""),o=Object(c.useCallback)((e=>{r(Ml),s(!0)}),[]);lt(_n.INIT,o);const l=Object(c.useCallback)(((e,t)=>{switch(e){case"start":r(Fl);break;case"confirmation":a(t),r(Hl);break;case"close":a(""),s(!1)}}),[]),u=Object(c.useMemo)((()=>{switch(n){case Ml:return"tutorial.name_change.title.main";case Fl:return"tutorial.name_change.title.select";case Hl:return"tutorial.name_change.title.confirm"}}),[n]);return t?Object(Cr.jsxs)($r,{className:"nitro-change-username",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e(u),onCloseClick:()=>l("close")}),Object(Cr.jsxs)(Hr,{className:"text-black",children:[n===Ml&&Object(Cr.jsx)(Ul,{onAction:l}),n===Fl&&Object(Cr.jsx)(Ll,{onAction:l}),n===Hl&&Object(Cr.jsx)(Pl,{username:i,onAction:l})]})]}):null},Gl=e=>{const[t,s]=Object(c.useState)(null),n=Object(c.useCallback)((e=>{const t=e.getParser();t&&s(t)}),[]);Je(a.th,n);const r=Object(c.useCallback)(((e,t,s)=>{let n=`help.sanction.${e}`;switch(t){case"ALERT":n+=".alert";break;case"MUTE":n+=".mute";break;case"BAN_PERMANENT":n+=".permban";break;default:if(n+=".ban",s>24)return n+=".days",$e(n,["days"],[(s/24).toString()])}return $e(n,["hours"],[s.toString()])}),[]);return t?Object(Cr.jsxs)($r,{className:"nitro-help",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("help.sanction.info.title"),onCloseClick:()=>s(null)}),Object(Cr.jsx)(Hr,{className:"text-black",children:Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsx)(rc,{center:!0,size:5,overflow:"hidden",children:Object(Cr.jsx)(Sr,{className:"index-image"})}),Object(Cr.jsxs)(rc,{justifyContent:"between",size:7,overflow:"hidden",children:["cfh.reason.EMPTY"===t.sanctionReason?Object(Cr.jsx)("div",{className:"col-12 fw-bold",children:$e("help.sanction.current.none")}):Object(Cr.jsxs)(Cr.Fragment,{children:[(t.probationHoursLeft>0||t.isSanctionActive)&&Object(Cr.jsx)("div",{className:"col-12 fw-bold",children:$e("help.sanction.probation.reminder")}),Object(Cr.jsxs)("div",{className:"col-12 fw-bold "+(t.isSanctionNew?"text-danger":""),children:[$e("help.sanction.last.sanction")," ",r("current",t.sanctionName,t.sanctionLengthHours)]}),Object(Cr.jsxs)("div",{className:"col-12",children:[$e("generic.start.time")," ",t.sanctionCreationTime]}),Object(Cr.jsxs)("div",{className:"col-12",children:[$e("generic.reason")," ",t.sanctionReason]}),Object(Cr.jsxs)("div",{className:"col-12",children:[$e("help.sanction.probation.days.left")," ",Math.trunc(t.probationHoursLeft/24)+1]})]}),t.hasCustomMute&&!t.isSanctionActive&&Object(Cr.jsx)("div",{className:"col-12 fw-bold",children:$e("help.sanction.custom.mute")}),t.tradeLockExpiryTime&&t.tradeLockExpiryTime.length>0&&Object(Cr.jsxs)("div",{className:"col-12 fw-bold",children:[$e("trade.locked.until")," ",t.tradeLockExpiryTime]}),Object(Cr.jsx)("div",{className:"col-12",children:r("next",t.nextSanctionName,t.nextSanctionLengthHours)}),Object(Cr.jsx)(wr,{variant:"success",onClick:e=>s(null),children:$e("habbo.way.ok.button")})]})]})})]}):null},Wl=e=>{const[t,s]=Object(c.useState)(new Map),{helpReportState:n=null,setHelpReportState:r=null}=Al(),{reportedUserId:i=-1}=n,o=Object(c.useMemo)((()=>co().chats.filter((e=>e.type===eo.TYPE_CHAT&&e.entityId===i&&e.entityType===a.Dg.USER))),[i]);return Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{fontSize:4,children:$e("help.emergency.chat_report.subtitle")}),Object(Cr.jsx)(Ac,{children:$e("help.emergency.chat_report.description")})]}),Object(Cr.jsxs)(rc,{gap:1,overflow:"hidden",children:[!o.length&&Object(Cr.jsx)(Ac,{children:$e("help.cfh.error.no_user_data")}),o.length>0&&Object(Cr.jsx)(Ar,{gap:1,columnCount:1,columnMinHeight:25,overflow:"auto",children:o.map(((e,n)=>Object(Cr.jsx)(lc,{onClick:n=>(e=>{const n=new Map(t);n.has(e.id)?n.delete(e.id):n.set(e.id,e),s(n)})(e),itemActive:t.has(e.id),children:Object(Cr.jsx)(Ac,{children:e.message})},e.id)))})]}),Object(Cr.jsxs)(yr,{gap:2,justifyContent:"between",children:[Object(Cr.jsx)(wr,{variant:"secondary",onClick:()=>{r((e=>{const t=e.currentStep-1;return{...e,currentStep:t}}))},children:$e("generic.back")}),Object(Cr.jsx)(wr,{disabled:t.size<=0,onClick:()=>{!t||t.size<=0||r((e=>({...e,reportedChats:Array.from(t.values()),currentStep:3})))},children:$e("help.emergency.main.submit.button")})]})]})},Vl=e=>{const[t,s]=Object(c.useState)(-1),{helpReportState:n=null,setHelpReportState:r=null}=Al(),i=Object(c.useMemo)((()=>{const e=new Map;return co().chats.forEach((t=>{t.type===eo.TYPE_CHAT&&t.entityType===a.Dg.USER&&t.entityId!==K().userId&&(e.has(t.entityId)||e.set(t.entityId,{id:t.entityId,username:t.name}))})),Array.from(e.values())}),[]);return Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{fontSize:4,children:$e("help.emergency.main.step.two.title")}),i.length>0&&Object(Cr.jsx)(Ac,{children:$e("report.user.pick.user")})]}),Object(Cr.jsxs)(rc,{gap:1,overflow:"hidden",children:[!i.length&&Object(Cr.jsx)(Ac,{children:$e("report.user.error.nolist")}),i.length>0&&Object(Cr.jsx)(Ar,{columnCount:1,columnMinHeight:25,gap:1,children:i.map(((e,n)=>Object(Cr.jsx)(lc,{onClick:n=>{return r=e.id,void s(t===r?-1:r);var r},itemActive:t===e.id,children:Object(Cr.jsx)("span",{dangerouslySetInnerHTML:{__html:e.username}})},e.id)))})]}),Object(Cr.jsxs)(yr,{gap:2,justifyContent:"between",children:[Object(Cr.jsx)(wr,{variant:"secondary",onClick:()=>{r((e=>{const t=e.currentStep-1;return{...e,currentStep:t}}))},children:$e("generic.back")}),Object(Cr.jsx)(wr,{disabled:t<=0,onClick:()=>{t<=0||r((e=>({...e,reportedUserId:t,currentStep:2})))},children:$e("help.emergency.main.submit.button")})]})]})};let ql=[];const zl=e=>{const{setHelpReportState:t=null}=Al(),[s,n]=Object(c.useState)(-1),[r,i]=Object(c.useState)(-1),a=Object(c.useMemo)((()=>ql),[]);return Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{fontSize:4,children:$e("help.emergency.chat_report.subtitle")}),Object(Cr.jsx)(Ac,{children:$e("help.cfh.pick.topic")})]}),Object(Cr.jsxs)(rc,{gap:1,overflow:"auto",children:[s<0&&a.map(((e,t)=>Object(Cr.jsx)(wr,{variant:"danger",onClick:e=>n(t),children:$e(`help.cfh.reason.${e.name}`)},t))),s>=0&&a[s].topics.map(((e,t)=>Object(Cr.jsx)(wr,{variant:"danger",onClick:e=>i(t),active:r===t,children:$e(`help.cfh.topic.${e.id}`)},t)))]}),Object(Cr.jsxs)(yr,{gap:2,justifyContent:"between",children:[Object(Cr.jsx)(wr,{variant:"secondary",onClick:()=>{t((e=>{const t=e.currentStep-1;return{...e,currentStep:t}}))},children:$e("generic.back")}),Object(Cr.jsx)(wr,{disabled:r<0,onClick:()=>{s<0||r<0||t((e=>({...e,cfhCategory:s,cfhTopic:a[s].topics[r].id,currentStep:4})))},children:$e("help.emergency.main.submit.button")})]})]})},Yl=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)({reportedUserId:-1,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,message:"",currentStep:0}),i=Object(c.useCallback)((e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e))}}),[]),a=Object(c.useCallback)((e=>{r({reportedUserId:e.reportedUserId,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,message:"",currentStep:2}),s(!0)}),[]);lt(En.REPORT_USER,a),Object(c.useEffect)((()=>{const e={linkReceived:i,eventUrlPrefix:"help/"};return E(e),()=>y(e)}),[i]),Object(c.useEffect)((()=>{t&&r({reportedUserId:-1,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,message:"",currentStep:0})}),[t]);const o=Object(c.useCallback)((()=>{switch(n.currentStep){case 0:return Object(Cr.jsx)(Dl,{});case 1:return Object(Cr.jsx)(Vl,{});case 2:return Object(Cr.jsx)(Wl,{});case 3:return Object(Cr.jsx)(zl,{});case 4:return Object(Cr.jsx)(kl,{})}return null}),[n.currentStep]);return Object(Cr.jsxs)(Rl,{value:{helpReportState:n,setHelpReportState:r},children:[Object(Cr.jsx)(wl,{}),t&&Object(Cr.jsxs)($r,{className:"nitro-help",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("help.button.cfh"),onCloseClick:e=>s(!1)}),Object(Cr.jsx)(Hr,{className:"text-black",children:Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsx)(rc,{center:!0,size:5,overflow:"hidden",children:Object(Cr.jsx)(Sr,{className:"index-image"})}),Object(Cr.jsx)(rc,{justifyContent:"between",size:7,overflow:"hidden",children:Object(Cr.jsx)(o,{})})]})})]}),Object(Cr.jsx)(Gl,{}),Object(Cr.jsx)(Bl,{})]})},Kl=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),d=Object(c.useCallback)((e=>{const t=e.getParser();s(t.productType),r(t.productClassId),o(t.totalCoinsForBonus),u(t.coinsStillRequiredToBuy)}),[]);return Je(a.x,d),Object(c.useEffect)((()=>{Ln(new a.Wb)}),[]),t?Object(Cr.jsxs)("div",{className:"bonus-rare widget d-flex",children:[t,Object(Cr.jsxs)("div",{className:"bg-light-dark rounded overflow-hidden position-relative bonus-bar-container",children:[Object(Cr.jsx)("div",{className:"d-flex justify-content-center align-items-center w-100 h-100 position-absolute small top-0",children:i-l+"/"+i}),Object(Cr.jsx)("div",{className:"small bg-info rounded position-absolute top-0 h-100",style:{width:(i-l)/i*100+"%"}})]})]}):null},Ql=e=>{const{data:t=null,level:s=0}=e;return Object(Cr.jsxs)("div",{className:"hof-user-container",children:[Object(Cr.jsxs)("div",{className:"hof-tooltip",children:[Object(Cr.jsxs)("div",{className:"hof-header",children:[s,". ",t.userName," ",Object(Cr.jsx)(Cc,{userId:t.userId})]}),Object(Cr.jsx)("div",{className:"small text-center text-white",children:$e("landing.view.competition.hof.points",["points"],[Ke(t.currentScore).toString()])})]}),Object(Cr.jsx)(Xr,{figure:t.figure,direction:2})]})},$l=e=>{const{slot:t=-1,conf:s=null}=e,[n,r]=Object(c.useState)(null),i=Object(c.useCallback)((e=>{const t=e.getParser();r(t.data)}),[]);return Je(a.fb,i),Object(c.useEffect)((()=>{const e=s?s.campaign:"";Ln(new a.ec(e))}),[s]),n?Object(Cr.jsx)("div",{className:"hall-of-fame d-flex",children:n.hof&&n.hof.length>0&&n.hof.map(((e,t)=>Object(Cr.jsx)(Ql,{data:e,level:t+1},t)))}):null},Xl=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(0),i=Object(c.useCallback)((e=>{const t=e.getParser();s(t.articles)}),[]);return Je(a.rf,i),Object(c.useEffect)((()=>{Ln(new a.qc)}),[]),t?Object(Cr.jsxs)("div",{className:"promo-articles widget mb-2",children:[Object(Cr.jsxs)("div",{className:"d-flex flex-row align-items-center w-100 mb-1",children:[Object(Cr.jsx)("small",{className:"flex-shrink-0 pe-1",children:$e("landing.view.promo.article.header")}),Object(Cr.jsx)("hr",{className:"w-100 my-0"})]}),Object(Cr.jsx)("div",{className:"d-flex flex-row mb-1",children:t&&t.length>0&&t.map(((e,s)=>Object(Cr.jsx)("div",{className:"promo-articles-bullet cursor-pointer "+(e===t[n]?"promo-articles-bullet-active":""),onClick:e=>r(s)},e.id)))}),t&&t[n]&&Object(Cr.jsxs)("div",{className:"promo-article d-flex flex-row row mx-0",children:[Object(Cr.jsx)("div",{className:"promo-article-image",style:{backgroundImage:`url(${t[n].imageUrl})`}}),Object(Cr.jsxs)("div",{className:"col-3 d-flex flex-column h-100",children:[Object(Cr.jsx)("h3",{className:"my-0",children:t[n].title}),Object(Cr.jsx)("b",{children:t[n].bodyText}),Object(Cr.jsx)("button",{className:"btn btn-sm mt-auto btn-gainsboro",onClick:e=>jr.openUrl(t[n].linkContent),children:t[n].buttonText})]})]})]}):null},Jl=e=>{const{conf:t=null}=e,s=Object(c.useCallback)((e=>{const s=t[e];return s?"image"===e?Hn().interpolate(s):s:null}),[t]);return Object(Cr.jsxs)("div",{className:"widgetcontainer widget d-flex flex-row overflow-hidden",children:[Object(Cr.jsx)("div",{className:"widgetcontainer-image flex-shrink-0",style:{backgroundImage:`url(${s("image")})`}}),Object(Cr.jsxs)("div",{className:"d-flex flex-column align-self-center",children:[Object(Cr.jsx)("h3",{className:"my-0",children:$e(`landing.view.${s("texts")}.header`)}),Object(Cr.jsx)("i",{children:$e(`landing.view.${s("texts")}.body`)}),Object(Cr.jsx)("button",{className:"btn btn-sm btn-gainsboro align-self-start px-3 mt-auto",onClick:e=>jr.openUrl(s("btnLink")),children:$e(`landing.view.${s("texts")}.button`)})]})]})},Zl=e=>{switch(e.widgetType){case"promoarticle":return Object(Cr.jsx)(Xl,{});case"achievementcompetition_hall_of_fame":return Object(Cr.jsx)($l,{slot:e.slot,conf:e.widgetConf});case"bonusrare":return Object(Cr.jsx)(Kl,{});case"widgetcontainer":return Object(Cr.jsx)(Jl,{conf:e.widgetConf});default:return null}},eu=e=>{const{widgetType:t=null,widgetSlot:s=0,widgetConf:n=null,className:r="",...c}=e;return Object(Cr.jsx)("div",{className:`widget-slot slot-${s} ${r||""}`,...c,children:Object(Cr.jsx)(Zl,{widgetType:t,slot:s,widgetConf:n})})},tu=e=>{const[t,s]=Object(c.useState)(!0),{userFigure:n=null}=Ut(),r=Object(c.useCallback)((e=>{switch(e.type){case a.Pg.CREATED:return void s(!1);case a.Pg.ENDED:return void s(e.openLandingView)}}),[]);if(it(a.Pg.CREATED,r),it(a.Pg.ENDED,r),!t)return null;const i=N("hotelview").images["background.colour"],o=Hn().interpolate(N("hotelview").images.background),l=Hn().interpolate(N("hotelview").images.sun),u=Hn().interpolate(N("hotelview").images.drape),d=Hn().interpolate(N("hotelview").images.left),h=Hn().interpolate(N("hotelview").images["right.repeat"]),j=Hn().interpolate(N("hotelview").images.right);return Object(Cr.jsxs)("div",{className:"nitro-hotel-view",style:i&&i?{background:i}:{},children:[Object(Cr.jsx)("div",{className:"container h-100 py-3 overflow-hidden landing-widgets",children:Object(Cr.jsxs)("div",{className:"row h-100",children:[Object(Cr.jsxs)("div",{className:"col-9 h-100 d-flex flex-column",children:[Object(Cr.jsx)(eu,{widgetSlot:1,widgetType:N("hotelview").widgets["slot.1.widget"],widgetConf:N("hotelview").widgets["slot.1.conf"],className:"col-6"}),Object(Cr.jsxs)("div",{className:"col-12 row mx-0",children:[Object(Cr.jsx)(eu,{widgetSlot:2,widgetType:N("hotelview").widgets["slot.2.widget"],widgetConf:N("hotelview").widgets["slot.2.conf"],className:"col-7"}),Object(Cr.jsx)(eu,{widgetSlot:3,widgetType:N("hotelview").widgets["slot.3.widget"],widgetConf:N("hotelview").widgets["slot.3.conf"],className:"col-5"}),Object(Cr.jsx)(eu,{widgetSlot:4,widgetType:N("hotelview").widgets["slot.4.widget"],widgetConf:N("hotelview").widgets["slot.4.conf"],className:"col-7"}),Object(Cr.jsx)(eu,{widgetSlot:5,widgetType:N("hotelview").widgets["slot.5.widget"],widgetConf:N("hotelview").widgets["slot.5.conf"],className:"col-5"})]}),Object(Cr.jsx)(eu,{widgetSlot:6,widgetType:N("hotelview").widgets["slot.6.widget"],widgetConf:N("hotelview").widgets["slot.6.conf"],className:"mt-auto"})]}),Object(Cr.jsx)("div",{className:"col-3 h-100",children:Object(Cr.jsx)(eu,{widgetSlot:7,widgetType:N("hotelview").widgets["slot.7.widget"],widgetConf:N("hotelview").widgets["slot.7.conf"]})})]})}),Object(Cr.jsx)("div",{className:"background position-absolute",style:o&&o.length?{backgroundImage:`url(${o})`}:{}}),Object(Cr.jsx)("div",{className:"sun position-absolute",style:l&&l.length?{backgroundImage:`url(${l})`}:{}}),Object(Cr.jsx)("div",{className:"drape position-absolute",style:u&&u.length?{backgroundImage:`url(${u})`}:{}}),Object(Cr.jsx)("div",{className:"left position-absolute",style:d&&d.length?{backgroundImage:`url(${d})`}:{}}),Object(Cr.jsx)("div",{className:"right-repeat position-absolute",style:h&&h.length?{backgroundImage:`url(${h})`}:{}}),Object(Cr.jsx)("div",{className:"right position-absolute",style:j&&j.length?{backgroundImage:`url(${j})`}:{}}),N("hotelview")["show.avatar"]&&Object(Cr.jsx)("div",{className:"avatar-image",children:Object(Cr.jsx)(Xr,{figure:n,direction:2})})]})},su=e=>{const{badgeCode:t=null,children:s=null,...n}=e,{selectedBadgeCode:r=null,setSelectedBadgeCode:c=null,getBadgeId:i=null}=_t(),{isUnseen:a=null}=mt(),o=a(ns.BADGE,i(t));return Object(Cr.jsxs)(lc,{itemActive:r===t,itemUnseen:o,onMouseDown:e=>c(t),...n,children:[Object(Cr.jsx)(Zr,{badgeCode:t}),s]})},nu=e=>{const[t,s]=Object(c.useState)(!1),{badgeCodes:n=[],activeBadgeCodes:r=[],selectedBadgeCode:i=null,isWearingBadge:a=null,canWearBadges:o=null,toggleBadge:l=null,getBadgeId:u=null,activate:d=null,deactivate:h=null}=_t(),{isUnseen:j=null,removeUnseen:b=null}=mt();return Object(c.useEffect)((()=>{i&&j(ns.BADGE,u(i))&&b(ns.BADGE,u(i))}),[i,j,b,u]),Object(c.useEffect)((()=>{if(!t)return;const e=d();return()=>h(e)}),[t,d,h]),Object(c.useEffect)((()=>(s(!0),()=>s(!1))),[]),Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsx)(rc,{size:7,overflow:"hidden",children:Object(Cr.jsx)(Ar,{columnCount:4,children:n&&n.length>0&&n.map(((e,t)=>r.indexOf(e)>=0?null:Object(Cr.jsx)(su,{badgeCode:e},t)))})}),Object(Cr.jsxs)(rc,{className:"justify-content-between",size:5,overflow:"auto",children:[Object(Cr.jsxs)(rc,{overflow:"hidden",gap:2,children:[Object(Cr.jsx)(Ac,{children:$e("inventory.badges.activebadges")}),Object(Cr.jsx)(Ar,{columnCount:3,children:r&&r.length>0&&r.map(((e,t)=>Object(Cr.jsx)(su,{badgeCode:e},t)))})]}),!!i&&Object(Cr.jsxs)(rc,{grow:!0,justifyContent:"end",gap:2,children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:2,children:[Object(Cr.jsx)(Zr,{shrink:!0,badgeCode:i}),Object(Cr.jsx)(Ac,{children:Ye(i)})]}),Object(Cr.jsx)(wr,{variant:a(i)?"danger":"success",disabled:!a(i)&&!o(),onClick:e=>l(i),children:$e(a(i)?"inventory.badges.clearbadge":"inventory.badges.wearbadge")})]})]})]})},ru=e=>{const{title:t="",desc:s="",children:n=null,...r}=e;return Object(Cr.jsxs)(Rr,{...r,children:[Object(Cr.jsx)(rc,{center:!0,size:5,overflow:"hidden",children:Object(Cr.jsx)("div",{className:"empty-image"})}),Object(Cr.jsxs)(rc,{justifyContent:"center",size:7,overflow:"hidden",children:[Object(Cr.jsx)(Ac,{fontWeight:"bold",fontSize:5,overflow:"unset",truncate:!0,children:t}),Object(Cr.jsx)(Ac,{overflow:"auto",children:s})]}),n]})},cu=e=>{const{botItem:t=null,children:s=null,...n}=e,[r,i]=Object(c.useState)(!1),{selectedBot:o=null,setSelectedBot:l=null}=ft(),{isUnseen:u=null}=mt(),d=u(ns.BOT,t.botData.id),h=e=>{switch(e.type){case a.ue.MOUSE_DOWN:return l(t),void i(!0);case a.ue.MOUSE_UP:return void i(!1);case a.ue.ROLL_OUT:if(!r||o!==t)return;return void ss(t)}};return Object(Cr.jsxs)(lc,{itemActive:o===t,itemUnseen:d,onMouseDown:h,onMouseUp:h,onMouseOut:h,...n,children:[Object(Cr.jsx)(Xr,{figure:t.botData.figure,direction:3,headOnly:!0}),s]})},iu=e=>{const{roomSession:t=null,roomPreviewer:s=null}=e,[n,r]=Object(c.useState)(!1),{botItems:i=[],selectedBot:o=null,activate:l=null,deactivate:u=null}=ft(),{isUnseen:d=null,removeUnseen:h=null}=mt();return Object(c.useEffect)((()=>{if(!o||!s)return;const e=o.botData,t=w();let n=t.getRoomInstanceVariable(t.activeRoomId,a.Fg.ROOM_WALL_TYPE),r=t.getRoomInstanceVariable(t.activeRoomId,a.Fg.ROOM_FLOOR_TYPE),c=t.getRoomInstanceVariable(t.activeRoomId,a.Fg.ROOM_LANDSCAPE_TYPE);n=n&&n.length?n:"101",r=r&&r.length?r:"101",c=c&&c.length?c:"1.1",s.reset(!1),s.updateRoomWallsAndFloorVisibility(!0,!0),s.updateObjectRoom(r,n,c),s.addAvatarIntoRoom(e.figure,0)}),[s,o]),Object(c.useEffect)((()=>{o&&d(ns.BOT,o.botData.id)&&h(ns.BOT,o.botData.id)}),[o,d,h]),Object(c.useEffect)((()=>{if(!n)return;const e=l();return()=>u(e)}),[n,l,u]),Object(c.useEffect)((()=>(r(!0),()=>r(!1))),[]),i&&i.length?Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsx)(rc,{size:7,overflow:"hidden",children:Object(Cr.jsx)(Ar,{columnCount:5,children:i&&i.length>0&&i.map((e=>Object(Cr.jsx)(cu,{botItem:e},e.botData.id)))})}),Object(Cr.jsxs)(rc,{size:5,overflow:"auto",children:[Object(Cr.jsx)(rc,{overflow:"hidden",position:"relative",children:Object(Cr.jsx)(xc,{roomPreviewer:s,height:140})}),o&&Object(Cr.jsxs)(rc,{grow:!0,justifyContent:"between",gap:2,children:[Object(Cr.jsx)(Ac,{grow:!0,truncate:!0,children:o.botData.name}),!!t&&Object(Cr.jsx)(wr,{variant:"success",onClick:e=>ss(o),children:$e("inventory.furni.placetoroom")})]})]})]}):Object(Cr.jsx)(ru,{title:$e("inventory.empty.bots.title"),desc:$e("inventory.empty.bots.desc")})},au=e=>{const{groupItem:t=null,...s}=e,[n,r]=Object(c.useState)(!1),{selectedItem:i=null,setSelectedItem:o=null}=Tt(),l=e=>{switch(e.type){case a.ue.MOUSE_DOWN:return o(t),void r(!0);case a.ue.MOUSE_UP:return void r(!1);case a.ue.ROLL_OUT:if(!n||t!==i)return;return void ts(t)}},u=t.getUnlockedCount();return Object(Cr.jsx)(lc,{className:u?"":"opacity-0-5 ",itemImage:t.iconUrl,itemCount:t.getUnlockedCount(),itemActive:t===i,itemUniqueNumber:t.stuffData.uniqueNumber,itemUnseen:t.hasUnseenItems,onMouseDown:l,onMouseUp:l,onMouseOut:l,...s})},ou=e=>{const{groupItems:t=[],setGroupItems:s=null}=e,[n,r]=Object(c.useState)("");return Object(c.useEffect)((()=>{let e=[...t];if(n&&n.length){const s=n.toLocaleLowerCase();e=t.filter((e=>s&&s.length&&e.name.toLocaleLowerCase().includes(s)?e:null))}s(e)}),[t,s,n]),Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:$e("generic.search"),value:n,onChange:e=>r(e.target.value)}),Object(Cr.jsx)(wr,{variant:"primary",children:Object(Cr.jsx)(Lr.a,{icon:"search"})})]})},lu=e=>{const{roomSession:t=null,roomPreviewer:s=null}=e,[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)([]),{groupItems:l=[],selectedItem:u=null,activate:d=null,deactivate:h=null}=Tt(),{resetItems:j=null}=mt();return Object(c.useEffect)((()=>{if(!u||!s)return;const e=u.getLastItem();if(!e)return;const t=w();let n=t.getRoomInstanceVariable(t.activeRoomId,a.Fg.ROOM_WALL_TYPE),r=t.getRoomInstanceVariable(t.activeRoomId,a.Fg.ROOM_FLOOR_TYPE),c=t.getRoomInstanceVariable(t.activeRoomId,a.Fg.ROOM_LANDSCAPE_TYPE);if(n=n&&n.length?n:"101",r=r&&r.length?r:"101",c=c&&c.length?c:"1.1",s.reset(!1),s.updateObjectRoom(r,n,c),s.updateRoomWallsAndFloorVisibility(!0,!0),e.category===Bt.WALL_PAPER||e.category===Bt.FLOOR||e.category===Bt.LANDSCAPE){if(r=e.category===Bt.FLOOR?u.stuffData.getLegacyString():r,n=e.category===Bt.WALL_PAPER?u.stuffData.getLegacyString():n,c=e.category===Bt.LANDSCAPE?u.stuffData.getLegacyString():c,s.updateObjectRoom(r,n,c),e.category===Bt.LANDSCAPE){const e=K().getWallItemDataByName("noob_window_double");e&&s.addWallItemIntoRoom(e.id,new a.Li(90,0,0),e.customParams)}}else u.isWallItem?s.addWallItemIntoRoom(u.type,new a.Li(90),e.stuffData.getLegacyString()):s.addFurnitureIntoRoom(u.type,new a.Li(90),u.stuffData,e.extra.toString())}),[s,u]),Object(c.useEffect)((()=>{u&&u.hasUnseenItems&&(j(ns.FURNI,u.items.map((e=>e.id))),u.hasUnseenItems=!1)}),[u,j]),Object(c.useEffect)((()=>{if(!n)return;const e=d();return()=>h(e)}),[n,d,h]),Object(c.useEffect)((()=>(r(!0),()=>r(!1))),[]),l&&l.length?Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsxs)(rc,{size:7,overflow:"hidden",children:[Object(Cr.jsx)(ou,{groupItems:l,setGroupItems:o}),Object(Cr.jsx)(Ar,{columnCount:5,children:i&&i.length>0&&i.map(((e,t)=>Object(Cr.jsx)(au,{groupItem:e},t)))})]}),Object(Cr.jsxs)(rc,{size:5,overflow:"auto",children:[Object(Cr.jsxs)(rc,{overflow:"hidden",position:"relative",children:[Object(Cr.jsx)(xc,{roomPreviewer:s,height:140}),u&&u.stuffData.isUnique&&Object(Cr.jsx)(ac,{className:"top-2 end-2",position:"absolute",uniqueNumber:u.stuffData.uniqueNumber,uniqueSeries:u.stuffData.uniqueSeries}),u&&u.stuffData.rarityLevel>-1&&Object(Cr.jsx)(fc,{className:"top-2 end-2",position:"absolute",level:u.stuffData.rarityLevel})]}),u&&Object(Cr.jsxs)(rc,{grow:!0,justifyContent:"between",gap:2,children:[Object(Cr.jsx)(Ac,{grow:!0,truncate:!0,children:u.name}),Object(Cr.jsxs)(rc,{gap:1,children:[!!t&&Object(Cr.jsx)(wr,{variant:"success",onClick:e=>ts(u),children:$e("inventory.furni.placetoroom")}),u&&u.isSellable&&Object(Cr.jsx)(wr,{onClick:e=>(e=>{const t=e.getLastItem();return!!t&&!!t.sellable&&void ot(new dn(t))})(u),children:$e("inventory.marketplace.sell")})]})]})]})]}):Object(Cr.jsx)(ru,{title:$e("inventory.empty.title"),desc:$e("inventory.empty.desc")})},uu=e=>{const{cancelTrade:t=null}=e,[s,n]=Object(c.useState)(null),[r,i]=Object(c.useState)(null),[o,l]=Object(c.useState)(null),[u,d]=Object(c.useState)(null),[h,j]=Object(c.useState)(3),{ownUser:b=null,otherUser:g=null,groupItems:O=[],tradeState:m=os.TRADING_STATE_READY,progressTrade:p=null,removeItem:_=null,setTradeState:E=null}=Rt(),f=(e,t,s,n,r)=>{if(!b||b.accepts||!b.userItems)return!1;if(b.userItems.length<9)return!0;if(!n)return!1;let c=t.toString();return c=s===Bt.POSTER?c+"poster"+r.getLegacyString():s===Bt.GUILD_FURNI?((e,t)=>{let s=e.toString();if(!(t instanceof a.Hh))return s;let n=1;for(;n<5;)s=s+","+t.getValue(n),n++;return s})(t,r):(e?"I":"S")+c,!!b.userItems.getValue(c)},x=e=>{const t=e?"lock":"unlock",s=e?"success":"danger";return Object(Cr.jsx)(Lr.a,{icon:t,className:"text-"+s})};return Object(c.useEffect)((()=>{if(m!==os.TRADING_STATE_COUNTDOWN)return;j(3);const e=setInterval((()=>{j((t=>{const s=t-1;return 0===s&&clearInterval(e),s}))}),1e3);return()=>clearInterval(e)}),[m,E]),Object(c.useEffect)((()=>{0===h&&E(os.TRADING_STATE_CONFIRMING)}),[h,E]),m!==os.TRADING_STATE_READY&&b&&g?Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsxs)(rc,{size:4,overflow:"hidden",children:[Object(Cr.jsx)(ou,{groupItems:O,setGroupItems:d}),Object(Cr.jsxs)(yr,{column:!0,fullHeight:!0,justifyContent:"between",overflow:"hidden",gap:2,children:[Object(Cr.jsx)(Ar,{columnCount:3,children:u&&u.length>0&&u.map(((e,t)=>{const r=e.getUnlockedCount();return Object(Cr.jsx)(lc,{className:r?"":"opacity-0-5 ",itemImage:e.iconUrl,itemCount:r,itemActive:s===e,itemUniqueNumber:e.stuffData.uniqueNumber,onClick:t=>r&&n(e),children:r>0&&s===e&&Object(Cr.jsx)(wr,{position:"absolute",variant:"success",className:"trade-button bottom-1 end-1",onClick:e=>(e=>{if(!s)return;const t=s.getTradeItems(e);if(!t||!t.length)return;let n=null;const r=[];for(const s of t)r.push(s.id),n||(n=s);if(b.userItems.length+r.length<=1500)if(!n.isGroupable&&r.length)Ln(new a.Uh(r.pop()));else{const e=[];for(const t of r)f(n.isWallItem,n.type,n.category,n.isGroupable,n.stuffData)&&e.push(t);e.length&&(1===e.length?Ln(new a.Uh(e.pop())):Ln(new a.Vh(...e)))}else jr.simpleAlert($e("trading.items.too_many_items.desc"),or.DEFAULT,null,null,$e("trading.items.too_many_items.title"))})(1),children:Object(Cr.jsx)(Lr.a,{icon:"chevron-right"})})},t)}))}),Object(Cr.jsx)(Sr,{fullWidth:!0,className:"badge bg-muted",children:s?s.name:$e("catalog_selectproduct")})]})]}),Object(Cr.jsxs)(rc,{size:8,overflow:"hidden",children:[Object(Cr.jsxs)(Rr,{overflow:"hidden",children:[Object(Cr.jsxs)(rc,{size:6,overflow:"hidden",children:[Object(Cr.jsxs)(yr,{justifyContent:"between",alignItems:"center",children:[Object(Cr.jsxs)(Ac,{children:[$e("inventory.trading.you")," ",$e("inventory.trading.areoffering"),":"]}),x(b.accepts)]}),Object(Cr.jsx)(Ar,{columnCount:3,children:Array.from(Array(9),((e,t)=>{const s=b.userItems.getWithIndex(t)||null;return s?Object(Cr.jsx)(lc,{itemActive:r===s,itemImage:s.iconUrl,itemCount:s.getTotalCount(),itemUniqueNumber:s.stuffData.uniqueNumber,onClick:e=>i(s),children:r===s&&Object(Cr.jsx)(wr,{position:"absolute",variant:"danger",className:"trade-button bottom-1 start-1",onClick:e=>_(s),children:Object(Cr.jsx)(Lr.a,{icon:"chevron-left"})})},t):Object(Cr.jsx)(lc,{},t)}))}),Object(Cr.jsx)(Sr,{fullWidth:!0,className:"badge bg-muted",children:r?r.name:$e("catalog_selectproduct")})]}),Object(Cr.jsxs)(rc,{size:6,overflow:"hidden",children:[Object(Cr.jsxs)(yr,{justifyContent:"between",alignItems:"center",children:[Object(Cr.jsxs)(Ac,{children:[g.userName," ",$e("inventory.trading.isoffering"),":"]}),x(g.accepts)]}),Object(Cr.jsx)(Ar,{columnCount:3,children:Array.from(Array(9),((e,t)=>{const s=g.userItems.getWithIndex(t)||null;return s?Object(Cr.jsx)(lc,{itemActive:o===s,itemImage:s.iconUrl,itemCount:s.getTotalCount(),itemUniqueNumber:s.stuffData.uniqueNumber,onClick:e=>l(s)},t):Object(Cr.jsx)(lc,{},t)}))}),Object(Cr.jsx)(Sr,{fullWidth:!0,className:"badge bg-muted w-100",children:o?o.name:$e("catalog_selectproduct")})]})]}),Object(Cr.jsxs)(yr,{grow:!0,justifyContent:"between",children:[Object(Cr.jsx)(wr,{variant:"danger",onClick:t,children:$e("generic.cancel")}),m===os.TRADING_STATE_READY&&Object(Cr.jsx)(wr,{variant:"secondary",disabled:!b.itemCount&&!g.itemCount,onClick:p,children:$e("inventory.trading.accept")}),m===os.TRADING_STATE_RUNNING&&Object(Cr.jsx)(wr,{variant:"secondary",disabled:!b.itemCount&&!g.itemCount,onClick:p,children:$e(b.accepts?"inventory.trading.modify":"inventory.trading.accept")}),m===os.TRADING_STATE_COUNTDOWN&&Object(Cr.jsx)(wr,{variant:"secondary",disabled:!0,children:$e("inventory.trading.countdown",["counter"],[h.toString()])}),m===os.TRADING_STATE_CONFIRMING&&Object(Cr.jsx)(wr,{variant:"secondary",onClick:p,children:$e("inventory.trading.button.restore")}),m===os.TRADING_STATE_CONFIRMED&&Object(Cr.jsx)(wr,{variant:"secondary",children:$e("inventory.trading.info.waiting")})]})]})]}):null},du=e=>{const{petItem:t=null,children:s=null,...n}=e,[r,i]=Object(c.useState)(!1),{selectedPet:o=null,setSelectedPet:l=null}=Nt(),{isUnseen:u}=mt(),d=u(ns.PET,t.petData.id),h=e=>{switch(e.type){case a.ue.MOUSE_DOWN:return l(t),void i(!0);case a.ue.MOUSE_UP:return void i(!1);case a.ue.ROLL_OUT:if(!r||t!==o)return;return void es(t)}};return Object(Cr.jsxs)(lc,{itemActive:t===o,itemUnseen:d,onMouseDown:h,onMouseUp:h,onMouseOut:h,...n,children:[Object(Cr.jsx)(_c,{figure:t.petData.figureData.figuredata,direction:3,headOnly:!0}),s]})},hu=e=>{const{roomSession:t=null,roomPreviewer:s=null}=e,[n,r]=Object(c.useState)(!1),{petItems:i=null,selectedPet:o=null,activate:l=null,deactivate:u=null}=Nt(),{isUnseen:d=null,removeUnseen:h=null}=mt();return Object(c.useEffect)((()=>{if(!o||!s)return;const e=o.petData,t=w();let n=t.getRoomInstanceVariable(t.activeRoomId,a.Fg.ROOM_WALL_TYPE),r=t.getRoomInstanceVariable(t.activeRoomId,a.Fg.ROOM_FLOOR_TYPE),c=t.getRoomInstanceVariable(t.activeRoomId,a.Fg.ROOM_LANDSCAPE_TYPE);n=n&&n.length?n:"101",r=r&&r.length?r:"101",c=c&&c.length?c:"1.1",s.reset(!1),s.updateRoomWallsAndFloorVisibility(!0,!0),s.updateObjectRoom(r,n,c),s.addPetIntoRoom(e.figureString)}),[s,o]),Object(c.useEffect)((()=>{o&&d(ns.PET,o.petData.id)&&h(ns.PET,o.petData.id)}),[o,d,h]),Object(c.useEffect)((()=>{if(!n)return;const e=l();return()=>u(e)}),[n,l,u]),Object(c.useEffect)((()=>(r(!0),()=>r(!1))),[]),i&&i.length?Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsx)(rc,{size:7,overflow:"hidden",children:Object(Cr.jsx)(Ar,{columnCount:5,children:i&&i.length>0&&i.map((e=>Object(Cr.jsx)(du,{petItem:e},e.petData.id)))})}),Object(Cr.jsxs)(rc,{size:5,overflow:"auto",children:[Object(Cr.jsx)(rc,{overflow:"hidden",position:"relative",children:Object(Cr.jsx)(xc,{roomPreviewer:s,height:140})}),o&&o.petData&&Object(Cr.jsxs)(rc,{grow:!0,justifyContent:"between",gap:2,children:[Object(Cr.jsx)(Ac,{grow:!0,truncate:!0,children:o.petData.name}),!!t&&Object(Cr.jsx)(wr,{variant:"success",onClick:e=>es(o),children:$e("inventory.furni.placetoroom")})]})]})]}):Object(Cr.jsx)(ru,{title:$e("inventory.empty.pets.title"),desc:$e("inventory.empty.pets.desc")})},ju="inventory.furni",bu="inventory.bots",gu="inventory.furni.tab.pets",Ou="inventory.badges",mu=[ju,bu,gu,Ou],pu=[ns.FURNI,ns.BOT,ns.PET,ns.BADGE],_u=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(mu[0]),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),{isTrading:d=!1,stopTrading:h=null}=Rt(),{getCount:j=null,resetCategory:b=null}=mt(),g=()=>{d&&h(),s(!1)},O=Object(c.useCallback)((e=>{Kt&&($t(!1),e.placedInRoom||s(!0))}),[]);ct(a.hg.PLACED,O);const m=Object(c.useCallback)((e=>{switch(e.type){case a.Pg.CREATED:return void o(e.session);case a.Pg.ENDED:return o(null),void s(!1)}}),[]);it(a.Pg.CREATED,m),it(a.Pg.ENDED,m);const p=Object(c.useCallback)((e=>{const t=e.getParser();for(const s of t.data)R().setBadgePointLimit(s.badgeId,s.limit)}),[]);return Je(a.t,p),Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e))}},eventUrlPrefix:"inventory/"};return E(e),()=>y(e)}),[]),Object(c.useEffect)((()=>(u(new a.Hg(w(),++a.Hg.PREVIEW_COUNTER)),()=>{u((e=>(e.dispose(),null)))})),[]),Object(c.useEffect)((()=>{!t&&d&&s(!0)}),[t,d]),t?Object(Cr.jsxs)($r,{uniqueKey:"inventory",className:"nitro-inventory",theme:d?"primary-slim":"",children:[Object(Cr.jsx)(Wr,{headerText:$e("inventory.title"),onCloseClick:g}),!d&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Nc,{children:mu.map(((e,t)=>Object(Cr.jsx)(Sc,{isActive:n===e,onClick:t=>r(e),count:j(pu[t]),children:$e(e)},t)))}),Object(Cr.jsxs)(Hr,{children:[n===ju&&Object(Cr.jsx)(lu,{roomSession:i,roomPreviewer:l}),n===bu&&Object(Cr.jsx)(iu,{roomSession:i,roomPreviewer:l}),n===gu&&Object(Cr.jsx)(hu,{roomSession:i,roomPreviewer:l}),n===Ou&&Object(Cr.jsx)(nu,{})]})]}),d&&Object(Cr.jsx)(Hr,{children:Object(Cr.jsx)(uu,{cancelTrade:g})})]}):null},Eu=Object(c.createContext)({modToolsState:null,dispatchModToolsState:null}),fu=e=>Object(Cr.jsx)(Eu.Provider,{value:e.value,children:e.children}),xu=()=>Object(c.useContext)(Eu);class Iu{}Iu.SET_INIT_DATA="MTA_SET_INIT_DATA",Iu.SET_CURRENT_ROOM_ID="MTA_SET_CURRENT_ROOM_ID",Iu.SET_OPEN_ROOMS="MTA_SET_OPEN_ROOMS",Iu.SET_OPEN_USERINFO="MTA_SET_OPEN_USERINFO",Iu.SET_OPEN_ROOM_CHATLOGS="MTA_SET_OPEN_CHATLOGS",Iu.SET_OPEN_USER_CHATLOGS="MTA_SET_OPEN_USER_CHATLOGS",Iu.SET_TICKETS="MTA_SET_TICKETS",Iu.SET_CFH_CATEGORIES="MTA_SET_CFH_CATEGORIES",Iu.RESET_STATE="MTA_RESET_STATE";const Tu={settings:null,currentRoomId:null,openRooms:null,openRoomChatlogs:null,openUserChatlogs:null,openUserInfo:null,tickets:null,cfhCategories:null},Cu=(e,t)=>{switch(t.type){case Iu.SET_INIT_DATA:{const s=t.payload.settings||e.settings||null;return{...e,settings:s}}case Iu.SET_CURRENT_ROOM_ID:{const s=t.payload.currentRoomId||e.currentRoomId||null;return{...e,currentRoomId:s}}case Iu.SET_OPEN_ROOMS:{const s=t.payload.openRooms||e.openRooms||null;return{...e,openRooms:s}}case Iu.SET_OPEN_USERINFO:{const s=t.payload.openUserInfo||e.openUserInfo||null;return{...e,openUserInfo:s}}case Iu.SET_OPEN_ROOM_CHATLOGS:{const s=t.payload.openRoomChatlogs||e.openRoomChatlogs||null;return{...e,openRoomChatlogs:s}}case Iu.SET_OPEN_USER_CHATLOGS:{const s=t.payload.openUserChatlogs||e.openUserChatlogs||null;return{...e,openUserChatlogs:s}}case Iu.SET_TICKETS:{const s=t.payload.tickets||e.tickets||null;return{...e,tickets:s}}case Iu.SET_CFH_CATEGORIES:{const s=t.payload.cfhCategories||e.cfhCategories||null;return{...e,cfhCategories:s}}case Iu.RESET_STATE:return{...Tu};default:return e}},Su=e=>{const{modToolsState:t=null,dispatchModToolsState:s=null}=xu(),{openRooms:n=null,openRoomChatlogs:r=null,openUserChatlogs:i=null,openUserInfo:o=null,tickets:l=null}=t,u=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const n=t.data;s({type:Iu.SET_INIT_DATA,payload:{settings:n}}),s({type:Iu.SET_TICKETS,payload:{tickets:n.issues}})}),[s]),d=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const n=l?Array.from(l):[],r=n.findIndex((e=>e.issueId===t.issueData.issueId));r>-1?n[r]=t.issueData:(n.push(t.issueData),Ft(ps.MODTOOLS_NEW_TICKET)),s({type:Iu.SET_TICKETS,payload:{tickets:n}})}),[s,l]),h=Object(c.useCallback)((e=>{e.getParser()}),[]),j=Object(c.useCallback)((e=>{e.getParser()&&jr.simpleAlert("Failed to pick issue",or.DEFAULT,null,null,"Error")}),[]),b=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const n=l?Array.from(l):[],r=n.findIndex((e=>e.issueId===t.issueId));-1!==r&&(n.splice(r,1),s({type:Iu.SET_TICKETS,payload:{tickets:n}}))}),[s,l]),g=Object(c.useCallback)((e=>{const t=e.getParser();t&&(t.success?jr.simpleAlert("Moderation action was successfull",or.MODERATION,null,null,"Success"):jr.simpleAlert("There was a problem applying tht moderation action",or.MODERATION,null,null,"Error"))}),[]),O=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const n=t.callForHelpCategories;s({type:Iu.SET_CFH_CATEGORIES,payload:{cfhCategories:n}}),(e=>{ql=e})(n)}),[s]),m=Object(c.useCallback)((e=>{e.getParser()}),[]);Je(a.oe,u),Je(a.Kd,d),Je(a.re,h),Je(a.Md,j),Je(a.Jd,b),Je(a.me,g),Je(a.W,O),Je(a.V,m);const p=Object(c.useCallback)((e=>{switch(e.type){case a.gg.INITIALIZED:return void s({type:Iu.SET_CURRENT_ROOM_ID,payload:{currentRoomId:e.roomId}});case a.gg.DISPOSED:return void s({type:Iu.SET_CURRENT_ROOM_ID,payload:{currentRoomId:null}})}}),[s]);ct(a.gg.INITIALIZED,p),ct(a.gg.DISPOSED,p);const _=Object(c.useCallback)((e=>{switch(e.type){case fn.OPEN_ROOM_INFO:{const t=e;if(n&&n.includes(t.roomId))return;const r=n||[];return void s({type:Iu.SET_OPEN_ROOMS,payload:{openRooms:[...r,t.roomId]}})}case fn.OPEN_ROOM_CHATLOG:{const t=e;if(r&&r.includes(t.roomId))return;const n=r||[];return void s({type:Iu.SET_OPEN_ROOM_CHATLOGS,payload:{openRoomChatlogs:[...n,t.roomId]}})}case fn.OPEN_USER_INFO:{const t=e;if(o&&o.includes(t.userId))return;const n=o||[];return void s({type:Iu.SET_OPEN_USERINFO,payload:{openUserInfo:[...n,t.userId]}})}case fn.OPEN_USER_CHATLOG:{const t=e;if(i&&i.includes(t.userId))return;const n=i||[];return void s({type:Iu.SET_OPEN_USER_CHATLOGS,payload:{openUserChatlogs:[...n,t.userId]}})}}}),[n,s,r,o,i]);return lt(fn.OPEN_ROOM_INFO,_),lt(fn.OPEN_ROOM_CHATLOG,_),lt(fn.OPEN_USER_INFO,_),lt(fn.OPEN_USER_CHATLOG,_),null},Nu=e=>{const{records:t=null}=e,s=e=>{let s=t[0].chatlog[e.index];return Object(Cr.jsx)(Xa.b,{cache:a,columnIndex:0,parent:e.parent,rowIndex:e.index,children:Object(Cr.jsxs)(Rr,{fullHeight:!1,style:e.style,gap:1,alignItems:"center",className:"log-entry py-1 border-bottom",children:[Object(Cr.jsx)(Ac,{className:"g-col-2",children:s.timestamp}),Object(Cr.jsx)(Ac,{className:"g-col-3",bold:!0,underline:!0,pointer:!0,onClick:e=>ot(new Cn(s.userId)),children:s.userName}),Object(Cr.jsx)(Ac,{textBreak:!0,wrap:!0,className:"g-col-7",children:s.message})]},e.key)},e.key)},n=e=>{let s=null,n=null,r=!1,c=0;for(let i=0;i<t.length;i++){if(n=t[i],c++,c+=n.chatlog.length,e.index>c-1)continue;if(e.index+1===c-n.chatlog.length){r=!0;break}const a=e.index-(c-n.chatlog.length);s=n.chatlog[a];break}return Object(Cr.jsxs)(Xa.b,{cache:a,columnIndex:0,parent:e.parent,rowIndex:e.index,children:[r&&n&&Object(Cr.jsx)(i,{roomId:n.roomId,roomName:n.roomName,uniqueKey:e.key,style:e.style}),!r&&Object(Cr.jsxs)(Rr,{fullHeight:!1,style:e.style,gap:1,alignItems:"center",className:"log-entry py-1 border-bottom",children:[Object(Cr.jsx)(Ac,{className:"g-col-2",children:s.timestamp}),Object(Cr.jsx)(Ac,{className:"g-col-3",bold:!0,underline:!0,pointer:!0,onClick:e=>ot(new Cn(s.userId)),children:s.userName}),Object(Cr.jsx)(Ac,{textBreak:!0,wrap:!0,className:"g-col-7",children:s.message})]},e.key)]},e.key)},r=Object(c.useCallback)((()=>{let e=0;for(let s=0;s<t.length;s++)e++,e+=t[s].chatlog.length;return e}),[t]),i=e=>Object(Cr.jsxs)(yr,{gap:2,alignItems:"center",justifyContent:"between",className:"room-info bg-muted rounded p-1",style:e.style,children:[Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:"Room name:"}),Object(Cr.jsx)(Ac,{children:e.roomName})]}),Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(wr,{onClick:t=>ar(e.roomId),children:"Visit Room"}),Object(Cr.jsx)(wr,{onClick:t=>ot(new In(e.roomId)),children:"Room Tools"})]})]},e.uniqueKey),a=new Xa.c({defaultHeight:25,fixedWidth:!0});return Object(Cr.jsxs)(Cr.Fragment,{children:[t&&1===t.length&&Object(Cr.jsx)(i,{roomId:t[0].roomId,roomName:t[0].roomName,uniqueKey:null,style:{}}),Object(Cr.jsxs)(rc,{fit:!0,gap:0,overflow:"hidden",children:[Object(Cr.jsx)(rc,{gap:2,children:Object(Cr.jsxs)(Rr,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[Object(Cr.jsx)(Sr,{className:"g-col-2",children:"Time"}),Object(Cr.jsx)(Sr,{className:"g-col-3",children:"User"}),Object(Cr.jsx)(Sr,{className:"g-col-7",children:"Message"})]})}),t&&t.length>0&&Object(Cr.jsx)(rc,{className:"log-container striped-children",overflow:"auto",gap:0,children:Object(Cr.jsx)(Xa.a,{defaultWidth:400,defaultHeight:200,children:e=>{let{height:c,width:i}=e;return a.clearAll(),Object(Cr.jsx)(Xa.d,{width:i,height:c,rowCount:t.length>1?r():t[0].chatlog.length,rowHeight:a.rowHeight,className:"log-entry-container",rowRenderer:t.length>1?n:s,deferredMeasurementCache:a})}})})]})]})},vu=e=>{const{roomId:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(null),i=Object(c.useCallback)((e=>{const s=e.getParser();s&&s.data.roomId===t&&r(s.data)}),[t]);return Je(a.Vf,i),Object(c.useEffect)((()=>{Ln(new a.rc(t))}),[t]),n?Object(Cr.jsxs)($r,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",windowPosition:zr.TOP_LEFT,children:[Object(Cr.jsx)(Wr,{headerText:`Room Chatlog ${n.roomName}`,onCloseClick:s}),Object(Cr.jsx)(Hr,{className:"text-black h-100",children:n&&Object(Cr.jsx)(Nu,{records:[n]})})]}):null},Ru=e=>{const{roomId:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)(null),[g,O]=Object(c.useState)(!1),[m,p]=Object(c.useState)(0),[_,E]=Object(c.useState)(!1),[f,x]=Object(c.useState)(!1),[I,T]=Object(c.useState)(!1),[C,S]=Object(c.useState)(""),N=Object(c.useCallback)((e=>{const s=e.getParser();s&&s.data.flatId===t&&(o(s.data.flatId),u(s.data.room.name),h(s.data.ownerId),b(s.data.ownerName),O(s.data.ownerInRoom),p(s.data.userCount))}),[t]);Je(a.qe,N);const v=Object(c.useCallback)(((e,s)=>{if(e)switch(e){case"alert_only":if(0===C.trim().length)return;return Ln(new a.le(a.le.ACTION_ALERT,C,"")),void Ln(new a.ke(t,f?1:0,I?1:0,_?1:0));case"send_message":if(0===C.trim().length)return;return Ln(new a.le(a.le.ACTION_MESSAGE,C,"")),void Ln(new a.ke(t,f?1:0,I?1:0,_?1:0))}}),[I,_,f,C,t]);return Object(c.useEffect)((()=>{n||(Ln(new a.lc(t)),r(!0))}),[t,n,r]),Object(Cr.jsxs)($r,{className:"nitro-mod-tools-room",theme:"primary-slim",windowPosition:zr.TOP_LEFT,children:[Object(Cr.jsx)(Wr,{headerText:"Room Info"+(l?": "+l:""),onCloseClick:e=>s()}),Object(Cr.jsxs)(Hr,{className:"text-black",children:[Object(Cr.jsxs)(yr,{gap:2,children:[Object(Cr.jsxs)(rc,{justifyContent:"center",grow:!0,gap:1,children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:2,children:[Object(Cr.jsx)(Ac,{bold:!0,align:"end",className:"col-7",children:"Room Owner:"}),Object(Cr.jsx)(Ac,{underline:!0,pointer:!0,truncate:!0,children:j})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:2,children:[Object(Cr.jsx)(Ac,{bold:!0,align:"end",className:"col-7",children:"Users in room:"}),Object(Cr.jsx)(Ac,{children:m})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:2,children:[Object(Cr.jsx)(Ac,{bold:!0,align:"end",className:"col-7",children:"Owner in room:"}),Object(Cr.jsx)(Ac,{children:g?"Yes":"No"})]})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(wr,{onClick:e=>ar(t),children:"Visit Room"}),Object(Cr.jsx)(wr,{onClick:e=>ot(new xn(t)),children:"Chatlog"})]})]}),Object(Cr.jsxs)(rc,{className:"bg-muted rounded p-2",gap:1,children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:_,onChange:e=>E(e.target.checked)}),Object(Cr.jsx)(Ac,{small:!0,children:"Kick everyone out"})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:f,onChange:e=>x(e.target.checked)}),Object(Cr.jsx)(Ac,{small:!0,children:"Enable the doorbell"})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:I,onChange:e=>T(e.target.checked)}),Object(Cr.jsx)(Ac,{small:!0,children:"Change room name"})]})]}),Object(Cr.jsx)("textarea",{className:"form-control",placeholder:"Type a mandatory message to the users in this text box...",value:C,onChange:e=>S(e.target.value)}),Object(Cr.jsxs)(yr,{justifyContent:"between",children:[Object(Cr.jsx)(wr,{variant:"danger",onClick:e=>v("send_message"),children:"Send Caution"}),Object(Cr.jsx)(wr,{onClick:e=>v("alert_only"),children:"Send Alert only"})]})]})]})},Au=e=>{switch(e){case 1:case 2:return"Normal";case 3:return"Automatic";case 4:return"Automatic IM";case 5:return"Guide System";case 6:return"IM";case 7:return"Room";case 8:return"Panic";case 9:return"Guardian";case 10:return"Automatic Helper";case 11:return"Discussion";case 12:return"Selfie";case 14:return"Photo";case 15:return"Ambassador";default:return"Unknown"}},yu=e=>{const{onCloseClick:t=null,issueId:s=null}=e,[n,r]=Object(c.useState)(null);Object(c.useEffect)((()=>{Ln(new a.ac(s))}),[s]);const i=Object(c.useCallback)((e=>{const t=e.getParser();t&&t.data.issueId===s&&r(t.data)}),[s]);return Je(a.U,i),Object(Cr.jsxs)($r,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:"Issue Chatlog",onCloseClick:t}),Object(Cr.jsx)(Hr,{className:"text-black",children:n&&Object(Cr.jsx)(Nu,{records:[n.chatRecord]})})]})},wu=e=>{const{issueId:t=null,onIssueInfoClosed:s=null}=e,{modToolsState:n=null}=xu(),{tickets:r=null}=n,[i,o]=Object(c.useState)(!1),l=Object(c.useMemo)((()=>r&&r.length?r.find((e=>e.issueId===t)):null),[t,r]),u=e=>{Ln(new a.ab([t],e)),s(t)},d=e=>ot(new Cn(e));return Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)($r,{className:"nitro-mod-tools-handle-issue",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:"Resolving issue "+t,onCloseClick:()=>s(t)}),Object(Cr.jsxs)(Hr,{className:"text-black",children:[Object(Cr.jsx)(Ac,{fontSize:4,children:"Issue Information"}),Object(Cr.jsxs)(Rr,{overflow:"auto",children:[Object(Cr.jsx)(rc,{size:8,children:Object(Cr.jsx)("table",{className:"table table-striped table-sm table-text-small text-black m-0",children:Object(Cr.jsxs)("tbody",{children:[Object(Cr.jsxs)("tr",{children:[Object(Cr.jsx)("th",{children:"Source"}),Object(Cr.jsx)("td",{children:Au(l.categoryId)})]}),Object(Cr.jsxs)("tr",{children:[Object(Cr.jsx)("th",{children:"Category"}),Object(Cr.jsx)("td",{className:"text-break",children:$e("help.cfh.topic."+l.reportedCategoryId)})]}),Object(Cr.jsxs)("tr",{children:[Object(Cr.jsx)("th",{children:"Description"}),Object(Cr.jsx)("td",{className:"text-break",children:l.message})]}),Object(Cr.jsxs)("tr",{children:[Object(Cr.jsx)("th",{children:"Caller"}),Object(Cr.jsx)("td",{children:Object(Cr.jsx)(Ac,{bold:!0,underline:!0,pointer:!0,onClick:e=>d(l.reporterUserId),children:l.reporterUserName})})]}),Object(Cr.jsxs)("tr",{children:[Object(Cr.jsx)("th",{children:"Reported User"}),Object(Cr.jsx)("td",{children:Object(Cr.jsx)(Ac,{bold:!0,underline:!0,pointer:!0,onClick:e=>d(l.reportedUserId),children:l.reportedUserName})})]})]})})}),Object(Cr.jsxs)(rc,{size:4,gap:1,children:[Object(Cr.jsx)(wr,{variant:"secondary",onClick:()=>o(!i),children:"Chatlog"}),Object(Cr.jsx)(wr,{onClick:e=>u(a.ab.RESOLUTION_USELESS),children:"Close as useless"}),Object(Cr.jsx)(wr,{variant:"danger",onClick:e=>u(a.ab.RESOLUTION_ABUSIVE),children:"Close as abusive"}),Object(Cr.jsx)(wr,{variant:"success",onClick:e=>u(a.ab.RESOLUTION_RESOLVED),children:"Close as resolved"}),Object(Cr.jsx)(wr,{variant:"secondary",onClick:e=>(e=>{Ln(new a.Ff([e])),s(e)})(t),children:"Release"})]})]})]})]}),i&&Object(Cr.jsx)(yu,{issueId:t,onCloseClick:()=>o(!1)})]})},ku=e=>{const{myIssues:t=null,onIssueHandleClick:s=null}=e;return Object(Cr.jsxs)(rc,{gap:0,overflow:"hidden",children:[Object(Cr.jsx)(rc,{gap:2,children:Object(Cr.jsxs)(Rr,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[Object(Cr.jsx)(Sr,{className:"g-col-2",children:"Type"}),Object(Cr.jsx)(Sr,{className:"g-col-3",children:"Room/Player"}),Object(Cr.jsx)(Sr,{className:"g-col-3",children:"Opened"}),Object(Cr.jsx)(Sr,{className:"g-col-2"}),Object(Cr.jsx)(Sr,{className:"g-col-2"})]})}),Object(Cr.jsx)(rc,{overflow:"auto",className:"striped-children",gap:0,children:t&&t.length>0&&t.map((e=>Object(Cr.jsxs)(Rr,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[Object(Cr.jsx)(Sr,{className:"g-col-2",children:e.categoryId}),Object(Cr.jsx)(Sr,{className:"g-col-3",children:e.reportedUserName}),Object(Cr.jsx)(Sr,{className:"g-col-3",children:new Date(Date.now()-e.issueAgeInMilliseconds).toLocaleTimeString()}),Object(Cr.jsx)(Sr,{className:"g-col-2",children:Object(Cr.jsx)(wr,{variant:"primary",onClick:t=>s(e.issueId),children:"Handle"})}),Object(Cr.jsx)(Sr,{className:"g-col-2",children:Object(Cr.jsx)(wr,{variant:"danger",onClick:t=>{return s=e.issueId,Ln(new a.Ff([s]));var s},children:"Release"})})]},e.issueId)))})]})},Du=e=>{const{openIssues:t=null}=e;return Object(Cr.jsxs)(rc,{gap:0,overflow:"hidden",children:[Object(Cr.jsx)(rc,{gap:2,children:Object(Cr.jsxs)(Rr,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[Object(Cr.jsx)(Sr,{className:"g-col-2",children:"Type"}),Object(Cr.jsx)(Sr,{className:"g-col-3",children:"Room/Player"}),Object(Cr.jsx)(Sr,{className:"g-col-4",children:"Opened"}),Object(Cr.jsx)(Sr,{className:"g-col-3"})]})}),Object(Cr.jsx)(rc,{overflow:"auto",className:"striped-children",gap:0,children:t&&t.length>0&&t.map((e=>Object(Cr.jsxs)(Rr,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[Object(Cr.jsx)(Sr,{className:"g-col-2",children:e.categoryId}),Object(Cr.jsx)(Sr,{className:"g-col-3",children:e.reportedUserName}),Object(Cr.jsx)(Sr,{className:"g-col-4",children:new Date(Date.now()-e.issueAgeInMilliseconds).toLocaleTimeString()}),Object(Cr.jsx)(Sr,{className:"g-col-3",children:Object(Cr.jsx)(wr,{variant:"success",onClick:t=>{return s=e.issueId,Ln(new a.of([s],!1,0,"pick issue button"));var s},children:"Pick Issue"})})]},e.issueId)))})]})},Pu=e=>{const{pickedIssues:t=null}=e;return Object(Cr.jsxs)(rc,{gap:0,overflow:"hidden",children:[Object(Cr.jsx)(rc,{gap:2,children:Object(Cr.jsxs)(Rr,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[Object(Cr.jsx)(Sr,{className:"g-col-2",children:"Type"}),Object(Cr.jsx)(Sr,{className:"g-col-3",children:"Room/Player"}),Object(Cr.jsx)(Sr,{className:"g-col-4",children:"Opened"}),Object(Cr.jsx)(Sr,{className:"g-col-3",children:"Picker"})]})}),Object(Cr.jsx)(rc,{overflow:"auto",className:"striped-children",gap:0,children:t&&t.length>0&&t.map((e=>Object(Cr.jsxs)(Rr,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[Object(Cr.jsx)(Sr,{className:"g-col-2",children:e.categoryId}),Object(Cr.jsx)(Sr,{className:"g-col-3",children:e.reportedUserName}),Object(Cr.jsx)(Sr,{className:"g-col-4",children:new Date(Date.now()-e.issueAgeInMilliseconds).toLocaleTimeString()}),Object(Cr.jsx)(Sr,{className:"g-col-3",children:e.pickerUserName})]},e.issueId)))})]})},Uu=["Open Issues","My Issues","Picked Issues"],Lu=e=>{const{onCloseClick:t=null}=e,{modToolsState:s=null}=xu(),{tickets:n=null}=s,[r,i]=Object(c.useState)(0),[o,l]=Object(c.useState)([]),u=Object(c.useMemo)((()=>n?n.filter((e=>e.state===a.Ld.STATE_OPEN)):[]),[n]),d=Object(c.useMemo)((()=>n?n.filter((e=>e.state===a.Ld.STATE_PICKED&&e.pickerUserId===K().userId)):[]),[n]),h=Object(c.useMemo)((()=>n?n.filter((e=>e.state===a.Ld.STATE_PICKED)):[]),[n]),j=Object(c.useCallback)((e=>{const t=o.indexOf(e);if(-1===t)return;const s=Array.from(o);s.splice(t,1),l(s)}),[o]),b=Object(c.useCallback)((e=>{if(-1===o.indexOf(e)){const t=Array.from(o);t.push(e),l(t)}else j(e)}),[o,j]),g=Object(c.useCallback)((()=>{switch(r){case 0:return Object(Cr.jsx)(Du,{openIssues:u});case 1:return Object(Cr.jsx)(ku,{myIssues:d,onIssueHandleClick:b});case 2:return Object(Cr.jsx)(Pu,{pickedIssues:h});default:return null}}),[r,d,b,u,h]);return Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)($r,{className:"nitro-mod-tools-tickets",children:[Object(Cr.jsx)(Wr,{headerText:"Tickets",onCloseClick:t}),Object(Cr.jsx)(Nc,{children:Uu.map(((e,t)=>Object(Cr.jsx)(Sc,{isActive:r===t,onClick:e=>i(t),children:e},t)))}),Object(Cr.jsx)(Hr,{gap:1,children:Object(Cr.jsx)(g,{})})]}),o&&o.length>0&&o.map((e=>Object(Cr.jsx)(wu,{issueId:e,onIssueInfoClosed:j},e)))]})},Mu=e=>{const{userId:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),l=Object(c.useCallback)((e=>{const s=e.getParser();s&&s.data.userId===t&&(o(s.data.username),r(s.data.roomChatlogs))}),[t]);return Je(a.oi,l),Object(c.useEffect)((()=>{Ln(new a.vc(t))}),[t]),Object(Cr.jsxs)($r,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",windowPosition:zr.TOP_LEFT,children:[Object(Cr.jsx)(Wr,{headerText:`User Chatlog: ${i||""}`,onCloseClick:s}),Object(Cr.jsx)(Hr,{className:"text-black h-100",children:n&&Object(Cr.jsx)(Nu,{records:n})})]})};class Fu{constructor(e,t,s,n,r){this._actionId=void 0,this._name=void 0,this._actionType=void 0,this._sanctionTypeId=void 0,this._actionLengthHours=void 0,this._actionId=e,this._name=t,this._actionType=s,this._sanctionTypeId=n,this._actionLengthHours=r}get actionId(){return this._actionId}get name(){return this._name}get actionType(){return this._actionType}get sanctionTypeId(){return this._sanctionTypeId}get actionLengthHours(){return this._actionLengthHours}}Fu.ALERT=1,Fu.MUTE=2,Fu.BAN=3,Fu.KICK=4,Fu.TRADE_LOCK=5,Fu.MESSAGE=6;const Hu=[new Fu(1,"Alert",Fu.ALERT,1,0),new Fu(2,"Mute 1h",Fu.MUTE,2,0),new Fu(3,"Ban 18h",Fu.BAN,3,0),new Fu(4,"Ban 7 days",Fu.BAN,4,0),new Fu(5,"Ban 30 days (step 1)",Fu.BAN,5,0),new Fu(7,"Ban 30 days (step 2)",Fu.BAN,7,0),new Fu(6,"Ban 100 years",Fu.BAN,6,0),new Fu(106,"Ban avatar-only 100 years",Fu.BAN,6,0),new Fu(101,"Kick",Fu.KICK,0,0),new Fu(102,"Lock trade 1 week",Fu.TRADE_LOCK,0,168),new Fu(104,"Lock trade permanent",Fu.TRADE_LOCK,0,876e3),new Fu(105,"Message",Fu.MESSAGE,0,0)],Bu=e=>{const{user:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(-1),[l,u]=Object(c.useState)(""),{modToolsState:d=null}=xu(),{cfhCategories:h=null,settings:j=null}=d,b=Object(c.useMemo)((()=>{const e=[];if(h&&h.length)for(const t of h)for(const s of t.topics)e.push(s);return e}),[h]),g=e=>{jr.simpleAlert(e,or.DEFAULT,null,null,"Error")};return t?Object(Cr.jsxs)($r,{className:"nitro-mod-tools-user-action",theme:"primary-slim",windowPosition:zr.TOP_LEFT,children:[Object(Cr.jsx)(Wr,{headerText:"Mod Action: "+(t?t.username:""),onCloseClick:()=>s()}),Object(Cr.jsxs)(Hr,{className:"text-black",children:[Object(Cr.jsxs)("select",{className:"form-select form-select-sm",value:n,onChange:e=>r(parseInt(e.target.value)),children:[Object(Cr.jsx)("option",{value:-1,disabled:!0,children:"CFH Topic"}),b.map(((e,t)=>Object(Cr.jsx)("option",{value:t,children:$e("help.cfh.topic."+e.id)},t)))]}),Object(Cr.jsxs)("select",{className:"form-select form-select-sm",value:i,onChange:e=>o(parseInt(e.target.value)),children:[Object(Cr.jsx)("option",{value:-1,disabled:!0,children:"Sanction Type"}),Hu.map(((e,t)=>Object(Cr.jsx)("option",{value:t,children:e.name},t)))]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{small:!0,children:"Optional message type, overrides default"}),Object(Cr.jsx)("textarea",{className:"form-control",value:l,onChange:e=>u(e.target.value)})]}),Object(Cr.jsxs)(yr,{justifyContent:"between",gap:1,children:[Object(Cr.jsx)(wr,{variant:"primary",onClick:()=>{let e=null;const r=b[n];if(-1===n&&(e="You must select a CFH topic"),e)return g(e);const c=0===l.trim().length?$e(`help.cfh.topic.${r.id}`):l;Ln(new a.mb(t.userId,n,c)),s()},children:"Default Sanction"}),Object(Cr.jsx)(wr,{variant:"success",onClick:()=>{let e=null;const r=b[n],c=Hu[i];if(-1===n||-1===i?e="You must select a CFH topic and Sanction":j&&j.cfhPermission?r?c||(e="You must select a sanction"):e="You must select a CFH topic":e="You do not have permission to do this",e)return void g(e);const o=0===l.trim().length?$e(`help.cfh.topic.${r.id}`):l;switch(c.actionType){case Fu.ALERT:if(!j.alertPermission)return void g("You have insufficient permissions");Ln(new a.ee(t.userId,o,r.id));break;case Fu.MUTE:Ln(new a.ie(t.userId,o,r.id));break;case Fu.BAN:if(!j.banPermission)return void g("You have insufficient permissions");Ln(new a.fe(t.userId,o,r.id,i,106===c.actionId));break;case Fu.KICK:if(!j.kickPermission)return void g("You have insufficient permissions");Ln(new a.ge(t.userId,o,r.id));break;case Fu.TRADE_LOCK:{const e=60*c.actionLengthHours;Ln(new a.je(t.userId,o,e,r.id));break}case Fu.MESSAGE:if(0===l.trim().length)return void g("Please write a message to user");Ln(new a.he(t.userId,l,r.id))}s()},children:"Sanction"})]})]})]}):null},Gu=e=>{const{userId:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(null),i=Object(c.useCallback)((e=>{const s=e.getParser();s&&s.data.userId===t&&r(s.data)}),[t]);Je(a.nh,i);const o=e=>{const t=n.rooms[e.index];return Object(Cr.jsxs)(Rr,{fullHeight:!1,style:e.style,gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[Object(Cr.jsxs)(Ac,{className:"g-col-2",children:[t.enterHour.toString().padStart(2,"0"),": ",t.enterMinute.toString().padStart(2,"0")]}),Object(Cr.jsx)(Ac,{className:"g-col-7",children:t.roomName}),Object(Cr.jsx)(Ac,{bold:!0,underline:!0,pointer:!0,variant:"primary",className:"g-col-3",onClick:e=>ar(t.roomId),children:"Visit Room"})]},e.key)};return Object(c.useEffect)((()=>{Ln(new a.tc(t))}),[t]),t?Object(Cr.jsxs)($r,{className:"nitro-mod-tools-user-visits",theme:"primary-slim",windowPosition:zr.TOP_LEFT,children:[Object(Cr.jsx)(Wr,{headerText:"User Visits",onCloseClick:s}),Object(Cr.jsx)(Hr,{className:"text-black",gap:1,children:Object(Cr.jsxs)(rc,{fullHeight:!0,gap:0,overflow:"hidden",children:[Object(Cr.jsx)(rc,{gap:2,children:Object(Cr.jsxs)(Rr,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[Object(Cr.jsx)(Sr,{className:"g-col-2",children:"Time"}),Object(Cr.jsx)(Sr,{className:"g-col-7",children:"Room name"}),Object(Cr.jsx)(Sr,{className:"g-col-3",children:"Visit"})]})}),Object(Cr.jsx)(rc,{className:"log-container striped-children",overflow:"auto",gap:0,children:n&&Object(Cr.jsx)(Xa.a,{defaultWidth:400,defaultHeight:200,children:e=>{let{height:t,width:s}=e;return Object(Cr.jsx)(Xa.d,{width:s,height:t,rowCount:n.rooms.length,rowHeight:25,className:"log-entry-container",rowRenderer:o})}})})]})})]}):null},Wu=e=>{const{user:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(""),i=Object(c.useCallback)((()=>{0!==n.trim().length?(Ln(new a.he(t.userId,n,-999)),s()):ot(new Sn(["Please write a message to user."],null,null,null,"Error",null))}),[n,t,s]);return t?Object(Cr.jsxs)($r,{className:"nitro-mod-tools-user-message",theme:"primary-slim",windowPosition:zr.TOP_LEFT,children:[Object(Cr.jsx)(Wr,{headerText:"Send Message",onCloseClick:()=>s()}),Object(Cr.jsxs)(Hr,{className:"text-black",children:[Object(Cr.jsxs)(Ac,{children:["Message To: ",t.username]}),Object(Cr.jsx)("textarea",{className:"form-control",value:n,onChange:e=>r(e.target.value)}),Object(Cr.jsx)(wr,{fullWidth:!0,onClick:i,children:"Send message"})]})]}):null},Vu=e=>{const{onCloseClick:t=null,userId:s=null}=e,[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(!1),[l,u]=Object(c.useState)(!1),[d,h]=Object(c.useState)(!1),j=Object(c.useCallback)((e=>{const t=e.getParser();t&&t.data.userId===s&&r(t.data)}),[s]);Je(a.se,j);const b=Object(c.useMemo)((()=>n?[{localeKey:"modtools.userinfo.userName",value:n.userName,showOnline:!0},{localeKey:"modtools.userinfo.cfhCount",value:n.cfhCount.toString()},{localeKey:"modtools.userinfo.abusiveCfhCount",value:n.abusiveCfhCount.toString()},{localeKey:"modtools.userinfo.cautionCount",value:n.cautionCount.toString()},{localeKey:"modtools.userinfo.banCount",value:n.banCount.toString()},{localeKey:"modtools.userinfo.lastSanctionTime",value:n.lastSanctionTime},{localeKey:"modtools.userinfo.tradingLockCount",value:n.tradingLockCount.toString()},{localeKey:"modtools.userinfo.tradingExpiryDate",value:n.tradingExpiryDate},{localeKey:"modtools.userinfo.minutesSinceLastLogin",value:a.Fb.format(60*n.minutesSinceLastLogin,".ago",2)},{localeKey:"modtools.userinfo.lastPurchaseDate",value:n.lastPurchaseDate},{localeKey:"modtools.userinfo.primaryEmailAddress",value:n.primaryEmailAddress},{localeKey:"modtools.userinfo.identityRelatedBanCount",value:n.identityRelatedBanCount.toString()},{localeKey:"modtools.userinfo.registrationAgeInMinutes",value:a.Fb.format(60*n.registrationAgeInMinutes,".ago",2)},{localeKey:"modtools.userinfo.userClassification",value:n.userClassification}]:null),[n]);return Object(c.useEffect)((()=>{Ln(new a.mc(s))}),[s]),n?Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)($r,{className:"nitro-mod-tools-user",theme:"primary-slim",windowPosition:zr.TOP_LEFT,children:[Object(Cr.jsx)(Wr,{headerText:$e("modtools.userinfo.title",["username"],[n.userName]),onCloseClick:()=>t()}),Object(Cr.jsx)(Hr,{className:"text-black",children:Object(Cr.jsxs)(Rr,{overflow:"hidden",children:[Object(Cr.jsx)(rc,{size:8,overflow:"auto",children:Object(Cr.jsx)("table",{className:"table table-striped table-sm table-text-small text-black m-0",children:Object(Cr.jsx)("tbody",{children:b.map(((e,t)=>Object(Cr.jsxs)("tr",{children:[Object(Cr.jsx)("th",{scope:"row",children:$e(e.localeKey)}),Object(Cr.jsxs)("td",{children:[e.value,e.showOnline&&Object(Cr.jsx)("i",{className:`icon icon-pf-${n.online?"online":"offline"} ms-2`})]})]},t)))})})}),Object(Cr.jsxs)(rc,{size:4,gap:1,children:[Object(Cr.jsx)(wr,{onClick:e=>ot(new Tn(s)),children:"Room Chat"}),Object(Cr.jsx)(wr,{onClick:e=>o(!i),children:"Send Message"}),Object(Cr.jsx)(wr,{onClick:e=>h(!d),children:"Room Visits"}),Object(Cr.jsx)(wr,{onClick:e=>u(!l),children:"Mod Action"})]})]})})]}),i&&Object(Cr.jsx)(Wu,{user:{userId:s,username:n.userName},onCloseClick:()=>o(!1)}),l&&Object(Cr.jsx)(Bu,{user:{userId:s,username:n.userName},onCloseClick:()=>u(!1)}),d&&Object(Cr.jsx)(Gu,{userId:s,onCloseClick:()=>h(!1)})]}):null},qu=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(!1),[l,u]=Object(c.useReducer)(Cu,Tu),{currentRoomId:d=null,openRooms:h=null,openRoomChatlogs:j=null,openUserChatlogs:b=null,openUserInfo:g=null}=l,O=Object(c.useRef)(null),m=Object(c.useCallback)((e=>{switch(e.type){case fn.SHOW_MOD_TOOLS:return void s(!0);case fn.HIDE_MOD_TOOLS:return void s(!1);case fn.TOGGLE_MOD_TOOLS:return void s((e=>!e))}}),[]);lt(fn.SHOW_MOD_TOOLS,m),lt(fn.HIDE_MOD_TOOLS,m),lt(fn.TOGGLE_MOD_TOOLS,m);const p=Object(c.useCallback)((e=>{if(e.category!==a.zg.UNIT)return;const t=ee();if(!t)return;const s=t.userDataManager.getUserDataByIndex(e.objectId);s&&s.type===a.Dg.USER&&r({userId:s.webID,username:s.name})}),[]);ct(a.hg.SELECTED,p);const _=Object(c.useCallback)(((e,t)=>{if(e)switch(e){case"toggle_room":return h?void(h.indexOf(d)>-1?_("close_room",d.toString()):ot(new In(d))):void ot(new In(d));case"close_room":{const e=h.indexOf(Number(t)),s=Array.from(h);return s.splice(e,1),void u({type:Iu.SET_OPEN_ROOMS,payload:{openRooms:s}})}case"toggle_room_chatlog":return j?void(j.indexOf(d)>-1?_("close_room_chatlog",d.toString()):ot(new xn(d))):void ot(new xn(d));case"close_room_chatlog":{const e=j.indexOf(Number(t)),s=Array.from(j);return s.splice(e,1),void u({type:Iu.SET_OPEN_ROOM_CHATLOGS,payload:{openRoomChatlogs:s}})}case"toggle_user_info":{if(!n)return;const e=n.userId;return g?void(g.indexOf(e)>-1?_("close_user_info",e.toString()):ot(new Cn(e))):void ot(new Cn(e))}case"close_user_info":{const e=g.indexOf(Number(t)),s=Array.from(g);return s.splice(e,1),void u({type:Iu.SET_OPEN_USERINFO,payload:{openUserInfo:s}})}case"close_user_chatlog":{const e=b.indexOf(Number(t)),s=Array.from(b);return s.splice(e,1),void u({type:Iu.SET_OPEN_USER_CHATLOGS,payload:{openUserChatlogs:s}})}}}),[h,d,j,n,g,b]);return Object(Cr.jsxs)(fu,{value:{modToolsState:l,dispatchModToolsState:u},children:[Object(Cr.jsx)(Su,{}),t&&Object(Cr.jsxs)($r,{uniqueKey:"mod-tools",className:"nitro-mod-tools",windowPosition:zr.TOP_LEFT,theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:"Mod Tools",onCloseClick:e=>s(!1)}),Object(Cr.jsxs)(Hr,{className:"text-black",gap:1,children:[Object(Cr.jsxs)(wr,{gap:1,onClick:e=>_("toggle_room"),disabled:!d,className:"position-relative",children:[Object(Cr.jsx)(Sr,{className:"icon icon-small-room position-absolute start-1"})," Room Tool"]}),Object(Cr.jsxs)(wr,{innerRef:O,gap:1,onClick:e=>_("toggle_room_chatlog"),disabled:!d,className:"position-relative",children:[Object(Cr.jsx)(Sr,{className:"icon icon-chat-history position-absolute start-1"})," Chatlog Tool"]}),Object(Cr.jsxs)(wr,{gap:1,onClick:()=>_("toggle_user_info"),disabled:!n,className:"position-relative",children:[Object(Cr.jsx)(Sr,{className:"icon icon-user position-absolute start-1"})," User: ",n?n.username:""]}),Object(Cr.jsxs)(wr,{gap:1,onClick:()=>o((e=>!e)),className:"position-relative",children:[Object(Cr.jsx)(Sr,{className:"icon icon-tickets position-absolute start-1"})," Report Tool"]})]})]}),h&&h.map((e=>Object(Cr.jsx)(Ru,{roomId:e,onCloseClick:()=>_("close_room",e.toString())},e))),j&&j.map((e=>Object(Cr.jsx)(vu,{roomId:e,onCloseClick:()=>_("close_room_chatlog",e.toString())},e))),g&&g.map((e=>Object(Cr.jsx)(Vu,{userId:e,onCloseClick:()=>_("close_user_info",e.toString())},e))),b&&b.map((e=>Object(Cr.jsx)(Mu,{userId:e,onCloseClick:()=>_("close_user_chatlog",e.toString())},e))),i&&Object(Cr.jsx)(Lu,{onCloseClick:()=>o(!1)})]})},zu=Object(c.createContext)({categories:null,setCategories:null,topLevelContext:null,setTopLevelContext:null,topLevelContexts:null,setTopLevelContexts:null,navigatorData:null,setNavigatorData:null,doorData:null,setDoorData:null,searchResult:null,setSearchResult:null}),Yu=e=>Object(Cr.jsx)(zu.Provider,{value:e.value,children:e.children}),Ku=()=>Object(c.useContext)(zu),Qu=e=>{const{setCategories:t=null,setTopLevelContext:s=null,topLevelContexts:n=null,setTopLevelContexts:r=null,setNavigatorData:i=null,setDoorData:o=null,setSearchResult:l=null}=Ku(),u=Object(c.useCallback)((e=>{const t=e.getParser();Ln(new a.tg(t.roomId,!1,!1))}),[]);Je(a.bh,u);const d=Object(c.useCallback)((e=>{const t=e.getParser();t.canCreate||jr.simpleAlert($e(`navigator.cannotcreateevent.error.${t.errorCode}`),null,null,null,$e("navigator.cannotcreateevent.title"))}),[]);Je(a.M,d);const h=Object(c.useCallback)((e=>{Ln(new a.ve),Ln(new a.De)}),[]),j=Object(c.useCallback)((e=>{const t=e.getParser();i((e=>{const s={...e};return s.eventMod=t.securityLevel>=a.yh.MODERATOR,s.roomPicker=t.securityLevel>=a.yh.COMMUNITY,s}))}),[i]),b=Object(c.useCallback)((e=>{ar(e.getParser().roomId)}),[]),g=Object(c.useCallback)((e=>{const t=e.getParser();i((e=>{const s={...e};return s.enteredGuestRoom=null,s.currentRoomOwner=t.isOwner,s.currentRoomId=t.roomId,s})),Ln(new a.tg(t.roomId,!0,!1)),a.Od.available&&a.Od.call("legacyTrack","navigator","private",[t.roomId])}),[i]),O=Object(c.useCallback)((e=>{const t=e.getParser();if(t.roomEnter)o({roomInfo:null,state:sr.NONE}),i((e=>{const s={...e};s.enteredGuestRoom=t.data,s.currentRoomIsStaffPick=t.staffPick;return!(s.createdFlatId===t.data.roomId)&&t.data.displayRoomEntryAd&&N("roomenterad.habblet.enabled",!1)&&a.Cd.openRoomEnterAd(),s.createdFlatId=0,s.enteredGuestRoom&&s.enteredGuestRoom.habboGroupId,s}));else if(t.roomForward){if(t.data.ownerName!==K().userName&&!t.isGroupMember)switch(t.data.doorMode){case a.Zf.DOORBELL_STATE:return void o((e=>{const s={...e};return s.roomInfo=t.data,s.state=sr.START_DOORBELL,s}));case a.Zf.PASSWORD_STATE:return void o((e=>{const s={...e};return s.roomInfo=t.data,s.state=sr.START_PASSWORD,s}))}if(t.data.doorMode===a.Zf.NOOB_STATE&&!K().isAmbassador&&!K().isRealNoob&&!K().isModerator)return;q(t.data.roomId)}else i((e=>{const s={...e};return s.enteredGuestRoom=t.data,s.currentRoomIsStaffPick=t.staffPick,s}))}),[i,o]),m=Object(c.useCallback)((e=>{const t=e.getParser();i((e=>{const s={...e};return s.currentRoomRating=t.totalLikes,s.canRate=t.canLike,s}))}),[i]),p=Object(c.useCallback)((e=>{const t=e.getParser();t.userName&&0!==t.userName.length||o((e=>{const t={...e};return t.state=sr.STATE_WAITING,t}))}),[o]),_=Object(c.useCallback)((e=>{const t=e.getParser();t.userName&&0!==t.userName.length||o((e=>{const t={...e};return t.state=sr.STATE_ACCEPTED,t}))}),[o]),E=Object(c.useCallback)((e=>{const t=e.getParser();t.userName&&0!==t.userName.length||o((e=>{const t={...e};return t.state=sr.STATE_NO_ANSWER,t}))}),[o]),f=Object(c.useCallback)((e=>{switch(e.getParser().errorCode){case-100002:return void o((e=>{const t={...e};return t.state=sr.STATE_WRONG_PASSWORD,t}));case 4009:return void jr.simpleAlert($e("navigator.alert.need.to.be.vip"),or.DEFAULT,null,null,$e("generic.alert.title"));case 4010:return void jr.simpleAlert($e("navigator.alert.invalid_room_name"),or.DEFAULT,null,null,$e("generic.alert.title"));case 4011:return void jr.simpleAlert($e("navigator.alert.cannot_perm_ban"),or.DEFAULT,null,null,$e("generic.alert.title"));case 4013:return void jr.simpleAlert($e("navigator.alert.room_in_maintenance"),or.DEFAULT,null,null,$e("generic.alert.title"))}}),[o]),x=Object(c.useCallback)((e=>{const t=e.getParser();r(t.topLevelContexts),s(t.topLevelContexts.length?t.topLevelContexts[0]:null)}),[r,s]),I=Object(c.useCallback)((e=>{const t=e.getParser();s((e=>{let s=e;if(s||(s=n&&n.length&&n[0]||null),!s)return null;if(t.result.code!==s.code&&n&&n.length)for(const r of n)r.code===t.result.code&&(s=r);for(const r of n)r.code===t.result.code&&(s=r);return s})),l(t.result)}),[n,s,l]),T=Object(c.useCallback)((e=>{const s=e.getParser();t(s.categories)}),[t]),S=Object(c.useCallback)((e=>{q(e.getParser().roomId)}),[]),v=Object(c.useCallback)((e=>{const t=e.getParser();let s=!1;if(i((e=>{s=e.settingsReceived;const n={...e};return n.homeRoomId=t.homeRoomId,n.settingsReceived=!0,n})),s)return;let n=-1,r=-1;void 0!==N("friend.id")&&parseInt(N("friend.id"))>0&&(n=0,Ln(new a.Ab(parseInt(N("friend.id"))))),void 0!==N("forward.type")&&void 0!==N("forward.id")&&(n=parseInt(N("forward.type")),r=parseInt(N("forward.id"))),2===n?ar(r):-1===n&&t.roomIdToEnter>0&&(C("navigator/close"),t.roomIdToEnter!==t.homeRoomId?q(t.roomIdToEnter):q(t.homeRoomId))}),[i]),R=Object(c.useCallback)((e=>{const t=e.getParser();switch(t.reason){case a.O.REASON_FULL:jr.simpleAlert($e("navigator.guestroomfull.text"),or.DEFAULT,null,null,$e("navigator.guestroomfull.title"));break;case a.O.REASON_QUEUE_ERROR:jr.simpleAlert($e(`room.queue.error.${t.parameter}`),or.DEFAULT,null,null,$e("room.queue.error.title"));break;case a.O.REASON_BANNED:jr.simpleAlert($e("navigator.banned.text"),or.DEFAULT,null,null,$e("navigator.banned.title"));break;default:jr.simpleAlert($e("room.queue.error.title"),or.DEFAULT,null,null,$e("room.queue.error.title"))}re()}),[]),A=Object(c.useCallback)((e=>{C("navigator/show")}),[]);return Je(a.wi,h),Je(a.yi,j),Je(a.qg,b),Je(a.og,g),Je(a.hc,O),Je(a.Jg,m),Je(a.cg,p),Je(a.bg,_),Je(a.dg,E),Je(a.Vb,f),Je(a.ze,x),Je(a.Ce,I),Je(a.we,T),Je(a.Yf,S),Je(a.xe,v),Je(a.mg,R),Je(a.Ae,A),null},$u=[sr.START_DOORBELL,sr.STATE_WAITING,sr.STATE_NO_ANSWER,sr.START_PASSWORD,sr.STATE_WRONG_PASSWORD],Xu=[sr.START_DOORBELL,sr.STATE_WAITING,sr.STATE_NO_ANSWER],Ju=(sr.START_PASSWORD,sr.STATE_WRONG_PASSWORD,e=>{const[t,s]=Object(c.useState)(""),{doorData:n=null,setDoorData:r=null}=Ku(),i=()=>{n&&n.state===sr.STATE_WAITING&&te(),r(null)};if(Object(c.useEffect)((()=>{n&&n.state===sr.STATE_NO_ANSWER&&te()}),[n]),!n||n.state===sr.NONE||-1===$u.indexOf(n.state))return null;const a=Xu.indexOf(n.state)>=0;return Object(Cr.jsxs)($r,{className:"nitro-navigator-doorbell",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e(a?"navigator.doorbell.title":"navigator.password.title"),onCloseClick:i}),Object(Cr.jsxs)(Hr,{children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:n&&n.roomInfo&&n.roomInfo.roomName}),n.state===sr.START_DOORBELL&&Object(Cr.jsx)(Ac,{children:$e("navigator.doorbell.info")}),n.state===sr.STATE_WAITING&&Object(Cr.jsx)(Ac,{children:$e("navigator.doorbell.waiting")}),n.state===sr.STATE_NO_ANSWER&&Object(Cr.jsx)(Ac,{children:$e("navigator.doorbell.no.answer")}),n.state===sr.START_PASSWORD&&Object(Cr.jsx)(Ac,{children:$e("navigator.password.info")}),n.state===sr.STATE_WRONG_PASSWORD&&Object(Cr.jsx)(Ac,{children:$e("navigator.password.retryinfo")})]}),a&&Object(Cr.jsxs)(rc,{gap:1,children:[n.state===sr.START_DOORBELL&&Object(Cr.jsx)(wr,{variant:"success",onClick:()=>{n&&n.roomInfo&&(q(n.roomInfo.roomId),r((e=>{const t={...e};return t.state=sr.STATE_PENDING_SERVER,t})))},children:$e("navigator.doorbell.button.ring")}),Object(Cr.jsx)(wr,{variant:"danger",onClick:i,children:$e("generic.cancel")})]}),!a&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{children:$e("navigator.password.enter")}),Object(Cr.jsx)("input",{type:"password",className:"form-control form-control-sm",onChange:e=>s(e.target.value)})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(wr,{variant:"success",onClick:()=>{n&&n.roomInfo&&(q(n.roomInfo.roomId,t),r((e=>{const t={...e};return t.state=sr.STATE_PENDING_SERVER,t})))},children:$e("navigator.password.button.try")}),Object(Cr.jsx)(wr,{variant:"danger",onClick:i,children:$e("generic.cancel")})]})]})]})]})}),Zu=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)(0),[g,O]=Object(c.useState)(rr[0].name),{categories:m=null}=Ku(),p=e=>N("images.url")+`/navigator/models/model_${e}.png`;return Object(c.useEffect)((()=>{if(!t){const e=[];for(let t=10;t<=100;t+=10)e.push(t);s(e),h(e[0])}}),[t]),Object(c.useEffect)((()=>{m&&m.length&&u(m[0].id)}),[m]),Object(Cr.jsxs)(rc,{overflow:"hidden",children:[Object(Cr.jsxs)(Rr,{overflow:"hidden",children:[Object(Cr.jsxs)(rc,{size:6,gap:1,overflow:"auto",children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{children:$e("navigator.createroom.roomnameinfo")}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:60,onChange:e=>r(e.target.value),placeholder:$e("navigator.createroom.roomnameinfo")})]}),Object(Cr.jsxs)(rc,{grow:!0,gap:1,children:[Object(Cr.jsx)(Ac,{children:$e("navigator.createroom.roomdescinfo")}),Object(Cr.jsx)("textarea",{className:"flex-grow-1 form-control form-control-sm w-100",maxLength:255,onChange:e=>o(e.target.value),placeholder:$e("navigator.createroom.roomdescinfo")})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{children:$e("navigator.category")}),Object(Cr.jsx)("select",{className:"form-select form-select-sm",onChange:e=>u(Number(e.target.value)),children:m&&m.length>0&&m.map((e=>Object(Cr.jsx)("option",{value:e.id,children:$e(e.name)},e.id)))})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{children:$e("navigator.maxvisitors")}),Object(Cr.jsx)("select",{className:"form-select form-select-sm",onChange:e=>h(Number(e.target.value)),children:t&&t.map((e=>Object(Cr.jsx)("option",{value:e,children:e},e)))})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{children:$e("navigator.tradesettings")}),Object(Cr.jsxs)("select",{className:"form-select form-select-sm",onChange:e=>b(Number(e.target.value)),children:[Object(Cr.jsx)("option",{value:"0",children:$e("navigator.roomsettings.trade_not_allowed")}),Object(Cr.jsx)("option",{value:"1",children:$e("navigator.roomsettings.trade_not_with_Controller")}),Object(Cr.jsx)("option",{value:"2",children:$e("navigator.roomsettings.trade_allowed")})]})]})]}),Object(Cr.jsx)(rc,{size:6,gap:1,overflow:"auto",children:rr.map(((e,t)=>Object(Cr.jsxs)(lc,{fullHeight:!0,onClick:()=>((e,t)=>{!e||e.clubLevel>Q()||O(rr[t].name)})(e,t),itemActive:g===e.name,overflow:"unset",gap:0,className:"p-1",disabled:Q()<e.clubLevel,children:[Object(Cr.jsx)(yr,{fullHeight:!0,center:!0,overflow:"hidden",children:Object(Cr.jsx)("img",{alt:"",src:p(e.name)})}),Object(Cr.jsxs)(Ac,{bold:!0,children:[e.tileSize," ",$e("navigator.createroom.tilesize")]}),e.clubLevel>a.xd.NO_CLUB&&Object(Cr.jsx)(ec,{position:"absolute",className:"top-1 end-1",type:"hc"})]},e.name)))})]}),Object(Cr.jsx)(wr,{fullWidth:!0,variant:!n||n.length<3?"danger":"success",onClick:()=>{Ln(new a.Xf(n,i,"model_"+g,Number(l),Number(d),j))},disabled:!n||n.length<3,children:$e("navigator.createroom.create")})]})};const ed=e=>{const{onCloseClick:t=null}=e,[s,n]=Object(c.useState)(!1),[r,i]=Object(c.useState)(!1),{navigatorData:o=null}=Ku(),l=e=>{switch(e){case"settings":return K().userId===o.enteredGuestRoom.ownerId||K().isModerator;case"staff_pick":return K().securityLevel>=a.yh.COMMUNITY;default:return!1}},u=(e,s)=>{if(o&&o.enteredGuestRoom)switch(e){case"set_home_room":let e=-1;return o.homeRoomId!==o.enteredGuestRoom.roomId&&(e=o.enteredGuestRoom.roomId),void(e>0&&Ln(new a.vi(e)));case"navigator_search_tag":return;case"open_room_thumbnail_camera":return void ot(new yn(yn.TOGGLE_THUMBNAIL));case"open_group_info":return void $n(o.enteredGuestRoom.habboGroupId);case"toggle_room_link":return void C("navigator/toggle-room-link");case"open_room_settings":return void Ln(new a.Zg(o.enteredGuestRoom.roomId));case"toggle_pick":return n((e=>!e)),void Ln(new a.dh(o.enteredGuestRoom.roomId));case"toggle_mute":return i((e=>!e)),void Ln(new a.yg);case"open_floorplan_editor":return void ot(new tn(tn.TOGGLE_FLOORPLAN_EDITOR));case"close":return void t()}};return Object(c.useEffect)((()=>{o&&(n(o.currentRoomIsStaffPick),o.enteredGuestRoom&&i(o.enteredGuestRoom.allInRoomMuted))}),[o]),o.enteredGuestRoom?Object(Cr.jsxs)($r,{className:"nitro-room-info",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("navigator.roomsettings.roominfo"),onCloseClick:()=>u("close")}),Object(Cr.jsx)(Hr,{className:"text-black",children:o.enteredGuestRoom&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(yr,{gap:2,overflow:"hidden",children:[Object(Cr.jsx)(Ic,{roomId:o.enteredGuestRoom.roomId,customUrl:o.enteredGuestRoom.officialRoomPicRef,children:l("settings")&&Object(Cr.jsx)("i",{className:"icon icon-camera-small position-absolute b-0 r-0 m-1 cursor-pointer top-0",onClick:()=>u("open_room_thumbnail_camera")})}),Object(Cr.jsxs)(rc,{grow:!0,gap:1,overflow:"hidden",children:[Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsxs)(rc,{grow:!0,gap:1,children:[Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)("i",{onClick:()=>u("set_home_room"),className:"flex-shrink-0 icon icon-house-small cursor-pointer"+Wi()({" gray":o.homeRoomId!==o.enteredGuestRoom.roomId})}),Object(Cr.jsx)(Ac,{bold:!0,children:o.enteredGuestRoom.roomName})]}),o.enteredGuestRoom.showOwner&&Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Ac,{variant:"muted",children:$e("navigator.roomownercaption")}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Cc,{userId:o.enteredGuestRoom.ownerId}),Object(Cr.jsx)(Ac,{children:o.enteredGuestRoom.ownerName})]})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Ac,{variant:"muted",children:$e("navigator.roomrating")}),Object(Cr.jsx)(Ac,{children:o.currentRoomRating})]}),o.enteredGuestRoom.tags.length>0&&Object(Cr.jsx)(yr,{alignItems:"center",gap:1,children:o.enteredGuestRoom.tags.map((e=>Object(Cr.jsxs)(Ac,{pointer:!0,className:"bg-muted rounded p-1",onClick:e=>u("navigator_search_tag"),children:["#",e]},e)))})]}),Object(Cr.jsxs)(rc,{alignItems:"center",gap:1,children:[l("settings")&&Object(Cr.jsx)("i",{className:"icon icon-cog cursor-pointer",title:$e("navigator.room.popup.info.room.settings"),onClick:e=>u("open_room_settings")}),Object(Cr.jsx)(Lr.a,{icon:"link",title:$e("navigator.embed.caption"),className:"cursor-pointer",onClick:e=>C("navigator/toggle-room-link")})]})]}),Object(Cr.jsx)(Ac,{overflow:"auto",style:{maxHeight:50},children:o.enteredGuestRoom.description}),o.enteredGuestRoom.habboGroupId>0&&Object(Cr.jsxs)(yr,{pointer:!0,alignItems:"center",gap:1,onClick:()=>u("open_group_info"),children:[Object(Cr.jsx)(Zr,{className:"flex-none",badgeCode:o.enteredGuestRoom.groupBadgeCode,isGroup:!0}),Object(Cr.jsx)(Ac,{underline:!0,children:$e("navigator.guildbase",["groupName"],[o.enteredGuestRoom.groupName])})]})]})]}),Object(Cr.jsxs)(rc,{gap:1,children:[l("staff_pick")&&Object(Cr.jsx)(wr,{onClick:()=>u("toggle_pick"),children:$e(s?"navigator.staffpicks.unpick":"navigator.staffpicks.pick")}),Object(Cr.jsx)(wr,{variant:"danger",disabled:!0,children:$e("help.emergency.main.report.room")}),l("settings")&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(wr,{onClick:()=>u("toggle_mute"),children:$e(r?"navigator.muteall_on":"navigator.muteall_off")}),Object(Cr.jsx)(wr,{onClick:()=>u("open_floorplan_editor"),children:$e("open.floor.plan.editor")})]})]})]})})]}):null};const td=e=>{const{onCloseClick:t=null}=e,{navigatorData:s=null}=Ku();return s.enteredGuestRoom?Object(Cr.jsxs)($r,{className:"nitro-room-link",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("navigator.embed.title"),onCloseClick:t}),Object(Cr.jsx)(Hr,{className:"text-black d-flex align-items-center",children:Object(Cr.jsxs)(yr,{gap:2,children:[Object(Cr.jsx)(Ic,{roomId:s.enteredGuestRoom.roomId,customUrl:s.enteredGuestRoom.officialRoomPicRef}),Object(Cr.jsxs)(rc,{children:[Object(Cr.jsx)(Ac,{bold:!0,fontSize:5,children:$e("navigator.embed.headline")}),Object(Cr.jsx)(Ac,{children:$e("navigator.embed.info")}),Object(Cr.jsx)("input",{type:"text",readOnly:!0,className:"form-control form-control-sm",value:$e("navigator.embed.src",["roomId"],[s.enteredGuestRoom.roomId.toString()])})]})]})})]}):null},sd=e=>{const{roomData:t=null,handleChange:s=null}=e,[n,r]=Object(c.useState)(""),[i,o]=Object(c.useState)(""),[l,u]=Object(c.useState)(!1);return Object(c.useEffect)((()=>{r(""),o(""),u(!1)}),[t]),Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("navigator.roomsettings.roomaccess.caption")}),Object(Cr.jsx)(Ac,{children:$e("navigator.roomsettings.roomaccess.info")})]}),Object(Cr.jsxs)(rc,{overflow:"auto",children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("navigator.roomsettings.doormode")}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"lockState",checked:t.lockState===a.Zf.OPEN_STATE&&!l,onChange:e=>s("lock_state",a.Zf.OPEN_STATE)}),Object(Cr.jsx)(Ac,{children:$e("navigator.roomsettings.doormode.open")})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"lockState",checked:t.lockState===a.Zf.DOORBELL_STATE&&!l,onChange:e=>s("lock_state",a.Zf.DOORBELL_STATE)}),Object(Cr.jsx)(Ac,{children:$e("navigator.roomsettings.doormode.doorbell")})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"lockState",checked:t.lockState===a.Zf.INVISIBLE_STATE&&!l,onChange:e=>s("lock_state",a.Zf.INVISIBLE_STATE)}),Object(Cr.jsx)(Ac,{children:$e("navigator.roomsettings.doormode.invisible")})]}),Object(Cr.jsxs)(yr,{fullWidth:!0,gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"lockState",checked:t.lockState===a.Zf.PASSWORD_STATE||l,onChange:e=>u(e.target.checked)}),!l&&t.lockState!==a.Zf.PASSWORD_STATE&&Object(Cr.jsx)(Ac,{children:$e("navigator.roomsettings.doormode.password")}),(l||t.lockState===a.Zf.PASSWORD_STATE)&&Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{children:$e("navigator.roomsettings.doormode.password")}),Object(Cr.jsx)("input",{type:"password",className:"form-control form-control-sm col-4",value:n,onChange:e=>r(e.target.value),placeholder:$e("navigator.roomsettings.password"),onFocus:e=>u(!0)}),l&&n.length<=0&&Object(Cr.jsx)(Ac,{bold:!0,small:!0,variant:"danger",children:$e("navigator.roomsettings.passwordismandatory")}),Object(Cr.jsx)("input",{type:"password",className:"form-control form-control-sm col-4",value:i,onChange:e=>o(e.target.value),onBlur:()=>{!l||n.length<=0||i.length<=0||n!==i||s("password",n)},placeholder:$e("navigator.roomsettings.passwordconfirm")}),l&&n.length>0&&n!==i&&Object(Cr.jsx)(Ac,{bold:!0,small:!0,variant:"danger",children:$e("navigator.roomsettings.invalidconfirm")})]})]})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("navigator.roomsettings.pets")}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.allowPets,onChange:e=>s("allow_pets",e.target.checked)}),Object(Cr.jsx)(Ac,{children:$e("navigator.roomsettings.allowpets")})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.allowPetsEat,onChange:e=>s("allow_pets_eat",e.target.checked)}),Object(Cr.jsx)(Ac,{children:$e("navigator.roomsettings.allowfoodconsume")})]})]})]})]})},nd=e=>{const{roomData:t=null,handleChange:s=null,close:n=null}=e,[r,i]=Object(c.useState)(""),[o,l]=Object(c.useState)(""),{categories:u=null}=Ku();return Object(c.useEffect)((()=>{i(t.roomName),l(t.roomDescription)}),[t]),Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Ac,{className:"col-3",children:$e("navigator.roomname")}),Object(Cr.jsxs)(rc,{fullWidth:!0,gap:0,children:[Object(Cr.jsx)("input",{className:"form-control form-control-sm",value:r,maxLength:60,onChange:e=>i(e.target.value),onBlur:()=>{r===t.roomName||r.length<3||r.length>60||s("name",r)}}),r.length<3&&Object(Cr.jsx)(Ac,{bold:!0,small:!0,variant:"danger",children:$e("navigator.roomsettings.roomnameismandatory")})]})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Ac,{className:"col-3",children:$e("navigator.roomsettings.desc")}),Object(Cr.jsx)("textarea",{className:"form-control form-control-sm",value:o,maxLength:255,onChange:e=>l(e.target.value),onBlur:()=>{o===t.roomDescription||o.length>255||s("description",o)}})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Ac,{className:"col-3",children:$e("navigator.category")}),Object(Cr.jsx)("select",{className:"form-select form-select-sm",value:t.categoryId,onChange:e=>s("category",e.target.value),children:u&&u.map((e=>Object(Cr.jsx)("option",{value:e.id,children:$e(e.name)},e.id)))})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Ac,{className:"col-3",children:$e("navigator.maxvisitors")}),Object(Cr.jsx)("select",{className:"form-select form-select-sm",value:t.userCount,onChange:e=>s("max_visitors",e.target.value),children:cr&&cr.map((e=>Object(Cr.jsx)("option",{value:e,children:e},e)))})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Ac,{className:"col-3",children:$e("navigator.tradesettings")}),Object(Cr.jsxs)("select",{className:"form-select form-select-sm",value:t.tradeState,onChange:e=>s("trade_state",e.target.value),children:[Object(Cr.jsx)("option",{value:"0",children:$e("navigator.roomsettings.trade_not_allowed")}),Object(Cr.jsx)("option",{value:"1",children:$e("navigator.roomsettings.trade_not_with_Controller")}),Object(Cr.jsx)("option",{value:"2",children:$e("navigator.roomsettings.trade_allowed")})]})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Sr,{className:"col-3"}),Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.allowWalkthrough,onChange:e=>s("allow_walkthrough",e.target.checked)}),Object(Cr.jsx)(Ac,{children:$e("navigator.roomsettings.allow_walk_through")})]}),Object(Cr.jsxs)(Ac,{variant:"danger",underline:!0,bold:!0,pointer:!0,className:"d-flex justify-content-center align-items-center gap-1",onClick:()=>{jr.confirm($e("navigator.roomsettings.deleteroom.confirm.message",["room_name"],[t.roomName]),(()=>{Ln(new a.ag(t.roomId)),n&&n(),C("navigator/search/myworld_view")}),null,null,null,$e("navigator.roomsettings.deleteroom.confirm.title"))},children:[Object(Cr.jsx)(Lr.a,{icon:"times"}),$e("navigator.roomsettings.delete")]})]})},rd=e=>{var t;const{roomData:s=null,handleChange:n=null}=e,[r,i]=Object(c.useState)(-1),[o,l]=Object(c.useState)([]),u=Object(c.useCallback)((e=>{const t=e.getParser();s&&s.roomId===t.roomId&&l(t.bannedUsers)}),[s]);Je(a.w,u);const d=Object(c.useCallback)((e=>{l((t=>{const s=[...t],n=s.findIndex((t=>t.userId===e));return n>=0&&s.splice(n,1),s})),Ln(new a.gh(e,s.roomId)),i(-1)}),[s]);return Object(c.useEffect)((()=>{Ln(new a.Qf(s.roomId))}),[s.roomId]),Object(Cr.jsxs)(Rr,{overflow:"auto",children:[Object(Cr.jsxs)(rc,{size:6,children:[Object(Cr.jsxs)(Ac,{bold:!0,children:[$e("navigator.roomsettings.moderation.banned.users")," (",o.length,")"]}),Object(Cr.jsx)(yr,{overflow:"hidden",className:"bg-white rounded list-container p-2",children:Object(Cr.jsx)(rc,{fullWidth:!0,overflow:"auto",gap:1,children:o&&o.length>0&&o.map(((e,t)=>Object(Cr.jsxs)(yr,{shrink:!0,alignItems:"center",gap:1,overflow:"hidden",children:[Object(Cr.jsx)(Cc,{userName:e.userName}),Object(Cr.jsxs)(Ac,{pointer:!0,grow:!0,onClick:t=>i(e.userId),children:[" ",e.userName]})]},t)))})}),Object(Cr.jsxs)(wr,{disabled:r<=0,onClick:e=>d(r),children:[$e("navigator.roomsettings.moderation.unban")," ",r>0&&(null===(t=o.find((e=>e.userId===r)))||void 0===t?void 0:t.userName)]})]}),Object(Cr.jsxs)(rc,{size:6,children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("navigator.roomsettings.moderation.mute.header")}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:1===s.moderationSettings.allowMute,onChange:e=>n("moderation_mute",e.target.checked?1:0)}),Object(Cr.jsx)(Ac,{children:$e("navigator.roomsettings.moderation.rights")})]})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("navigator.roomsettings.moderation.kick.header")}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:0===s.moderationSettings.allowKick,onChange:e=>n("moderation_kick",e.target.checked?0:2)}),Object(Cr.jsx)(Ac,{children:$e("navigator.roomsettings.moderation.all")})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:1===s.moderationSettings.allowKick||0===s.moderationSettings.allowKick,disabled:0===s.moderationSettings.allowKick,onChange:e=>n("moderation_kick",e.target.checked?1:2)}),Object(Cr.jsx)(Ac,{children:$e("navigator.roomsettings.moderation.rights")})]})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("navigator.roomsettings.moderation.ban.header")}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:1===s.moderationSettings.allowBan,onChange:e=>n("moderation_ban",e.target.checked?1:0)}),Object(Cr.jsx)(Ac,{children:$e("navigator.roomsettings.moderation.rights")})]})]})]})]})},cd=e=>{const{roomData:t=null}=e,[s,n]=Object(c.useState)(new Map),r=Object(c.useCallback)((e=>{const s=e.getParser();t&&t.roomId===s.roomId&&n(s.users)}),[t]);Je(a.yb,r);const i=Object(c.useCallback)((e=>{const s=e.getParser();t&&t.roomId===s.roomId&&n((e=>{const t=new Map(e);return t.set(s.data.userId,s.data.userName),t}))}),[t]);Je(a.wb,i);const o=Object(c.useCallback)((e=>{const s=e.getParser();t&&t.roomId===s.roomId&&n((e=>{const t=new Map(e);return t.delete(s.userId),t}))}),[t]);return Je(a.xb,o),Object(c.useEffect)((()=>{Ln(new a.lh(t.roomId))}),[t.roomId]),Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsxs)(rc,{size:6,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("navigator.flatctrls.userswithrights",["displayed","total"],[s.size.toString(),s.size.toString()])}),Object(Cr.jsx)(yr,{overflow:"hidden",className:"bg-white rounded list-container p-2",children:Object(Cr.jsx)(rc,{fullWidth:!0,overflow:"auto",gap:1,children:Array.from(s.entries()).map(((e,t)=>{let[s,n]=e;return Object(Cr.jsxs)(yr,{shrink:!0,alignItems:"center",gap:1,overflow:"hidden",children:[Object(Cr.jsx)(Cc,{userName:n}),Object(Cr.jsxs)(Ac,{pointer:!0,grow:!0,onClick:e=>Ln(new a.eh(s)),children:[" ",n]})]},t)}))})})]}),Object(Cr.jsx)(rc,{size:6,justifyContent:"end",children:Object(Cr.jsx)(wr,{variant:"danger",disabled:!s.size,onClick:e=>Ln(new a.Gf(t.roomId)),children:$e("navigator.flatctrls.clear")})})]})},id=e=>{const{roomData:t=null,handleChange:s=null}=e,[n,r]=Object(c.useState)(0);return Object(c.useEffect)((()=>{r(t.chatSettings.distance)}),[t.chatSettings]),Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("navigator.roomsettings.vip.caption")}),Object(Cr.jsx)(Ac,{children:$e("navigator.roomsettings.vip.info")})]}),Object(Cr.jsxs)(Rr,{overflow:"auto",children:[Object(Cr.jsxs)(rc,{size:6,gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("navigator.roomsettings.chat_settings")}),Object(Cr.jsx)(Ac,{children:$e("navigator.roomsettings.chat_settings.info")}),Object(Cr.jsxs)("select",{className:"form-select form-select-sm",value:t.chatSettings.mode,onChange:e=>s("bubble_mode",e.target.value),children:[Object(Cr.jsx)("option",{value:a.Tf.CHAT_MODE_FREE_FLOW,children:$e("navigator.roomsettings.chat.mode.free.flow")}),Object(Cr.jsx)("option",{value:a.Tf.CHAT_MODE_LINE_BY_LINE,children:$e("navigator.roomsettings.chat.mode.line.by.line")})]}),Object(Cr.jsxs)("select",{className:"form-select form-select-sm",value:t.chatSettings.weight,onChange:e=>s("chat_weight",e.target.value),children:[Object(Cr.jsx)("option",{value:a.Tf.CHAT_BUBBLE_WIDTH_NORMAL,children:$e("navigator.roomsettings.chat.bubbles.width.normal")}),Object(Cr.jsx)("option",{value:a.Tf.CHAT_BUBBLE_WIDTH_THIN,children:$e("navigator.roomsettings.chat.bubbles.width.thin")}),Object(Cr.jsx)("option",{value:a.Tf.CHAT_BUBBLE_WIDTH_WIDE,children:$e("navigator.roomsettings.chat.bubbles.width.wide")})]}),Object(Cr.jsxs)("select",{className:"form-select form-select-sm",value:t.chatSettings.speed,onChange:e=>s("bubble_speed",e.target.value),children:[Object(Cr.jsx)("option",{value:a.Tf.CHAT_SCROLL_SPEED_FAST,children:$e("navigator.roomsettings.chat.speed.fast")}),Object(Cr.jsx)("option",{value:a.Tf.CHAT_SCROLL_SPEED_NORMAL,children:$e("navigator.roomsettings.chat.speed.normal")}),Object(Cr.jsx)("option",{value:a.Tf.CHAT_SCROLL_SPEED_SLOW,children:$e("navigator.roomsettings.chat.speed.slow")})]}),Object(Cr.jsxs)("select",{className:"form-select form-select-sm",value:t.chatSettings.protection,onChange:e=>s("flood_protection",e.target.value),children:[Object(Cr.jsx)("option",{value:a.Tf.FLOOD_FILTER_LOOSE,children:$e("navigator.roomsettings.chat.flood.loose")}),Object(Cr.jsx)("option",{value:a.Tf.FLOOD_FILTER_NORMAL,children:$e("navigator.roomsettings.chat.flood.normal")}),Object(Cr.jsx)("option",{value:a.Tf.FLOOD_FILTER_STRICT,children:$e("navigator.roomsettings.chat.flood.strict")})]}),Object(Cr.jsx)(Ac,{children:$e("navigator.roomsettings.chat_settings.hearing.distance")}),Object(Cr.jsx)("input",{type:"number",min:"0",className:"form-control form-control-sm",value:n,onChange:e=>r(e.target.valueAsNumber),onBlur:e=>s("chat_distance",n)})]}),Object(Cr.jsxs)(rc,{size:6,gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("navigator.roomsettings.vip_settings")}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.hideWalls,onChange:e=>s("hide_walls",e.target.checked)}),Object(Cr.jsx)(Ac,{children:$e("navigator.roomsettings.hide_walls")})]}),Object(Cr.jsxs)("select",{className:"form-select form-select-sm",value:t.wallThickness,onChange:e=>s("wall_thickness",e.target.value),children:[Object(Cr.jsx)("option",{value:"0",children:$e("navigator.roomsettings.wall_thickness.normal")}),Object(Cr.jsx)("option",{value:"1",children:$e("navigator.roomsettings.wall_thickness.thick")}),Object(Cr.jsx)("option",{value:"-1",children:$e("navigator.roomsettings.wall_thickness.thin")}),Object(Cr.jsx)("option",{value:"-2",children:$e("navigator.roomsettings.wall_thickness.thinnest")})]}),Object(Cr.jsxs)("select",{className:"form-select form-select-sm",value:t.floorThickness,onChange:e=>s("floor_thickness",e.target.value),children:[Object(Cr.jsx)("option",{value:"0",children:$e("navigator.roomsettings.floor_thickness.normal")}),Object(Cr.jsx)("option",{value:"1",children:$e("navigator.roomsettings.floor_thickness.thick")}),Object(Cr.jsx)("option",{value:"-1",children:$e("navigator.roomsettings.floor_thickness.thin")}),Object(Cr.jsx)("option",{value:"-2",children:$e("navigator.roomsettings.floor_thickness.thinnest")})]})]})]})]})},ad=["navigator.roomsettings.tab.1","navigator.roomsettings.tab.2","navigator.roomsettings.tab.3","navigator.roomsettings.tab.4","navigator.roomsettings.tab.5"],od=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(ad[0]),i=Object(c.useCallback)((e=>{const t=e.getParser();t&&(s({roomId:t.roomId,roomName:t.name,roomDescription:t.description,categoryId:t.categoryId,userCount:t.userCount,tags:t.tags,tradeState:t.tradeMode,allowWalkthrough:t.allowWalkthrough,lockState:t.state,password:null,allowPets:t.allowPets,allowPetsEat:t.allowPetsEat,hideWalls:t.hideWalls,wallThickness:t.thicknessWall,floorThickness:t.thicknessFloor,chatSettings:{mode:t.chatSettings.mode,weight:t.chatSettings.weight,speed:t.chatSettings.speed,distance:t.chatSettings.distance,protection:t.chatSettings.protection},moderationSettings:{allowMute:t.moderationSettings.allowMute,allowKick:t.moderationSettings.allowKick,allowBan:t.moderationSettings.allowBan}}),Ln(new a.Qf(t.roomId)))}),[]);Je(a.ah,i);const o=()=>{s(null),r(ad[0])},l=(e,t)=>{s((s=>{const n={...s};switch(e){case"name":n.roomName=String(t);break;case"description":n.roomDescription=String(t);break;case"category":n.categoryId=Number(t);break;case"max_visitors":n.userCount=Number(t);break;case"trade_state":n.tradeState=Number(t);break;case"allow_walkthrough":n.allowWalkthrough=Boolean(t);break;case"allow_pets":n.allowPets=Boolean(t);break;case"allow_pets_eat":n.allowPetsEat=Boolean(t);break;case"hide_walls":n.hideWalls=Boolean(t);break;case"wall_thickness":n.wallThickness=Number(t);break;case"floor_thickness":n.floorThickness=Number(t);break;case"lock_state":n.lockState=Number(t);break;case"password":n.lockState=a.Zf.PASSWORD_STATE,n.password=String(t);break;case"moderation_mute":n.moderationSettings.allowMute=Number(t);break;case"moderation_kick":n.moderationSettings.allowKick=Number(t);break;case"moderation_ban":n.moderationSettings.allowBan=Number(t);break;case"bubble_mode":n.chatSettings.mode=Number(t);break;case"chat_weight":n.chatSettings.weight=Number(t);break;case"bubble_speed":n.chatSettings.speed=Number(t);break;case"flood_protection":n.chatSettings.protection=Number(t);break;case"chat_distance":n.chatSettings.distance=Number(t)}return Ln(new a.uh(n.roomId,n.roomName,n.roomDescription,n.lockState,n.password,n.userCount,n.categoryId,n.tags.length,n.tags,n.tradeState,n.allowPets,n.allowPetsEat,n.allowWalkthrough,n.hideWalls,n.wallThickness,n.floorThickness,n.moderationSettings.allowMute,n.moderationSettings.allowKick,n.moderationSettings.allowBan,n.chatSettings.mode,n.chatSettings.weight,n.chatSettings.speed,n.chatSettings.distance,n.chatSettings.protection)),n}))};return t?Object(Cr.jsxs)($r,{uniqueKey:"nitro-room-settings",className:"nitro-room-settings",children:[Object(Cr.jsx)(Wr,{headerText:$e("navigator.roomsettings"),onCloseClick:o}),Object(Cr.jsx)(Nc,{children:ad.map((e=>Object(Cr.jsx)(Sc,{isActive:n===e,onClick:t=>r(e),children:$e(e)},e)))}),Object(Cr.jsxs)(Hr,{children:[n===ad[0]&&Object(Cr.jsx)(nd,{roomData:t,handleChange:l,close:o}),n===ad[1]&&Object(Cr.jsx)(sd,{roomData:t,handleChange:l}),n===ad[2]&&Object(Cr.jsx)(cd,{roomData:t,handleChange:l}),n===ad[3]&&Object(Cr.jsx)(id,{roomData:t,handleChange:l}),n===ad[4]&&Object(Cr.jsx)(rd,{roomData:t,handleChange:l})]})]}):null};var ld=s(86);const ud=e=>{const{roomData:t=null}=e,[s,n]=Object(c.useState)(null),[r,i]=Object(c.useState)(!1);return Object(c.useEffect)((()=>{r||n(null)}),[r]),Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Sr,{pointer:!0,className:"icon icon-navigator-info",onClick:e=>{e.stopPropagation();let t=!1;i((e=>(t=!e,t))),t&&n(e.target)}}),Object(Cr.jsx)(ld.a,{show:r,target:s,placement:"right",children:Object(Cr.jsx)(Cl.a,{children:Object(Cr.jsx)(Hr,{overflow:"hidden",className:"room-info bg-transparent",children:Object(Cr.jsxs)(yr,{gap:2,overflow:"hidden",children:[Object(Cr.jsxs)(Ic,{roomId:t.roomId,customUrl:t.officialRoomPicRef,className:"d-flex flex-column align-items-center justify-content-end mb-1",children:[t.habboGroupId>0&&Object(Cr.jsx)(Zr,{badgeCode:t.groupBadgeCode,isGroup:!0,className:"position-absolute top-0 start-0 m-1 "}),t.doorMode!==a.Zf.OPEN_STATE&&Object(Cr.jsx)("i",{className:"position-absolute end-0 mb-1 me-1 icon icon-navigator-room-"+(t.doorMode===a.Zf.DOORBELL_STATE?"locked":t.doorMode===a.Zf.PASSWORD_STATE?"password":t.doorMode===a.Zf.INVISIBLE_STATE?"invisible":"")})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,truncate:!0,className:"flex-grow-1",style:{maxHeight:13},children:t.roomName}),Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(Ac,{italics:!0,variant:"muted",children:$e("navigator.roomownercaption")}),Object(Cr.jsx)(Cc,{userId:t.ownerId}),Object(Cr.jsx)(Ac,{italics:!0,children:t.ownerName})]}),Object(Cr.jsx)(Ac,{className:"flex-grow-1",children:t.description}),Object(Cr.jsxs)(yr,{className:"badge p-1 position-absolute m-1 bottom-0 end-0 m-2 "+(()=>{const e=t.userCount/t.maxUserCount*100;let s="bg-primary";return e>=92?s="bg-danger":e>=50?s="bg-warning":e>0&&(s="bg-success"),s})(),gap:1,children:[Object(Cr.jsx)(Lr.a,{icon:"user"}),t.userCount]})]})]})})})})]})},dd=e=>{const{roomData:t=null,children:s=null,thumbnail:n=!1,...r}=e,{setDoorData:c=null}=Ku(),i=()=>{const e=t.userCount/t.maxUserCount*100;let s="bg-primary";return e>=92?s="bg-danger":e>=50?s="bg-warning":e>0&&(s="bg-success"),s},o=e=>{if(t.ownerId!==K().userId){if(0!==t.habboGroupId)return void ar(t.roomId);switch(t.doorMode){case a.Zf.DOORBELL_STATE:return void c((e=>{const s={...e};return s.roomInfo=t,s.state=sr.START_DOORBELL,s}));case a.Zf.PASSWORD_STATE:return void c((e=>{const s={...e};return s.roomInfo=t,s.state=sr.START_PASSWORD,s}))}}q(t.roomId)};return n?Object(Cr.jsxs)(rc,{pointer:!0,overflow:"hidden",alignItems:"center",onClick:o,gap:0,className:"navigator-item p-1 bg-light rounded-3 small mb-1 flex-column border border-muted",...r,children:[Object(Cr.jsxs)(Ic,{roomId:t.roomId,customUrl:t.officialRoomPicRef,className:"d-flex flex-column align-items-center justify-content-end mb-1",children:[t.habboGroupId>0&&Object(Cr.jsx)(Zr,{badgeCode:t.groupBadgeCode,isGroup:!0,className:"position-absolute top-0 start-0 m-1"}),Object(Cr.jsxs)(yr,{center:!0,className:"badge p-1 position-absolute m-1 "+i(),gap:1,children:[Object(Cr.jsx)(Lr.a,{icon:"user"}),t.userCount]}),t.doorMode!==a.Zf.OPEN_STATE&&Object(Cr.jsx)("i",{className:"position-absolute end-0 mb-1 me-1 icon icon-navigator-room-"+(t.doorMode===a.Zf.DOORBELL_STATE?"locked":t.doorMode===a.Zf.PASSWORD_STATE?"password":t.doorMode===a.Zf.INVISIBLE_STATE?"invisible":"")})]}),Object(Cr.jsxs)(yr,{className:"w-100",children:[Object(Cr.jsx)(Ac,{truncate:!0,className:"flex-grow-1",children:t.roomName}),Object(Cr.jsx)(yr,{reverse:!0,alignItems:"center",gap:1,children:Object(Cr.jsx)(ud,{roomData:t})}),s]})]}):Object(Cr.jsxs)(yr,{pointer:!0,overflow:"hidden",alignItems:"center",onClick:o,gap:2,className:"navigator-item px-2 py-1 small",...r,children:[Object(Cr.jsxs)(yr,{center:!0,className:"badge p-1 "+i(),gap:1,children:[Object(Cr.jsx)(Lr.a,{icon:"user"}),t.userCount]}),Object(Cr.jsx)(Ac,{truncate:!0,grow:!0,children:t.roomName}),Object(Cr.jsxs)(yr,{reverse:!0,alignItems:"center",gap:1,children:[Object(Cr.jsx)(ud,{roomData:t}),t.habboGroupId>0&&Object(Cr.jsx)("i",{className:"icon icon-navigator-room-group"}),t.doorMode!==a.Zf.OPEN_STATE&&Object(Cr.jsx)("i",{className:"icon icon-navigator-room-"+(t.doorMode===a.Zf.DOORBELL_STATE?"locked":t.doorMode===a.Zf.PASSWORD_STATE?"password":t.doorMode===a.Zf.INVISIBLE_STATE?"invisible":"")})]}),s]})},hd=e=>{const{searchResult:t=null,...s}=e,[n,r]=Object(c.useState)(!0),[i,a]=Object(c.useState)(0);Object(c.useEffect)((()=>{t&&a(t.mode)}),[t,e]);const o=i>=nr.THUMBNAILS;return Object(Cr.jsxs)(rc,{className:"bg-white rounded border border-muted",gap:0,children:[Object(Cr.jsxs)(yr,{fullWidth:!0,alignItems:"center",justifyContent:"between",className:"px-2 py-1",children:[Object(Cr.jsxs)(yr,{grow:!0,pointer:!0,alignItems:"center",gap:1,onClick:e=>r((e=>!e)),children:[Object(Cr.jsx)(Lr.a,{icon:n?"minus":"plus",className:"text-secondary"}),Object(Cr.jsx)(Ac,{children:$e((()=>{let e=t.code;return e&&e.length?e.startsWith("${")?e.slice(2,e.length-1):"navigator.searchcode.title."+e:t.data})())})]}),Object(Cr.jsx)(Lr.a,{icon:i===nr.LIST?"th":i>=nr.THUMBNAILS?"bars":null,className:"text-secondary",onClick:()=>{a((e=>e===nr.LIST?nr.THUMBNAILS:nr.LIST))}})]})," ",n&&Object(Cr.jsx)(Cr.Fragment,{children:o?Object(Cr.jsx)(Ar,{columnCount:3,...s,columnMinWidth:110,columnMinHeight:130,className:"mx-2",children:t.rooms.length>0&&t.rooms.map(((e,t)=>Object(Cr.jsx)(dd,{roomData:e,thumbnail:!0},t)))}):Object(Cr.jsx)(Rr,{columnCount:1,className:"navigator-grid",gap:0,children:t.rooms.length>0&&t.rooms.map(((e,t)=>Object(Cr.jsx)(dd,{roomData:e},t)))})})]})},jd=e=>{const{sendSearch:t=null}=e,[s,n]=Object(c.useState)(0),[r,i]=Object(c.useState)(""),{topLevelContext:a=null,searchResult:o=null}=Ku(),l=()=>{if(!a)return;let e=ir[s];e||(e=ir[0]);const n=(e.query?e.query+":":"")+r;t(n||"",a.code)};return Object(c.useEffect)((()=>{if(!o)return;const e=o.data.split(":");let t=null,s="";if(e.length>=2){const[n,...r]=e;t=ir.find((e=>e.query===n)),s=r.join(":")}else s=o.data;t||(t=ir[0]),n(ir.findIndex((e=>e===t))),i(s)}),[o]),Object(Cr.jsxs)(yr,{fullWidth:!0,gap:1,children:[Object(Cr.jsx)(yr,{shrink:!0,children:Object(Cr.jsx)("select",{className:"form-select form-select-sm",value:s,onChange:e=>n(parseInt(e.target.value)),children:ir.map(((e,t)=>Object(Cr.jsx)("option",{value:t,children:$e("navigator.filter."+e.name)},t)))})}),Object(Cr.jsxs)(yr,{fullWidth:!0,gap:1,children:[Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:$e("navigator.filter.input.placeholder"),value:r,onChange:e=>i(e.target.value),onKeyDown:e=>(e=>{"Enter"===e.key&&l()})(e)}),Object(Cr.jsx)(wr,{variant:"primary",onClick:l,children:Object(Cr.jsx)(Lr.a,{icon:"search"})})]})]})},bd=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)(!1),[l,u]=Object(c.useState)(!1),[d,h]=Object(c.useState)(!1),[j,b]=Object(c.useState)(!1),[g,O]=Object(c.useState)(!0),[m,p]=Object(c.useState)(!1),[_,f]=Object(c.useState)(null),[x,I]=Object(c.useState)(null),[T,C]=Object(c.useState)(null),[S,N]=yt(),[v,R]=Object(c.useState)({roomInfo:null,state:sr.NONE}),[A,w]=Object(c.useState)(null),k=Object(c.useRef)(null),D=Object(c.useCallback)((e=>{if(e.type===a.Pg.CREATED)return s(!1),void o(!1)}),[]);it(a.Pg.CREATED,D);const P=Object(c.useCallback)(((e,t)=>{o(!1),Ln(new a.Be(t,e)),b(!0)}),[]),U=Object(c.useCallback)((()=>{if(n)return k.current?(P(k.current.value,k.current.code),void(k.current=null)):void(A?P(A.data,A.code):x&&P("",x.code));p(!0)}),[n,A,x,P]),L=Object(c.useCallback)((e=>{const n=e.split("/");if(!(n.length<2))switch(n[1]){case"show":return s(!0),void p(!0);case"hide":return void s(!1);case"toggle":return t?void s(!1):(s(!0),void p(!0));case"toggle-room-info":return void u((e=>!e));case"toggle-room-link":return void h((e=>!e));case"goto":if(n.length<=2)return;if("home"===n[2]){if(S.homeRoomId<=0)return;ar(S.homeRoomId)}else{ar(parseInt(n[2]))}return;case"create":return s(!0),void o(!0);case"search":if(n.length>2){const e=n[2];let t="";n.length>3&&(t=n[3]),k.current={value:t,code:e},s(!0),p(!0)}return}}),[t,S]);return Object(c.useEffect)((()=>{const e={linkReceived:L,eventUrlPrefix:"navigator/"};return E(e),()=>y(e)}),[L]),Object(c.useEffect)((()=>{A&&b(!1)}),[A]),Object(c.useEffect)((()=>{t&&n&&m&&(U(),p(!1))}),[t,n,m,U]),Object(c.useEffect)((()=>{!n&&x&&r(!0)}),[n,x]),Object(c.useEffect)((()=>{t&&g&&(Ln(new a.ye),O(!1))}),[t,g]),Object(c.useEffect)((()=>{a.Od.addCallback(a.Cd.OPENROOM,(function(e){return Ln(new a.kb(e))}))}),[]),Object(Cr.jsxs)(Yu,{value:{categories:_,setCategories:f,topLevelContext:x,setTopLevelContext:I,topLevelContexts:T,setTopLevelContexts:C,navigatorData:S,setNavigatorData:N,doorData:v,setDoorData:R,searchResult:A,setSearchResult:w},children:[Object(Cr.jsx)(Qu,{}),t&&Object(Cr.jsxs)($r,{uniqueKey:"navigator",className:"nitro-navigator",children:[Object(Cr.jsx)(Wr,{headerText:$e(i?"navigator.createroom.title":"navigator.title"),onCloseClick:e=>s(!1)}),Object(Cr.jsxs)(Nc,{children:[T&&T.length>0&&T.map(((e,t)=>Object(Cr.jsx)(Sc,{isActive:x===e&&!i,onClick:t=>P("",e.code),children:$e("navigator.toplevelview."+e.code)},t))),Object(Cr.jsx)(Sc,{isActive:i,onClick:e=>o(!0),children:Object(Cr.jsx)(Lr.a,{icon:"plus"})})]}),Object(Cr.jsxs)(Hr,{position:"relative",children:[j&&Object(Cr.jsx)(Sr,{fit:!0,position:"absolute",className:"top-0 start-0 z-index-1 bg-muted opacity-0-5"}),!i&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(jd,{sendSearch:P}),Object(Cr.jsx)(rc,{overflow:"auto",children:A&&A.results.map(((e,t)=>Object(Cr.jsx)(hd,{searchResult:e},t)))})]}),i&&Object(Cr.jsx)(Zu,{})]})]}),Object(Cr.jsx)(Ju,{}),l&&Object(Cr.jsx)(ed,{onCloseClick:()=>u(!1)}),d&&Object(Cr.jsx)(td,{onCloseClick:()=>h(!1)}),Object(Cr.jsx)(od,{})]})},gd=/\n\r|\n|\r/gm,Od=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(""),[i,o]=Object(c.useState)(null),l=Object(c.useRef)(null),u=Object(c.useCallback)((async e=>{try{const t=await fetch(e);if(!t)return;const n=(await t.text()).split(gd),c=n.shift().split("|");r(c[0]),o((e=>c[1]&&2===c[1].split(";").length?{width:parseInt(c[1].split(";")[0]),height:parseInt(c[1].split(";")[1])}:null)),s(n.join(""))}catch(t){a.Oe.error(`Failed to fetch ${e}`)}}),[]),d=Object(c.useCallback)((e=>{const t=e.split("/");t.length<2||(t.shift(),u(N("habbopages.url")+t.join("/")))}),[u]);return Object(c.useEffect)((()=>{const e={linkReceived:d,eventUrlPrefix:"habbopages/"};return E(e),()=>y(e)}),[d]),Object(c.useEffect)((()=>{const e=e=>{if(!(e.target instanceof HTMLAnchorElement))return;e.preventDefault();const t=e.target.href;t&&t.length&&jr.openUrl(t)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[]),t?Object(Cr.jsxs)($r,{className:"nitropedia",theme:"primary-slim",style:i?{width:i.width,height:i.height}:{},children:[Object(Cr.jsx)(Wr,{headerText:n,onCloseClick:()=>s(null)}),Object(Cr.jsx)(Hr,{children:Object(Cr.jsx)(Sr,{fit:!0,innerRef:l,className:"text-black",dangerouslySetInnerHTML:{__html:t}})})]}):null},md=e=>{const[t,s]=Object(c.useState)(0),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(!0),l=Object(c.useCallback)((e=>{s(0),r(null)}),[]);Je(a.ob,l);const u=Object(c.useCallback)((e=>{s(0),r(null)}),[]);Je(a.og,u);const d=Object(c.useCallback)((e=>{const t=e.getParser();t.roomEnter&&(t.data.habboGroupId>0?(s(t.data.habboGroupId),Ln(new a.Nc(t.data.habboGroupId,!1))):(s(0),r(null)))}),[]);Je(a.hc,d);const h=Object(c.useCallback)((e=>{const c=e.getParser();!n||c.groupId!==n.id&&c.groupId!==t||(s(0),r(null))}),[t,n]);Je(a.zd,h);const j=Object(c.useCallback)((e=>{const s=e.getParser();s.id===t&&r(s)}),[t]);Je(a.Oc,j);const b=n&&n.ownerName===K().userName;return n?Object(Cr.jsx)(Sr,{className:"nitro-notification-bubble rounded",children:Object(Cr.jsxs)(rc,{children:[Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"between",pointer:!0,onClick:e=>o((e=>!e)),children:[Object(Cr.jsx)(Ac,{variant:"white",children:$e("group.homeroominfo.title")}),Object(Cr.jsx)(Lr.a,{icon:i?"chevron-up":"chevron-down"})]}),i&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(yr,{pointer:!0,alignItems:"center",gap:2,onClick:e=>$n(n.id),children:[Object(Cr.jsx)(Sr,{className:"group-badge",children:Object(Cr.jsx)(Zr,{badgeCode:n.badge,isGroup:!0})}),Object(Cr.jsx)(Ac,{variant:"white",children:n.title})]}),(n.type!==rl.PRIVATE||b)&&Object(Cr.jsx)(wr,{fullWidth:!0,variant:"success",disabled:n.membershipType===nl.REQUEST_PENDING,onClick:()=>{if(b)return Xn(n.id);n.type===rl.PRIVATE&&n.membershipType===nl.NOT_MEMBER||(n.membershipType!==nl.MEMBER?Zn(n.id):jr.confirm($e("group.leaveconfirm.desc"),(()=>{Ln(new a.Wc(n.id,K().userId))}),null))},children:$e(b?"group.manage":n.type===rl.PRIVATE?"":n.membershipType===nl.MEMBER?"group.leave":n.membershipType===nl.NOT_MEMBER&&n.type===rl.REGULAR?"group.join":n.membershipType===nl.REQUEST_PENDING?"group.membershippending":n.membershipType===nl.NOT_MEMBER&&n.type===rl.EXCLUSIVE?"group.requestmembership":void 0)})]})]})}):null},pd=e=>{const t=Object(c.useCallback)((e=>{const t=e.getParser();if(t.userId!==K().userId)return;const s=$e("notifications.text.respect.1"),n=$e("notifications.text.respect.2",["count"],[t.respectsReceived.toString()]);jr.showSingleBubble(s,ur.RESPECT),jr.showSingleBubble(n,ur.RESPECT)}),[]);Je(a.Of,t);const s=Object(c.useCallback)((e=>{const t=e.getParser();jr.simpleAlert(t.message.replace(/\\r/g,"\r"),null,null,$e("notifications.broadcast.title"))}),[]);Je(a.wd,s);const n=Object(c.useCallback)((e=>{const t=e.getParser(),s=$e("achievements.levelup.desc"),n=Ye(t.data.badgeCode),r=K().getBadgeUrl(t.data.badgeCode),c="questengine/achievements/"+t.data.category;jr.showSingleBubble(s+" "+n,ur.ACHIEVEMENT,r,c)}),[]);Je(a.c,n);const r=Object(c.useCallback)((e=>{const t=e.getParser();jr.showClubGiftNotification(t.numGifts)}),[]);Je(a.cb,r);const i=Object(c.useCallback)((e=>{const t=e.getParser();jr.handleModeratorMessage(t.message,t.url)}),[]);Je(a.pe,i);const o=Object(c.useCallback)((e=>{const t=e.getParser();if(t.amountChanged<=0||5!==t.type)return;const s=N("currency.asset.icon.url","").replace("%type%",t.type.toString());jr.showSingleBubble($e("notifications.text.loyalty.received",["AMOUNT"],[t.amountChanged.toString()]),ur.INFO,s)}),[]);Je(a.f,o);const l=Object(c.useCallback)((e=>{const t=e.getParser();jr.handleUserBannedMessage(t.message)}),[]);Je(a.ni,l);const u=Object(c.useCallback)((e=>{const t=e.getParser();jr.handleHotelClosedMessage(t.openHour,t.openMinute,t.userThrowOutAtClose)}),[]);Je(a.Ed,u);const d=Object(c.useCallback)((e=>{const t=e.getParser(),s=$e("notifications.text."+(t.boughtAsGift?"petbought":"petreceived"));let n=null;const r=w().getRoomObjectPetImage(t.pet.typeId,t.pet.paletteId,parseInt(t.pet.color,16),new a.Li(135),64,null,!0);r&&(n=r.getImage().src),jr.showSingleBubble(s,ur.PETLEVEL,n)}),[]);Je(a.jf,d);const h=Object(c.useCallback)((e=>{e.getParser();jr.showModerationDisclaimer()}),[]);Je(a.ng,h);const j=Object(c.useCallback)((e=>{const t=e.getParser();jr.handleMOTD(t.messages)}),[]);Je(a.Td,j);const b=Object(c.useCallback)((e=>{const t=e.getParser();let s=null;const n=w().getRoomObjectPetImage(t.figureData.typeId,t.figureData.paletteId,parseInt(t.figureData.color,16),new a.Li(135),64,null,!0);n&&(s=n.getImage().src),jr.showSingleBubble($e("notifications.text.petlevel",["pet_name","level"],[t.petName,t.level.toString()]),ur.PETLEVEL,s)}),[]);Je(a.if,b);const g=Object(c.useCallback)((e=>{const t=e.getParser();jr.BUBBLES_DISABLED=!t.enabled}),[]);Je(a.Gd,g);const O=Object(c.useCallback)((e=>{const t=e.getParser();if(!t.products||!t.products.length)return;const s=t.products[0];s&&jr.showSingleBubble($e("notifications.text.club_gift.selected"),ur.INFO,bs.getProductImageUrl(s.productType,s.furniClassId,s.extraParam))}),[]);Je(a.db,O);const m=Object(c.useCallback)((e=>{const t=e.getParser();jr.handleHotelMaintenanceMessage(t.minutesUntilMaintenance,t.duration)}),[]);Je(a.Ud,m);const p=Object(c.useCallback)((e=>{const t=e.getParser();jr.handleModeratorCaution(t.message,t.url)}),[]);Je(a.ne,p);const _=Object(c.useCallback)((e=>{const t=e.getParser();jr.showNotification(t.type,t.parameters)}),[]);Je(a.Xe,_);const E=Object(c.useCallback)((e=>{const t=e.getParser();jr.handleHotelClosingMessage(t.openMinute)}),[]);Je(a.Fd,E);const f=Object(c.useCallback)((e=>{const t=e.getParser();jr.handleLoginFailedHotelClosedMessage(t.openHour,t.openMinute)}),[]);return Je(a.Dd,f),null},_d=e=>{const{title:t="Nitro",close:s=null,...n}=e;return Object(Cr.jsx)(jc,{title:t,close:s,...n,children:Object(Cr.jsxs)(Rr,{children:[Object(Cr.jsx)(rc,{center:!0,size:5,children:Object(Cr.jsx)("object",{data:"https://assets.nitrodev.co/logos/nitro-n-dark.svg",width:"100",height:"100",children:"\xa0"})}),Object(Cr.jsxs)(rc,{size:7,children:[Object(Cr.jsxs)(rc,{alignItems:"center",gap:0,children:[Object(Cr.jsx)(Ac,{bold:!0,fontSize:4,children:"Nitro React"}),Object(Cr.jsxs)(Ac,{children:["v","2.0.0"]})]}),Object(Cr.jsxs)(rc,{alignItems:"center",children:[Object(Cr.jsxs)(Ac,{children:[Object(Cr.jsx)("b",{children:"Renderer:"})," v",a.We.RENDERER_VERSION]}),Object(Cr.jsxs)(rc,{fullWidth:!0,gap:1,children:[Object(Cr.jsx)(wr,{fullWidth:!0,variant:"success",onClick:e=>window.open("https://discord.nitrodev.co"),children:"Discord"}),Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(wr,{fullWidth:!0,onClick:e=>window.open("https://git.krews.org/nitro/nitro-react"),children:"Git"}),Object(Cr.jsx)(wr,{fullWidth:!0,onClick:e=>window.open("https://git.krews.org/nitro/nitro-react/-/issues"),children:"Bug Report"})]})]})]})]})]})})},Ed=e=>{const{item:t=null,title:s=e.item&&e.item.title||"",close:n=null,...r}=e,[i,a]=Object(c.useState)(!1),o=Object(c.useCallback)((()=>{jr.openUrl(t.clickUrl),n()}),[t,n]),l=t.alertType===or.DEFAULT;return Object(Cr.jsxs)(jc,{title:s,close:n,...r,type:l?or.DEFAULT:t.alertType,children:[Object(Cr.jsxs)(yr,{fullHeight:!0,overflow:"auto",gap:l||t.imageUrl&&!i?2:0,children:[l&&!t.imageUrl&&Object(Cr.jsx)(Sr,{className:"notification-frank flex-shrink-0"}),t.imageUrl&&!i&&Object(Cr.jsx)("img",{src:t.imageUrl,alt:t.title,onError:()=>{a(!0)},className:"align-self-baseline"}),Object(Cr.jsxs)(Sr,{classNames:["notification-text overflow-y-auto d-flex flex-column w-100",t.clickUrl&&!l?"justify-content-center":""],children:[t.messages.length>0&&t.messages.map(((e,t)=>{const s=e.replace(/\r\n|\r|\n/g,"<br />");return Object(Cr.jsx)(Sr,{dangerouslySetInnerHTML:{__html:s}},t)})),t.clickUrl&&t.clickUrl.length>0&&t.imageUrl&&!i&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)("hr",{className:"my-2 w-100"}),Object(Cr.jsx)(wr,{onClick:o,className:"align-self-center px-3",children:$e(t.clickUrlText)})]})]})]}),(!t.imageUrl||t.imageUrl&&i)&&Object(Cr.jsx)(Cr.Fragment,{children:Object(Cr.jsxs)(rc,{alignItems:"center",center:!0,gap:0,children:[Object(Cr.jsx)("hr",{className:"my-2 w-100"}),!t.clickUrl&&Object(Cr.jsx)(wr,{onClick:n,children:$e("generic.close")}),t.clickUrl&&t.clickUrl.length>0&&Object(Cr.jsx)(wr,{onClick:o,children:$e(t.clickUrlText)})]})})]})},fd=e=>{const{item:t=null,title:s=e.item&&e.item.title||"",close:n=null,...r}=e,[i,a]=Object(c.useState)(""),[o,l]=Object(c.useState)([]),u=Object(c.useCallback)((()=>{jr.openUrl(t.clickUrl),n()}),[t,n]);Object(c.useEffect)((()=>{l(JSON.parse(t.messages[0]))}),[t]);const d=Object(c.useCallback)((e=>{let s=JSON.parse(t.messages[0]);l(s.filter((t=>t.includes(e)))),a(e)}),[t]),h=t.clickUrl&&t.clickUrl.startsWith("event:");return Object(Cr.jsxs)(jc,{title:s,close:n,...r,children:[Object(Cr.jsx)(yr,{fullWidth:!0,alignItems:"center",position:"relative",children:Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:$e("generic.search"),value:i,onChange:e=>d(e.target.value)})}),Object(Cr.jsx)(rc,{fullHeight:!0,className:"py-1",overflow:"hidden",children:Object(Cr.jsx)(Ar,{gap:1,columnCount:1,children:o&&o.map(((e,t)=>Object(Cr.jsx)("span",{children:e},t)))})}),Object(Cr.jsx)("hr",{className:"my-2"}),Object(Cr.jsxs)(rc,{alignItems:"center",center:!0,gap:1,children:[!h&&!t.clickUrl&&Object(Cr.jsx)(wr,{onClick:n,children:$e("generic.close")}),t.clickUrl&&t.clickUrl.length>0&&Object(Cr.jsx)(wr,{onClick:u,children:$e(t.clickUrlText)})]})]})},xd=(e,t)=>{if(!e)return null;const s={key:e.id,item:e,close:t};switch(e.alertType){case or.NITRO:return Object(Cr.jsx)(_d,{...s});case or.SEARCH:return Object(Cr.jsx)(fd,{...s});default:return Object(Cr.jsx)(Ed,{...s})}},Id=e=>{const{item:t=null,close:s=null,...n}=e;return Object(Cr.jsxs)(pc,{fadesOut:!1,className:"flex-column club-gift",close:s,...n,children:[Object(Cr.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-2",children:[Object(Cr.jsx)(ec,{type:"hc",className:"flex-shrink-0"}),Object(Cr.jsx)("span",{className:"ms-1",children:$e("notifications.text.club_gift")})]}),Object(Cr.jsxs)("div",{className:"d-flex align-items-center justify-content-end gap-2",children:[Object(Cr.jsx)("button",{type:"button",className:"btn btn-success w-100 btn-sm",onClick:()=>jr.openUrl(t.linkUrl),children:$e("notifications.button.show_gift_list")}),Object(Cr.jsx)("span",{className:"text-decoration-underline cursor-pointer text-nowrap",onClick:s,children:$e("notifications.button.later")})]})]})},Td=e=>{const{item:t=null,close:s=null,...n}=e,r=t.message.replace(/\r\n|\r|\n/g,"<br />");return Object(Cr.jsxs)(pc,{close:s,gap:2,alignItems:"center",onClick:e=>t.linkUrl&&t.linkUrl.length&&jr.openUrl(t.linkUrl),...n,children:[Object(Cr.jsx)(yr,{center:!0,className:"bubble-image-container",children:t.iconUrl&&t.iconUrl.length&&Object(Cr.jsx)("img",{className:"no-select",src:t.iconUrl,alt:""})}),Object(Cr.jsx)(Ac,{wrap:!0,variant:"white",dangerouslySetInnerHTML:{__html:r}})]})},Cd=(e,t)=>{if(!e)return null;const s={key:e.id,item:e,close:t};return e.notificationType===ur.CLUBGIFT?Object(Cr.jsx)(Id,{...s}):Object(Cr.jsx)(Td,{...s})},Sd=e=>{const{item:t=null,close:s=null,...n}=e,{message:r=null,onConfirm:c=null,onCancel:i=null,confirmText:a=null,cancelText:o=null,title:l=null}=t;return Object(Cr.jsxs)(jc,{title:l,close:s,...n,type:or.ALERT,children:[Object(Cr.jsx)(yr,{grow:!0,center:!0,children:Object(Cr.jsx)(Ac,{children:r})}),Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(wr,{fullWidth:!0,variant:"danger",onClick:()=>{i&&i(),s()},children:o}),Object(Cr.jsx)(wr,{fullWidth:!0,onClick:()=>{c&&c(),s()},children:a})]})]})},Nd=(e,t)=>{if(!e)return null;const s={key:e.id,item:e,close:t};return e.confirmType,Object(Cr.jsx)(Sd,{...s})},vd=e=>{const[t,s]=Object(c.useState)([]),[n,r]=Object(c.useState)([]),[i,a]=Object(c.useState)([]),o=Object(c.useCallback)((e=>{const t=new lr(e.messages,e.alertType,e.clickUrl,e.clickUrlText,e.title,e.imageUrl);s((e=>[t,...e]))}),[]);lt(Sn.ALERT,o);const l=Object(c.useCallback)((e=>{const t=new dr(e.message,e.notificationType,e.imageUrl,e.linkUrl);r((e=>[t,...e]))}),[]);lt(Nn.NEW_BUBBLE,l);const u=Object(c.useCallback)((e=>{const t=new hr(e.type,e.message,e.onConfirm,e.onCancel,e.confirmText,e.cancelText,e.title);a((e=>[t,...e]))}),[]);lt(An.CONFIRM,u);const d=Object(c.useCallback)((e=>{s((t=>{const s=[...t],n=s.findIndex((t=>e===t));return n>=0&&s.splice(n,1),s}))}),[]),h=Object(c.useCallback)((e=>{r((t=>{const s=[...t],n=s.findIndex((t=>e===t));return n>=0&&s.splice(n,1),s}))}),[]),j=Object(c.useCallback)((e=>{a((t=>{const s=[...t],n=s.findIndex((t=>e===t));return n>=0&&s.splice(n,1),s}))}),[]),b=Object(c.useMemo)((()=>{if(!t||!t.length)return null;const e=[];for(const s of t){const t=xd(s,(()=>d(s)));e.push(t)}return e}),[t,d]),g=Object(c.useMemo)((()=>{if(!n||!n.length)return null;const e=[];for(const t of n){const s=Cd(t,(()=>h(t)));t.notificationType!==ur.CLUBGIFT?e.push(s):e.unshift(s)}return e}),[n,h]),O=Object(c.useMemo)((()=>{if(!i||!i.length)return null;const e=[];for(const t of i){const s=Nd(t,(()=>j(t)));e.push(s)}return e}),[i,j]);return Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(pd,{}),Object(Cr.jsx)(rc,{gap:1,children:g}),O,b]})};var Rd=s(132);const Ad=e=>{const{type:t=-1,amount:s=-1,short:n=!1}=e,r=Object(c.useMemo)((()=>Object(Cr.jsxs)(yr,{justifyContent:"end",pointer:!0,gap:1,className:"nitro-purse-button rounded",children:[Object(Cr.jsx)(Ac,{truncate:!0,textEnd:!0,variant:"white",grow:!0,children:n?Qe(s):Ke(s)}),Object(Cr.jsx)(ec,{type:t})]})),[s,n,t]);return n?Object(Cr.jsx)(Sl.a,{placement:"left",overlay:Object(Cr.jsx)(Rd.a,{id:`tooltip-${t}`,children:Ke(s)}),children:r}):r},yd=e=>{const{type:t=-1,amount:s=-1}=e;return Object(Cr.jsxs)(yr,{fullWidth:!0,justifyContent:"between",className:"nitro-purse-seasonal-currency p-2 rounded",children:[Object(Cr.jsx)(Ac,{variant:"white",children:$e(`purse.seasonal.currency.${t}`)}),Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(Ac,{variant:"white",children:Ke(s)}),Object(Cr.jsx)(ec,{type:t})]})]})},wd=e=>{const{purse:t=null,hcDisabled:s=!1}=kt(),n=Object(c.useMemo)((()=>N("system.currency.types",[])),[]),r=Object(c.useMemo)((()=>N("currency.display.number.short",!1)),[]),i=Object(c.useMemo)((()=>{if(!t)return null;const e=31*t.clubPeriods+t.clubDays,s=t.minutesUntilExpiration;return t.clubLevel===a.xd.NO_CLUB?$e("purse.clubdays.zero.amount.text"):s>-1&&s<1440?a.Fb.shortFormat(60*s):a.Fb.shortFormat(86400*e)}),[t]),o=Object(c.useCallback)((function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t||!t.activityPoints||!t.activityPoints.size)return null;const i=Array.from(t.activityPoints.keys()).filter((e=>n.indexOf(e)>=0));let a=0;for(;a<e;)i.shift(),a++;a=0;const o=[];for(const n of i){if(s>-1&&a===s)break;c?o.push(Object(Cr.jsx)(yd,{type:n,amount:t.activityPoints.get(n)},n)):o.push(Object(Cr.jsx)(Ad,{type:n,amount:t.activityPoints.get(n),short:r},n)),a++}return o}),[t,n,r]);return t?Object(Cr.jsxs)(rc,{alignItems:"end",className:"nitro-purse-container",gap:1,children:[Object(Cr.jsx)(yr,{className:"nitro-purse rounded-bottom p-1",children:Object(Cr.jsxs)(Rr,{fullWidth:!0,gap:1,children:[Object(Cr.jsxs)(rc,{justifyContent:"center",size:s?10:6,gap:0,children:[Object(Cr.jsx)(Ad,{type:-1,amount:t.credits,short:r}),o(0,2)]}),!s&&Object(Cr.jsxs)(rc,{center:!0,pointer:!0,size:4,gap:1,className:"nitro-purse-subscription rounded",onClick:e=>C("habboUI/open/hccenter"),children:[Object(Cr.jsx)(ec,{type:"hc"}),Object(Cr.jsx)(Ac,{variant:"white",children:i})]}),Object(Cr.jsxs)(rc,{justifyContent:"center",size:2,gap:0,children:[Object(Cr.jsx)(yr,{center:!0,pointer:!0,fullHeight:!0,className:"nitro-purse-button p-1 rounded",onClick:e=>C("help/show"),children:Object(Cr.jsx)("i",{className:"icon icon-help"})}),Object(Cr.jsx)(yr,{center:!0,pointer:!0,fullHeight:!0,className:"nitro-purse-button p-1 rounded",onClick:e=>C("user-settings/toggle"),children:Object(Cr.jsx)("i",{className:"icon icon-cog"})})]})]})}),o(2,-1,!0)]}):null},kd=e=>Object(Cr.jsx)("div",{className:"nitro-right-side",children:Object(Cr.jsxs)(rc,{position:"relative",gap:1,children:[Object(Cr.jsx)(wd,{}),Object(Cr.jsx)(md,{}),Object(Cr.jsx)(vd,{})]})}),Dd=Object(c.createContext)({roomSession:null,eventDispatcher:null,widgetHandler:null}),Pd=e=>Object(Cr.jsx)(Dd.Provider,{value:e.value,children:e.children}),Ud=()=>Object(c.useContext)(Dd),Ld=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(0),{roomSession:l=null,widgetHandler:u=null,eventDispatcher:d=null}=Ud(),h=Object(c.useCallback)((function(e,s,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!t)return;const c=a.eb.hslToRGB(((255&e)<<16)+((255&s)<<8)+(255&n));r&&o(c),e||s||n?(t.tint=c,t.visible=!0):t.visible=!1}),[t]),j=Object(c.useCallback)((e=>{if(!n)return;const t=e>>16&255,s=e>>8&255,r=255&e;n.red=t/255,n.green=s/255,n.blue=r/255}),[n]),b=Object(c.useCallback)((e=>{if(!a.sg.isRoomPreviewerId(e.roomId))switch(e.type){case a.Ag.ROOM_BACKGROUND_COLOR:{const t=e;return void(t.enable?h(t.hue,t.saturation,t.lightness,!0):h(0,0,0,!0))}case a.Pf.ROOM_COLOR:{const t=e;let s=0,n=255;return t.bgOnly||(s=t.color,n=t.brightness),void j(a.eb.hslToRGB((16776960&a.eb.rgbToHSL(s))+n))}case a.fg.ROOM_COLOR:u.processEvent(e)}}),[u,h,j]);ct(a.Ag.ROOM_BACKGROUND_COLOR,b),ct(a.Pf.ROOM_COLOR,b),ct(a.fg.ROOM_COLOR,b);const g=Object(c.useCallback)((e=>{switch(e.type){case pe.PREVIEW:return void h(e.hue,e.saturation,e.lightness);case pe.CLEAR_PREVIEW:if(!t)return;return t.tint=i,void(t.visible=!0)}}),[t,i,h]);return et(pe.PREVIEW,d,g),et(pe.CLEAR_PREVIEW,d,g),Object(c.useEffect)((()=>{if(!l)return;const e=w().getRoomInstanceRenderingCanvas(w().activeRoomId,1);if(!e)return;const t=new a.Se(a.Te.WHITE),n=new a.He,c=e.master;t.visible=!1,t.width=_().width,t.height=_().height,c.addChildAt(t,0),c.filters=[n],s(t),r(n);const i=e=>{t.width=_().width,t.height=_().height};return window.addEventListener("resize",i),()=>{s((e=>(e&&e.destroy(),null))),r((e=>(e&&e.destroy(),null))),o(0),window.removeEventListener("resize",i)}}),[l]),null},Md=e=>{const{justifyContent:t="center",alignItems:s="center",classNames:n=[],...r}=e,i=Object(c.useMemo)((()=>{const e=["menu-header","p-1"];return n.length&&e.push(...n),e}),[n]);return Object(Cr.jsx)(yr,{justifyContent:t,alignItems:s,classNames:i,...r})};class Fd{}Fd.GENERIC_SKILL=0,Fd.DRESS_UP=1,Fd.SETUP_CHAT=2,Fd.RANDOM_WALK=3,Fd.DANCE=4,Fd.CHANGE_BOT_NAME=5,Fd.SERVE_BEVERAGE=6,Fd.INCLIENT_LINK=7,Fd.NUX_PROCEED=8,Fd.CHANGE_BOT_MOTTO=9,Fd.NUX_TAKE_TOUR=10,Fd.NO_PICK_UP=12,Fd.NAVIGATOR_SEARCH=14,Fd.DONATE_TO_USER=24,Fd.DONATE_TO_ALL=25;const Hd=e=>{const{chatEvent:t=null,close:s=null}=e,[n,r]=Object(c.useState)("${bot.skill.chatter.configuration.text.placeholder}"===t.chat?"":t.chat),[i,o]=Object(c.useState)(t.automaticChat),[l,u]=Object(c.useState)(t.mixSentences),[d,h]=Object(c.useState)(t.chatDelay),j=Object(c.useMemo)((()=>ie(ee().roomId,t.objectId,t.category,1)),[t]);return Object(Cr.jsx)(Qr,{windowPosition:zr.NOTHING,handleSelector:".drag-handler",dragStyle:{top:j.y,left:j.x},children:Object(Cr.jsxs)(Sr,{className:"nitro-context-menu bot-chat",children:[Object(Cr.jsx)(Md,{className:"drag-handler",children:$e("bot.skill.chatter.configuration.title")}),Object(Cr.jsxs)(rc,{className:"p-1",children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{variant:"white",children:$e("bot.skill.chatter.configuration.chat.text")}),Object(Cr.jsx)("textarea",{className:"form-control form-control-sm",placeholder:$e("bot.skill.chatter.configuration.text.placeholder"),value:n,rows:7,onChange:e=>r(e.target.value)})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{gap:1,alignItems:"center",justifyContent:"between",children:[Object(Cr.jsx)(Ac,{fullWidth:!0,variant:"white",children:$e("bot.skill.chatter.configuration.automatic.chat")}),Object(Cr.jsx)("input",{type:"checkbox",className:"form-check-input",checked:i,onChange:e=>o(e.target.checked)})]}),Object(Cr.jsxs)(yr,{gap:1,alignItems:"center",justifyContent:"between",children:[Object(Cr.jsx)(Ac,{fullWidth:!0,variant:"white",children:$e("bot.skill.chatter.configuration.markov")}),Object(Cr.jsx)("input",{type:"checkbox",className:"form-check-input",checked:l,onChange:e=>u(e.target.checked)})]}),Object(Cr.jsxs)(yr,{gap:1,alignItems:"center",justifyContent:"between",children:[Object(Cr.jsx)(Ac,{fullWidth:!0,variant:"white",children:$e("bot.skill.chatter.configuration.chat.delay")}),Object(Cr.jsx)("input",{type:"number",className:"form-control form-control-sm",value:d,onChange:e=>h(e.target.valueAsNumber)})]})]}),Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(Cr.jsx)(wr,{fullWidth:!0,variant:"primary",onClick:s,children:$e("cancel")}),Object(Cr.jsx)(wr,{fullWidth:!0,variant:"success",onClick:()=>{const e=n.replace(/;#;/g," ").replace(/\r\n|\r|\n/g,"\r")+";#;"+i+";#;"+d+";#;"+l;Ln(new a.D(t.botId,Fd.SETUP_CHAT,e)),s()},children:$e("save")})]})]})]})})},Bd=e=>{const{item:t=null,close:s=null}=e,[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),{roomSession:d=null,widgetHandler:h=null}=Ud(),j=Object(c.useCallback)((()=>{i&&w().selectRoomObject(d.roomId,i.roomIndex,a.zg.UNIT)}),[d,i]),b=Object(c.useCallback)((()=>{h.processWidgetMessage(new Ls(Ls.PET_PRODUCT,t.requestRoomObjectId,i.webID)),s()}),[h,t,i,s]),g=Object(c.useMemo)((()=>{if(!i||!l)return null;const e=new a.gf(i.figure),t=l.customParams.split(" "),s=parseInt(t[0]);switch(l.specialType){case Bt.PET_SHAMPOO:{if(t.length<2)return null;const n=w().getPetColorResult(s,e.paletteId),r=w().getPetColorResultsForTag(s,t[1]);let c=-1;for(const e of r)if(e.breed===n.breed){c=parseInt(e.id);break}return Object(Cr.jsx)(_c,{typeId:e.typeId,paletteId:c,color:e.color,customParts:e.customParts,direction:2})}case Bt.PET_CUSTOM_PART:{if(t.length<4)return null;const s=[],n=t[1].split(",").map((e=>parseInt(e))),r=t[2].split(",").map((e=>parseInt(e))),c=t[3].split(",").map((e=>parseInt(e)));let i=0;for(;i<n.length;){const t=n[i],o=e.getCustomPart(t);let l=c[i];null!=o&&(l=o.paletteId),s.push(new a.ff(t,r[i],l)),i++}return Object(Cr.jsx)(_c,{typeId:e.typeId,paletteId:e.paletteId,color:e.color,customParts:s,direction:2})}case Bt.PET_CUSTOM_PART_SHAMPOO:{if(t.length<3)return null;const s=[],n=t[1].split(",").map((e=>parseInt(e))),r=t[2].split(",").map((e=>parseInt(e)));let c=0;for(;c<n.length;){const t=n[c],i=e.getCustomPart(t);let o=-1;null!=i&&(o=i.partId),s.push(new a.ff(n[c],o,r[c])),c++}return Object(Cr.jsx)(_c,{typeId:e.typeId,paletteId:e.paletteId,color:e.color,customParts:s,direction:2})}case Bt.PET_SADDLE:{if(t.length<4)return null;const s=[],n=t[1].split(",").map((e=>parseInt(e))),r=t[2].split(",").map((e=>parseInt(e))),c=t[3].split(",").map((e=>parseInt(e)));let i=0;for(;i<n.length;)s.push(new a.ff(n[i],r[i],c[i])),i++;for(const t of e.customParts)-1===n.indexOf(t.layerId)&&s.push(t);return Object(Cr.jsx)(_c,{typeId:e.typeId,paletteId:e.paletteId,color:e.color,customParts:s,direction:2})}case Bt.MONSTERPLANT_REBREED:case Bt.MONSTERPLANT_REVIVAL:case Bt.MONSTERPLANT_FERTILIZE:{let t="rip";const s=w().getRoomObject(d.roomId,i.roomIndex,a.zg.UNIT);if(s&&(t=s.model.getValue(a.Fg.FIGURE_POSTURE),"rip"===t)){const e=i.petLevel;t=e<7?`grw${e}`:"std"}return Object(Cr.jsx)(_c,{typeId:e.typeId,paletteId:e.paletteId,color:e.color,customParts:e.customParts,posture:t,direction:2})}}}),[i,l,d]);return Object(c.useEffect)((()=>{const e=d.userDataManager.getUserDataByIndex(t.id);o(e);const s=X(d.roomId,t.requestRoomObjectId,a.zg.FLOOR);if(!s)return;u(s);let n=-1;switch(s.specialType){case Bt.PET_SHAMPOO:n=0;break;case Bt.PET_CUSTOM_PART:n=1;break;case Bt.PET_CUSTOM_PART_SHAMPOO:n=2;break;case Bt.PET_SADDLE:n=3;break;case Bt.MONSTERPLANT_REVIVAL:n=4;break;case Bt.MONSTERPLANT_REBREED:n=5;break;case Bt.MONSTERPLANT_FERTILIZE:n=6}r(n)}),[d,t]),i?Object(Cr.jsxs)($r,{className:"nitro-use-product-confirmation",children:[Object(Cr.jsx)(Wr,{headerText:$e("useproduct.widget.title",["name"],[i.name]),onCloseClick:s}),Object(Cr.jsx)(Hr,{center:!0,children:Object(Cr.jsxs)(yr,{gap:2,overflow:"hidden",children:[Object(Cr.jsx)(rc,{children:Object(Cr.jsx)(Sr,{pointer:!0,className:"product-preview",onClick:j,children:g})}),Object(Cr.jsxs)(rc,{justifyContent:"between",overflow:"auto",children:[Object(Cr.jsxs)(rc,{gap:2,children:[0===n&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Ac,{children:$e("useproduct.widget.text.shampoo",["productName"],[l.name])}),Object(Cr.jsx)(Ac,{children:$e("useproduct.widget.info.shampoo")})]}),1===n&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Ac,{children:$e("useproduct.widget.text.custompart",["productName"],[l.name])}),Object(Cr.jsx)(Ac,{children:$e("useproduct.widget.info.custompart")})]}),2===n&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Ac,{children:$e("useproduct.widget.text.custompartshampoo",["productName"],[l.name])}),Object(Cr.jsx)(Ac,{children:$e("useproduct.widget.info.custompartshampoo")})]}),3===n&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Ac,{children:$e("useproduct.widget.text.saddle",["productName"],[l.name])}),Object(Cr.jsx)(Ac,{children:$e("useproduct.widget.info.saddle")})]}),4===n&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Ac,{children:$e("useproduct.widget.text.revive_monsterplant",["productName"],[l.name])}),Object(Cr.jsx)(Ac,{children:$e("useproduct.widget.info.revive_monsterplant")})]}),5===n&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Ac,{children:$e("useproduct.widget.text.rebreed_monsterplant",["productName"],[l.name])}),Object(Cr.jsx)(Ac,{children:$e("useproduct.widget.info.rebreed_monsterplant")})]}),6===n&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Ac,{children:$e("useproduct.widget.text.fertilize_monsterplant",["productName"],[l.name])}),Object(Cr.jsx)(Ac,{children:$e("useproduct.widget.info.fertilize_monsterplant")})]})]}),Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"between",children:[Object(Cr.jsx)(wr,{variant:"danger",onClick:s,children:$e("useproduct.widget.cancel")}),Object(Cr.jsx)(wr,{variant:"success",onClick:b,children:$e("useproduct.widget.use")})]})]})]})})]}):null},Gd=e=>{const{disabled:t=!1,fullWidth:s=!0,justifyContent:n="center",alignItems:r="center",classNames:i=[],onClick:a=null,...o}=e,l=Object(c.useMemo)((()=>{const e=["menu-item","list-item"];return t&&e.push("disabled"),i.length&&e.push(...i),e}),[t,i]);return Object(Cr.jsx)(yr,{fullWidth:s,justifyContent:n,alignItems:r,classNames:l,onClick:e=>{t||a&&a(e)},...o})},Wd=10,Vd=e=>{const{objectId:t=-1,category:s=-1,userType:n=-1,fades:r=!1,close:i=null,position:o="absolute",classNames:l=[],style:u={},...d}=e,[h,j]=Object(c.useState)({x:null,y:null}),[b,g]=Object(c.useState)(null),[O,m]=Object(c.useState)(-1e6),[p,E]=Object(c.useState)(1),[f,x]=Object(c.useState)(!1),[I,T]=Object(c.useState)(0),[C,S]=Object(c.useState)(!1),N=Object(c.useRef)(),v=Object(c.useCallback)((e=>{let t=-N.current.offsetHeight;return n>-1&&(n===a.Dg.USER||n===a.Dg.BOT||n===a.Dg.RENTABLE_BOT)?t+=e.height>50?15:0:t-=14,t}),[n]),R=Object(c.useCallback)((e=>{let t=e,s=1;if(f){if(T((e=>(t+=e,t))),s=1*(1-t/75),s<=0)return i(),!1;E(s)}return!0}),[f,i]),y=Object(c.useCallback)(((e,t)=>{if(!e||!t||!b)return;const s=v(e);b.addValue(t.y-e.top);let n=b.getMax();n<O-3&&(n=O-3);const r=t.y-n;let c=~~(t.x-N.current.offsetWidth/2),i=~~(r+s);const a=_().width-N.current.offsetWidth-Wd,o=_().height-N.current.offsetHeight-Wd;c<Wd?c=Wd:c>a&&(c=a),i<Wd?i=Wd:i>o&&(i=o),m(n),j({x:c,y:i})}),[b,O,v]),w=Object(c.useCallback)((e=>{if(!N.current||!R(e))return;const n=ie(ee().roomId,t,s),r=ae(ee().roomId,t,s);y(n,r)}),[t,s,R,y]),k=Object(c.useMemo)((()=>{const e=["nitro-context-menu"];return e.push(null!==h.x?"visible":"invisible"),l.length&&e.push(...l),e}),[h,l]),D=Object(c.useMemo)((()=>{let e={};return e.left=h.x||0,e.top=h.y||0,e.opacity=p,Object.keys(u).length&&(e={...e,...u}),e}),[h,p,u]);return Object(c.useEffect)((()=>{g(new a.vb(25)),m(-1e6)}),[]),Object(c.useEffect)((()=>{let e=!1;return C||(e=!0,A().add(w)),()=>{e&&A().remove(w)}}),[C,w]),Object(c.useEffect)((()=>{if(!r)return;const e=setTimeout((()=>x(!0)),3e3);return()=>clearTimeout(e)}),[r]),Object(Cr.jsx)(Sr,{innerRef:N,position:o,classNames:k,style:D,onMouseOver:e=>S(!0),onMouseOut:e=>S(!1),...d})},qd=e=>{const{item:t=null,updateConfirmingProduct:s=null,close:n=null}=e,[r,i]=Object(c.useState)(0),{roomSession:o=null}=Ud();Object(c.useEffect)((()=>{if(!t)return;const e=X(o.roomId,t.requestRoomObjectId,a.zg.FLOOR);if(!e)return;let s=0;switch(e.specialType){case Bt.PET_SHAMPOO:s=1;break;case Bt.PET_CUSTOM_PART:s=2;break;case Bt.PET_CUSTOM_PART_SHAMPOO:s=3;break;case Bt.PET_SADDLE:s=4;break;case Bt.MONSTERPLANT_REVIVAL:s=5;break;case Bt.MONSTERPLANT_REBREED:s=6;break;case Bt.MONSTERPLANT_FERTILIZE:s=7}i(s)}),[o,t]);const l=Object(c.useCallback)((e=>{if(e)switch(e){case"use_product":case"use_product_shampoo":case"use_product_custom_part":case"use_product_custom_part_shampoo":case"use_product_saddle":case"replace_product_saddle":case"revive_monsterplant":case"rebreed_monsterplant":case"fertilize_monsterplant":s(t)}}),[t,s]);return Object(Cr.jsxs)(Vd,{objectId:t.id,category:a.zg.UNIT,userType:a.Dg.PET,close:n,children:[Object(Cr.jsx)(Md,{children:t.name}),0===r&&Object(Cr.jsx)(Gd,{onClick:e=>l("use_product"),children:$e("infostand.button.useproduct")}),1===r&&Object(Cr.jsx)(Gd,{onClick:e=>l("use_product_shampoo"),children:$e("infostand.button.useproduct_shampoo")}),2===r&&Object(Cr.jsx)(Gd,{onClick:e=>l("use_product_custom_part"),children:$e("infostand.button.useproduct_custom_part")}),3===r&&Object(Cr.jsx)(Gd,{onClick:e=>l("use_product_custom_part_shampoo"),children:$e("infostand.button.useproduct_custom_part_shampoo")}),4===r&&Object(Cr.jsxs)(Cr.Fragment,{children:[t.replace&&Object(Cr.jsx)(Gd,{onClick:e=>l("replace_product_saddle"),children:$e("infostand.button.replaceproduct_saddle")}),!t.replace&&Object(Cr.jsx)(Gd,{onClick:e=>l("use_product_saddle"),children:$e("infostand.button.useproduct_saddle")})]}),5===r&&Object(Cr.jsx)(Gd,{onClick:e=>l("revive_monsterplant"),children:$e("infostand.button.revive_monsterplant")}),6===r&&Object(Cr.jsx)(Gd,{onClick:e=>l("rebreed_monsterplant"),children:$e("infostand.button.rebreed_monsterplant")}),7===r&&Object(Cr.jsx)(Gd,{onClick:e=>l("fertilize_monsterplant"),children:$e("infostand.button.fertilize_monsterplant")})]})},zd=e=>{const{userData:t=null,close:s=null}=e,[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(0),{canRequestFriend:l=null}=ht(),{widgetHandler:u=null}=Ud(),d=Object(c.useMemo)((()=>t.amIOwner&&t.targetRoomControllerLevel<a.Wf.GUEST&&!t.isGuildRoom),[t]),h=Object(c.useMemo)((()=>t.amIOwner&&t.targetRoomControllerLevel===a.Wf.GUEST&&!t.isGuildRoom),[t]),j=Object(c.useMemo)((()=>t.canBeKicked||t.canBeBanned||t.canBeMuted||d||h),[d,h,t]),b=Object(c.useMemo)((()=>{let e=!1;const t=ce();if(t){const s=t.model.getValue(a.Fg.FIGURE_CARRY_OBJECT);s>0&&s<999999&&(e=!0)}return e}),[]),g=Object(c.useCallback)((e=>{let n=null,c=null,a=!0;if(e){switch(e){case"moderate":case"back_moderate":a=!1,r(1);break;case"ban":a=!1,r(2);break;case"mute":a=!1,r(3);break;case"ambassador":case"back_ambassador":a=!1,r(4);break;case"ambassador_mute":a=!1,r(5);break;case"back":a=!1,r(0);break;case"whisper":n=Ms.WHISPER_USER;break;case"friend":C(`friends/request/${t.webID}/${t.name}`);break;case"relationship":a=!1,r(6);break;case"respect":{let e=i-1;o(e),n=Ms.RESPECT_USER,e>0&&(a=!1);break}case"ignore":n=Ms.IGNORE_USER;break;case"unignore":n=Ms.UNIGNORE_USER;break;case"kick":n=Ms.KICK_USER;break;case"ban_hour":n=Ms.BAN_USER_HOUR;break;case"ban_day":n=Ms.BAN_USER_DAY;break;case"perm_ban":n=Ms.BAN_USER_PERM;break;case"mute_2min":case"ambassador_mute_2min":n=Ms.MUTE_USER_2MIN;break;case"mute_5min":n=Ms.MUTE_USER_5MIN;break;case"mute_10min":n=Ms.MUTE_USER_10MIN;break;case"give_rights":n=Ms.GIVE_RIGHTS;break;case"remove_rights":n=Ms.TAKE_RIGHTS;break;case"trade":n=Ms.START_TRADING;break;case"report":n=Ms.REPORT_CFH_OTHER;break;case"pass_hand_item":n=Ms.PASS_CARRY_ITEM;break;case"ambassador_alert":n=Ms.AMBASSADOR_ALERT_USER;break;case"ambassador_kick":n=Ms.AMBASSADOR_KICK_USER;break;case"ambassador_mute_10min":n=Ms.AMBASSADOR_MUTE_USER_10MIN;break;case"ambassador_mute_60min":n=Ms.AMBASSADOR_MUTE_USER_60MIN;break;case"ambassador_mute_18hour":n=Ms.AMBASSADOR_MUTE_USER_18HOUR;break;case"rship_heart":n=Ms.RELATIONSHIP_HEART;break;case"rship_smile":n=Ms.RELATIONSHIP_SMILE;break;case"rship_bobba":n=Ms.RELATIONSHIP_BOBBA;break;case"rship_none":n=Ms.RELATIONSHIP_NONE}n&&(c=new Ms(n,t.webID)),c&&u.processWidgetMessage(c)}a&&s()}),[t,i,u,s]);return Object(c.useEffect)((()=>{r(0),o(t.respectLeft)}),[t]),Object(Cr.jsxs)(Vd,{objectId:t.roomIndex,category:a.zg.UNIT,userType:t.userType,close:s,children:[Object(Cr.jsx)(Md,{className:"cursor-pointer",onClick:e=>gr(t.webID),children:t.name}),0===n&&Object(Cr.jsxs)(Cr.Fragment,{children:[l(t.webID)&&Object(Cr.jsx)(Gd,{onClick:e=>g("friend"),children:$e("infostand.button.friend")}),Object(Cr.jsx)(Gd,{onClick:e=>g("trade"),children:$e("infostand.button.trade")}),Object(Cr.jsx)(Gd,{onClick:e=>g("whisper"),children:$e("infostand.button.whisper")}),i>0&&Object(Cr.jsx)(Gd,{onClick:e=>g("respect"),children:$e("infostand.button.respect",["count"],[i.toString()])}),!l(t.webID)&&Object(Cr.jsxs)(Gd,{onClick:e=>g("relationship"),children:[$e("infostand.link.relationship"),Object(Cr.jsx)(Lr.a,{icon:"chevron-right",className:"right"})]}),!t.isIgnored&&Object(Cr.jsx)(Gd,{onClick:e=>g("ignore"),children:$e("infostand.button.ignore")}),t.isIgnored&&Object(Cr.jsx)(Gd,{onClick:e=>g("unignore"),children:$e("infostand.button.unignore")}),Object(Cr.jsx)(Gd,{onClick:e=>g("report"),children:$e("infostand.button.report")}),j&&Object(Cr.jsxs)(Gd,{onClick:e=>g("moderate"),children:[Object(Cr.jsx)(Lr.a,{icon:"chevron-right",className:"right"}),$e("infostand.link.moderate")]}),t.isAmbassador&&Object(Cr.jsxs)(Gd,{onClick:e=>g("ambassador"),children:[Object(Cr.jsx)(Lr.a,{icon:"chevron-right",className:"right"}),$e("infostand.link.ambassador")]}),b&&Object(Cr.jsx)(Gd,{onClick:e=>g("pass_hand_item"),children:$e("avatar.widget.pass_hand_item")})]}),1===n&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Gd,{onClick:e=>g("kick"),children:$e("infostand.button.kick")}),Object(Cr.jsxs)(Gd,{onClick:e=>g("mute"),children:[Object(Cr.jsx)(Lr.a,{icon:"chevron-right",className:"right"}),$e("infostand.button.mute")]}),Object(Cr.jsxs)(Gd,{onClick:e=>g("ban"),children:[Object(Cr.jsx)(Lr.a,{icon:"chevron-right",className:"right"}),$e("infostand.button.ban")]}),d&&Object(Cr.jsx)(Gd,{onClick:e=>g("give_rights"),children:$e("infostand.button.giverights")}),h&&Object(Cr.jsx)(Gd,{onClick:e=>g("remove_rights"),children:$e("infostand.button.removerights")}),Object(Cr.jsxs)(Gd,{onClick:e=>g("back"),children:[Object(Cr.jsx)(Lr.a,{icon:"chevron-left",className:"left"}),$e("generic.back")]})]}),2===n&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Gd,{onClick:e=>g("ban_hour"),children:$e("infostand.button.ban_hour")}),Object(Cr.jsx)(Gd,{onClick:e=>g("ban_day"),children:$e("infostand.button.ban_day")}),Object(Cr.jsx)(Gd,{onClick:e=>g("ban_perm"),children:$e("infostand.button.perm_ban")}),Object(Cr.jsxs)(Gd,{onClick:e=>g("back_moderate"),children:[Object(Cr.jsx)(Lr.a,{icon:"chevron-left",className:"left"}),$e("generic.back")]})]}),3===n&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Gd,{onClick:e=>g("mute_2min"),children:$e("infostand.button.mute_2min")}),Object(Cr.jsx)(Gd,{onClick:e=>g("mute_5min"),children:$e("infostand.button.mute_5min")}),Object(Cr.jsx)(Gd,{onClick:e=>g("mute_10min"),children:$e("infostand.button.mute_10min")}),Object(Cr.jsxs)(Gd,{onClick:e=>g("back_moderate"),children:[Object(Cr.jsx)(Lr.a,{icon:"chevron-left",className:"left"}),$e("generic.back")]})]}),4===n&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Gd,{onClick:e=>g("ambassador_alert"),children:$e("infostand.button.alert")}),Object(Cr.jsx)(Gd,{onClick:e=>g("ambassador_kick"),children:$e("infostand.button.kick")}),Object(Cr.jsxs)(Gd,{onClick:e=>g("ambassador_mute"),children:[$e("infostand.button.mute"),Object(Cr.jsx)(Lr.a,{icon:"chevron-right",className:"right"})]}),Object(Cr.jsxs)(Gd,{onClick:e=>g("back"),children:[Object(Cr.jsx)(Lr.a,{icon:"chevron-left",className:"left"}),$e("generic.back")]})]}),5===n&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Gd,{onClick:e=>g("ambassador_mute_2min"),children:$e("infostand.button.mute_2min")}),Object(Cr.jsx)(Gd,{onClick:e=>g("ambassador_mute_10min"),children:$e("infostand.button.mute_10min")}),Object(Cr.jsx)(Gd,{onClick:e=>g("ambassador_mute_60min"),children:$e("infostand.button.mute_60min")}),Object(Cr.jsx)(Gd,{onClick:e=>g("ambassador_mute_18hr"),children:$e("infostand.button.mute_18hour")}),Object(Cr.jsxs)(Gd,{onClick:e=>g("back_ambassador"),children:[Object(Cr.jsx)(Lr.a,{icon:"chevron-left",className:"left"}),$e("generic.back")]})]}),6===n&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(yr,{className:"menu-list-split-3",children:[Object(Cr.jsx)(Gd,{onClick:e=>g("rship_heart"),children:Object(Cr.jsx)(Sr,{pointer:!0,className:"nitro-friends-spritesheet icon-heart"})}),Object(Cr.jsx)(Gd,{onClick:e=>g("rship_smile"),children:Object(Cr.jsx)(Sr,{pointer:!0,className:"nitro-friends-spritesheet icon-smile"})}),Object(Cr.jsx)(Gd,{onClick:e=>g("rship_bobba"),children:Object(Cr.jsx)(Sr,{pointer:!0,className:"nitro-friends-spritesheet icon-bobba"})})]}),Object(Cr.jsx)(Gd,{onClick:e=>g("rship_none"),children:$e("avatar.widget.clear_relationship")}),Object(Cr.jsxs)(Gd,{onClick:e=>g("back"),children:[Object(Cr.jsx)(Lr.a,{icon:"chevron-left",className:"left"}),$e("generic.back")]})]})]})},Yd=e=>{const{classNames:t=[],...s}=e,n=Object(c.useMemo)((()=>{const e=["menu-list"];return t.length&&e.push(...t),e}),[t]);return Object(Cr.jsx)(rc,{classNames:n,...s})},Kd=e=>{const{userId:t=-1,userName:s="",roomIndex:n=-1}=e,{eventDispatcher:r=null}=Ud();return Object(Cr.jsx)(Vd,{objectId:n,category:a.zg.UNIT,close:null,children:Object(Cr.jsx)(Yd,{children:Object(Cr.jsx)(Gd,{onClick:()=>r.dispatchEvent(new Te(!1)),children:$e("widget.avatar.stop_decorating")})})})},Qd=e=>{const{nameData:t=null,close:s=null}=e,n=Object(c.useMemo)((()=>t.id!==K().userId),[t]);return Object(Cr.jsx)(Vd,{objectId:t.roomIndex,category:t.category,userType:t.userType,fades:n,className:"name-only",close:s,children:Object(Cr.jsx)("div",{className:"text-shadow",children:t.name})})},$d=e=>{const{userData:t=null,isDancing:s=!1,close:n=null}=e,[r,i]=Object(c.useState)(s&&se()?1:0),{roomSession:o=null,eventDispatcher:l=null,widgetHandler:u=null}=Ud(),d=Object(c.useCallback)((e=>{let s=null,r=!0;if(e){if(e.startsWith("sign_")){const t=parseInt(e.split("_")[1]);o.sendSignMessage(t)}else switch(e){case"decorate":l.dispatchEvent(new Te(!0));break;case"change_name":ot(new _n(_n.INIT));break;case"change_looks":C("avatar-editor/show");break;case"expressions":r=!1,i(3);break;case"sit":s=new xs(xs.POSTURE_SIT);break;case"stand":s=new xs(xs.POSTURE_STAND);break;case"wave":s=new Es(a.n.WAVE);break;case"blow":s=new Es(a.n.BLOW);break;case"laugh":s=new Es(a.n.LAUGH);break;case"idle":s=new Es(a.n.IDLE);break;case"dance_menu":r=!1,i(1);break;case"dance":s=new Ns(1);break;case"dance_stop":s=new Ns(0);break;case"dance_1":case"dance_2":case"dance_3":case"dance_4":s=new Ns(parseInt(e.charAt(e.length-1)));break;case"signs":r=!1,i(4);break;case"back":r=!1,i(0);break;case"drop_carry_item":s=new Ms(Ms.DROP_CARRY_ITEM,t.webID)}s&&u.processWidgetMessage(s)}r&&n()}),[o,l,u,t,n]),h=Object(c.useMemo)((()=>t.amIOwner||t.amIAnyRoomController||t.roomControllerLevel>a.Wf.GUEST),[t]),j=function(){const e=ce();return!!e&&77===e.model.getValue(a.Fg.FIGURE_EFFECT)}();return Object(Cr.jsxs)(Vd,{objectId:t.roomIndex,category:a.zg.UNIT,userType:t.userType,close:n,children:[Object(Cr.jsx)(Md,{className:"cursor-pointer",onClick:e=>gr(t.webID),children:t.name}),0===r&&Object(Cr.jsxs)(Cr.Fragment,{children:[t.allowNameChange&&Object(Cr.jsx)(Gd,{onClick:e=>d("change_name"),children:$e("widget.avatar.change_name")}),h&&Object(Cr.jsx)(Gd,{onClick:e=>d("decorate"),children:$e("widget.avatar.decorate")}),Object(Cr.jsx)(Gd,{onClick:e=>d("change_looks"),children:$e("widget.memenu.myclothes")}),se()&&!j&&Object(Cr.jsxs)(Gd,{onClick:e=>d("dance_menu"),children:[Object(Cr.jsx)(Lr.a,{icon:"chevron-right",className:"right"}),$e("widget.memenu.dance")]}),!s&&!se()&&!j&&Object(Cr.jsx)(Gd,{onClick:e=>d("dance"),children:$e("widget.memenu.dance")}),s&&!se()&&!j&&Object(Cr.jsx)(Gd,{onClick:e=>d("dance_stop"),children:$e("widget.memenu.dance.stop")}),Object(Cr.jsxs)(Gd,{onClick:e=>d("expressions"),children:[Object(Cr.jsx)(Lr.a,{icon:"chevron-right",className:"right"}),$e("infostand.link.expressions")]}),Object(Cr.jsxs)(Gd,{onClick:e=>d("signs"),children:[Object(Cr.jsx)(Lr.a,{icon:"chevron-right",className:"right"}),$e("infostand.show.signs")]}),t.carryItem>0&&Object(Cr.jsx)(Gd,{onClick:e=>d("drop_carry_item"),children:$e("avatar.widget.drop_hand_item")})]}),1===r&&Object(Cr.jsxs)(Cr.Fragment,{children:[s&&Object(Cr.jsx)(Gd,{onClick:e=>d("dance_stop"),children:$e("widget.memenu.dance.stop")}),Object(Cr.jsx)(Gd,{onClick:e=>d("dance_1"),children:$e("widget.memenu.dance1")}),Object(Cr.jsx)(Gd,{onClick:e=>d("dance_2"),children:$e("widget.memenu.dance2")}),Object(Cr.jsx)(Gd,{onClick:e=>d("dance_3"),children:$e("widget.memenu.dance3")}),Object(Cr.jsx)(Gd,{onClick:e=>d("dance_4"),children:$e("widget.memenu.dance4")}),Object(Cr.jsxs)(Gd,{onClick:e=>d("back"),children:[Object(Cr.jsx)(Lr.a,{icon:"chevron-left",className:"left"}),$e("generic.back")]})]}),3===r&&Object(Cr.jsxs)(Cr.Fragment,{children:[J()===a.k.POSTURE_STAND&&Object(Cr.jsx)(Gd,{onClick:e=>d("sit"),children:$e("widget.memenu.sit")}),z()&&Object(Cr.jsx)(Gd,{onClick:e=>d("stand"),children:$e("widget.memenu.stand")}),Y()&&Object(Cr.jsx)(Gd,{onClick:e=>d("wave"),children:$e("widget.memenu.wave")}),Y()&&Object(Cr.jsxs)(Gd,{disabled:!ne(),onClick:e=>d("laugh"),children:[!ne()&&Object(Cr.jsx)(ec,{type:"hc"}),$e("widget.memenu.laugh")]}),Y()&&Object(Cr.jsxs)(Gd,{disabled:!ne(),onClick:e=>d("blow"),children:[!ne()&&Object(Cr.jsx)(ec,{type:"hc"}),$e("widget.memenu.blow")]}),Object(Cr.jsx)(Gd,{onClick:e=>d("idle"),children:$e("widget.memenu.idle")}),Object(Cr.jsxs)(Gd,{onClick:e=>d("back"),children:[Object(Cr.jsx)(Lr.a,{icon:"chevron-left",className:"left"}),$e("generic.back")]})]}),4===r&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(yr,{className:"menu-list-split-3",children:[Object(Cr.jsx)(Gd,{onClick:e=>d("sign_1"),children:"1"}),Object(Cr.jsx)(Gd,{onClick:e=>d("sign_2"),children:"2"}),Object(Cr.jsx)(Gd,{onClick:e=>d("sign_3"),children:"3"})]}),Object(Cr.jsxs)(yr,{className:"menu-list-split-3",children:[Object(Cr.jsx)(Gd,{onClick:e=>d("sign_4"),children:"4"}),Object(Cr.jsx)(Gd,{onClick:e=>d("sign_5"),children:"5"}),Object(Cr.jsx)(Gd,{onClick:e=>d("sign_6"),children:"6"})]}),Object(Cr.jsxs)(yr,{className:"menu-list-split-3",children:[Object(Cr.jsx)(Gd,{onClick:e=>d("sign_7"),children:"7"}),Object(Cr.jsx)(Gd,{onClick:e=>d("sign_8"),children:"8"}),Object(Cr.jsx)(Gd,{onClick:e=>d("sign_9"),children:"9"})]}),Object(Cr.jsxs)(yr,{className:"menu-list-split-3",children:[Object(Cr.jsx)(Gd,{onClick:e=>d("sign_10"),children:"10"}),Object(Cr.jsx)(Gd,{onClick:e=>d("sign_11"),children:Object(Cr.jsx)("i",{className:"icon icon-sign-heart"})}),Object(Cr.jsx)(Gd,{onClick:e=>d("sign_12"),children:Object(Cr.jsx)("i",{className:"icon icon-sign-skull"})})]}),Object(Cr.jsxs)(yr,{className:"menu-list-split-3",children:[Object(Cr.jsx)(Gd,{onClick:e=>d("sign_0"),children:"0"}),Object(Cr.jsx)(Gd,{onClick:e=>d("sign_13"),children:Object(Cr.jsx)("i",{className:"icon icon-sign-exclamation"})}),Object(Cr.jsx)(Gd,{onClick:e=>d("sign_15"),children:Object(Cr.jsx)("i",{className:"icon icon-sign-smile"})})]}),Object(Cr.jsxs)(yr,{className:"menu-list-split-3",children:[Object(Cr.jsx)(Gd,{onClick:e=>d("sign_14"),children:Object(Cr.jsx)("i",{className:"icon icon-sign-soccer"})}),Object(Cr.jsx)(Gd,{onClick:e=>d("sign_17"),children:Object(Cr.jsx)("i",{className:"icon icon-sign-yellow"})}),Object(Cr.jsx)(Gd,{onClick:e=>d("sign_16"),children:Object(Cr.jsx)("i",{className:"icon icon-sign-red"})})]}),Object(Cr.jsxs)(Gd,{onClick:e=>d("back"),children:[Object(Cr.jsx)(Lr.a,{icon:"chevron-left",className:"left"}),$e("generic.back")]})]})]})},Xd=e=>{const{petData:t=null,close:s=null}=e,[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(0),{roomSession:l=null,widgetHandler:u=null}=Ud(),d=Object(c.useMemo)((()=>{let e=!1;const t=ce();if(t){const s=t.model.getValue(a.Fg.FIGURE_CARRY_OBJECT);s>0&&s<999999&&(e=!0)}return e}),[]),h=e=>{let r=null,c=null,i=!0;if(e){switch(e){case"respect":let e=0;o((t=>(e=t-1,e))),r=Ms.RESPECT_PET,e>0&&(i=!1);break;case"treat":r=Ms.TREAT_PET;break;case"pass_handitem":r=Ms.GIVE_CARRY_ITEM_TO_PET;break;case"train":break;case"pick_up":r=Ms.PICKUP_PET;break;case"mount":r=Ms.MOUNT_PET;break;case"toggle_riding_permission":r=Ms.TOGGLE_PET_RIDING_PERMISSION;break;case"toggle_breeding_permission":r=Ms.TOGGLE_PET_BREEDING_PERMISSION;break;case"dismount":r=Ms.DISMOUNT_PET;break;case"saddle_off":r=Ms.SADDLE_OFF;break;case"breed":0===n||3===n&&(r=Ms.REQUEST_BREED_PET);break;case"harvest":r=Ms.HARVEST_PET;break;case"revive":r=Ms.REVIVE_PET;break;case"compost":r=Ms.COMPOST_PLANT;break;case"buy_saddle":C("catalog/open/"+N("catalog.links")["pets.buy_saddle"])}r&&(c=new Ms(r,t.id)),c&&u.processWidgetMessage(c)}i&&s()};return Object(c.useEffect)((()=>{r((e=>t.petType===a.nf.MONSTERPLANT?3:t.saddle&&!t.rider?1:t.rider?2:0)),o(t.respectsPetLeft)}),[t]),Object(Cr.jsxs)(Vd,{objectId:t.roomIndex,category:a.zg.UNIT,userType:a.Dg.PET,close:s,children:[Object(Cr.jsx)(Md,{children:t.name}),0===n&&Object(Cr.jsxs)(Cr.Fragment,{children:[i>0&&Object(Cr.jsx)(Gd,{onClick:e=>h("respect"),children:$e("infostand.button.petrespect",["count"],[i.toString()])}),Object(Cr.jsx)(Gd,{onClick:e=>h("train"),children:$e("infostand.button.train")}),Object(Cr.jsx)(Gd,{onClick:e=>h("pick_up"),children:$e("infostand.button.pickup")}),t.petType===a.nf.HORSE&&Object(Cr.jsx)(Gd,{onClick:e=>h("buy_saddle"),children:$e("infostand.button.buy_saddle")}),[a.nf.BEAR,a.nf.TERRIER,a.nf.CAT,a.nf.DOG,a.nf.PIG].indexOf(t.petType)>-1&&Object(Cr.jsx)(Gd,{onClick:e=>h("breed"),children:$e("infostand.button.breed")})]}),1===n&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Gd,{onClick:e=>h("mount"),children:$e("infostand.button.mount")}),Object(Cr.jsxs)(Gd,{onClick:e=>h("toggle_riding_permission"),gap:1,children:[Object(Cr.jsx)("input",{type:"checkbox",checked:!!t.publiclyRideable,readOnly:!0}),$e("infostand.button.toggle_riding_permission")]}),i>0&&Object(Cr.jsx)(Gd,{onClick:e=>h("respect"),children:$e("infostand.button.petrespect",["count"],[i.toString()])}),Object(Cr.jsx)(Gd,{onClick:e=>h("train"),children:$e("infostand.button.train")}),Object(Cr.jsx)(Gd,{onClick:e=>h("pick_up"),children:$e("infostand.button.pickup")}),Object(Cr.jsx)(Gd,{onClick:e=>h("saddle_off"),children:$e("infostand.button.saddleoff")})]}),2===n&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Gd,{onClick:e=>h("dismount"),children:$e("infostand.button.dismount")}),i>0&&Object(Cr.jsx)(Gd,{onClick:e=>h("respect"),children:$e("infostand.button.petrespect",["count"],[i.toString()])})]}),3===n&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Gd,{onClick:e=>h("pick_up"),children:$e("infostand.button.pickup")}),t.dead&&Object(Cr.jsx)(Gd,{onClick:e=>h("revive"),children:$e("infostand.button.revive")}),l.isRoomOwner&&Object(Cr.jsx)(Gd,{onClick:e=>h("compost"),children:$e("infostand.button.compost")}),!t.dead&&t.energy/t.maximumEnergy<.98&&Object(Cr.jsx)(Gd,{onClick:e=>h("treat"),children:$e("infostand.button.treat")}),!t.dead&&t.level===t.maximumLevel&&t.breedable&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(Gd,{onClick:e=>h("toggle_breeding_permission"),gap:1,children:[Object(Cr.jsx)("input",{type:"checkbox",checked:t.publiclyBreedable,readOnly:!0}),$e("infostand.button.toggle_breeding_permission")]}),Object(Cr.jsx)(Gd,{onClick:e=>h("breed"),children:$e("infostand.button.breed")})]})]}),d&&Object(Cr.jsx)(Gd,{onClick:e=>h("pass_hand_item"),children:$e("infostand.button.pass_hand_item")})]})},Jd=e=>{const{petData:t=null,close:s=null}=e,[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(0),{roomSession:l=null,widgetHandler:u=null}=Ud(),d=Object(c.useMemo)((()=>l.isRoomOwner||l.controllerLevel>=a.Wf.GUEST||K().isModerator),[l]),h=Object(c.useMemo)((()=>{let e=!1;const t=ce();if(t){const s=t.model.getValue(a.Fg.FIGURE_CARRY_OBJECT);s>0&&s<999999&&(e=!0)}return e}),[]),j=e=>{let n=null,r=null,c=!0;if(e){switch(e){case"respect":let e=0;o((t=>(e=t-1,e))),n=Ms.RESPECT_PET,e>0&&(c=!1);break;case"treat":n=Ms.TREAT_PET;break;case"pass_handitem":n=Ms.GIVE_CARRY_ITEM_TO_PET;break;case"pick_up":n=Ms.PICKUP_PET;break;case"mount":n=Ms.MOUNT_PET;break;case"dismount":n=Ms.DISMOUNT_PET}n&&(r=new Ms(n,t.id)),r&&u.processWidgetMessage(r)}c&&s()};return Object(c.useEffect)((()=>{r((e=>t.petType===a.nf.MONSTERPLANT?3:t.saddle&&!t.rider?1:t.rider?2:0)),o(t.respectsPetLeft)}),[t]),Object(Cr.jsxs)(Vd,{objectId:t.roomIndex,category:a.zg.UNIT,userType:a.Dg.PET,close:s,children:[Object(Cr.jsx)(Md,{children:t.name}),0===n&&i>0&&Object(Cr.jsx)(Gd,{onClick:e=>j("respect"),children:$e("infostand.button.petrespect",["count"],[i.toString()])}),1===n&&Object(Cr.jsxs)(Cr.Fragment,{children:[!!t.publiclyRideable&&Object(Cr.jsx)(Gd,{onClick:e=>j("mount"),children:$e("infostand.button.mount")}),i>0&&Object(Cr.jsx)(Gd,{onClick:e=>j("respect"),children:$e("infostand.button.petrespect",["count"],[i.toString()])})]}),2===n&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Gd,{onClick:e=>j("dismount"),children:$e("infostand.button.dismount")}),i>0&&Object(Cr.jsx)(Gd,{onClick:e=>j("respect"),children:$e("infostand.button.petrespect",["count"],[i.toString()])})]}),3===n&&!t.dead&&t.energy/t.maximumEnergy<.98&&Object(Cr.jsx)(Gd,{onClick:e=>j("treat"),children:$e("infostand.button.treat")}),d&&Object(Cr.jsx)(Gd,{onClick:e=>j("pick_up"),children:$e("infostand.button.pickup")}),h&&Object(Cr.jsx)(Gd,{onClick:e=>j("pass_hand_item"),children:$e("infostand.button.pass_hand_item")})]})},Zd=e=>{const{rentableBotData:t=null,close:s=null}=e,[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(""),[l,u]=Object(c.useState)(""),{eventDispatcher:d=null}=Ud(),h=Object(c.useCallback)((e=>{const n=e.getParser();if(n.botId===t.webID)switch(n.commandId){case Fd.CHANGE_BOT_NAME:return o(n.data),void r(1);case Fd.CHANGE_BOT_MOTTO:return u(n.data),void r(2);case Fd.SETUP_CHAT:{const e=n.data,r=e.split(-1===e.indexOf(";#;")?";":";#;");return void(3!==r.length&&4!==r.length||(d.dispatchEvent(new Pe(t.roomIndex,a.zg.UNIT,t.webID,r[0],"true"===r[1].toLowerCase()||"1"===r[1],parseInt(r[2]),!!r[3]&&("true"===r[3].toLowerCase()||"1"===r[3]))),s()))}}}),[t,d,s]);Je(a.z,h);const j=e=>Ln(new a.Kf(t.webID,e)),b=e=>{let n=!0;if(e)switch(e){case"donate_to_all":j(Fd.DONATE_TO_ALL),Ln(new a.D(t.webID,Fd.DONATE_TO_ALL,""));break;case"donate_to_user":j(Fd.DONATE_TO_USER),Ln(new a.D(t.webID,Fd.DONATE_TO_USER,""));break;case"change_bot_name":j(Fd.CHANGE_BOT_NAME),n=!1;break;case"save_bot_name":Ln(new a.D(t.webID,Fd.CHANGE_BOT_NAME,i));break;case"change_bot_motto":j(Fd.CHANGE_BOT_MOTTO),n=!1;break;case"save_bot_motto":Ln(new a.D(t.webID,Fd.CHANGE_BOT_MOTTO,l));break;case"dress_up":Ln(new a.D(t.webID,Fd.DRESS_UP,""));break;case"random_walk":Ln(new a.D(t.webID,Fd.RANDOM_WALK,""));break;case"setup_chat":j(Fd.SETUP_CHAT),n=!1;break;case"dance":Ln(new a.D(t.webID,Fd.DANCE,""));break;case"nux_take_tour":_().createLinkEvent("help/tour"),Ln(new a.D(t.webID,Fd.NUX_TAKE_TOUR,""));break;case"pick":Ln(new a.B(t.webID))}n&&s()};Object(c.useEffect)((()=>{r(0)}),[t]);const g=t.amIOwner||t.amIAnyRoomController;return Object(Cr.jsxs)(Vd,{objectId:t.roomIndex,category:a.zg.UNIT,userType:a.Dg.RENTABLE_BOT,close:s,children:[Object(Cr.jsx)(Md,{children:t.name}),0===n&&g&&Object(Cr.jsxs)(Cr.Fragment,{children:[t.botSkills.indexOf(Fd.DONATE_TO_ALL)>=0&&Object(Cr.jsx)(Gd,{onClick:e=>b("donate_to_all"),children:$e("avatar.widget.donate_to_all")}),t.botSkills.indexOf(Fd.DONATE_TO_USER)>=0&&Object(Cr.jsx)(Gd,{onClick:e=>b("donate_to_user"),children:$e("avatar.widget.donate_to_user")}),t.botSkills.indexOf(Fd.CHANGE_BOT_NAME)>=0&&Object(Cr.jsx)(Gd,{onClick:e=>b("change_bot_name"),children:$e("avatar.widget.change_bot_name")}),t.botSkills.indexOf(Fd.CHANGE_BOT_MOTTO)>=0&&Object(Cr.jsx)(Gd,{onClick:e=>b("change_bot_motto"),children:$e("avatar.widget.change_bot_motto")}),t.botSkills.indexOf(Fd.DRESS_UP)>=0&&Object(Cr.jsx)(Gd,{onClick:e=>b("dress_up"),children:$e("avatar.widget.dress_up")}),t.botSkills.indexOf(Fd.RANDOM_WALK)>=0&&Object(Cr.jsx)(Gd,{onClick:e=>b("random_walk"),children:$e("avatar.widget.random_walk")}),t.botSkills.indexOf(Fd.SETUP_CHAT)>=0&&Object(Cr.jsx)(Gd,{onClick:e=>b("setup_chat"),children:$e("avatar.widget.setup_chat")}),t.botSkills.indexOf(Fd.DANCE)>=0&&Object(Cr.jsx)(Gd,{onClick:e=>b("dance"),children:$e("avatar.widget.dance")}),-1===t.botSkills.indexOf(Fd.NO_PICK_UP)&&Object(Cr.jsx)(Gd,{onClick:e=>b("pick"),children:$e("avatar.widget.pick_up")})]}),1===n&&Object(Cr.jsxs)(rc,{className:"menu-item",onClick:null,gap:1,children:[Object(Cr.jsx)(Ac,{variant:"white",children:$e("bot.skill.name.configuration.new.name")}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:i,maxLength:N("bot.name.max.length",15),onChange:e=>o(e.target.value)}),Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(Cr.jsx)(wr,{fullWidth:!0,variant:"secondary",onClick:e=>b(null),children:$e("cancel")}),Object(Cr.jsx)(wr,{fullWidth:!0,variant:"success",onClick:e=>b("save_bot_name"),children:$e("save")})]})]}),2===n&&Object(Cr.jsxs)(rc,{className:"menu-item",onClick:null,gap:1,children:[Object(Cr.jsx)(Ac,{variant:"white",children:$e("bot.skill.name.configuration.new.motto")}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:l,maxLength:N("motto.max.length",38),onChange:e=>u(e.target.value)}),Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(Cr.jsx)(wr,{fullWidth:!0,variant:"secondary",onClick:e=>b(null),children:$e("cancel")}),Object(Cr.jsx)(wr,{fullWidth:!0,variant:"success",onClick:e=>b("save_bot_motto"),children:$e("save")})]})]})]})},eh=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)([]),[i,o]=Object(c.useState)([]),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)(!1),[g,O]=Object(c.useState)(!1),[m,p]=Object(c.useState)(!1),[_,E]=Object(c.useState)(null),{roomSession:f=null,eventDispatcher:x=null,widgetHandler:I=null}=Ud(),T=Object(c.useCallback)((e=>{r((t=>{const s=[...t];return s.splice(e,1),s}))}),[]),C=Object(c.useCallback)((e=>{o((t=>{const s=[...t],n=s.splice(e,1)[0];return l===n&&u(null),s}))}),[l]),S=Object(c.useCallback)((()=>{o([])}),[]),N=Object(c.useCallback)((()=>{h(null)}),[]),v=Object(c.useCallback)((()=>{s(null)}),[]),R=Object(c.useCallback)((e=>{u(e),o([])}),[]),A=Object(c.useCallback)((e=>{switch(e.type){case Ue.NORMAL_MODE:return void(j&&b(!1));case Ue.GAME_MODE:return void(j||b(!0))}}),[j]);et(Ue.NORMAL_MODE,x,A),et(Ue.GAME_MODE,x,A);const y=Object(c.useCallback)((e=>{if(t&&e.id===t.id&&s(null),e.category===a.zg.UNIT){const t=n.findIndex((t=>t.roomIndex===e.id));t>-1&&T(t),i.length&&o((t=>t.filter((t=>t.id!==e.id))))}else e.category===a.zg.FLOOR&&i.length&&o((t=>t.filter((t=>t.requestRoomObjectId!==e.id))));d&&(d instanceof Re?d.id===e.id&&N():d instanceof we||d instanceof ye?d.roomIndex===e.id&&N():d instanceof Ae&&d.roomIndex===e.id&&N())}),[t,d,n,i,T,N]);et(Le.USER_REMOVED,x,y),et(Le.FURNI_REMOVED,x,y);const w=Object(c.useCallback)((e=>{switch(e.type){case Le.OBJECT_ROLL_OVER:{const t=e;if(d)return;return void I.processWidgetMessage(new Us(Us.GET_OBJECT_NAME,t.id,t.category))}case Le.OBJECT_ROLL_OUT:{const n=e;if(!t||t.roomIndex!==n.id)return;return void s(null)}}}),[d,t,I]);et(Le.OBJECT_ROLL_OVER,x,w),et(Le.OBJECT_ROLL_OUT,x,w);const k=Object(c.useCallback)((e=>{d&&N(),i.length&&o([])}),[d,i,N]);et(Le.OBJECT_DESELECTED,x,k);const D=Object(c.useCallback)((e=>{e.category===a.zg.UNIT&&(s(e),S())}),[S]);et(Oe.TYPE,x,D);const P=Object(c.useCallback)((e=>{t&&s(null),e.type===Re.FURNI?N():h(e),S()}),[t,N,S]);et(Re.FURNI,x,P),et(we.OWN_USER,x,P),et(we.PEER,x,P),et(we.BOT,x,P),et(ye.RENTABLE_BOT,x,P),et(Ae.PET_INFO,x,P);const U=Object(c.useCallback)((e=>{O(e.isDancing)}),[]);et(Ie.UPDATE_DANCE,x,U);const L=Object(c.useCallback)((e=>{E(e)}),[]);et(Pe.UPDATE_CHAT,x,L);const M=Object(c.useCallback)((e=>{u(null),o((t=>{const s=[...t];for(const n of e.items){const e=s.findIndex((e=>e.id===n.id));e>-1&&s.splice(e,1),s.push(n)}return s}))}),[]);et(Be.USE_PRODUCT_BUBBLES,x,M);const F=Object(c.useCallback)((e=>{p(e.isDecorating)}),[]);et(Te.UPDATE_DECORATE,x,F);const H=Object(c.useMemo)((()=>{if(ee().isDecorating=m,!m)return null;const e=K().userId,t=K().userName,s=ee().ownRoomIndex;return Object(Cr.jsx)(Kd,{userId:e,userName:t,roomIndex:s})}),[m]),B=Object(c.useMemo)((()=>{if(j)return null;if(H)return H;if(t){const e=n.findIndex((e=>e.roomIndex===t.roomIndex));return e>-1&&T(e),Object(Cr.jsx)(Qd,{nameData:t,close:v})}if(d)switch(d.type){case we.OWN_USER:case we.PEER:{const e=d;if(e.isSpectatorMode)return null;const t=n.findIndex((t=>t.roomIndex===e.roomIndex));return t>-1&&T(t),e.isOwnUser?a.lg.isRunning()?null:Object(Cr.jsx)($d,{userData:e,isDancing:g,close:N}):Object(Cr.jsx)(zd,{userData:e,close:N})}case Ae.PET_INFO:{const e=d;return e.isOwner?Object(Cr.jsx)(Xd,{petData:e,close:N}):Object(Cr.jsx)(Jd,{petData:e,close:N})}case ye.RENTABLE_BOT:return Object(Cr.jsx)(Zd,{rentableBotData:d,close:N});case Re.FURNI:return null}return null}),[j,H,t,n,g,d,v,N,T]);return Object(Cr.jsxs)(Cr.Fragment,{children:[B,n.length>0&&n.map(((e,t)=>Object(Cr.jsx)(Qd,{nameData:e,close:()=>T(t)},t))),i.length>0&&i.map(((e,t)=>Object(Cr.jsx)(qd,{item:e,updateConfirmingProduct:R,close:()=>C(t)},e.id))),_&&Object(Cr.jsx)(Hd,{chatEvent:_,close:()=>E(null)}),l&&Object(Cr.jsx)(Bd,{item:l,close:()=>u(null)})]})},th=e=>{const{chatStyleId:t=0,chatStyleIds:s=null,selectChatStyleId:n=null}=e,[r,i]=Object(c.useState)(null),[a,o]=Object(c.useState)(!1);return Object(c.useEffect)((()=>{a||i(null)}),[a]),Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Sr,{pointer:!0,className:"icon chatstyles-icon",onClick:e=>{let t=!1;o((e=>(t=!e,t))),t&&i(e.target)}}),Object(Cr.jsx)(ld.a,{show:a,target:r,placement:"top",children:Object(Cr.jsx)(Cl.a,{className:"nitro-chat-style-selector-container",children:Object(Cr.jsx)(Hr,{overflow:"hidden",className:"bg-transparent",children:Object(Cr.jsx)(Rr,{columnCount:3,overflow:"auto",children:s&&s.length>0&&s.map((e=>Object(Cr.jsx)(yr,{center:!0,pointer:!0,className:"bubble-parent-container",onClick:t=>(e=>{n(e),o(!1)})(e),children:Object(Cr.jsx)(Sr,{className:"bubble-container",children:Object(Cr.jsx)(Sr,{className:`chat-bubble bubble-${e}`,children:"\xa0"})},e)},e)))})})})})]})},sh=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(""),[i,o]=Object(c.useState)(!1),[l,u]=Object(c.useState)(!1),[d,h]=Object(c.useState)(!1),[j,b]=Object(c.useState)(K().chatStyle),[g,O]=Object(c.useState)(!1),[m,p]=Object(c.useState)(!1),[_,E]=Object(c.useState)(0),{eventDispatcher:f=null,widgetHandler:x=null}=Ud(),I=Object(c.useRef)(),T=Object(c.useMemo)((()=>$e("widgets.chatinput.mode.whisper")),[]),C=Object(c.useMemo)((()=>$e("widgets.chatinput.mode.shout")),[]),S=Object(c.useMemo)((()=>$e("widgets.chatinput.mode.speak")),[]),v=Object(c.useMemo)((()=>N("chat.input.maxlength",100)),[]),R=Object(c.useCallback)((()=>{const e=document.activeElement;return!!e&&((!I||I.current!==e)&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement))}),[I]),A=Object(c.useCallback)((()=>{I.current.focus(),I.current.setSelectionRange(2*I.current.value.length,2*I.current.value.length)}),[I]),y=Object(c.useCallback)((()=>{s((e=>e===T&&n.length?`${e} ${n}`:e))}),[n,T]),w=Object(c.useCallback)((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;s(""),x.processWidgetMessage(new Is(Is.MESSAGE_CHAT,e,t,n,r))}),[x]),k=Object(c.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||""===e)return;let n=t?Is.CHAT_SHOUT:Is.CHAT_DEFAULT,r=e;const c=r.split(" ");let i="",a="";switch(c[0]){case T:n=Is.CHAT_WHISPER,i=c[1],a=T+" "+i+" ",c.shift(),c.shift();break;case C:n=Is.CHAT_SHOUT,c.shift();break;case S:n=Is.CHAT_DEFAULT,c.shift()}r=c.join(" "),o(!1),h(!1),r.length<=v&&(g&&(K().sendChatStyleUpdate(j),O(!1)),w(r,n,i,j)),s(a)}),[T,C,S,v,j,g,w]),D=Object(c.useCallback)((e=>{e&&e.length?(o(!0),h(!0)):o(!1),s(e)}),[]),P=Object(c.useCallback)((e=>{if(m||!I.current||R())return;document.activeElement!==I.current&&A();const t=e.target.value;switch(e.key){case" ":case"Space":return void y();case"NumpadEnter":case"Enter":return void k(t,e.shiftKey);case"Backspace":if(t){const e=t.split(" ");e[0]===T&&3===e.length&&""===e[2]&&s("")}return}}),[m,I,T,R,A,y,k]),U=Object(c.useCallback)((e=>{r("")}),[]);et(Le.OBJECT_DESELECTED,f,U);const L=Object(c.useCallback)((e=>{r(e.name)}),[]);et(we.PEER,f,L);const M=Object(c.useCallback)((e=>{switch(e.chatMode){case Ee.WHISPER:return void s(`${T} ${e.userName} `);case Ee.SHOUT:return}}),[T]);et(Ee.CHAT_INPUT_CONTENT,f,M);const F=Object(c.useCallback)((e=>{p(!0),E(e.seconds)}),[]);et(ge.FLOOD_CONTROL,f,F);const H=Object(c.useCallback)((e=>{b(e),O(!0)}),[]),B=Object(c.useMemo)((()=>{let e=[];const t=N("chat.styles");for(const s of t)s&&(s.minRank>0?K().hasSecurity(s.minRank)&&e.push(s.styleId):s.isSystemStyle&&K().hasSecurity(a.Wf.MODERATOR)?e.push(s.styleId):N("chat.styles.disabled").indexOf(s.styleId)>=0||(s.isHcOnly&&Q()>=a.xd.CLUB||s.isAmbassadorOnly&&K().isAmbassador?e.push(s.styleId):s.isHcOnly||s.isAmbassadorOnly||e.push(s.styleId)));return e}),[]);return Object(c.useEffect)((()=>{i?l||(u(!0),x.processWidgetMessage(new Cs(i))):l&&(u(!1),x.processWidgetMessage(new Cs(i)))}),[x,i,l]),Object(c.useEffect)((()=>{if(!d)return;let e=null;return d&&(e=setTimeout((()=>{h(!1),o(!1)}),1e4)),()=>clearTimeout(e)}),[d]),Object(c.useEffect)((()=>{if(!m)return;let e=0;const t=setInterval((()=>{E((t=>(e=(t||0)-1,e))),e<0&&(clearInterval(t),p(!1))}),1e3);return()=>clearInterval(t)}),[m]),Object(c.useEffect)((()=>(document.body.addEventListener("keydown",P),()=>{document.body.removeEventListener("keydown",P)})),[P]),Object(c.useEffect)((()=>{I.current&&(I.current.parentElement.dataset.value=t)}),[t]),Object(qr.createPortal)(Object(Cr.jsxs)("div",{className:"nitro-chat-input-container",children:[Object(Cr.jsxs)("div",{className:"input-sizer align-items-center",children:[!m&&Object(Cr.jsx)("input",{ref:I,type:"text",className:"chat-input",placeholder:$e("widgets.chatinput.default"),value:t,maxLength:v,onChange:e=>D(e.target.value),onMouseDown:e=>A()}),m&&Object(Cr.jsxs)(Ac,{variant:"danger",children:[$e("chat.input.alert.flood",["time"],[_.toString()])," "]})]}),Object(Cr.jsx)(th,{chatStyleId:j,chatStyleIds:B,selectChatStyleId:H})]}),document.getElementById("toolbar-chat-input-container"))},nh=e=>{const{chat:t=null,makeRoom:s=null,onChatClicked:n=null,bubbleWidth:r=a.Tf.CHAT_BUBBLE_WIDTH_NORMAL}=e,[i,o]=Object(c.useState)(!1),l=Object(c.useRef)(),u=Object(c.useMemo)((()=>{switch(r){case a.Tf.CHAT_BUBBLE_WIDTH_NORMAL:return 350;case a.Tf.CHAT_BUBBLE_WIDTH_THIN:return 240;case a.Tf.CHAT_BUBBLE_WIDTH_WIDE:return 2e3}}),[r]);return Object(c.useEffect)((()=>{const e=l.current;if(!e)return;const n=e.offsetWidth,r=e.offsetHeight;t.width=n,t.height=r,t.elementRef=e;let c=t.left,i=t.top;return c||i||(c=t.location.x-n/2,i=e.parentElement.offsetHeight-r,t.left=c,t.top=i),t.visible||(s(t),t.visible=!0),()=>{t.elementRef=null}}),[l,t,s]),Object(c.useEffect)((()=>o(t.visible)),[t.visible]),Object(Cr.jsxs)("div",{ref:l,className:"bubble-container "+(i?"visible":"invisible"),onClick:e=>n(t),children:[0===t.styleId&&Object(Cr.jsx)("div",{className:"user-container-bg",style:{backgroundColor:t.color}}),Object(Cr.jsxs)("div",{className:`chat-bubble bubble-${t.styleId} type-${t.type}`,style:{maxWidth:u},children:[Object(Cr.jsx)("div",{className:"user-container",children:t.imageUrl&&t.imageUrl.length>0&&Object(Cr.jsx)("div",{className:"user-image",style:{backgroundImage:`url(${t.imageUrl})`}})}),Object(Cr.jsxs)("div",{className:"chat-content",children:[Object(Cr.jsx)("b",{className:"username mr-1",dangerouslySetInnerHTML:{__html:`${t.username}: `}}),Object(Cr.jsx)("span",{className:"message",dangerouslySetInnerHTML:{__html:`${t.formattedText}`}})]}),Object(Cr.jsx)("div",{className:"pointer"})]})]})};class rh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,o=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null;this.senderId=e,this.senderCategory=t,this.roomId=s,this.text=n,this.formattedText=r,this.username=c,this.location=i,this.type=a,this.styleId=o,this.imageUrl=l,this.color=u,this.id=-1,this.width=0,this.height=0,this.elementRef=null,this.visible=!1,this.skipMovement=!1,this._top=0,this._left=0,this.id=++rh.BUBBLE_COUNTER}get top(){return this._top}set top(e){this._top=e,this.elementRef&&(this.elementRef.style.top=this._top+"px")}get left(){return this._left}set left(e){this._left=e,this.elementRef&&(this.elementRef.style.left=this._left+"px")}}rh.BUBBLE_COUNTER=0;const ch=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return!(e.left+n+e.width<t.left+n||e.left+n>t.left+n+t.width||e.top+e.height<t.top+s||e.top>t.top+s+t.height)};let ih=0;const ah=e=>{const[t,s]=Object(c.useState)({mode:a.Tf.CHAT_MODE_FREE_FLOW,weight:a.Tf.CHAT_BUBBLE_WIDTH_NORMAL,speed:a.Tf.CHAT_SCROLL_SPEED_NORMAL,distance:50,protection:a.Tf.FLOOD_FILTER_NORMAL}),[n,r]=Object(c.useState)([]),[i,o]=Object(c.useState)(ih++),{roomSession:l=null,eventDispatcher:u=null,widgetHandler:d=null}=Ud(),h=Object(c.useRef)(),j=Object(c.useCallback)((()=>{r((e=>{if(e){const t=e.filter((e=>e.top>2*-e.height));if(t.length!==e.length)return t}return e}))}),[]),b=Object(c.useCallback)((e=>{r((t=>(t&&t.forEach((t=>{t.skipMovement?t.skipMovement=!1:t.top-=e})),t))),j()}),[j]),g=Object(c.useCallback)(((e,t,s)=>{const r=n.length;if(r)for(let c=r-1;c>=0;c--){const r=n[c];if(!(!r||e===r||s.indexOf(r)>=0||r.top-t>=e.top+e.height)&&ch(e,r,-t,4)){const t=Math.abs(r.top+r.height-e.top);s.push(r),r.top-=t,r.skipMovement=!0,g(r,t,s)}}}),[n]),O=Object(c.useCallback)((e=>{if(t.mode===a.Tf.CHAT_MODE_FREE_FLOW)e.skipMovement=!0,g(e,0,[e]),j();else{const t=e.top+e.height,s=e.height,r=h.current.offsetHeight-t,c=s-r;r<s&&(n.forEach((t=>{t!==e&&(t.top-=c)})),j())}}),[t,n,j,g]),m=Object(c.useCallback)((e=>{const t=new rh(e.userId,e.userCategory,e.roomId,e.text,function(e){let t="";if(e=e.replace(/([\u00A0-\u9999<>&])(.|$)/g,(function(e,t,s){return"&"!==t||"#"!==s?(/[\u00A0-\u9999<>&]/.test(s)&&(s="&#"+s.charCodeAt(0)+";"),"&#"+t.charCodeAt(0)+";"+s):e})),(e=Os.shortnameToUnicode(e)).startsWith("@")&&e.indexOf("@",1)>-1){let s=null;for(;null!==(s=/@[a-zA-Z]+@/g.exec(e));){const n=s[0].toString(),r=n.substr(1,n.length-2),c=e.replace(n,"");t=ms.has(r)?'<span style="color: '+ms.get(r)+'">'+c+"</span>":c;break}}else t=e;return t}(e.text),e.userName,new a.Pe(e.userX,e.userY),e.chatType,e.styleId,e.userImage,e.userColor&&("#"+e.userColor.toString(16).padStart(6,"0")||!1));r((e=>[...e,t]))}),[]);et(_e.CHAT_EVENT,u,m);const p=Object(c.useCallback)((e=>{if(!n.length||e.roomId!==l.roomId)return;const t=e.offsetX/window.devicePixelRatio;n.forEach((e=>e.elementRef&&(e.left+=t)))}),[l,n]);ct(a.eg.ROOM_DRAG,p);const E=Object(c.useCallback)((e=>{d.processWidgetMessage(new Us(Us.GET_OBJECT_INFO,e.senderId,e.senderCategory)),d.processWidgetMessage(new Ts(Ts.MESSAGE_SELECT_AVATAR,e.senderId,e.username,e.roomId))}),[d]),f=Object(c.useCallback)((()=>{if(!t)return 6e3;switch(t.speed){case a.Tf.CHAT_SCROLL_SPEED_FAST:return 3e3;case a.Tf.CHAT_SCROLL_SPEED_NORMAL:return 6e3;case a.Tf.CHAT_SCROLL_SPEED_SLOW:return 12e3}}),[t]),x=Object(c.useCallback)((e=>{const t=e.getParser();t.roomEnter&&s(t.chat)}),[]);Je(a.hc,x);const I=Object(c.useCallback)((e=>{const t=e.getParser();s(t.chat)}),[]);Je(a.Uf,I),Object(c.useEffect)((()=>{const e=e=>{if(!h||!h.current)return;const t=h.current.offsetHeight,s=document.body.offsetHeight*N("chat.viewer.height.percentage");h.current.style.height=`${s}px`,r((e=>(e&&e.forEach((e=>{e.skipMovement?e.skipMovement=!1:e.top-=t-s})),e)))};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}}),[]);const T=Object(c.useCallback)((e=>{"MOVE_CHATS"!==e.type||b(15)}),[b]);return Object(c.useEffect)((()=>{const e={workerMessageReceived:T};var t;return t=e,_().addWorkerEventTracker(t),Mn({type:"CREATE_INTERVAL",time:f(),timerId:i,response:{type:"MOVE_CHATS"}}),()=>{Mn({type:"REMOVE_INTERVAL",timerId:i}),(e=>{_().removeWorkerEventTracker(e)})(e)}}),[i,T,f]),Object(Cr.jsx)("div",{ref:h,className:"nitro-chat-widget",children:n.map((e=>Object(Cr.jsx)(nh,{chat:e,makeRoom:O,onChatClicked:E,bubbleWidth:t.weight},e.id)))})},oh=e=>{const{title:t=null,items:s=null,displayItemId:n=!1,onCloseClick:r=null}=e,[i,a]=Object(c.useState)(null),[o,l]=Object(c.useState)(""),{widgetHandler:u=null}=Ud(),d=Object(c.useMemo)((()=>{if(!s)return[];if(!o||!o.length)return s;const e=o.toLocaleLowerCase();return s.filter((t=>t.name.toLocaleLowerCase().includes(e)))}),[s,o]),h=Object(c.useCallback)((e=>{a(e),u.processWidgetMessage(new Us(Us.SELECT_OBJECT,e.id,e.category))}),[u,a]),j=e=>{const t=d[e.index];return Object(Cr.jsx)(yr,{alignItems:"center",position:"absolute",className:"rounded px-1"+(i===t?" bg-muted":""),pointer:!0,style:e.style,onClick:e=>h(t),children:Object(Cr.jsxs)(Ac,{truncate:!0,children:[t.name," ",n&&" - "+t.id]})},e.key)};return Object(Cr.jsxs)($r,{className:"nitro-chooser-widget",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:t,onCloseClick:r}),Object(Cr.jsxs)(Hr,{overflow:"hidden",children:[Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:$e("generic.search"),value:o,onChange:e=>l(e.target.value)}),Object(Cr.jsx)(rc,{fullHeight:!0,overflow:"auto",children:Object(Cr.jsx)(Xa.a,{defaultWidth:0,defaultHeight:0,children:e=>{let{width:t,height:s}=e;return Object(Cr.jsx)(Xa.d,{width:t,height:s,rowCount:d.length,rowHeight:20,rowRenderer:j})}})})]})]})},lh=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),{eventDispatcher:l=null,widgetHandler:u=null}=Ud(),d=Object(c.useCallback)((()=>{t&&o((e=>(e&&clearTimeout(e),setTimeout((()=>u.processWidgetMessage(new Ps(Ps.FURNI_CHOOSER))),100))))}),[t,u]),h=Object(c.useCallback)((e=>{r(e.items),s(!0)}),[]);et(be.FURNI_CHOOSER_CONTENT,l,h);const j=Object(c.useCallback)((e=>{if(t)switch(e.type){case Le.FURNI_ADDED:case Le.FURNI_REMOVED:return void d()}}),[t,d]);et(Le.FURNI_ADDED,l,j),et(Le.FURNI_REMOVED,l,j);const b=Object(c.useCallback)((()=>{s(!1),r(null)}),[]);return n?Object(Cr.jsx)(oh,{title:$e("widget.chooser.furni.title"),displayItemId:K().hasSecurity(a.yh.MODERATOR),items:n,onCloseClick:b}):null},uh=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),[i,a]=Object(c.useState)(null),{eventDispatcher:o=null,widgetHandler:l=null}=Ud(),u=Object(c.useCallback)((()=>{t&&a((e=>(e&&clearTimeout(e),setTimeout((()=>l.processWidgetMessage(new Ps(Ps.USER_CHOOSER))),100))))}),[t,l]),d=Object(c.useCallback)((e=>{r(e.items),s(!0)}),[]);et(be.USER_CHOOSER_CONTENT,o,d);const h=Object(c.useCallback)((e=>{if(t)switch(e.type){case Le.USER_ADDED:case Le.USER_REMOVED:return void u()}}),[t,u]);et(Le.USER_ADDED,o,h),et(Le.USER_REMOVED,o,h);const j=Object(c.useCallback)((()=>{s(!1),r(null)}),[]);return t?Object(Cr.jsx)(oh,{title:$e("widget.chooser.user.title"),displayItemId:!1,items:n,onCloseClick:j}):null},dh=e=>{const[t,s]=Object(c.useState)(!1),{users:n=[],answer:r=null}=Dt();return Object(c.useEffect)((()=>{s(!!n.length)}),[n]),t?Object(Cr.jsxs)($r,{className:"nitro-widget-doorbell",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("navigator.doorbell.title"),onCloseClick:e=>s(!1)}),Object(Cr.jsxs)(Hr,{overflow:"hidden",gap:0,children:[Object(Cr.jsx)(rc,{gap:2,children:Object(Cr.jsxs)(Rr,{gap:1,className:"text-black fw-bold border-bottom px-1 pb-1",children:[Object(Cr.jsx)(Sr,{className:"g-col-6",children:$e("generic.username")}),Object(Cr.jsx)(Sr,{className:"g-col-6"})]})}),Object(Cr.jsx)(rc,{overflow:"auto",className:"striped-children",gap:0,children:n&&n.length>0&&n.map((e=>Object(Cr.jsxs)(Rr,{gap:1,alignItems:"center",className:"text-black border-bottom p-1",children:[Object(Cr.jsx)(Sr,{className:"g-col-6",children:e}),Object(Cr.jsx)(Sr,{className:"g-col-6",children:Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"end",gap:1,children:[Object(Cr.jsx)(wr,{variant:"success",onClick:()=>r(e,!0),children:$e("generic.accept")}),Object(Cr.jsx)(wr,{variant:"danger",onClick:()=>r(e,!1),children:$e("generic.deny")})]})})]},e)))})]})]}):null},hh=e=>{const{objectId:t=-1,category:s=-1,noFollow:n=!1,position:r="absolute",...i}=e,[a,o]=Object(c.useState)({x:-1,y:-1}),l=Object(c.useRef)(),u=Object(c.useCallback)((()=>{const e=ee();return ie(e.roomId,t,s,1)}),[t,s]),d=Object(c.useCallback)((()=>{const e=u();e&&l.current&&o({x:Math.round(e.left+e.width/2-l.current.offsetWidth/2),y:Math.round(e.top-l.current.offsetHeight+10)})}),[u]);return Object(c.useEffect)((()=>{let e=!1;return n?d():(e=!0,_().ticker.add(d)),()=>{e&&_().ticker.remove(d)}}),[d,n]),Object(Cr.jsx)(Sr,{innerRef:l,position:r,visible:a.x+(l.current?l.current.offsetWidth:0)>-1,className:"object-location",style:{left:a.x,top:a.y},...i})},jh=e=>{const{roomIndex:t=-1,request:s=null,hideFriendRequest:n=null}=e,{requestResponse:r=null}=ht();return Object(Cr.jsx)(hh,{objectId:t,category:a.zg.UNIT,children:Object(Cr.jsx)(Sr,{className:"nitro-friend-request-dialog nitro-context-menu p-2",children:Object(Cr.jsxs)(rc,{children:[Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"between",gap:2,children:[Object(Cr.jsx)(Ac,{variant:"white",fontSize:6,children:$e("widget.friendrequest.from",["username"],[s.name])}),Object(Cr.jsx)(Lr.a,{icon:"times",className:"cursor-pointer",onClick:e=>n(s.requesterUserId)})]}),Object(Cr.jsxs)(yr,{justifyContent:"end",gap:1,children:[Object(Cr.jsx)(wr,{variant:"danger",onClick:e=>r(s.requesterUserId,!1),children:$e("widget.friendrequest.decline")}),Object(Cr.jsx)(wr,{variant:"success",onClick:e=>r(s.requesterUserId,!0),children:$e("widget.friendrequest.accept")})]})]})})})},bh=e=>{const[t,s]=Object(c.useState)([]),[n,r]=Object(c.useState)([]),{roomSession:i=null,eventDispatcher:o=null}=Ud(),{requests:l=[]}=ht(),u=e=>{r((t=>{if(t.indexOf(e)>=0)return t;const s=[...t];return s.push(e),s}))},d=Object(c.useCallback)((e=>{if(e.category!==a.zg.UNIT)return;const n=i.userDataManager.getUserDataByIndex(e.id);if(n&&n.type===a.Eg.getTypeNumber(a.Eg.USER)){if(e.type===Le.USER_ADDED){const e=l.find((e=>e.requesterUserId===n.webID));if(!e||t.find((e=>e.request.requesterUserId===n.webID)))return;const r=[...t];r.push({roomIndex:n.roomIndex,request:e}),s(r)}}else if(e.type===Le.USER_REMOVED){const n=t.findIndex((t=>t.roomIndex===e.id));if(-1===n)return;const r=[...t];r.splice(n,1),s(r)}}),[i,l,t]);return et(Le.USER_ADDED,o,d),et(Le.USER_REMOVED,o,d),Object(c.useEffect)((()=>{if(!l||!l.length)return;const e=[];for(const t of l){const s=i.userDataManager.getUserData(t.requesterUserId);s&&e.push({roomIndex:s.roomIndex,request:t})}s(e)}),[i,l]),l.length?Object(Cr.jsx)(Cr.Fragment,{children:t.map(((e,t)=>n.indexOf(e.request.requesterUserId)>=0?null:Object(Cr.jsx)(jh,{roomIndex:e.roomIndex,request:e.request,hideFriendRequest:u},t)))}):null},gh=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(0),[l,u]=Object(c.useState)(0),{roomSession:d=null,eventDispatcher:h=null}=Ud(),j=Object(c.useCallback)((()=>{h.dispatchEvent(new pe(pe.CLEAR_PREVIEW)),s(-1)}),[h]),b=Object(c.useCallback)((()=>d.isRoomOwner||d.controllerLevel>=a.Wf.GUEST||K().isModerator),[d]),g=Object(c.useCallback)((e=>{switch(e.type){case a.jg.REQUEST_BACKGROUND_COLOR:{if(!b())return;const t=w().getRoomObject(e.roomId,e.objectId,e.category),n=t.model;return s(t.id),r(parseInt(n.getValue(a.Fg.FURNITURE_ROOM_BACKGROUND_COLOR_HUE))),o(parseInt(n.getValue(a.Fg.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION))),void u(parseInt(n.getValue(a.Fg.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS)))}case Le.FURNI_REMOVED:if(t!==e.objectId)return;return void j()}}),[t,b,j]);ct(a.jg.REQUEST_BACKGROUND_COLOR,g),et(Le.FURNI_REMOVED,h,g);const O=Object(c.useCallback)((e=>{switch(e){case"apply":Ln(new a.h(t,n,i,l));break;case"toggle":d.useMultistateItem(t)}}),[d,t,n,i,l]);return Object(c.useEffect)((()=>{-1!==t&&h.dispatchEvent(new pe(pe.PREVIEW,n,i,l))}),[h,t,n,i,l]),-1===t?null:Object(Cr.jsxs)($r,{theme:"primary-slim",className:"nitro-room-widget-toner",children:[Object(Cr.jsx)(Wr,{headerText:$e("widget.backgroundcolor.title"),onCloseClick:j}),Object(Cr.jsxs)(Hr,{overflow:"hidden",justifyContent:"between",children:[Object(Cr.jsxs)(rc,{overflow:"auto",gap:1,children:[Object(Cr.jsxs)(rc,{children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("widget.backgroundcolor.hue")}),Object(Cr.jsx)(gi.a,{className:"nitro-slider",min:0,max:360,value:n,onChange:e=>r(e),thumbClassName:"thumb degree",renderThumb:(e,t)=>Object(Cr.jsx)("div",{...e,children:t.valueNow})})]}),Object(Cr.jsxs)(rc,{children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("widget.backgroundcolor.saturation")}),Object(Cr.jsx)(gi.a,{className:"nitro-slider",min:0,max:100,value:i,onChange:e=>o(e),thumbClassName:"thumb percent",renderThumb:(e,t)=>Object(Cr.jsx)("div",{...e,children:t.valueNow})})]}),Object(Cr.jsxs)(rc,{children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("widget.backgroundcolor.lightness")}),Object(Cr.jsx)(gi.a,{className:"nitro-slider",min:0,max:100,value:l,onChange:e=>u(e),thumbClassName:"thumb percent",renderThumb:(e,t)=>Object(Cr.jsx)("div",{...e,children:t.valueNow})})]})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(wr,{fullWidth:!0,variant:"primary",onClick:e=>O("toggle"),children:$e("widget.backgroundcolor.button.on")}),Object(Cr.jsx)(wr,{fullWidth:!0,variant:"primary",onClick:e=>O("apply"),children:$e("widget.backgroundcolor.button.apply")})]})]})]})};class Oh{constructor(e,t,s,n,r,c,i){this.objectId=e,this.category=t,this.color=s,this.ownerName=n,this.date=r,this.message=c,this.customTitle=i}}const mh=e=>{const[t,s]=Object(c.useState)(null),{widgetHandler:n=null}=Ud(),r=Object(c.useCallback)((e=>{switch(e.type){case a.jg.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING:case a.jg.REQUEST_BADGE_DISPLAY_ENGRAVING:{const t=e,n=w().getRoomObject(t.roomId,t.objectId,t.category);if(!n)return;const r=new a.Hh;r.initializeFromRoomObjectModel(n.model);const c=Ye(r.getValue(1)),i=ze(r.getValue(1)),o=r.getValue(2),l=r.getValue(3);return void s(new Oh(t.objectId,t.category,"1",l,o,i,c))}case Le.FURNI_REMOVED:{const t=e;return void s((e=>e&&t.id===e.objectId&&t.category===e.category?null:e))}}}),[]);ct(a.jg.REQUEST_BADGE_DISPLAY_ENGRAVING,r),ct(a.jg.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING,r),et(Le.FURNI_REMOVED,n.eventDispatcher,r);const i=Object(c.useCallback)((function(e){"close"!==e||s(null)}),[]);return t?Object(Cr.jsx)(Tc,{color:t.color,message:t.message,date:t.date,senderName:t.ownerName,customTitle:t.customTitle,onCloseClick:()=>i("close")}):null},ph=e=>{const{objectId:t=-1,close:s=null}=e,{roomSession:n=null}=Ud();return Object(Cr.jsxs)($r,{className:"nitro-use-product-confirmation",children:[Object(Cr.jsx)(Wr,{headerText:$e("effectbox.header.title"),onCloseClick:s}),Object(Cr.jsx)(Hr,{center:!0,children:Object(Cr.jsx)(yr,{gap:2,children:Object(Cr.jsxs)(rc,{justifyContent:"between",children:[Object(Cr.jsx)(Ac,{children:$e("effectbox.header.description")}),Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"between",children:[Object(Cr.jsx)(wr,{variant:"danger",onClick:s,children:$e("generic.cancel")}),Object(Cr.jsx)(wr,{variant:"success",onClick:()=>{n.useMultistateItem(t),s()},children:$e("generic.ok")})]})]})})})]})},_h=e=>{const{objectId:t=-1,close:s=null}=e,[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(-1),{roomSession:l=null,widgetHandler:u=null}=Ud();return Object(c.useEffect)((()=>{if(!l||-1===t)return;const e=X(l.roomId,t,a.zg.FLOOR);if(!e)return;r(e);let n=-1;if(e.specialType===Bt.MONSTERPLANT_SEED)n=0;-1!==n?o(n):s()}),[l,t,s]),-1===i?null:Object(Cr.jsxs)($r,{className:"nitro-use-product-confirmation",children:[Object(Cr.jsx)(Wr,{headerText:$e("useproduct.widget.title.plant_seed",["name"],[n.name]),onCloseClick:s}),Object(Cr.jsx)(Hr,{center:!0,children:Object(Cr.jsxs)(yr,{gap:2,overflow:"hidden",children:[Object(Cr.jsx)(rc,{children:Object(Cr.jsx)(Sr,{className:"product-preview",children:Object(Cr.jsx)(Sr,{className:"monsterplant-image"})})}),Object(Cr.jsxs)(rc,{justifyContent:"between",overflow:"auto",children:[Object(Cr.jsxs)(rc,{gap:2,children:[Object(Cr.jsx)(Ac,{children:$e("useproduct.widget.text.plant_seed",["productName"],[n.name])}),Object(Cr.jsx)(Ac,{children:$e("useproduct.widget.info.plant_seed")})]}),Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"between",children:[Object(Cr.jsx)(wr,{variant:"danger",onClick:s,children:$e("useproduct.widget.cancel")}),Object(Cr.jsx)(wr,{variant:"success",onClick:()=>{u.processWidgetMessage(new Ls(Ls.MONSTERPLANT_SEED,t)),s()},children:$e("widget.monsterplant_seed.button.use")})]})]})]})})]})},Eh=e=>{const{objectId:t=-1,close:s=null}=e,[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(Gc.MALE),[l,u]=Object(c.useState)(null),{roomSession:d=null}=Ud();return Object(c.useEffect)((()=>{let e=-1;const n=K().figure,c=K().gender,i=[];if(d&&t>=0){const s=X(d.roomId,t,a.zg.FLOOR);if(s&&s.specialType===Bt.FIGURE_PURCHASABLE_SET){e=0;const t=s.customParams.split(",").map((e=>parseInt(e)));for(const e of t)f().isValidFigureSetForGender(e,c)&&i.push(e)}}-1!==e?(o(c),u(f().getFigureStringWithFigureIds(n,c,i)),r(e)):s()}),[d,t,s]),-1===n?null:Object(Cr.jsxs)($r,{className:"nitro-use-product-confirmation",children:[Object(Cr.jsx)(Wr,{headerText:$e("useproduct.widget.title.bind_clothing"),onCloseClick:s}),Object(Cr.jsx)(Hr,{center:!0,children:Object(Cr.jsxs)(yr,{gap:2,overflow:"hidden",children:[Object(Cr.jsx)(rc,{children:Object(Cr.jsx)(Sr,{className:"mannequin-preview",children:Object(Cr.jsx)(Xr,{figure:l,direction:2})})}),Object(Cr.jsxs)(rc,{justifyContent:"between",overflow:"auto",children:[Object(Cr.jsxs)(rc,{gap:2,children:[Object(Cr.jsx)(Ac,{children:$e("useproduct.widget.text.bind_clothing")}),Object(Cr.jsx)(Ac,{children:$e("useproduct.widget.info.bind_clothing")})]}),Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"between",children:[Object(Cr.jsx)(wr,{variant:"danger",onClick:s,children:$e("useproduct.widget.cancel")}),Object(Cr.jsx)(wr,{variant:"success",onClick:()=>{v().send(new a.Af(t)),v().send(new a.ui(i,l)),s()},children:$e("useproduct.widget.bind_clothing")})]})]})]})})]})},fh="MONSTERPLANT_SEED_CONFIRMATION",xh="PURCHASABLE_CLOTHING_CONFIRMATION",Ih="GROUP_FURNITURE",Th="EFFECTBOX_OPEN",Ch=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(-1),[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)(!1),{roomSession:g=null,widgetHandler:O=null}=Ud(),m=Object(c.useCallback)((()=>{s(-1),h(null),b(!1),r(null)}),[]),p=()=>{o(null),u(-1)},_=Object(c.useCallback)((e=>{const n=w().getRoomObject(g.roomId,e.objectId,e.category);if(n)switch(e.type){case a.jg.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG:if(!G(n))return;return u(n.id),o(fh),void m();case a.jg.REQUEST_EFFECTBOX_OPEN_DIALOG:if(!G(n))return;return u(n.id),o(Th),void m();case a.jg.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG:if(!G(n))return;return u(n.id),o(xh),void m();case a.jg.OPEN_FURNI_CONTEXT_MENU:switch(s(n.id),e.contextMenu){case a.ib.FRIEND_FURNITURE:return void r(a.ib.FRIEND_FURNITURE);case a.ib.MONSTERPLANT_SEED:return void(G(n)&&r(a.ib.MONSTERPLANT_SEED));case a.ib.MYSTERY_BOX:return;case a.ib.RANDOM_TELEPORT:return void r(a.ib.RANDOM_TELEPORT);case a.ib.PURCHASABLE_CLOTHING:return void(G(n)&&r(a.ib.PURCHASABLE_CLOTHING))}return;case a.jg.CLOSE_FURNI_CONTEXT_MENU:return void(n.id===t&&m())}}),[g,t,m]);ct(a.jg.OPEN_FURNI_CONTEXT_MENU,_),ct(a.jg.CLOSE_FURNI_CONTEXT_MENU,_),ct(a.jg.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,_),ct(a.jg.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,_),ct(a.jg.REQUEST_EFFECTBOX_OPEN_DIALOG,_);const E=Object(c.useCallback)((e=>{const t=e.getParser();s(t.objectId),h(t),b(t.userIsMember),r(Ih)}),[]);Je(a.Mc,E);const f=e=>{if(e)switch(e){case"use_friend_furni":g.useMultistateItem(t);break;case"use_monsterplant_seed":o(fh),u(t);break;case"use_random_teleport":O.processWidgetMessage(new ys(ys.USE,t,a.zg.FLOOR));break;case"use_purchaseable_clothing":o(xh),u(t);break;case"join_group":return Zn(d.guildId),void b(!0);case"go_to_group_homeroom":d&&ar(d.guildHomeRoomId)}m()};return Object(Cr.jsxs)(Cr.Fragment,{children:[i===fh&&Object(Cr.jsx)(_h,{objectId:l,close:p}),i===xh&&Object(Cr.jsx)(Eh,{objectId:l,close:p}),i===Th&&Object(Cr.jsx)(ph,{objectId:l,close:p}),t>=0&&n&&Object(Cr.jsxs)(Vd,{objectId:t,category:a.zg.FLOOR,close:m,fades:!0,children:[n===a.ib.FRIEND_FURNITURE&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Md,{children:$e("friendfurni.context.title")}),Object(Cr.jsx)(Gd,{onClick:e=>f("use_friend_furni"),children:$e("friendfurni.context.use")})]}),n===a.ib.MONSTERPLANT_SEED&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Md,{children:$e("furni.mnstr_seed.name")}),Object(Cr.jsx)(Gd,{onClick:e=>f("use_monsterplant_seed"),children:$e("widget.monsterplant_seed.button.use")})]}),n===a.ib.RANDOM_TELEPORT&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Md,{children:$e("furni.random_teleport.name")}),Object(Cr.jsx)(Gd,{onClick:e=>f("use_random_teleport"),children:$e("widget.random_teleport.button.use")})]}),n===a.ib.PURCHASABLE_CLOTHING&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Md,{children:$e("furni.generic_usable.name")}),Object(Cr.jsx)(Gd,{onClick:e=>f("use_purchaseable_clothing"),children:$e("widget.generic_usable.button.use")})]}),n===Ih&&d&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Md,{className:"cursor-pointer text-truncate",onClick:()=>$n(d.guildId),children:d.guildName}),!j&&Object(Cr.jsx)(Gd,{onClick:e=>f("join_group"),children:$e("widget.furniture.button.join.group")}),Object(Cr.jsx)(Gd,{onClick:e=>f("go_to_group_homeroom"),children:$e("widget.furniture.button.go.to.group.home.room")}),d.guildHasReadableForum&&Object(Cr.jsx)(Gd,{onClick:e=>f("open_forum"),children:$e("widget.furniture.button.open_group_forum")})]})]})]})},Sh=40,Nh=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(-1),{eventDispatcher:l=null}=Ud(),u=Object(c.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e||(e=0),e=Math.abs(e),t||e>Sh&&(e=Sh),r(parseFloat(e.toFixed(2))),t||o(100*e)}),[]),d=Object(c.useCallback)((e=>{if(e.type===xe.UPDATE_CUSTOM_STACK_HEIGHT)s(e.objectId),u(e.height,!0)}),[u]);et(xe.UPDATE_CUSTOM_STACK_HEIGHT,l,d);const h=Object(c.useCallback)((e=>{const s=e.getParser();t===s.furniId&&u(s.height,!0)}),[t,u]);Je(a.Tb,h);const j=Object(c.useCallback)((e=>{Ln(new a.Sb(t,~~e))}),[t]);return Object(c.useEffect)((()=>{if(-1===t||-1===i)return;const e=setTimeout((()=>j(~~i)),10);return()=>clearTimeout(e)}),[t,i,j]),-1===t?null:Object(Cr.jsxs)($r,{className:"nitro-widget-custom-stack-height",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("widget.custom.stack.height.title"),onCloseClick:()=>{s(-1),r(0)}}),Object(Cr.jsxs)(Hr,{justifyContent:"between",children:[Object(Cr.jsx)(Ac,{children:$e("widget.custom.stack.height.text")}),Object(Cr.jsxs)(yr,{gap:2,children:[Object(Cr.jsx)(gi.a,{className:"nitro-slider",min:0,max:Sh,step:.01,value:n,onChange:e=>u(e),renderThumb:(e,t)=>Object(Cr.jsx)("div",{...e,children:t.valueNow})}),Object(Cr.jsx)("input",{type:"number",min:0,max:Sh,value:n,onChange:e=>u(parseFloat(e.target.value))})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(wr,{onClick:e=>j(-100),children:$e("furniture.above.stack")}),Object(Cr.jsx)(wr,{onClick:e=>j(0),children:$e("furniture.floor.level")})]})]})]})};class vh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.id=e,this.type=t,this.color=s,this.light=n}}const Rh=[7665141,21495,15161822,15353138,15923281,8581961,0],Ah=["#74F5F5","#0053F7","#E759DE","#EA4532","#F2F851","#82F349","#000000"],yh=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)([]),[i,a]=Object(c.useState)(0),[o,l]=Object(c.useState)(0),[u,d]=Object(c.useState)(0),[h,j]=Object(c.useState)(0),[b,g]=Object(c.useState)(16777215),[O,m]=Object(c.useState)(255),[p,_]=Object(c.useState)(0),[E,f]=Object(c.useState)(0),[x,I]=Object(c.useState)(0),{eventDispatcher:T=null,widgetHandler:C=null}=Ud(),S=Object(c.useCallback)((e=>{switch(e.type){case Ce.PRESETS:{const t=e,n=[];for(const e of t.presets)n.push(new vh(e.id,e.type,e.color,e.brightness));return r(n),a(t.selectedPresetId),void s(!0)}case Ce.HIDE:return void s(!1);case Se.DIMMER_STATE:{const t=e;return d(o),l(t.state),a(t.presetId),j(t.effectId),_(t.effectId),g(t.color),f(t.color),m(t.brightness),void I(t.brightness)}}}),[o]);et(Ce.PRESETS,T,S),et(Ce.HIDE,T,S),et(Se.DIMMER_STATE,T,S);const v=Object(c.useCallback)((e=>{const t=n[e-1];t&&(a(t.id),_(t.type),f(t.color),I(t.light))}),[n]),R=Object(c.useCallback)((()=>{C.processWidgetMessage(new Rs(b,O,2===h)),s(!1)}),[C,b,O,h]),A=Object(c.useCallback)((()=>{C.processWidgetMessage(new vs)}),[C]),y=Object(c.useCallback)((()=>{if(0===o)return;const e=i-1;if(i<1||i>n.length)return;const t=n[e];!t||p===t.type&&E===t.color&&x===t.light||(r((s=>{const n=[...s];return n[e]=new vh(t.id,p,E,x),n})),C.processWidgetMessage(new As(t.id,p,E,x,!0)))}),[C,o,i,n,p,E,x]),w=Object(c.useCallback)((e=>~~(100*(e-76)/179+0)),[]),k=Object(c.useMemo)((()=>N("widget.dimmer.colorwheel",!1)),[]);return Object(c.useEffect)((()=>{0===o&&0===u||C.processWidgetMessage(new Rs(E,x,2===p))}),[C,o,u,E,x,p]),t?Object(Cr.jsxs)($r,{className:"nitro-room-widget-dimmer",children:[Object(Cr.jsx)(Wr,{headerText:$e("widget.dimmer.title"),onCloseClick:R}),1===o&&Object(Cr.jsx)(Nc,{children:n.map((e=>Object(Cr.jsx)(Sc,{isActive:i===e.id,onClick:t=>v(e.id),children:$e(`widget.dimmer.tab.${e.id}`)},e.id)))}),Object(Cr.jsxs)(Hr,{children:[0===o&&Object(Cr.jsxs)(rc,{alignItems:"center",children:[Object(Cr.jsx)(Sr,{className:"dimmer-banner"}),Object(Cr.jsx)(Ac,{center:!0,className:"bg-muted rounded p-1",children:$e("widget.dimmer.info.off")}),Object(Cr.jsx)(wr,{fullWidth:!0,variant:"success",onClick:A,children:$e("widget.dimmer.button.on")})]}),1===o&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{fontWeight:"bold",children:$e("widget.backgroundcolor.hue")}),k&&Object(Cr.jsx)("input",{type:"color",className:"form-control",value:qe.makeColorNumberHex(E),onChange:e=>f(qe.convertFromHex(e.target.value))}),!k&&Object(Cr.jsx)(Rr,{gap:1,columnCount:7,children:Rh.map(((e,t)=>Object(Cr.jsx)(rc,{fullWidth:!0,pointer:!0,className:"color-swatch rounded"+Wi()({" active":e===E}),onClick:()=>f(e),style:{backgroundColor:Ah[t]}},t)))})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{fontWeight:"bold",children:$e("widget.backgroundcolor.lightness")}),Object(Cr.jsx)(gi.a,{className:"nitro-slider",min:76,max:255,value:x,onChange:e=>I(e),thumbClassName:"thumb percent",renderThumb:(e,t)=>Object(Cr.jsx)("div",{...e,children:w(t.valueNow)})})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:2===p,onChange:e=>_(e.target.checked?2:1)}),Object(Cr.jsx)(Ac,{children:$e("widget.dimmer.type.checkbox")})]}),Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(wr,{fullWidth:!0,variant:"danger",onClick:A,children:$e("widget.dimmer.button.off")}),Object(Cr.jsx)(wr,{fullWidth:!0,variant:"success",onClick:y,children:$e("widget.dimmer.button.apply")})]})]})]})]}):null},wh=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(0),{eventDispatcher:i=null,widgetHandler:a=null}=Ud(),o=Object(c.useCallback)((e=>{s(e.objectId),r(e.value)}),[]);et(fe.CREDIT_FURNI_UPDATE,i,o);const l=()=>{s(-1),r(0)};return-1===t?null:Object(Cr.jsxs)($r,{className:"nitro-widget-exchange-credit",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("catalog.redeem.dialog.title"),onCloseClick:l}),Object(Cr.jsx)(Hr,{center:!0,children:Object(Cr.jsxs)(yr,{overflow:"hidden",gap:2,children:[Object(Cr.jsx)(rc,{center:!0,children:Object(Cr.jsx)(Sr,{className:"exchange-image"})}),Object(Cr.jsxs)(rc,{grow:!0,justifyContent:"between",overflow:"hidden",children:[Object(Cr.jsxs)(rc,{gap:1,overflow:"auto",children:[Object(Cr.jsx)(Ac,{fontWeight:"bold",children:$e("creditfurni.description",["credits"],[n.toString()])}),Object(Cr.jsx)(Ac,{children:$e("creditfurni.prompt")})]}),Object(Cr.jsx)(wr,{variant:"success",onClick:()=>{a.processWidgetMessage(new Ss(Ss.REDEEM,t)),l()},children:$e("catalog.redeem.dialog.button.exchange")})]})]})})]})},kh=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(null),{eventDispatcher:i=null}=Ud(),a=Object(c.useCallback)((e=>{if(e.type===Ne.UPDATE_EXTERNAL_IMAGE)return s(e.objectId),void r(e.photoData)}),[]);return et(Ne.UPDATE_EXTERNAL_IMAGE,i,a),-1!==t&&n?Object(Cr.jsxs)($r,{className:"nitro-external-image-widget",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:"",onCloseClick:()=>{s(-1),r(null)}}),Object(Cr.jsxs)(Hr,{children:[Object(Cr.jsx)(yr,{center:!0,className:"picture-preview border border-black",style:n.w?{backgroundImage:"url("+n.w+")"}:{},children:!n.w&&Object(Cr.jsx)(Ac,{bold:!0,children:$e("camera.loading")})}),n.m&&n.m.length&&Object(Cr.jsx)(Ac,{center:!0,children:n.m}),Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"between",children:[Object(Cr.jsx)(Ac,{children:n.n||""}),Object(Cr.jsx)(Ac,{children:new Date(1e3*n.t).toLocaleDateString()})]})]})]}):null};class Dh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this.objectId=e,this.category=t,this.type=s,this.usernames=n,this.figures=r,this.date=c}}const Ph=e=>{const{eventDispatcher:t=null,widgetHandler:s=null}=Ud(),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(0),l=e=>{switch(e.type){case a.jg.REQUEST_FRIEND_FURNITURE_ENGRAVING:{const t=e,s=w().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return;const n=s.model.getValue(a.Fg.FURNITURE_DATA),c=s.model.getValue(a.Fg.FURNITURE_FRIENDFURNI_ENGRAVING);if("1"===n[0]){if(6!==n.length)return;r(new Dh(t.objectId,t.category,c,[n[1],n[2]],[n[3],n[4]],n[5])),o(0)}return}case Le.FURNI_REMOVED:{const t=e;return void r((e=>e&&t.id===e.objectId&&t.category===e.category?null:e))}}};ct(a.jg.REQUEST_FRIEND_FURNITURE_ENGRAVING,l),et(Le.FURNI_REMOVED,t,l);const u=Object(c.useCallback)((e=>{const t=e.getParser();r(new Dh(t.furniId)),o(t.start?1:2)}),[]);Je(a.Sd,u);const d=Object(c.useCallback)((function(e){switch(e){case"close_view":return void r(null);case"accept_request":return ee().connection.send(new a.Bb(n.objectId,!0)),void d("close_request");case"reject_request":return ee().connection.send(new a.Bb(n.objectId,!1)),void d("close_request");case"close_request":return o(0),void r(null)}}),[n]),h=Object(c.useCallback)((e=>{d("close_request")}),[d]);return Je(a.Qd,h),Je(a.Rd,h),Object(Cr.jsxs)(Cr.Fragment,{children:[i>0&&Object(Cr.jsxs)($r,{className:"nitro-engraving-lock",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("friend.furniture.confirm.lock.caption"),onCloseClick:e=>d("close_request")}),Object(Cr.jsxs)(Hr,{children:[Object(Cr.jsx)("h5",{className:"text-black text-center fw-bold mt-2 mb-2",children:$e("friend.furniture.confirm.lock.subtitle")}),Object(Cr.jsx)("div",{className:"d-flex justify-content-center mb-2",children:Object(Cr.jsx)("div",{className:"engraving-lock-stage-"+i})}),2===i&&Object(Cr.jsx)("div",{className:"text-small text-black text-center mb-2",children:$e("friend.furniture.confirm.lock.other.locked")}),Object(Cr.jsxs)("div",{className:"d-flex",children:[Object(Cr.jsx)("button",{className:"btn btn-primary w-100 me-2",onClick:e=>d("reject_request"),children:$e("friend.furniture.confirm.lock.button.cancel")}),Object(Cr.jsx)("button",{className:"btn btn-success w-100",onClick:e=>d("accept_request"),children:$e("friend.furniture.confirm.lock.button.confirm")})]})]})]}),n&&n.usernames.length>0&&Object(Cr.jsx)(Qr,{handleSelector:".nitro-engraving-lock-view",children:Object(Cr.jsxs)("div",{className:"nitro-engraving-lock-view engraving-lock-"+n.type,children:[Object(Cr.jsx)("div",{className:"engraving-lock-close",onClick:e=>d("close_view")}),Object(Cr.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(Cr.jsx)("div",{className:"engraving-lock-avatar",children:Object(Cr.jsx)(Xr,{figure:n.figures[0],direction:2})}),Object(Cr.jsx)("div",{className:"engraving-lock-avatar",children:Object(Cr.jsx)(Xr,{figure:n.figures[1],direction:4})})]}),Object(Cr.jsxs)("div",{className:"text-center mt-1",children:[Object(Cr.jsxs)("div",{children:[0===n.type&&$e("lovelock.engraving.caption"),3===n.type&&$e("wildwest.engraving.caption")]}),Object(Cr.jsx)("div",{children:n.date}),Object(Cr.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(Cr.jsx)("div",{className:"me-4",children:n.usernames[0]}),Object(Cr.jsx)("div",{children:n.usernames[1]})]})]})]})})]})},Uh=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(!1),[j,b]=Object(c.useState)(null),[g,O]=Object(c.useState)(null),[m,_]=Object(c.useState)(-1),[E,f]=Object(c.useState)(null),[x,I]=Object(c.useState)(!1),[T,S]=Object(c.useState)(null),[N,v]=Object(c.useState)(!1),{roomSession:R=null,eventDispatcher:A=null,widgetHandler:y=null}=Ud(),k=Object(c.useCallback)((()=>{N||s(-1),u(null),h(!1)}),[N]),D=Object(c.useCallback)((e=>""),[]),P=Object(c.useCallback)((e=>{switch(e.type){case De.PACKAGEINFO:return v(!1),s(e.objectId),u(e.giftMessage),h(e.isController),b(e.purchaserName),O(e.purchaserFigure),void S(e.imageUrl);case De.CONTENTS_FLOOR:case De.CONTENTS_LANDSCAPE:case De.CONTENTS_WALLPAPER:{let t=null;return e.type===De.CONTENTS_FLOOR?t="packagecard_icon_floor":e.type===De.CONTENTS_LANDSCAPE?t="packagecard_icon_landscape":e.type===De.CONTENTS_WALLPAPER&&(t="packagecard_icon_wallpaper"),s(e.objectId),r(e.classId),o(e.itemType),u(e.giftMessage),h(e.isController),_(e.placedItemId),f(e.placedItemType),I(e.placedInRoom),void S(D(t))}case De.CONTENTS_CLUB:return s(e.objectId),r(e.classId),o(e.itemType),u(e.giftMessage),h(e.isController),void S(D("packagecard_icon_hc"));case De.CONTENTS:if(!N)return;return s(e.objectId),r(e.classId),o(e.itemType),u(e.giftMessage),h(e.isController),_(e.placedItemId),f(e.placedItemType),I(e.placedInRoom),void S(e.imageUrl);case De.CONTENTS_IMAGE:if(!N)return;S(e.imageUrl)}}),[N,D]);et(De.PACKAGEINFO,A,P),et(De.CONTENTS,A,P),et(De.CONTENTS_FLOOR,A,P),et(De.CONTENTS_LANDSCAPE,A,P),et(De.CONTENTS_WALLPAPER,A,P),et(De.CONTENTS_CLUB,A,P),et(De.CONTENTS_IMAGE,A,P);const U=Object(c.useCallback)((e=>{e.id===t&&k(),e.id===m&&x&&I(!1)}),[t,m,x,k]);et(Le.FURNI_REMOVED,A,U);const L=Object(c.useCallback)((()=>{s(-1),v(!1),_(-1),I(!1),u(null),h(!1)}),[]),M=Object(c.useMemo)((()=>{if(i!==p.WALL)return!1;const e=K().getWallItemData(n);if(!e)return!1;const t=e.className;return"floor"===t||"landscape"===t||"wallpaper"===t}),[n,i]),F=Object(c.useMemo)((()=>-1===t?"":M?"widget.furni.present.spaces.message_opened":"widget.furni.present.message_opened"),[t,M]),H=Object(c.useCallback)((e=>{switch(e){case 0:return void C("catalog/open");case 1:return v(!0),void y.processWidgetMessage(new Ds(Ds.OPEN_PRESENT,t));case 2:return;case 3:if(m>0&&x)if(E===p.PET)R.pickupPet(m);else{const e=w().getRoomObject(R.roomId,m,a.zg.FLOOR);e&&w().processRoomObjectOperation(e.id,a.zg.FLOOR,a.Bg.OBJECT_PICKUP)}return void L()}}),[R,y,t,x,m,E,L]);return-1===t?null:Object(Cr.jsxs)($r,{className:"nitro-gift-opening",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e(j?"widget.furni.present.window.title_from":"widget.furni.present.window.title",["name"],[j]),onCloseClick:L}),Object(Cr.jsxs)(Hr,{center:!0,children:[-1===m&&Object(Cr.jsxs)(rc,{overflow:"hidden",children:[Object(Cr.jsx)(yr,{center:!0,overflow:"auto",children:Object(Cr.jsx)(nc,{userName:j,figure:g,message:l})}),Object(Cr.jsxs)(yr,{gap:1,children:[j&&Object(Cr.jsx)(wr,{fullWidth:!0,onClick:e=>H(0),children:$e("widget.furni.present.give_gift",["name"],[j])}),Object(Cr.jsx)(wr,{fullWidth:!0,variant:"success",onClick:e=>H(1),children:$e("widget.furni.present.open_gift")})]})]}),m>-1&&Object(Cr.jsxs)(rc,{overflow:"hidden",children:[Object(Cr.jsxs)(yr,{center:!0,overflow:"auto",gap:2,children:[Object(Cr.jsx)("img",{src:T,className:"no-select",alt:""}),Object(Cr.jsx)(Ac,{wrap:!0,children:$e(F,["product"],[l])})]}),Object(Cr.jsxs)(rc,{grow:!0,gap:1,children:[Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(wr,{fullWidth:!0,onClick:e=>H(3),children:$e("widget.furni.present.put_in_inventory")}),Object(Cr.jsx)(wr,{fullWidth:!0,variant:"success",onClick:e=>H(2),children:$e(x?"widget.furni.present.keep_in_room":"widget.furni.present.place_in_room")})]}),j&&j.length&&Object(Cr.jsx)(wr,{fullWidth:!0,onClick:e=>H(0),children:$e("widget.furni.present.give_gift",["name"],[j])})]})]})]})]})},Lh=["perteam","mostwins","classic"],Mh=["alltime","daily","weekly","monthly"],Fh=e=>{const[t,s]=Object(c.useState)(new Map),{roomSession:n=null}=Ud(),r=Object(c.useCallback)((e=>{switch(e.type){case a.jg.REQUEST_HIGH_SCORE_DISPLAY:{const t=w().getRoomObject(n.roomId,e.objectId,e.category);if(!t)return;const r=t.model.getValue(a.Fg.FURNITURE_DATA_FORMAT),c=a.Ye.getData(r);return c.initializeFromRoomObjectModel(t.model),void s((e=>{const s=new Map(e);return s.set(t.id,c),s}))}case a.jg.REQUEST_HIDE_HIGH_SCORE_DISPLAY:if(e.roomId!==n.roomId)return;return void s((t=>{const s=new Map(t);return s.delete(e.objectId),s}))}}),[n]);return ct(a.jg.REQUEST_HIGH_SCORE_DISPLAY,r),ct(a.jg.REQUEST_HIDE_HIGH_SCORE_DISPLAY,r),t.size?Object(Cr.jsx)(Cr.Fragment,{children:Array.from(t.entries()).map(((e,t)=>{let[s,n]=e;return Object(Cr.jsx)(hh,{objectId:s,category:a.zg.FLOOR,children:Object(Cr.jsxs)(rc,{className:"nitro-widget-high-score nitro-context-menu",gap:0,children:[Object(Cr.jsx)(Md,{children:$e("high.score.display.caption",["scoretype","cleartype"],[$e(`high.score.display.scoretype.${Lh[n.scoreType]}`),$e(`high.score.display.cleartype.${Mh[n.clearType]}`)])}),Object(Cr.jsxs)(Yd,{overflow:"hidden",gap:1,className:"h-100",children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{alignItems:"center",children:[Object(Cr.jsx)(Ac,{center:!0,bold:!0,variant:"white",className:"col-8",children:$e("high.score.display.users.header")}),Object(Cr.jsx)(Ac,{center:!0,bold:!0,variant:"white",className:"col-4",children:$e("high.score.display.score.header")})]}),Object(Cr.jsx)("hr",{className:"m-0"})]}),Object(Cr.jsx)(rc,{overflow:"auto",gap:1,className:"overflow-y-scroll",children:n.entries.map(((e,t)=>Object(Cr.jsxs)(yr,{alignItems:"center",children:[Object(Cr.jsx)(Ac,{center:!0,variant:"white",className:"col-8",children:e.users.join(", ")}),Object(Cr.jsx)(Ac,{center:!0,variant:"white",className:"col-4",children:e.score})]},t)))})]})]})},t)}))}):null},Hh=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(-1),{roomSession:l=null,eventDispatcher:u=null,widgetHandler:d=null}=Ud(),h=Object(c.useCallback)((()=>{oe(n,i,a.Bg.OBJECT_ROTATE_POSITIVE)}),[n,i]),j=Object(c.useCallback)((()=>{oe(n,i,a.Bg.OBJECT_MOVE)}),[n,i]),b=Object(c.useCallback)((()=>{oe(n,i,a.Bg.OBJECT_PICKUP)}),[n,i]),g=Object(c.useCallback)((e=>{switch(e.type){case Le.OBJECT_REQUEST_MANIPULATION:return s(!0),r(e.id),void o(e.category);case Le.FURNI_REMOVED:return void(e.id===n&&(s(!1),r(-1),o(-1)));case Le.OBJECT_DESELECTED:return s(!1),r(-1),void o(-1)}}),[n]);et(Le.OBJECT_REQUEST_MANIPULATION,u,g),et(Le.OBJECT_DESELECTED,u,g);const O=Object(c.useCallback)((e=>{e.isDecorating||(j(),s(!1),r(-1),o(-1))}),[j]);return et(Te.UPDATE_DECORATE,u,O),Object(c.useEffect)((()=>{t?(u.dispatchEvent(new Te(!0)),j()):u.dispatchEvent(new Te(!1))}),[u,t,j]),t?Object(Cr.jsx)(hh,{objectId:n,category:i,children:Object(Cr.jsxs)("div",{className:"btn-group",children:[Object(Cr.jsx)("button",{type:"button",className:"btn btn-primary btn-sm",onClick:b,children:Object(Cr.jsx)(Lr.a,{icon:"times"})}),Object(Cr.jsx)("button",{type:"button",className:"btn btn-primary btn-sm",onClick:h,children:Object(Cr.jsx)(Lr.a,{icon:"undo"})})]})}):null},Bh=["hd",99999,[99998]],Gh=[a.p.CHEST_ACCESSORY,a.p.COAT_CHEST,a.p.CHEST,a.p.LEGS,a.p.SHOES,a.p.WAIST_ACCESSORY],Wh=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(a.xd.NO_CLUB),[j,b]=Object(c.useState)(null),[g,O]=Object(c.useState)(a.xd.NO_CLUB),[m,p]=Object(c.useState)(-1),{roomSession:_=null,eventDispatcher:E=null}=Ud(),x=Object(c.useCallback)((e=>{const t=f().createFigureContainer(e.figure),n=f().getFigureClubLevel(t,e.gender,Gh);s(e.objectId),r(e.figure),o(e.gender),u(e.name),h(n),_.isRoomOwner||_.controllerLevel>=a.Wf.GUEST||K().isModerator?p(0):K().gender.toLowerCase()!==e.gender.toLowerCase()?p(4):Q()<n?p(3):p(2)}),[_]);et(ke.MANNEQUIN_UPDATE,E,x);const I=e=>{for(const t of e.getPartTypeIds())Gh.indexOf(t)>=0||e.removePart(t);e.updatePart(Bh[0],Bh[1],Bh[2])},T=Object(c.useCallback)((function(e){switch(e){case 3:Ln(new a.Nb(t));break;case 2:Ln(new a.Pb(t));break;case 1:return void Ln(new a.Ob(t,l))}p(-1)}),[t,l]);return Object(c.useEffect)((()=>{switch(m){case 0:case 4:{const e=f().createFigureContainer(n);I(e),b(e.getFigureString()),O(d);break}case 1:{const e=f().createFigureContainer(K().figure);I(e),b(e.getFigureString()),O(f().getFigureClubLevel(e,K().gender,Gh));break}case 2:case 3:{const e=((e,t)=>{const s=f().createFigureContainer(e),n=f().createFigureContainer(t);for(const r of Gh)s.removePart(r);for(const r of n.getPartTypeIds())s.updatePart(r,n.getPartSetId(r),n.getPartColorIds(r));return s})(K().figure,n);b(e.getFigureString()),O(d);break}}}),[m,n,d]),-1===m?null:Object(Cr.jsxs)($r,{className:"nitro-mannequin",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("mannequin.widget.title"),onCloseClick:e=>p(-1)}),Object(Cr.jsx)(Hr,{center:!0,children:Object(Cr.jsxs)(yr,{gap:2,overflow:"hidden",children:[Object(Cr.jsx)(rc,{children:Object(Cr.jsxs)(Sr,{position:"relative",className:"mannequin-preview",children:[Object(Cr.jsx)(Xr,{figure:j,direction:2}),d>0&&Object(Cr.jsx)(ec,{className:"position-absolute end-2 bottom-2",type:"hc"})]})}),Object(Cr.jsxs)(rc,{justifyContent:"between",overflow:"auto",children:[0===m&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)("input",{type:"text",className:"form-control",value:l,onChange:e=>u(e.target.value),onKeyDown:e=>(e=>{"Enter"===e.key&&T(1)})(e)}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(wr,{variant:"success",onClick:e=>p(1),children:$e("mannequin.widget.style")}),Object(Cr.jsx)(wr,{variant:"success",onClick:e=>T(2),children:$e("mannequin.widget.wear")})]})]}),1===m&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:l}),Object(Cr.jsx)(Ac,{wrap:!0,children:$e("mannequin.widget.savetext")})]}),Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"between",children:[Object(Cr.jsx)(Ac,{underline:!0,pointer:!0,onClick:e=>p(0),children:$e("mannequin.widget.back")}),Object(Cr.jsx)(wr,{variant:"success",onClick:e=>T(3),children:$e("mannequin.widget.save")})]})]}),2===m&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:l}),Object(Cr.jsx)(Ac,{children:$e("mannequin.widget.weartext")})]}),Object(Cr.jsx)(wr,{variant:"success",onClick:e=>T(2),children:$e("mannequin.widget.wear")})]}),3===m&&Object(Cr.jsx)(Ac,{children:$e("mannequin.widget.clubnotification")}),4===m&&Object(Cr.jsx)(Ac,{children:$e("mannequin.widget.wronggender")})]})]})})]})};class Vh{constructor(e,t,s,n){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.objectId=e,this.category=t,this.color=s,this.text=n,this.canModify=r,this.isEditing=c}}const qh=["9CCEFF","FF9CFF","9CFF9C","FFFF33"],zh=["blue","pink","green","yellow"];function Yh(e){let t=qh.indexOf(e);return-1===t&&(t=0),zh[t]}const Kh=e=>{const{eventDispatcher:t=null,widgetHandler:s=null}=Ud(),[n,r]=Object(c.useState)(null),i=Object(c.useCallback)((e=>{switch(e.type){case a.jg.REQUEST_STICKIE:{const t=e,s=w().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return;const n=s.model.getValue(a.Fg.FURNITURE_ITEMDATA);if(n.length<6)return;let c=null,i=null;return n.indexOf(" ")>0?(c=n.slice(0,n.indexOf(" ")),i=n.slice(n.indexOf(" ")+1,n.length)):c=n,void r(new Vh(t.objectId,t.category,c,i,ee().isRoomOwner||K().isModerator,!1))}case Le.FURNI_REMOVED:{const t=e;return void r((e=>e&&t.id===e.objectId&&t.category===e.category?null:e))}}}),[]);ct(a.jg.REQUEST_STICKIE,i),et(Le.FURNI_REMOVED,t,i);const o=Object(c.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case"close":return void r(null);case"trash":return void r((e=>e?(w().deleteRoomObject(e.objectId,e.category),null):null));case"changeColor":return void r((e=>{const s=new Vh(e.objectId,e.category,t,e.text,e.canModify);return w().modifyRoomObjectData(s.objectId,s.category,s.color,s.text),s}));case"changeText":return void r((e=>{const s=new Vh(e.objectId,e.category,e.color,t,e.canModify);return w().modifyRoomObjectData(s.objectId,s.category,s.color,s.text),s}));case"editMode":return void r((e=>e.canModify?new Vh(e.objectId,e.category,e.color,e.text,e.canModify,!0):e))}}),[]);return n?Object(Cr.jsx)(Qr,{handleSelector:".drag-handler",windowPosition:zr.NOTHING,children:Object(Cr.jsxs)("div",{className:"nitro-stickie nitro-stickie-image stickie-"+Yh(n.color),children:[Object(Cr.jsxs)("div",{className:"d-flex align-items-center stickie-header drag-handler",children:[Object(Cr.jsx)("div",{className:"d-flex align-items-center flex-grow-1 h-100",children:n.canModify&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)("div",{className:"nitro-stickie-image stickie-trash header-trash",onClick:e=>o("trash")}),qh.map((e=>Object(Cr.jsx)("div",{className:"stickie-color ms-1",onClick:t=>o("changeColor",e),style:{backgroundColor:qe.makeColorHex(e)}},e)))]})}),Object(Cr.jsx)("div",{className:"d-flex align-items-center nitro-stickie-image stickie-close header-close",onClick:e=>o("close")})]}),Object(Cr.jsx)("div",{className:"stickie-context",children:n.isEditing?Object(Cr.jsx)("textarea",{className:"context-text",defaultValue:n.text||"",tabIndex:0,onBlur:e=>o("changeText",e.target.value),autoFocus:!0}):Object(Cr.jsx)("div",{className:"context-text",onClick:e=>o("editMode"),children:n.text})})]})}):null},Qh=e=>{const{eventDispatcher:t=null,widgetHandler:s=null}=Ud(),[n,r]=Object(c.useState)(null),i=Object(c.useCallback)((e=>{switch(e.type){case a.jg.REQUEST_TROPHY:{const t=e,s=w().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return;let n=s.model.getValue(a.Fg.FURNITURE_DATA),c=s.model.getValue(a.Fg.FURNITURE_EXTRAS);c||(c="0");const i=s.model.getValue(a.Fg.FURNITURE_COLOR),o=n.substring(0,n.indexOf("\t"));n=n.substring(o.length+1,n.length);const l=n.substring(0,n.indexOf("\t")),u=n.substr(l.length+1,n.length);return void r(new Oh(t.objectId,t.category,i,o,l,u))}case Le.FURNI_REMOVED:{const t=e;return void r((e=>e&&t.id===e.objectId&&t.category===e.category?null:e))}}}),[]);ct(a.jg.REQUEST_TROPHY,i),et(Le.FURNI_REMOVED,s.eventDispatcher,i);const o=Object(c.useCallback)((function(e){"close"!==e||r(null)}),[]);return n?Object(Cr.jsx)(Tc,{color:n.color,message:n.message,date:n.date,senderName:n.ownerName,onCloseClick:()=>o("close")}):null};var $h=s(82);class Xh{}Xh.UNSTARTED=-1,Xh.ENDED=0,Xh.PLAYING=1,Xh.PAUSED=2,Xh.BUFFERING=3,Xh.CUED=5;const Jh=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(-1),[j,b]=Object(c.useState)(null),[g,O]=Object(c.useState)(null),[m,p]=Object(c.useState)(!1),[_,E]=Object(c.useState)(null),{eventDispatcher:f=null}=Ud(),x=Object(c.useCallback)((e=>{if(e.type===He.UPDATE_YOUTUBE_DISPLAY)s(e.objectId),p(e.hasControl)}),[]),I=Object(c.useCallback)((()=>{s(-1),b(null),O(null),p(!1),r(null),u(null),o(null),h(-1)}),[]);et(He.UPDATE_YOUTUBE_DISPLAY,f,x);const T=Object(c.useCallback)((e=>{if(-1===t)return;const s=e.getParser();t===s.furniId&&(r(s.videoId),o(s.startAtSeconds),u(s.endAtSeconds),h(s.state))}),[t]),C=Object(c.useCallback)((e=>{if(-1===t)return;const s=e.getParser();t===s.furniId&&(O(s.playlists),b(s.selectedPlaylistId),r(null),h(-1),u(null),o(null))}),[t]),S=Object(c.useCallback)((e=>{if(-1===t)return;const s=e.getParser();if(t===s.furniId)switch(s.commandId){case 1:h(Xh.PLAYING),_.getPlayerState()!==Xh.PLAYING&&_.playVideo();break;case 2:h(Xh.PAUSED),_.getPlayerState()!==Xh.PAUSED&&_.pauseVideo()}}),[t,_]);Je(a.aj,T),Je(a.Zi,C),Je(a.Yi,S);const N=Object(c.useCallback)((e=>{switch(e){case"playlist_prev":Ln(new a.jb(t,$s.CONTROL_COMMAND_PREVIOUS_VIDEO));break;case"playlist_next":Ln(new a.jb(t,$s.CONTROL_COMMAND_NEXT_VIDEO));break;case"video_pause":m&&n&&n.length&&Ln(new a.jb(t,$s.CONTROL_COMMAND_PAUSE_VIDEO));break;case"video_play":m&&n&&n.length&&Ln(new a.jb(t,$s.CONTROL_COMMAND_CONTINUE_VIDEO));break;default:if(j===e)return b(null),void Ln(new a.Gh(t,""));Ln(new a.Gh(t,e)),b(e)}}),[m,t,j,n]),v=Object(c.useCallback)((e=>{E(e.target)}),[]),R=Object(c.useCallback)((e=>{if(E(e.target),t)switch(e.target.getPlayerState()){case-1:case 1:return void(1!==d&&N("video_play"));case 2:2!==d&&N("video_pause")}}),[d,t,N]),A=Object(c.useMemo)((()=>i||l?{height:"375",width:"500",playerVars:{autoplay:1,disablekb:1,controls:0,origin:window.origin,modestbranding:1,start:i,end:l}}:{height:"375",width:"500",playerVars:{autoplay:1,disablekb:1,controls:0,origin:window.origin,modestbranding:1}}),[l,i]);return-1===t?null:Object(Cr.jsxs)($r,{className:"youtube-tv-widget",children:[Object(Cr.jsx)(Wr,{headerText:"",onCloseClick:I}),Object(Cr.jsx)(Hr,{children:Object(Cr.jsxs)("div",{className:"row w-100 h-100",children:[Object(Cr.jsxs)("div",{className:"youtube-video-container col-9",children:[n&&n.length>0&&Object(Cr.jsx)($h.a,{videoId:n,opts:A,onReady:v,onStateChange:R,containerClassName:"youtubeContainer"}),(!n||0===n.length)&&Object(Cr.jsx)("div",{className:"empty-video w-100 h-100 justify-content-center align-items-center d-flex",children:$e("widget.furni.video_viewer.no_videos")})]}),Object(Cr.jsxs)("div",{className:"playlist-container col-3",children:[Object(Cr.jsxs)("span",{className:"playlist-controls justify-content-center d-flex",children:[Object(Cr.jsx)("i",{className:"icon icon-youtube-prev cursor-pointer",onClick:()=>N("playlist_prev")}),Object(Cr.jsx)("i",{className:"icon icon-youtube-next cursor-pointer",onClick:()=>N("playlist_next")})]}),Object(Cr.jsx)("div",{className:"mb-1",children:$e("widget.furni.video_viewer.playlists")}),Object(Cr.jsx)(Rr,{columnCount:1,className:"playlist-grid",children:g&&g.map(((e,t)=>Object(Cr.jsxs)(lc,{onClick:()=>N(e.video),itemActive:e.video===j,children:[Object(Cr.jsx)("b",{children:e.title})," - ",e.description]},t)))})]})]})})]})},Zh=e=>Object(Cr.jsxs)("div",{className:"position-absolute nitro-room-widgets top-0 start-0 w-100 h-100",children:[Object(Cr.jsx)(gh,{}),Object(Cr.jsx)(Ch,{}),Object(Cr.jsx)(Nh,{}),Object(Cr.jsx)(yh,{}),Object(Cr.jsx)(Ph,{}),Object(Cr.jsx)(Uh,{}),Object(Cr.jsx)(wh,{}),Object(Cr.jsx)(Fh,{}),Object(Cr.jsx)(Hh,{}),Object(Cr.jsx)(Wh,{}),Object(Cr.jsx)(Kh,{}),Object(Cr.jsx)(Qh,{}),Object(Cr.jsx)(mh,{}),Object(Cr.jsx)(kh,{}),Object(Cr.jsx)(Jh,{})]}),ej=e=>{const{botData:t=null,close:s=null}=e;return t?Object(Cr.jsx)(rc,{className:"nitro-infostand rounded",children:Object(Cr.jsxs)(rc,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(Cr.jsx)(Ac,{variant:"white",small:!0,wrap:!0,children:t.name}),Object(Cr.jsx)(Lr.a,{icon:"times",className:"cursor-pointer",onClick:s})]}),Object(Cr.jsx)("hr",{className:"m-0"})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(rc,{fullWidth:!0,className:"body-image bot",children:Object(Cr.jsx)(Xr,{figure:t.figure,direction:4})}),Object(Cr.jsx)(rc,{grow:!0,center:!0,gap:0,children:t.badges.length>0&&t.badges.map((e=>Object(Cr.jsx)(Zr,{badgeCode:e,showInfo:!0},e)))})]}),Object(Cr.jsx)("hr",{className:"m-0"})]}),Object(Cr.jsx)(yr,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:Object(Cr.jsx)(Ac,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,className:"motto-content",children:t.motto})}),t.carryItem>0&&Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)("hr",{className:"m-0"}),Object(Cr.jsx)(Ac,{variant:"white",small:!0,wrap:!0,children:$e("infostand.text.handitem",["item"],[$e("handitem"+t.carryItem)])})]})]})}):null},tj=e=>{const{furniData:t=null,close:s=null}=e,{roomSession:n=null,eventDispatcher:r=null,widgetHandler:i=null}=Ud(),[o,l]=Object(c.useState)(0),[u,d]=Object(c.useState)(!1),[h,j]=Object(c.useState)(!1),[b,g]=Object(c.useState)(!1),[O,m]=Object(c.useState)([]),[p,_]=Object(c.useState)([]),[E,f]=Object(c.useState)([]),[x,I]=Object(c.useState)([]),[T,S]=Object(c.useState)(!1),[N,v]=Object(c.useState)(0),[R,A]=Object(c.useState)(0),[y,k]=Object(c.useState)(!1),[D,P]=Object(c.useState)(!1),[U,L]=Object(c.useState)(null);Object(c.useEffect)((()=>{let e=0,s=!1,r=!1,c=!1,i=[],o=[],u=[],h=[],b=!1,O=0,p=0,E=!1,x=!1;const T=t.roomControllerLevel>=a.Wf.GUEST;if((T||t.isOwner||t.isRoomOwner||t.isAnyRoomController)&&(s=!0,r=!t.isWallItem,t.roomControllerLevel>=a.Wf.MODERATOR&&(E=!0)),t.isAnyRoomController&&(x=!0),(t.usagePolicy===a.rh.EVERYBODY||t.usagePolicy===a.rh.CONTROLLER&&T||t.extraParam===a.qh.JUKEBOX&&T||t.extraParam===a.qh.USABLE_PRODUCT&&T)&&(c=!0),t.extraParam){if(t.extraParam===a.qh.CRACKABLE_FURNI){const e=t.stuffData;c=!0,b=!0,O=e.hits,p=e.target}if(E){const e=t.extraParam.substr(a.qh.BRANDING_OPTIONS.length);if(e){const t=e.split("\t");for(const e of t){const t=e.split("=");t&&2===t.length&&(i.push(t[0]),o.push(t[1]))}}}}if(E){const e=w().getRoomObject(n.roomId,t.id,t.isWallItem?a.zg.WALL:a.zg.FLOOR);if(e){const t=e.model.getValue(a.Fg.FURNITURE_CUSTOM_VARIABLES),s=e.model.getValue(a.Fg.FURNITURE_DATA);if(t&&t.length)for(const e of t)u.push(e),h.push(s[e]||"")}}t.isOwner||t.isAnyRoomController?e=2:(t.isRoomOwner||t.roomControllerLevel>=a.Wf.GUILD_ADMIN)&&(e=1),t.isStickie&&(e=0),l(e),d(s),j(r),g(c),m(i),_(o),f(u),I(h),S(b),v(O),A(p),k(E),P(x),L(null),t.groupId&&Ln(new a.Nc(t.groupId,!1))}),[n,t]);const M=Object(c.useCallback)((e=>{const s=e.getParser();t&&t.groupId===s.id&&!s.flag&&(U&&L(null),L(s.title))}),[t,U]);Je(a.Oc,M);const F=Object(c.useCallback)(((e,t)=>{const s=Array.from(p);s[e]=t,_(s)}),[p]),H=Object(c.useCallback)(((e,t)=>{const s=Array.from(x);s[e]=t,I(s)}),[x]),B=Object(c.useCallback)((()=>{if(0===O.length||0===p.length)return"";let e="",t=0;for(;t<O.length;){e=e+(O[t]+"=")+p[t]+"\t",t++}return e}),[O,p]),G=Object(c.useCallback)((e=>{if(!e||""===e)return;let s=null,n=null;switch(e){case"buy_one":return void C(`catalog/open/offerId/${t.purchaseOfferId}`);case"move":s=ys.MOVE;break;case"rotate":s=ys.ROTATE;break;case"pickup":s=2===o?ys.PICKUP:ys.EJECT;break;case"use":s=ys.USE;break;case"save_branding_configuration":s=ys.SAVE_STUFF_DATA,n=B();break;case"save_custom_variables":const e=new Map;for(let t=0;t<E.length;t++){const s=E[t],n=x[t];s&&s.length&&n&&n.length&&e.set(s,n)}Ln(new a.Eh(t.id,e))}s&&i.processWidgetMessage(new ys(s,t.id,t.category,t.purchaseOfferId,n))}),[i,t,o,E,x,B]),W=Object(c.useCallback)((()=>{const e=t.stuffData;return e&&e instanceof a.Hh?e.getValue(2):null}),[t]);return t?Object(Cr.jsxs)(rc,{gap:1,alignItems:"end",children:[Object(Cr.jsx)(rc,{className:"nitro-infostand rounded",children:Object(Cr.jsxs)(rc,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(Cr.jsx)(Ac,{variant:"white",small:!0,wrap:!0,children:t.name}),Object(Cr.jsx)(Lr.a,{icon:"times",className:"cursor-pointer",onClick:s})]}),Object(Cr.jsx)("hr",{className:"m-0"})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{position:"relative",gap:1,children:[t.stuffData.isUnique&&Object(Cr.jsx)("div",{className:"position-absolute end-0",children:Object(Cr.jsx)(ac,{uniqueNumber:t.stuffData.uniqueNumber,uniqueSeries:t.stuffData.uniqueSeries})}),t.stuffData.rarityLevel>-1&&Object(Cr.jsx)("div",{className:"position-absolute end-0",children:Object(Cr.jsx)(fc,{level:t.stuffData.rarityLevel})}),t.image&&t.image.src.length&&Object(Cr.jsx)("img",{className:"d-block mx-auto",src:t.image.src,alt:""})]}),Object(Cr.jsx)("hr",{className:"m-0"})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,children:t.description}),Object(Cr.jsx)("hr",{className:"m-0"})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Cc,{userId:t.ownerId}),Object(Cr.jsx)(Ac,{variant:"white",small:!0,wrap:!0,children:$e("furni.owner",["name"],[t.ownerName])})]}),t.purchaseOfferId>0&&Object(Cr.jsx)(yr,{children:Object(Cr.jsx)(Ac,{variant:"white",small:!0,underline:!0,pointer:!0,onClick:e=>G("buy_one"),children:$e("infostand.button.buy")})})]}),Object(Cr.jsxs)(rc,{gap:1,children:[T&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)("hr",{className:"m-0"}),Object(Cr.jsx)(Ac,{variant:"white",small:!0,wrap:!0,children:$e("infostand.crackable_furni.hits_remaining",["hits","target"],[N.toString(),R.toString()])})]}),t.groupId>0&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)("hr",{className:"m-0"}),Object(Cr.jsxs)(yr,{pointer:!0,alignItems:"center",gap:2,onClick:()=>$n(t.groupId),children:[Object(Cr.jsx)(Zr,{badgeCode:W(),isGroup:!0}),Object(Cr.jsx)(Ac,{variant:"white",underline:!0,children:U})]})]}),y&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)("hr",{className:"m-0"}),D&&Object(Cr.jsxs)(Ac,{small:!0,wrap:!0,variant:"white",children:["ID: ",t.id]}),O.length>0&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)("hr",{className:"m-0"}),Object(Cr.jsx)(rc,{gap:1,children:O.map(((e,t)=>Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Ac,{small:!0,wrap:!0,align:"end",variant:"white",className:"col-4",children:e}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:p[t],onChange:e=>F(t,e.target.value)})]},t)))})]})]}),E.length>0&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)("hr",{className:"m-0 my-1"}),Object(Cr.jsx)(rc,{gap:1,children:E.map(((e,t)=>Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Ac,{small:!0,wrap:!0,align:"end",variant:"white",className:"col-4",children:e}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:x[t],onChange:e=>H(t,e.target.value)})]},t)))})]})]})]})}),Object(Cr.jsxs)(yr,{gap:1,justifyContent:"end",children:[u&&Object(Cr.jsx)(wr,{variant:"dark",onClick:e=>G("move"),children:$e("infostand.button.move")}),h&&Object(Cr.jsx)(wr,{variant:"dark",onClick:e=>G("rotate"),children:$e("infostand.button.rotate")}),0!==o&&Object(Cr.jsx)(wr,{variant:"dark",onClick:e=>G("pickup"),children:$e(1===o?"infostand.button.eject":"infostand.button.pickup")}),b&&Object(Cr.jsx)(wr,{variant:"dark",onClick:e=>G("use"),children:$e("infostand.button.use")}),O.length>0&&p.length>0&&O.length===p.length&&Object(Cr.jsx)(wr,{variant:"dark",onClick:()=>G("save_branding_configuration"),children:$e("save")}),E.length>0&&x.length>0&&E.length===x.length&&Object(Cr.jsx)(wr,{variant:"dark",onClick:()=>G("save_custom_variables"),children:$e("save")})]})]}):null},sj=e=>{const{petData:t=null,close:s=null}=e;return t?Object(Cr.jsx)(rc,{className:"nitro-infostand rounded",children:Object(Cr.jsxs)(rc,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(Cr.jsx)(Ac,{variant:"white",small:!0,wrap:!0,children:t.name}),Object(Cr.jsx)(Lr.a,{icon:"times",className:"cursor-pointer",onClick:s})]}),Object(Cr.jsx)(Ac,{variant:"white",small:!0,wrap:!0,children:$e(`pet.breed.${t.petType}.${t.petBreed}`)}),Object(Cr.jsx)("hr",{className:"m-0"})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(rc,{fullWidth:!0,overflow:"hidden",className:"body-image pet p-1",children:Object(Cr.jsx)(_c,{figure:t.petFigure,posture:t.posture,direction:4})}),Object(Cr.jsxs)(rc,{grow:!0,gap:1,children:[Object(Cr.jsx)(Ac,{variant:"white",center:!0,small:!0,wrap:!0,children:$e("pet.level",["level","maxlevel"],[t.level.toString(),t.maximumLevel.toString()])}),Object(Cr.jsxs)(rc,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Ac,{variant:"white",small:!0,truncate:!0,children:$e("infostand.pet.text.happiness")}),Object(Cr.jsxs)(Sr,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[Object(Cr.jsx)(yr,{fit:!0,center:!0,position:"absolute",children:Object(Cr.jsx)(Ac,{variant:"white",small:!0,children:t.happyness+"/"+t.maximumHappyness})}),Object(Cr.jsx)(Sr,{className:"bg-info rounded pet-stats",style:{width:t.happyness/t.maximumHappyness*100+"%"}})]})]}),Object(Cr.jsxs)(rc,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Ac,{variant:"white",small:!0,truncate:!0,children:$e("infostand.pet.text.experience")}),Object(Cr.jsxs)(Sr,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[Object(Cr.jsx)(yr,{fit:!0,center:!0,position:"absolute",children:Object(Cr.jsx)(Ac,{variant:"white",small:!0,children:t.experience+"/"+t.levelExperienceGoal})}),Object(Cr.jsx)(Sr,{className:"bg-purple rounded pet-stats",style:{width:t.experience/t.levelExperienceGoal*100+"%"}})]})]}),Object(Cr.jsxs)(rc,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Ac,{variant:"white",small:!0,truncate:!0,children:$e("infostand.pet.text.energy")}),Object(Cr.jsxs)(Sr,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[Object(Cr.jsx)(yr,{fit:!0,center:!0,position:"absolute",children:Object(Cr.jsx)(Ac,{variant:"white",small:!0,children:t.energy+"/"+t.maximumEnergy})}),Object(Cr.jsx)(Sr,{className:"bg-success rounded pet-stats",style:{width:t.energy/t.maximumEnergy*100+"%"}})]})]})]})]}),Object(Cr.jsx)("hr",{className:"m-0"})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{variant:"white",small:!0,wrap:!0,children:$e("infostand.text.petrespect",["count"],[t.respect.toString()])}),Object(Cr.jsx)(Ac,{variant:"white",small:!0,wrap:!0,children:$e("pet.age",["age"],[t.age.toString()])}),Object(Cr.jsx)("hr",{className:"m-0"})]}),Object(Cr.jsx)(rc,{gap:1,children:Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Cc,{userId:t.ownerId}),Object(Cr.jsx)(Ac,{variant:"white",small:!0,wrap:!0,children:$e("infostand.text.petowner",["name"],[t.ownerName])})]})})]})}):null},nj=e=>{const{rentableBotData:t=null,close:s=null}=e,n=Object(c.useMemo)((()=>!(t.botSkills.indexOf(Fd.NO_PICK_UP)>=0)&&!(!t.amIOwner&&!t.amIAnyRoomController)),[t]);if(t)return Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(rc,{className:"nitro-infostand rounded",children:Object(Cr.jsxs)(rc,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(Cr.jsx)(Ac,{variant:"white",small:!0,wrap:!0,children:t.name}),Object(Cr.jsx)(Lr.a,{icon:"times",className:"cursor-pointer",onClick:s})]}),Object(Cr.jsx)("hr",{className:"m-0"})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(rc,{fullWidth:!0,className:"body-image bot",children:Object(Cr.jsx)(Xr,{figure:t.figure,direction:4})}),Object(Cr.jsx)(rc,{grow:!0,center:!0,gap:0,children:t.badges.length>0&&t.badges.map((e=>Object(Cr.jsx)(Zr,{badgeCode:e,showInfo:!0},e)))})]}),Object(Cr.jsx)("hr",{className:"m-0"})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(yr,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:Object(Cr.jsx)(Ac,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,className:"motto-content",children:t.motto})}),Object(Cr.jsx)("hr",{className:"m-0"})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Cc,{userId:t.ownerId}),Object(Cr.jsx)(Ac,{variant:"white",small:!0,wrap:!0,children:$e("infostand.text.botowner",["name"],[t.ownerName])})]}),t.carryItem>0&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)("hr",{className:"m-0"}),Object(Cr.jsx)(Ac,{variant:"white",small:!0,wrap:!0,children:$e("infostand.text.handitem",["item"],[$e("handitem"+t.carryItem)])})]})]})]})}),n&&Object(Cr.jsx)(yr,{justifyContent:"end",children:Object(Cr.jsx)(wr,{variant:"dark",onClick:()=>Ln(new a.B(t.webID)),children:$e("infostand.button.pickup")})})]})},rj=e=>{const{relationships:t=null}=e,s=e=>{let{type:s}=e;const n=t&&t.relationshipStatusMap.hasKey(s)?t.relationshipStatusMap.getValue(s):null;if(!n||!n.friendCount)return null;const r=a.Df.RELATIONSHIP_NAMES[s].toLocaleLowerCase();return Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("i",{className:`nitro-friends-spritesheet icon-${r}`}),Object(Cr.jsx)(yr,{alignItems:"center",gap:0,children:Object(Cr.jsxs)(Ac,{small:!0,variant:"white",onClick:e=>gr(n.randomFriendId),children:[Object(Cr.jsx)("u",{children:n.randomFriendName}),n.friendCount>1&&" "+$e(`extendedprofile.relstatus.others.${r}`,["count"],[(n.friendCount-1).toString()])]})})]})};return Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(s,{type:a.Df.HEART}),Object(Cr.jsx)(s,{type:a.Df.SMILE}),Object(Cr.jsx)(s,{type:a.Df.BOBBA})]})},cj=e=>{const{userData:t=null,setUserData:s=null,close:n=null}=e,[r,i]=Object(c.useState)(null),[o,l]=Object(c.useState)(!1),[u,d]=Object(c.useState)(null),{eventDispatcher:h=null,widgetHandler:j=null}=Ud(),b=(N("user.badges.max.slots",5),e=>{!o||e.length>N("motto.max.length",38)||(j.processWidgetMessage(new fs(e)),l(!1))}),g=Object(c.useCallback)((e=>{t&&t.webID===e.userId&&s((t=>{const s=Ve(t);return s.badges=e.badges,s}))}),[t,s]);et(a.Vg.RSUBE_BADGES,h,g);const O=Object(c.useCallback)((e=>{t&&t.roomIndex===e.roomIndex&&s((t=>{const s=Ve(t);return s.figure=e.figure,s.motto=e.customInfo,s.achievementScore=e.activityPoints,s}))}),[t,s]);et(a.Xg.USER_FIGURE,h,O);const m=Object(c.useCallback)((e=>{t&&t.roomIndex===e.roomIndex&&s((t=>{const s=Ve(t),n=-1===e.status||e.habboGroupId<=0;return s.groupId=n?-1:e.habboGroupId,s.groupName=n?null:e.habboGroupName,s.groupBadgeId=n?null:K().getGroupBadge(e.habboGroupId),s}))}),[t,s]);et(a.Qg.FAVOURITE_GROUP_UPDATE,h,m);const p=Object(c.useCallback)((e=>{const s=e.getParser();t&&t.webID===s.userId&&d(s)}),[t]);return Je(a.Ef,p),Object(c.useEffect)((()=>(l(!1),i(t.motto),Ln(new a.Bi(t.webID)),()=>{l(!1),i(null),d(null)})),[t]),t?Object(Cr.jsx)(rc,{className:"nitro-infostand rounded",children:Object(Cr.jsxs)(rc,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"between",children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Cc,{userId:t.webID}),Object(Cr.jsx)(Ac,{variant:"white",small:!0,wrap:!0,children:t.name})]}),Object(Cr.jsx)(Lr.a,{icon:"times",className:"cursor-pointer",onClick:n})]}),Object(Cr.jsx)("hr",{className:"m-0"})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(rc,{fullWidth:!0,className:"body-image",onClick:e=>gr(t.webID),children:Object(Cr.jsx)(Xr,{figure:t.figure,direction:4})}),Object(Cr.jsxs)(rc,{grow:!0,gap:0,children:[Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(Sr,{className:"badge-image",children:t.badges[0]&&Object(Cr.jsx)(Zr,{badgeCode:t.badges[0],showInfo:!0})}),Object(Cr.jsx)(Sr,{pointer:t.groupId>0,className:"badge-image",onClick:e=>$n(t.groupId),children:t.groupId>0&&Object(Cr.jsx)(Zr,{badgeCode:t.groupBadgeId,isGroup:!0,showInfo:!0,customTitle:t.groupName})})]}),Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(Sr,{className:"badge-image",children:t.badges[1]&&Object(Cr.jsx)(Zr,{badgeCode:t.badges[1],showInfo:!0})}),Object(Cr.jsx)(Sr,{className:"badge-image",children:t.badges[2]&&Object(Cr.jsx)(Zr,{badgeCode:t.badges[2],showInfo:!0})})]}),Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)(Sr,{className:"badge-image",children:t.badges[3]&&Object(Cr.jsx)(Zr,{badgeCode:t.badges[3],showInfo:!0})}),Object(Cr.jsx)(Sr,{className:"badge-image",children:t.badges[4]&&Object(Cr.jsx)(Zr,{badgeCode:t.badges[4],showInfo:!0})})]})]})]}),Object(Cr.jsx)("hr",{className:"m-0"})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:[t.type!==we.OWN_USER&&Object(Cr.jsx)(yr,{grow:!0,alignItems:"center",className:"motto-content",children:Object(Cr.jsx)(Ac,{fullWidth:!0,pointer:!0,wrap:!0,textBreak:!0,small:!0,variant:"white",children:r})}),t.type===we.OWN_USER&&Object(Cr.jsxs)(yr,{grow:!0,alignItems:"center",gap:2,children:[Object(Cr.jsx)(Lr.a,{icon:"pencil-alt",className:"small"}),Object(Cr.jsxs)(yr,{grow:!0,alignItems:"center",className:"motto-content",children:[!o&&Object(Cr.jsxs)(Ac,{fullWidth:!0,pointer:!0,wrap:!0,textBreak:!0,small:!0,variant:"white",onClick:e=>l(!0),children:[r,"\xa0"]}),o&&Object(Cr.jsx)("input",{type:"text",className:"motto-input",maxLength:N("motto.max.length",38),value:r,onChange:e=>i(e.target.value),onBlur:e=>b(e.target.value),onKeyDown:e=>{e.stopPropagation(),"Enter"!==e.key||b(e.target.value)},autoFocus:!0})]})]})]}),Object(Cr.jsx)("hr",{className:"m-0"})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{variant:"white",small:!0,wrap:!0,children:$e("infostand.text.achievement_score")+" "+t.achievementScore}),t.carryItem>0&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)("hr",{className:"m-0"}),Object(Cr.jsx)(Ac,{variant:"white",small:!0,wrap:!0,children:$e("infostand.text.handitem",["item"],[$e("handitem"+t.carryItem)])})]})]}),Object(Cr.jsx)(rc,{gap:1,children:Object(Cr.jsx)(rj,{relationships:u})})]})}):null},ij=e=>{const{eventDispatcher:t=null,widgetHandler:s=null}=Ud(),[n,r]=Object(c.useState)(null),i=Object(c.useCallback)((()=>{r(null)}),[]),a=Object(c.useCallback)((e=>{switch(e.type){case Le.OBJECT_SELECTED:{const t=e;return void s.processWidgetMessage(new Us(Us.GET_OBJECT_INFO,t.id,t.category))}case Le.OBJECT_DESELECTED:return void i();case Le.FURNI_REMOVED:case Le.USER_REMOVED:{const t=e;return void r((s=>{switch(e.type){case Le.FURNI_REMOVED:if(s instanceof Re&&s.id===t.id)return null;break;case Le.USER_REMOVED:if(s instanceof we||s instanceof ye){if(s.roomIndex===t.id)return null}else if(s instanceof Ae&&s.roomIndex===t.id)return null}return s}))}case Re.FURNI:case we.OWN_USER:case we.PEER:case we.BOT:case ye.RENTABLE_BOT:case Ae.PET_INFO:return void r(e);default:return void console.log(e)}}),[s,i]);et(Le.OBJECT_SELECTED,t,a),et(Le.OBJECT_DESELECTED,t,a),et(Le.USER_REMOVED,t,a),et(Le.FURNI_REMOVED,t,a),et(Re.FURNI,t,a),et(we.OWN_USER,t,a),et(we.PEER,t,a),et(we.BOT,t,a),et(ye.RENTABLE_BOT,t,a),et(Ae.PET_INFO,t,a),et(Ae.PET_INFO,t,a);const o=Object(c.useCallback)((()=>{if(!n)return null;switch(n.type){case Re.FURNI:return Object(Cr.jsx)(tj,{furniData:n,close:i});case we.OWN_USER:case we.PEER:return Object(Cr.jsx)(cj,{userData:n,setUserData:r,close:i});case we.BOT:return Object(Cr.jsx)(ej,{botData:n,close:i});case ye.RENTABLE_BOT:return Object(Cr.jsx)(nj,{rentableBotData:n,close:i});case Ae.PET_INFO:return Object(Cr.jsx)(sj,{petData:n,close:i})}return null}),[n,i]);return n?Object(Cr.jsx)(rc,{alignItems:"end",className:"nitro-infostand-container",children:o()}):null},aj=e=>{const[t,s]=Object(c.useState)(!1),{roomSession:n=null}=Ud(),r=Object(c.useCallback)((e=>{switch(e.type){case yn.SHOW_THUMBNAIL:return void s(!0);case yn.HIDE_THUMBNAIL:return void s(!1);case yn.TOGGLE_THUMBNAIL:return void s((e=>!e))}}),[]);lt(yn.SHOW_THUMBNAIL,r),lt(yn.HIDE_THUMBNAIL,r),lt(yn.TOGGLE_THUMBNAIL,r);const i=Object(c.useCallback)((e=>{w().saveTextureAsScreenshot(e,!0),s(!1)}),[]);return t?Object(Cr.jsx)(hc,{roomId:n.roomId,textureReceiver:i,onClose:()=>s(!1)}):null},oj=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(!1),[j,b]=Object(c.useState)(!1),[g,O]=yt(),{roomSession:m=null,widgetHandler:p=null}=Ud(),_=e=>{switch(e){case"settings":return void C("navigator/toggle-room-info");case"zoom":return void s((e=>{let t=1!==window.devicePixelRatio&&window.devicePixelRatio%1===0?window.devicePixelRatio:1;return e||(t/=2),w().setRoomInstanceRenderingCanvasScale(m.roomId,1,t),!e}));case"chat_history":return void C("chat-history/toggle");case"like_room":return void Ln(new a.wg(1));case"toggle_room_link":return void C("navigator/toggle-room-link")}},E=Object(c.useCallback)((e=>{const t=e.getParser();t.roomEnter&&(n!==t.data.roomName&&r(t.data.roomName),i!==t.data.ownerName&&o(t.data.ownerName),l!==t.data.tags&&u(t.data.tags))}),[n,i,l]);return Je(a.hc,E),Object(c.useEffect)((()=>{b(!0);const e=setTimeout((()=>b(!1)),5e3);return()=>clearTimeout(e)}),[n,i,l]),Object(Cr.jsxs)(yr,{className:"nitro-room-tools-container",gap:2,children:[Object(Cr.jsxs)(rc,{center:!0,className:"nitro-room-tools p-2",children:[Object(Cr.jsx)(Sr,{pointer:!0,title:$e("room.settings.button.text"),className:"icon icon-cog",onClick:()=>_("settings")}),Object(Cr.jsx)(Sr,{pointer:!0,title:$e("room.zoom.button.text"),onClick:()=>_("zoom"),className:"icon "+Wi()({"icon-zoom-less":!t,"icon-zoom-more":t})}),Object(Cr.jsx)(Sr,{pointer:!0,title:$e("room.chathistory.button.text"),onClick:()=>_("chat_history"),className:"icon icon-chat-history"}),g.canRate&&Object(Cr.jsx)(Sr,{pointer:!0,title:$e("room.like.button.text"),onClick:()=>_("like_room"),className:"icon icon-like-room"})]}),Object(Cr.jsx)(rc,{justifyContent:"center",children:Object(Cr.jsx)(mc,{type:gc.SLIDE_LEFT,inProp:j,timeout:300,children:Object(Cr.jsx)(rc,{center:!0,children:Object(Cr.jsxs)(rc,{className:"nitro-room-tools-info rounded py-2 px-3",children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{wrap:!0,variant:"white",fontSize:4,children:n}),Object(Cr.jsx)(Ac,{variant:"muted",fontSize:5,children:i})]}),l&&l.length>0&&Object(Cr.jsx)(yr,{gap:2,children:l.map(((e,t)=>Object(Cr.jsxs)(Ac,{small:!0,variant:"white",className:"rounded bg-primary p-1",children:["#",e]},t)))})]})})})})]})},lj="0",uj=e=>{const{question:t=null,canVote:s=null,vote:n=null,noVotes:r=null,yesVotes:c=null}=e;return Object(Cr.jsxs)(rc,{gap:2,className:"wordquiz-question p-2",children:[!s&&Object(Cr.jsxs)(yr,{fullWidth:!0,alignItems:"center",gap:2,children:[Object(Cr.jsx)(yr,{center:!0,pointer:!0,className:"bg-danger rounded p-2",children:Object(Cr.jsx)(Ac,{variant:"white",children:r})}),Object(Cr.jsx)(Ac,{variant:"white",center:!0,textBreak:!0,children:t}),Object(Cr.jsx)(yr,{center:!0,pointer:!0,className:"bg-success rounded p-2",children:Object(Cr.jsx)(Ac,{variant:"white",children:c})})]}),s&&Object(Cr.jsxs)(rc,{children:[Object(Cr.jsx)(Ac,{variant:"white",center:!0,textBreak:!0,children:t}),Object(Cr.jsxs)(yr,{fullWidth:!0,justifyContent:"center",gap:1,children:[Object(Cr.jsx)(yr,{center:!0,pointer:!0,className:"bg-danger rounded p-1",onClick:e=>n(lj),children:Object(Cr.jsx)(Sr,{className:"word-quiz-dislike"})}),Object(Cr.jsx)(yr,{center:!0,pointer:!0,className:"bg-success rounded p-1",onClick:e=>n("1"),children:Object(Cr.jsx)(Sr,{className:"word-quiz-like"})})]})]})]})};var dj=s(51);const hj=e=>{const{userIndex:t=null,vote:s=null,...n}=e;return Object(Cr.jsx)(hh,{objectId:t,category:dj.Bg.UNIT,...n,children:Object(Cr.jsx)(yr,{center:!0,pointer:!0,className:`bg-${s===lj?"danger":"success"} rounded p-1`,children:Object(Cr.jsx)(Sr,{className:`word-quiz-${s===lj?"dislike":"like"}-sm`})})})},jj=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(null),[i,a]=Object(c.useState)(!1),[o,l]=Object(c.useState)(null),[u,d]=Object(c.useState)(new Map),[h,j]=Object(c.useState)(new Map),{eventDispatcher:b=null,widgetHandler:g=null,roomSession:O=null}=Ud(),m=Object(c.useCallback)((()=>{s(-1),r(null)}),[]),p=Object(c.useCallback)((e=>{switch(e.type){case Ge.NEW_QUESTION:s(e.id),r(e.question),a(!1),d(new Map),j(new Map),l((t=>{if(t&&clearTimeout(t),e.duration>0){const t=e.duration<1e3?4e3:e.duration;return setTimeout((()=>m()),t)}return null}));break;case Ge.QUESTION_ANSWERED:{const t=O.userDataManager.getUserData(e.userId);if(!t)return;d(e.answerCounts),j((s=>{if(!s.has(t.roomIndex)){const s=new Map(h);return s.set(t.roomIndex,{value:e.value,secondsLeft:3}),s}return s}));break}case Ge.QUESTION_FINISHED:n&&n.id===e.questionId&&(d(e.answerCounts),a(!0),l((e=>(e&&clearTimeout(e),setTimeout((()=>m()),4e3))))),j(new Map)}}),[n,O.userDataManager,h,m]);et(Ge.NEW_QUESTION,b,p),et(Ge.QUESTION_ANSWERED,b,p),et(Ge.QUESTION_FINISHED,b,p);const _=Object(c.useCallback)((e=>{if(i||!n)return;const s=new ks(ks.ANSWER,t);s.questionId=n.id,s.answers=[e],g.processWidgetMessage(s),a(!0)}),[i,t,n,g]),E=Object(c.useCallback)((()=>{j((e=>{const t=[];if(e.forEach(((e,s)=>{e.secondsLeft--,e.secondsLeft<=0&&t.push(s)})),0===t.length)return e;const s=new Map(e);return t.forEach((e=>s.delete(e))),s}))}),[]);return Object(c.useEffect)((()=>{const e=setInterval((()=>E()),1e3);return()=>clearInterval(e)}),[E]),Object(c.useEffect)((()=>()=>{l((e=>(e&&clearTimeout(e),null)))}),[]),Object(Cr.jsxs)(Cr.Fragment,{children:[n&&Object(Cr.jsx)(uj,{question:n.content,canVote:!i,vote:_,noVotes:u.get(lj)||0,yesVotes:u.get("1")||0}),h&&Array.from(h.entries()).map(((e,t)=>{let[s,n]=e;return Object(Cr.jsx)(hj,{userIndex:s,vote:n.value},t)}))]})},bj=e=>{const{roomSession:t=null,eventDispatcher:s=null,widgetHandler:n=null}=Ud(),r=Object(c.useCallback)((e=>{if(s&&!a.sg.isRoomPreviewerId(e.roomId))switch(e.type){case a.gg.NORMAL_MODE:return void s.dispatchEvent(new Ue(Ue.NORMAL_MODE,e.roomId));case a.gg.GAME_MODE:return void s.dispatchEvent(new Ue(Ue.GAME_MODE,e.roomId));case a.sh.ROOM_ZOOM:{const t=e;return void w().setRoomInstanceRenderingCanvasScale(e.roomId,1,t.level,null,null,!1,t.asDelta)}}}),[s]);ct(a.gg.NORMAL_MODE,r),ct(a.gg.GAME_MODE,r),ct(a.sh.ROOM_ZOOM,r);const i=Object(c.useCallback)((e=>{}),[]),o=Object(c.useCallback)((e=>{}),[]),l=Object(c.useCallback)((e=>{if(!t||!n)return;const s=e.objectId,r=e.category;let c=null;switch(e.type){case a.hg.SELECTED:(function(e){let t=!1;const s=w().getRoomObject(e.roomId,e.objectId,e.category);s&&1===s.model.getValue(a.Fg.FURNITURE_SELECTION_DISABLED)&&(t=!0,K().isModerator&&(t=!1));return t})(e)||(c=new Le(Le.OBJECT_SELECTED,s,r,e.roomId));break;case a.hg.DESELECTED:c=new Le(Le.OBJECT_DESELECTED,s,r,e.roomId);break;case a.hg.ADDED:{let t=null;switch(r){case a.zg.FLOOR:case a.zg.WALL:t=Le.FURNI_ADDED;break;case a.zg.UNIT:t=Le.USER_ADDED}t&&(c=new Le(t,s,r,e.roomId));break}case a.hg.REMOVED:{let t=null;switch(r){case a.zg.FLOOR:case a.zg.WALL:t=Le.FURNI_REMOVED;break;case a.zg.UNIT:t=Le.USER_REMOVED}t&&(c=new Le(t,s,r,e.roomId));break}case a.hg.REQUEST_MOVE:W(t,s,r)&&oe(s,r,a.Bg.OBJECT_MOVE);break;case a.hg.REQUEST_ROTATE:W(t,s,r)&&oe(s,r,a.Bg.OBJECT_ROTATE_POSITIVE);break;case a.hg.REQUEST_MANIPULATION:W(t,s,r)&&(c=new Le(Le.OBJECT_REQUEST_MANIPULATION,s,r,e.roomId));break;case a.hg.MOUSE_ENTER:c=new Le(Le.OBJECT_ROLL_OVER,s,r,e.roomId);break;case a.hg.MOUSE_LEAVE:c=new Le(Le.OBJECT_ROLL_OUT,s,r,e.roomId);break;case a.jg.REQUEST_CREDITFURNI:n.processWidgetMessage(new ws(ws.REQUEST_CREDITFURNI,s,r,e.roomId));break;case a.jg.REQUEST_STICKIE:n.processWidgetMessage(new ws(ws.REQUEST_STICKIE,s,r,e.roomId));break;case a.jg.REQUEST_PRESENT:n.processWidgetMessage(new ws(ws.REQUEST_PRESENT,s,r,e.roomId));break;case a.jg.REQUEST_TROPHY:n.processWidgetMessage(new ws(ws.REQUEST_TROPHY,s,r,e.roomId));break;case a.jg.REQUEST_TEASER:n.processWidgetMessage(new ws(ws.REQUEST_TEASER,s,r,e.roomId));break;case a.jg.REQUEST_ECOTRONBOX:n.processWidgetMessage(new ws(ws.REQUEST_ECOTRONBOX,s,r,e.roomId));break;case a.jg.REQUEST_DIMMER:n.processWidgetMessage(new ws(ws.REQUEST_DIMMER,s,r,e.roomId));break;case a.jg.REQUEST_PLACEHOLDER:n.processWidgetMessage(new ws(ws.REQUEST_PLACEHOLDER,s,r,e.roomId));break;case a.jg.REQUEST_CLOTHING_CHANGE:n.processWidgetMessage(new ws(ws.REQUEST_CLOTHING_CHANGE,s,r,e.roomId));break;case a.jg.REQUEST_PLAYLIST_EDITOR:n.processWidgetMessage(new ws(ws.REQUEST_PLAYLIST_EDITOR,s,r,e.roomId));break;case a.jg.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING:n.processWidgetMessage(new ws(ws.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING,s,r,e.roomId));break;case a.jg.REQUEST_BADGE_DISPLAY_ENGRAVING:n.processWidgetMessage(new ws(ws.REQUEST_BADGE_DISPLAY_ENGRAVING,s,r,e.roomId));break;case a.jg.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED:w().getRoomObject(e.roomId,s,r).model.getValue(a.Fg.FURNITURE_OWNER_ID)===K().userId&&n.processWidgetMessage(new ws(ws.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED,s,r,e.roomId));break;case a.jg.OPEN_WIDGET:case a.jg.CLOSE_WIDGET:case a.jg.OPEN_FURNI_CONTEXT_MENU:case a.jg.CLOSE_FURNI_CONTEXT_MENU:case a.jg.REMOVE_DIMMER:case a.jg.REQUEST_MANNEQUIN:case a.kg.USE_PRODUCT_FROM_INVENTORY:case a.kg.USE_PRODUCT_FROM_ROOM:case a.jg.REQUEST_BACKGROUND_COLOR:case a.jg.REQUEST_FRIEND_FURNITURE_ENGRAVING:case a.jg.REQUEST_HIGH_SCORE_DISPLAY:case a.jg.REQUEST_HIDE_HIGH_SCORE_DISPLAY:case a.jg.REQUEST_INTERNAL_LINK:case a.jg.REQUEST_ROOM_LINK:n.processEvent(e);break;case a.ig.FURNI_CLICK:case a.ig.FURNI_DOUBLE_CLICK:i(e);break;case a.ig.TOOLTIP_SHOW:case a.ig.TOOLTIP_HIDE:o(e)}if(c){let e=!0;c instanceof Le&&(e=!a.sg.isRoomPreviewerId(c.roomId)),e&&n.eventDispatcher.dispatchEvent(c)}}),[t,n,i,o]);ct(a.hg.SELECTED,l),ct(a.hg.DESELECTED,l),ct(a.hg.ADDED,l),ct(a.hg.REMOVED,l),ct(a.hg.PLACED,l),ct(a.hg.REQUEST_MOVE,l),ct(a.hg.REQUEST_ROTATE,l),ct(a.hg.REQUEST_MANIPULATION,l),ct(a.hg.MOUSE_ENTER,l),ct(a.hg.MOUSE_LEAVE,l),ct(a.jg.REQUEST_CREDITFURNI,l),ct(a.jg.REQUEST_STICKIE,l),ct(a.jg.REQUEST_PRESENT,l),ct(a.jg.REQUEST_TROPHY,l),ct(a.jg.REQUEST_TEASER,l),ct(a.jg.REQUEST_ECOTRONBOX,l),ct(a.jg.REQUEST_DIMMER,l),ct(a.jg.REQUEST_PLACEHOLDER,l),ct(a.jg.REQUEST_CLOTHING_CHANGE,l),ct(a.jg.REQUEST_PLAYLIST_EDITOR,l),ct(a.jg.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING,l),ct(a.jg.REQUEST_BADGE_DISPLAY_ENGRAVING,l),ct(a.jg.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED,l),ct(a.jg.OPEN_WIDGET,l),ct(a.jg.CLOSE_WIDGET,l),ct(a.jg.OPEN_FURNI_CONTEXT_MENU,l),ct(a.jg.CLOSE_FURNI_CONTEXT_MENU,l),ct(a.jg.REMOVE_DIMMER,l),ct(a.jg.REQUEST_MANNEQUIN,l),ct(a.kg.USE_PRODUCT_FROM_INVENTORY,l),ct(a.kg.USE_PRODUCT_FROM_ROOM,l),ct(a.jg.REQUEST_BACKGROUND_COLOR,l),ct(a.jg.REQUEST_FRIEND_FURNITURE_ENGRAVING,l),ct(a.jg.REQUEST_HIGH_SCORE_DISPLAY,l),ct(a.jg.REQUEST_HIDE_HIGH_SCORE_DISPLAY,l),ct(a.jg.REQUEST_INTERNAL_LINK,l),ct(a.jg.REQUEST_ROOM_LINK,l),ct(a.ig.FURNI_CLICK,l),ct(a.ig.FURNI_DOUBLE_CLICK,l),ct(a.ig.TOOLTIP_SHOW,l),ct(a.ig.TOOLTIP_HIDE,l);const u=Object(c.useCallback)((e=>{n&&n.processEvent(e)}),[n]);it(a.Kg.CHAT_EVENT,u),it(a.Kg.FLOOD_EVENT,u),it(a.Lg.RSDE_DANCE,u),it(a.Vg.RSUBE_BADGES,u),it(a.Xg.USER_FIGURE,u),it(a.Qg.FAVOURITE_GROUP_UPDATE,u),it(a.Sg.PET_STATUS_UPDATE,u),it(a.Ng.DOORBELL,u),it(a.Ng.RSDE_REJECTED,u),it(a.Ng.RSDE_ACCEPTED,u),it(a.Mg.ROOM_DIMMER_PRESETS,u),it(a.Ug.RSPE_PRESENT_OPENED,u),it(a.Rg.PET_INFO,u),it(a.Yg.ANSWERED,u),it(a.Yg.FINISHED,u),it(a.Yg.QUESTION,u),it(a.Tg.OFFER,u),it(a.Tg.ERROR,u),it(a.Tg.CONTENT,u);const d=Object(c.useCallback)((e=>{if(!e)return;let t=$e("error.title"),s="";switch(e.type){case a.Og.RSEME_MAX_PETS:s=$e("room.error.max_pets");break;case a.Og.RSEME_MAX_NUMBER_OF_OWN_PETS:s=$e("room.error.max_own_pets");break;case a.Og.RSEME_KICKED:s=$e("room.error.kicked"),t=$e("generic.alert.title");break;case a.Og.RSEME_PETS_FORBIDDEN_IN_HOTEL:s=$e("room.error.pets.forbidden_in_hotel");break;case a.Og.RSEME_PETS_FORBIDDEN_IN_FLAT:s=$e("room.error.pets.forbidden_in_flat");break;case a.Og.RSEME_NO_FREE_TILES_FOR_PET:s=$e("room.error.pets.no_free_tiles");break;case a.Og.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET:s=$e("room.error.pets.selected_tile_not_free");break;case a.Og.RSEME_BOTS_FORBIDDEN_IN_HOTEL:s=$e("room.error.bots.forbidden_in_hotel");break;case a.Og.RSEME_BOTS_FORBIDDEN_IN_FLAT:s=$e("room.error.bots.forbidden_in_flat");break;case a.Og.RSEME_BOT_LIMIT_REACHED:s=$e("room.error.max_bots");break;case a.Og.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT:s=$e("room.error.bots.selected_tile_not_free");break;case a.Og.RSEME_BOT_NAME_NOT_ACCEPTED:s=$e("room.error.bots.name.not.accepted");break;default:return}jr.simpleAlert(s,or.DEFAULT,null,null,t)}),[]);return it(a.Og.RSEME_KICKED,d),it(a.Og.RSEME_PETS_FORBIDDEN_IN_HOTEL,d),it(a.Og.RSEME_PETS_FORBIDDEN_IN_FLAT,d),it(a.Og.RSEME_MAX_PETS,d),it(a.Og.RSEME_MAX_NUMBER_OF_OWN_PETS,d),it(a.Og.RSEME_NO_FREE_TILES_FOR_PET,d),it(a.Og.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET,d),it(a.Og.RSEME_BOTS_FORBIDDEN_IN_HOTEL,d),it(a.Og.RSEME_BOTS_FORBIDDEN_IN_FLAT,d),it(a.Og.RSEME_BOT_LIMIT_REACHED,d),it(a.Og.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT,d),it(a.Og.RSEME_BOT_NAME_NOT_ACCEPTED,d),n?Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(eh,{}),Object(Cr.jsx)(ah,{}),Object(Cr.jsx)(sh,{}),Object(Cr.jsx)(dh,{}),Object(Cr.jsx)(Zh,{}),Object(Cr.jsx)(ij,{}),Object(Cr.jsx)(oj,{}),Object(Cr.jsx)(aj,{}),Object(Cr.jsx)(lh,{}),Object(Cr.jsx)(uh,{}),Object(Cr.jsx)(jj,{}),Object(Cr.jsx)(bh,{})]}):null},gj=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(null),i=Object(c.useRef)(),o=Object(c.useCallback)((e=>{if(a.sg.isRoomPreviewerId(e.roomId))return;const t=ee();if(t)switch(e.type){case a.gg.INITIALIZED:return le(e.roomId),void s(t);case a.gg.DISPOSED:return void s(null)}}),[]);ct(a.gg.INITIALIZED,o),ct(a.gg.DISPOSED,o);const l=Object(c.useCallback)((e=>{switch(e.type){case a.Pg.CREATED:return t=e.session,void V().startSession(t);case a.Pg.ENDED:return void s(null)}var t}),[]);return it(a.Pg.CREATED,l),it(a.Pg.ENDED,l),Object(c.useEffect)((()=>{if(!t)return void r(null);const e=new nn(t,new a.sb);e.registerHandler(new Zs),e.registerHandler(new Dn),e.registerHandler(new sn),e.registerHandler(new en),e.registerHandler(new Pn),e.registerHandler(new Un),e.registerHandler(new Xs),e.registerHandler(new Hs),e.registerHandler(new Bs),e.registerHandler(new Gs),e.registerHandler(new Ws),e.registerHandler(new qs),e.registerHandler(new Ks),e.registerHandler(new Vs),e.registerHandler(new $s),e.registerHandler(new Ys),e.registerHandler(new zs),e.registerHandler(new Qs),r(e);const s=w(),n=t.roomId,c=s.getRoomInstanceDisplay(n,1,window.innerWidth*window.devicePixelRatio,window.innerHeight*window.devicePixelRatio,a.rg.SCALE_ZOOMED_IN);if(1!==window.devicePixelRatio&&window.devicePixelRatio%1===0&&s.setRoomInstanceRenderingCanvasScale(n,1,window.devicePixelRatio),!c)return;const i=s.getRoomInstanceGeometry(n,1);if(i){let e=((s.getRoomInstanceVariable(n,a.mh.ROOM_MIN_X)||0)+(s.getRoomInstanceVariable(n,a.mh.ROOM_MAX_X)||0))/2,t=((s.getRoomInstanceVariable(n,a.mh.ROOM_MIN_Y)||0)+(s.getRoomInstanceVariable(n,a.mh.ROOM_MAX_Y)||0))/2;const r=20;e+=r-1,t+=r-1;const c=Math.sqrt(r*r+r*r)*Math.tan(30/180*Math.PI);i.location=new a.Li(e,t,c)}const o=_().stage;o&&(o.addChild(c),le(t.roomId))}),[t]),Object(c.useEffect)((()=>{const e=_().renderer.view;if(!e)return;if(e.onclick=e=>U(e),e.onmousemove=e=>U(e),e.onmousedown=e=>U(e),e.onmouseup=e=>U(e),e.ontouchstart=e=>B(e),e.ontouchmove=e=>B(e),e.ontouchend=e=>B(e),e.ontouchcancel=e=>B(e),1!==window.devicePixelRatio){let t=1/window.devicePixelRatio;e.style.transform=`scale(${t})`,e.style.transformOrigin="top left",e.style.width=100*window.devicePixelRatio+"%",e.style.height=100*window.devicePixelRatio+"%"}const t=e=>{const t=_(),s=window.innerWidth*window.devicePixelRatio,n=window.innerHeight*window.devicePixelRatio;t.renderer.resize(s,n),function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const n=w(),r=n.activeRoomId;n.initializeRoomInstanceRenderingCanvas(r,s,e,t)}(s,n,1),t.render()},s=i.current;return s&&s.appendChild(e),window.addEventListener("resize",t),()=>{s&&s.removeChild(e),window.removeEventListener("resize",t)}}),[]),Object(Cr.jsx)(Pd,{value:{roomSession:t,eventDispatcher:n&&n.eventDispatcher,widgetHandler:n},children:Object(Cr.jsxs)(Sr,{fit:!0,className:!t&&"d-none",children:[Object(Cr.jsx)(Sr,{innerRef:i}),t&&n&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(Ld,{}),Object(Cr.jsx)(bj,{})]})]})})},Oj=e=>{const{useGuideTool:t=!1,unseenAchievementCount:s=0,setMeExpanded:n=null,children:r=null,...i}=e,o=Object(c.useRef)();return Object(c.useEffect)((()=>{const e=ee();e&&w().selectRoomObject(e.roomId,e.ownRoomIndex,a.zg.UNIT)}),[]),Object(c.useEffect)((()=>{const e=e=>n(!1);return document.addEventListener("click",e),()=>document.removeEventListener(a.ue.MOUSE_CLICK,e)}),[n]),Object(Cr.jsxs)(yr,{innerRef:o,alignItems:"center",className:"nitro-toolbar-me p-2",gap:2,children:[t&&Object(Cr.jsx)(Sr,{pointer:!0,className:"navigation-item icon icon-me-helper-tool",onClick:e=>ot(new mn(mn.TOGGLE_GUIDE_TOOL))}),Object(Cr.jsx)(Sr,{pointer:!0,className:"navigation-item icon icon-me-achievements",onClick:e=>C("achievements/toggle"),children:s>0&&Object(Cr.jsx)(cc,{count:s})}),Object(Cr.jsx)(Sr,{pointer:!0,className:"navigation-item icon icon-me-profile",onClick:e=>gr(K().userId)}),Object(Cr.jsx)(Sr,{pointer:!0,className:"navigation-item icon icon-me-rooms",onClick:e=>C("navigator/search/myworld_view")}),Object(Cr.jsx)(Sr,{pointer:!0,className:"navigation-item icon icon-me-clothing",onClick:e=>C("avatar-editor/toggle")}),Object(Cr.jsx)(Sr,{pointer:!0,className:"navigation-item icon icon-me-settings",onClick:e=>C("user-settings/toggle")}),r]})},mj=e=>{const{isInRoom:t}=e,[s,n]=Object(c.useState)(!1),[r,i]=Object(c.useState)(!1),{userFigure:o=null}=Ut(),{getFullCount:l=0}=mt(),{getTotalUnseen:u=0}=Ze(),{requests:d=[]}=ht(),{iconState:h=Wn.HIDDEN}=bt(),j=K().isModerator,b=Object(c.useCallback)((e=>{const t=e.getParser();i(t.isAllowed(a.df.USE_GUIDE_TOOL))}),[i]);Je(a.cf,b);const g=Object(c.useCallback)(((e,t,s,n)=>{const r=document.body.getElementsByClassName(e)[0];if(!r)return;t.className="toolbar-icon-animation",t.style.visibility="visible",t.style.left=s+"px",t.style.top=n+"px",document.body.append(t);const c=r.getBoundingClientRect(),i=t.getBoundingClientRect(),o=i.x-c.x,l=i.y-c.y,u=Math.sqrt(o*o+l*l),d=500-Math.abs(1/u*100*500*.5),h=`ToolbarBouncing[${e}]`;a.te.getMotionByTag(h)||(a.te.runMotion(new a.zf(new a.Oi(d+8),new a.qb(r,400,12))).tag=h);const j=new a.zf(new a.rb(new a.Nd(t,d,c.x-i.x+20,c.y-i.y,100,1),1),new a.pb(t));a.te.runMotion(j)}),[]),O=Object(c.useCallback)((e=>{g("icon-inventory",e.image,e.x,e.y)}),[g]);return ct(a.Ve.ANIMATE_ICON,O),Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(mc,{type:gc.FADE_IN,inProp:s,timeout:300,children:Object(Cr.jsx)(Oj,{useGuideTool:r,unseenAchievementCount:u,setMeExpanded:n})}),Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"between",gap:2,className:"nitro-toolbar py-1 px-3",children:[Object(Cr.jsxs)(yr,{gap:2,alignItems:"center",children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:2,children:[Object(Cr.jsxs)(yr,{center:!0,pointer:!0,className:"navigation-item item-avatar "+(s?"active ":""),onClick:e=>n(!s),children:[Object(Cr.jsx)(Xr,{figure:o,direction:2}),u>0&&Object(Cr.jsx)(cc,{count:u})]}),t&&Object(Cr.jsx)(Sr,{pointer:!0,className:"navigation-item icon icon-habbo",onClick:e=>re()}),!t&&Object(Cr.jsx)(Sr,{pointer:!0,className:"navigation-item icon icon-house",onClick:e=>C("navigator/goto/home")}),Object(Cr.jsx)(Sr,{pointer:!0,className:"navigation-item icon icon-rooms",onClick:e=>C("navigator/toggle")}),Object(Cr.jsx)(Sr,{pointer:!0,className:"navigation-item icon icon-catalog",onClick:e=>C("catalog/toggle")}),Object(Cr.jsx)(Sr,{pointer:!0,className:"navigation-item icon icon-inventory",onClick:e=>C("inventory/toggle"),children:l>0&&Object(Cr.jsx)(cc,{count:l})}),t&&Object(Cr.jsx)(Sr,{pointer:!0,className:"navigation-item icon icon-camera",onClick:e=>C("camera/toggle")}),j&&Object(Cr.jsx)(Sr,{pointer:!0,className:"navigation-item icon icon-modtools",onClick:e=>ot(new fn(fn.TOGGLE_MOD_TOOLS))})]}),Object(Cr.jsx)(yr,{alignItems:"center",id:"toolbar-chat-input-container"})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:2,children:[Object(Cr.jsxs)(yr,{gap:2,children:[Object(Cr.jsx)(Sr,{pointer:!0,className:"navigation-item icon icon-friendall",onClick:e=>C("friends/toggle"),children:d.length>0&&Object(Cr.jsx)(cc,{count:d.length})}),(h===Wn.SHOW||h===Wn.UNREAD)&&Object(Cr.jsx)(Sr,{pointer:!0,className:`navigation-item icon icon-message ${h===Wn.UNREAD&&"is-unseen"}`,onClick:e=>Qn()})]}),Object(Cr.jsx)(Sr,{id:"toolbar-friend-bar-container",className:"d-none d-lg-block"})]})]})]})},pj=e=>{const{badges:t=null,gap:s=1,justifyContent:n="between",...r}=e;return Object(Cr.jsx)(Cr.Fragment,{children:t&&t.length>0&&t.map(((e,t)=>Object(Cr.jsx)(rc,{center:!0,children:Object(Cr.jsx)(Zr,{badgeCode:e},e)},e)))})},_j=e=>{const{relationships:t=null}=e,s=e=>{let{type:s}=e;const n=t&&t.relationshipStatusMap.hasKey(s)?t.relationshipStatusMap.getValue(s):null,r=a.Df.RELATIONSHIP_NAMES[s].toLocaleLowerCase();return Object(Cr.jsxs)(yr,{fullWidth:!0,gap:1,children:[Object(Cr.jsx)(yr,{center:!0,className:"user-relationship",children:Object(Cr.jsx)("i",{className:`nitro-friends-spritesheet icon-${r}`})}),Object(Cr.jsxs)(rc,{grow:!0,gap:0,children:[Object(Cr.jsxs)(yr,{alignItems:"center",justifyContent:"between",className:"bg-white rounded px-2 py-1 user-relationship",children:[Object(Cr.jsxs)(Ac,{small:!0,underline:!0,pointer:!0,onClick:e=>n&&n.randomFriendId>=1&&gr(n.randomFriendId),children:[(!n||0===n.friendCount)&&$e("extendedprofile.add.friends"),n&&n.friendCount>=1&&n.randomFriendName]}),n&&n.friendCount>=1&&Object(Cr.jsx)(yr,{center:!0,position:"relative",className:"avatar-image-container",children:Object(Cr.jsx)(Xr,{figure:n.randomFriendFigure,headOnly:!0,direction:4})})]}),Object(Cr.jsxs)(Ac,{small:!0,italics:!0,className:"user-relationship-count",children:[(!n||0===n.friendCount)&&$e("extendedprofile.no.friends.in.this.category"),n&&n.friendCount>1&&$e(`extendedprofile.relstatus.others.${r}`,["count"],[(n.friendCount-1).toString()]),"\xa0"]})]})]})};return Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)(s,{type:a.Df.HEART}),Object(Cr.jsx)(s,{type:a.Df.SMILE}),Object(Cr.jsx)(s,{type:a.Df.BOBBA})]})},Ej=e=>{const{relationships:t=null,friendsCount:s=null}=e;return Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(Ac,{small:!0,children:[Object(Cr.jsx)("b",{children:$e("extendedprofile.friends.count")})," ",s]}),Object(Cr.jsx)(Ac,{bold:!0,small:!0,children:$e("extendedprofile.relstatus")}),Object(Cr.jsx)(rc,{children:Object(Cr.jsx)(_j,{relationships:t})})]})},fj=e=>{const{itsMe:t=null,groups:s=null,onLeaveGroup:n=null,overflow:r="hidden",gap:i=2,...o}=e,[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(null),j=Object(c.useCallback)((e=>{const t=e.getParser();l&&l===t.id&&!t.flag&&h(t)}),[l]);return Je(a.Oc,j),Object(c.useEffect)((()=>{l&&Ln(new a.Nc(l,!1))}),[l]),Object(c.useEffect)((()=>{h(null),s.length>0&&u((e=>(e===s[0].groupId&&Ln(new a.Nc(s[0].groupId,!1)),s[0].groupId)))}),[s]),s&&s.length?Object(Cr.jsxs)(Rr,{overflow:r,gap:2,...o,children:[Object(Cr.jsx)(rc,{alignItems:"center",size:2,overflow:"auto",children:Object(Cr.jsx)(Ar,{overflow:null,columnCount:1,columnMinHeight:50,className:"user-groups-container",children:s.map(((e,s)=>Object(Cr.jsxs)(lc,{overflow:"unset",itemActive:l===e.groupId,onClick:()=>u(e.groupId),className:"p-1",children:[t&&Object(Cr.jsx)("i",{className:"position-absolute end-0 top-0 z-index-1 icon icon-group-"+(e.favourite?"favorite":"not-favorite"),onClick:()=>(e=>{Ln(e.favourite?new a.dd(e.groupId):new a.Lc(e.groupId))})(e)}),Object(Cr.jsx)(Zr,{badgeCode:e.badgeCode,isGroup:!0})]},s)))})}),Object(Cr.jsx)(rc,{size:10,overflow:"hidden",children:d&&Object(Cr.jsx)(il,{groupInformation:d,onClose:n})})]}):Object(Cr.jsx)(rc,{center:!0,fullHeight:!0,children:Object(Cr.jsxs)(yr,{justifyContent:"center",gap:2,children:[Object(Cr.jsx)(Sr,{className:"no-group-spritesheet image-1"}),Object(Cr.jsx)(Sr,{className:"no-group-spritesheet image-2"}),Object(Cr.jsx)(Sr,{className:"no-group-spritesheet image-3"})]})})},xj=e=>{const{userProfile:t=null}=e,[s,n]=Object(c.useState)(t.requestSent),r=t.id===K().userId,i=!s&&!r&&!t.isMyFriend&&!t.requestSent;return Object(c.useEffect)((()=>{n(t.requestSent)}),[t]),Object(Cr.jsxs)(yr,{gap:2,children:[Object(Cr.jsx)(rc,{center:!0,className:"avatar-container",children:Object(Cr.jsx)(Xr,{figure:t.figure,direction:2})}),Object(Cr.jsxs)(rc,{children:[Object(Cr.jsxs)(rc,{gap:0,children:[Object(Cr.jsx)(Ac,{bold:!0,children:t.username}),Object(Cr.jsxs)(Ac,{italics:!0,textBreak:!0,small:!0,children:[t.motto,"\xa0"]})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(Ac,{small:!0,children:[Object(Cr.jsx)("b",{children:$e("extendedprofile.created")})," ",t.registration]}),Object(Cr.jsxs)(Ac,{small:!0,children:[Object(Cr.jsx)("b",{children:$e("extendedprofile.last.login")})," ",a.Fb.format(t.secondsSinceLastVisit,".ago",2)]}),Object(Cr.jsxs)(Ac,{small:!0,children:[Object(Cr.jsx)("b",{children:$e("extendedprofile.achievementscore")})," ",t.achievementPoints]})]}),Object(Cr.jsxs)(yr,{gap:1,children:[t.isOnline&&Object(Cr.jsx)("i",{className:"icon icon-pf-online"}),!t.isOnline&&Object(Cr.jsx)("i",{className:"icon icon-pf-offline"}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[i&&Object(Cr.jsx)(Ac,{small:!0,underline:!0,pointer:!0,onClick:()=>{n(!0),Ln(new a.Mf(t.username))},children:$e("extendedprofile.addasafriend")}),!i&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)("i",{className:"icon icon-pf-tick"}),r&&Object(Cr.jsx)(Ac,{children:$e("extendedprofile.me")}),t.isMyFriend&&Object(Cr.jsx)(Ac,{children:$e("extendedprofile.friend")}),(s||t.requestSent)&&Object(Cr.jsx)(Ac,{children:$e("extendedprofile.friendrequestsent")})]})]})]})]})]})},Ij=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)([]),[i,o]=Object(c.useState)(null),l=Object(c.useCallback)((()=>{t&&t.id===K().userId&&gr(t.id)}),[t]),u=Object(c.useCallback)((e=>{const s=e.getParser();t&&s.userId===t.id&&r(s.badges)}),[t]);Je(a.ti,u);const d=Object(c.useCallback)((e=>{const s=e.getParser();t&&s.userId===t.id&&o(s)}),[t]);Je(a.Ef,d);const h=Object(c.useCallback)((e=>{const t=e.getParser();let n=!1;s((e=>(e&&e.id&&(n=e.id===t.id),t))),n||(r([]),o(null)),Ln(new a.si(t.id)),Ln(new a.Bi(t.id))}),[]);Je(a.Ai,h);const j=Object(c.useCallback)((e=>{if(!t)return;if(e.category!==a.zg.UNIT)return;const s=ee().userDataManager.getUserDataByIndex(e.objectId);s.type===a.Dg.USER&&gr(s.webID)}),[t]);return ct(a.hg.SELECTED,j),t?Object(Cr.jsxs)($r,{uniqueKey:"nitro-user-profile",theme:"primary-slim",className:"user-profile",children:[Object(Cr.jsx)(Wr,{headerText:$e("extendedprofile.caption"),onCloseClick:()=>{s(null),r([]),o(null)}}),Object(Cr.jsxs)(Hr,{overflow:"hidden",children:[Object(Cr.jsxs)(Rr,{fullHeight:!1,gap:2,children:[Object(Cr.jsxs)(rc,{size:7,gap:1,className:"user-container pe-2",children:[Object(Cr.jsx)(xj,{userProfile:t}),Object(Cr.jsx)(Rr,{columnCount:5,fullHeight:!0,className:"bg-muted rounded px-2 py-1",children:Object(Cr.jsx)(pj,{fullWidth:!0,center:!0,badges:n})})]}),Object(Cr.jsx)(rc,{size:5,children:i&&Object(Cr.jsx)(Ej,{relationships:i,friendsCount:t.friendsCount})})]}),Object(Cr.jsx)(yr,{alignItems:"center",className:"rooms-button-container px-2 py-1",children:Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,onClick:e=>C(`navigator/search/hotel_view/owner:${t.username}`),children:[Object(Cr.jsx)("i",{className:"icon icon-rooms"}),Object(Cr.jsx)(Ac,{bold:!0,underline:!0,pointer:!0,children:$e("extendedprofile.rooms")})]})}),Object(Cr.jsx)(fj,{fullWidth:!0,itsMe:t.id===K().userId,groups:t.groups,onLeaveGroup:l})]})]}):null},Tj=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),i=Object(c.useCallback)((e=>{const t=e.getParser(),s=new a.Re;s.volumeSystem=t.volumeSystem,s.volumeFurni=t.volumeFurni,s.volumeTrax=t.volumeTrax,s.oldChat=t.oldChat,s.roomInvites=t.roomInvites,s.cameraFollow=t.cameraFollow,s.flags=t.flags,s.chatType=t.chatType,r(s),nt(s)}),[]);Je(a.Di,i);const o=Object(c.useCallback)(((e,t)=>{let c=!0;const i=n.clone();switch(e){case"close_view":return s(!1),void(c=!1);case"oldchat":i.oldChat=t,Ln(new a.Ei(i.oldChat));break;case"room_invites":i.roomInvites=t,Ln(new a.Fi(i.roomInvites));break;case"camera_follow":i.cameraFollow=t,Ln(new a.Ci(i.cameraFollow));break;case"system_volume":i.volumeSystem=t,i.volumeSystem=Math.max(0,i.volumeSystem),i.volumeSystem=Math.min(100,i.volumeSystem);break;case"furni_volume":i.volumeFurni=t,i.volumeFurni=Math.max(0,i.volumeFurni),i.volumeFurni=Math.min(100,i.volumeFurni);break;case"trax_volume":i.volumeTrax=t,i.volumeTrax=Math.max(0,i.volumeTrax),i.volumeTrax=Math.min(100,i.volumeTrax)}c&&r(i),nt(i)}),[n]),l=Object(c.useCallback)((e=>{if("volume"===e)Ln(new a.Gi(Math.round(n.volumeSystem),Math.round(n.volumeFurni),Math.round(n.volumeTrax)))}),[n]);return Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e))}},eventUrlPrefix:"user-settings/"};return E(e),()=>y(e)}),[]),Object(c.useEffect)((()=>{n&&ot(n)}),[n]),t?Object(Cr.jsxs)($r,{uniqueKey:"user-settings",className:"user-settings-window",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("widget.memenu.settings.title"),onCloseClick:e=>o("close_view")}),Object(Cr.jsxs)(Hr,{className:"text-black",children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:n.oldChat,onChange:e=>o("oldchat",e.target.checked)}),Object(Cr.jsx)(Ac,{children:$e("memenu.settings.chat.prefer.old.chat")})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:n.roomInvites,onChange:e=>o("room_invites",e.target.checked)}),Object(Cr.jsx)(Ac,{children:$e("memenu.settings.other.ignore.room.invites")})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:n.cameraFollow,onChange:e=>o("camera_follow",e.target.checked)}),Object(Cr.jsx)(Ac,{children:$e("memenu.settings.other.disable.room.camera.follow")})]})]}),Object(Cr.jsxs)(rc,{children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("widget.memenu.settings.volume")}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{children:$e("widget.memenu.settings.volume.ui")}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Lr.a,{icon:0===n.volumeSystem?"volume-mute":n.volumeSystem>0?"volume-down":null,className:n.volumeSystem>=50?"text-muted":""}),Object(Cr.jsx)("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeSystem",value:n.volumeSystem,onChange:e=>o("system_volume",e.target.value),onMouseUp:()=>l("volume")}),Object(Cr.jsx)(Lr.a,{icon:"volume-up",className:n.volumeSystem<50?"text-muted":""})]})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{children:$e("widget.memenu.settings.volume.furni")}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Lr.a,{icon:0===n.volumeFurni?"volume-mute":n.volumeFurni>0?"volume-down":null,className:n.volumeFurni>=50?"text-muted":""}),Object(Cr.jsx)("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeFurni",value:n.volumeFurni,onChange:e=>o("furni_volume",e.target.value),onMouseUp:()=>l("volume")}),Object(Cr.jsx)(Lr.a,{icon:"volume-up",className:n.volumeFurni<50?"text-muted":""})]})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{children:$e("widget.memenu.settings.volume.trax")}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(Lr.a,{icon:0===n.volumeTrax?"volume-mute":n.volumeTrax>0?"volume-down":null,className:n.volumeTrax>=50?"text-muted":""}),Object(Cr.jsx)("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeTrax",value:n.volumeTrax,onChange:e=>o("trax_volume",e.target.value),onMouseUp:()=>l("volume")}),Object(Cr.jsx)(Lr.a,{icon:"volume-up",className:n.volumeTrax<50?"text-muted":""})]})]})]})]})]}):null},Cj=Object(c.createContext)({trigger:null,setTrigger:null,intParams:null,setIntParams:null,stringParam:null,setStringParam:null,furniIds:null,setFurniIds:null,actionDelay:null,setActionDelay:null,saveWired:null}),Sj=e=>Object(Cr.jsx)(Cj.Provider,{value:e.value,children:e.children}),Nj=()=>Object(c.useContext)(Cj),vj=e=>{const{trigger:t=null,furniIds:s=[],setFurniIds:n=null}=Nj(),r=Object(c.useCallback)((e=>{const s=e.objectId;s<=0||n((e=>{const n=[...e],r=e.indexOf(s);return r>=0?(n.splice(r,1),xr.hide(s)):n.length<t.maximumItemSelectionCount&&(n.push(s),xr.show(s)),n}))}),[t,n]);return lt(kn.SELECT_OBJECT,r),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.pickfurnis.caption",["count","limit"],[s.length.toString(),t.maximumItemSelectionCount.toString()])}),Object(Cr.jsx)(Ac,{small:!0,children:$e("wiredfurni.pickfurnis.desc")})]})},Rj=e=>{const{wiredType:t="",requiresFurni:s=Er.STUFF_SELECTION_OPTION_NONE,save:n=null,validate:r=null,children:i=null,hasSpecialInput:a=!1}=e,[o,l]=Object(c.useState)(null),[u,d]=Object(c.useState)(null),[h,j]=Object(c.useState)(!1),{trigger:b=null,setTrigger:g=null,setIntParams:O=null,setStringParam:m=null,setFurniIds:p=null,saveWired:_=null}=Nj(),E=()=>g(null);return Object(c.useEffect)((()=>{h&&(_(),j(!1))}),[h,_]),Object(c.useEffect)((()=>{if(!b)return;const e=b.spriteId||-1,t=K().getFloorItemData(e);return t?(l(t.name),d(t.description)):(l("NAME: "+e),d("NAME: "+e)),a&&(O(b.intData),m(b.stringData)),s>Er.STUFF_SELECTION_OPTION_NONE&&p((e=>(e&&e.length&&xr.clearSelectionShaderFromFurni(e),b.selectedItems&&b.selectedItems.length?(xr.applySelectionShaderToFurni(b.selectedItems),b.selectedItems):[]))),()=>{j(!1),O([]),m(null),p((e=>(e&&e.length&&xr.clearSelectionShaderFromFurni(e),[])))}}),[b,a,s,O,m,p]),Object(Cr.jsxs)($r,{uniqueKey:"nitro-wired",className:"nitro-wired",theme:"primary-slim",children:[Object(Cr.jsx)(Wr,{headerText:$e("wiredfurni.title"),onCloseClick:E}),Object(Cr.jsxs)(Hr,{children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("i",{className:`icon icon-wired-${t}`}),Object(Cr.jsx)(Ac,{bold:!0,children:o})]}),Object(Cr.jsx)(Ac,{small:!0,children:u})]}),!!i&&Object(Cr.jsx)("hr",{className:"m-0 bg-dark"}),i,s>Er.STUFF_SELECTION_OPTION_NONE&&Object(Cr.jsxs)(Cr.Fragment,{children:[Object(Cr.jsx)("hr",{className:"m-0 bg-dark"}),Object(Cr.jsx)(vj,{})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)(wr,{fullWidth:!0,variant:"success",onClick:()=>{r&&!r()||(n&&n(),j(!0))},children:$e("wiredfurni.ready")}),Object(Cr.jsx)(wr,{fullWidth:!0,variant:"secondary",onClick:E,children:$e("cancel")})]})]})]})},Aj=e=>{const{requiresFurni:t=Er.STUFF_SELECTION_OPTION_NONE,save:s=null,hasSpecialInput:n=!1,children:r=null}=e,{trigger:i=null,actionDelay:a=0,setActionDelay:o=null}=Nj();return Object(c.useEffect)((()=>{o(i.delayInPulses)}),[i,o]),Object(Cr.jsxs)(Rj,{wiredType:"action",requiresFurni:t,save:s,hasSpecialInput:n,children:[r,!!r&&Object(Cr.jsx)("hr",{className:"m-0 bg-dark"}),Object(Cr.jsxs)(rc,{children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.delay",["seconds"],[Or(a)])}),Object(Cr.jsx)(gi.a,{className:"nitro-slider",min:0,max:20,value:a,onChange:e=>o(e)})]})]})},yj=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(""),{trigger:i=null,setStringParam:a=null}=Nj();return Object(c.useEffect)((()=>{const e=i.stringData.split(Ir);e.length>0&&s(e[0]),e.length>1&&r(e[1].length>0?e[1]:"hd-180-1.ch-210-66.lg-270-82.sh-290-81")}),[i]),Object(Cr.jsxs)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>a(t+Ir+n),children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.bot.name")}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]}),Object(Cr.jsxs)(yr,{center:!0,children:[Object(Cr.jsx)(Xr,{figure:n,direction:4}),Object(Cr.jsx)(wr,{onClick:e=>r(K().figure),children:$e("wiredfurni.params.capture.figure")})]})]})},wj=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(-1),{trigger:i=null,setStringParam:a=null,setIntParams:o=null}=Nj();return Object(c.useEffect)((()=>{s(i.stringData),r(i.intData.length>0?i.intData[0]:0)}),[i]),Object(Cr.jsxs)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{a(t),o([n])},children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.bot.name")}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"followMode",id:"followMode1",checked:1===n,onChange:e=>r(1)}),Object(Cr.jsx)(Ac,{children:$e("wiredfurni.params.start.following")})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"followMode",id:"followMode2",checked:0===n,onChange:e=>r(0)}),Object(Cr.jsx)(Ac,{children:$e("wiredfurni.params.stop.following")})]})]})]})},kj=[2,5,7,8,9,10,27],Dj=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(-1),{trigger:i=null,setStringParam:a=null,setIntParams:o=null}=Nj();return Object(c.useEffect)((()=>{s(i.stringData),r(i.intData.length>0?i.intData[0]:0)}),[i]),Object(Cr.jsxs)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{a(t),o([n])},children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.bot.name")}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.handitem")}),Object(Cr.jsxs)("select",{className:"form-select form-select-sm",value:n,onChange:e=>r(parseInt(e.target.value)),children:[Object(Cr.jsx)("option",{value:"0",children:"------"}),kj.map((e=>Object(Cr.jsx)("option",{value:e,children:$e(`handitem${e}`)},e)))]})]})]})},Pj=e=>{const[t,s]=Object(c.useState)(""),{trigger:n=null,setStringParam:r=null}=Nj();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(Cr.jsx)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>r(t),children:Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.bot.name")}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]})})},Uj=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(""),[i,a]=Object(c.useState)(-1),{trigger:o=null,setStringParam:l=null,setIntParams:u=null}=Nj();return Object(c.useEffect)((()=>{const e=o.stringData.split(Ir);e.length>0&&s(e[0]),e.length>1&&r(e[1].length>0?e[1]:""),a(o.intData.length>0?o.intData[0]:0)}),[o]),Object(Cr.jsxs)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{l(t+Ir+n),u([i])},children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.bot.name")}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.message")}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:64,value:n,onChange:e=>r(e.target.value)})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode1",checked:0===i,onChange:e=>a(0)}),Object(Cr.jsx)(Ac,{children:$e("wiredfurni.params.talk")})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode2",checked:1===i,onChange:e=>a(1)}),Object(Cr.jsx)(Ac,{children:$e("wiredfurni.params.whisper")})]})]})]})},Lj=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(""),[i,a]=Object(c.useState)(-1),{trigger:o=null,setStringParam:l=null,setIntParams:u=null}=Nj();return Object(c.useEffect)((()=>{const e=o.stringData.split(Ir);e.length>0&&s(e[0]),e.length>1&&r(e[1].length>0?e[1]:""),a(o.intData.length>0?o.intData[0]:0)}),[o]),Object(Cr.jsxs)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{l(t+Ir+n),u([i])},children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.bot.name")}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.message")}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:64,value:n,onChange:e=>r(e.target.value)})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode1",checked:0===i,onChange:e=>a(0)}),Object(Cr.jsx)(Ac,{children:$e("wiredfurni.params.talk")})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode2",checked:1===i,onChange:e=>a(1)}),Object(Cr.jsx)(Ac,{children:$e("wiredfurni.params.shout")})]})]})]})},Mj=e=>{const[t,s]=Object(c.useState)(""),{trigger:n=null,setStringParam:r=null}=Nj();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(Cr.jsx)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>r(t),children:Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.bot.name")}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]})})},Fj=e=>Object(Cr.jsx)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),Hj=e=>Object(Cr.jsx)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),Bj=e=>{const[t,s]=Object(c.useState)(""),{trigger:n=null,setStringParam:r=null}=Nj();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(Cr.jsx)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r(t),children:Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.message")}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:e=>s(e.target.value),maxLength:100})]})})},Gj=e=>Object(Cr.jsx)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),Wj=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(1),[i,a]=Object(c.useState)(!1),[o,l]=Object(c.useState)(1),[u,d]=Object(c.useState)(1),[h,j]=Object(c.useState)([]),{trigger:b=null,setIntParams:g=null,setStringParam:O=null}=Nj(),m=Object(c.useCallback)((()=>{j((e=>[...e,{isBadge:!1,itemCode:"",probability:null}]))}),[j]),p=Object(c.useCallback)((e=>{j((t=>{const s=Array.from(t);return s.splice(e,1),s}))}),[j]),_=Object(c.useCallback)(((e,t,s,n)=>{const r=Array.from(h),c=r[e];c&&(c.isBadge=t,c.itemCode=s,c.probability=n,j(r))}),[h,j]),E=Object(c.useCallback)((()=>{let e=[];for(const t of h){if(!t.itemCode)continue;const s=[t.isBadge?"0":"1",t.itemCode,t.probability.toString()];e.push(s.join(","))}e.length>0&&(O(e.join(";")),g([n,i?1:0,o,u]))}),[n,i,o,u,h,g,O]);return Object(c.useEffect)((()=>{const e=[];if(b.stringData.length>0&&b.stringData.includes(";")){const t=b.stringData.split(";");for(const s of t){const t=s.split(",");3===t.length&&e.push({isBadge:"0"===t[0],itemCode:t[1],probability:Number(t[2])})}}0===e.length&&e.push({isBadge:!1,itemCode:"",probability:null}),r(b.intData.length>0?b.intData[0]:0),a(b.intData.length>1&&1===b.intData[1]),l(b.intData.length>2?b.intData[2]:0),d(b.intData.length>3?b.intData[3]:0),s(b.intData.length>3&&b.intData[3]>0),j(e)}),[b]),Object(Cr.jsxs)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:E,children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",id:"limitEnabled",onChange:e=>s(e.target.checked)}),Object(Cr.jsx)(Ac,{children:$e("wiredfurni.params.prizelimit",["amount"],[t?o.toString():""])})]}),!t&&Object(Cr.jsx)(Ac,{center:!0,small:!0,className:"bg-muted rounded p-1",children:"Reward limit not set. Make sure rewards are badges or non-tradeable items."}),t&&Object(Cr.jsx)(gi.a,{className:"nitro-slider",min:1,max:1e3,value:o,onChange:e=>l(e)}),Object(Cr.jsx)("hr",{className:"m-0 bg-dark"}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:"How often can a user be rewarded?"}),Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsxs)("select",{className:"form-select form-select-sm w-100",value:n,onChange:e=>r(Number(e.target.value)),children:[Object(Cr.jsx)("option",{value:"0",children:"Once"}),Object(Cr.jsxs)("option",{value:"3",children:["Once every ",u," minutes"]}),Object(Cr.jsxs)("option",{value:"2",children:["Once every ",u," hours"]}),Object(Cr.jsxs)("option",{value:"1",children:["Once every ",u," days"]})]}),n>0&&Object(Cr.jsx)("input",{type:"number",className:"form-control form-control-sm",value:u,onChange:e=>d(Number(e.target.value))})]})]}),Object(Cr.jsx)("hr",{className:"m-0 bg-dark"}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",id:"uniqueRewards",checked:i,onChange:e=>a(e.target.checked)}),Object(Cr.jsx)(Ac,{children:"Unique rewards"})]}),Object(Cr.jsx)(Ac,{center:!0,small:!0,className:"bg-muted rounded p-1",children:"If checked each reward will be given once to each user. This will disable the probabilities option."}),Object(Cr.jsx)("hr",{className:"m-0 bg-dark"}),Object(Cr.jsxs)(yr,{justifyContent:"between",alignItems:"center",children:[Object(Cr.jsx)(Ac,{bold:!0,children:"Rewards"}),Object(Cr.jsx)(wr,{variant:"success",onClick:m,children:Object(Cr.jsx)(Lr.a,{icon:"plus"})})]}),Object(Cr.jsx)(rc,{gap:1,children:h&&h.map(((e,t)=>Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:e.isBadge,onChange:s=>_(t,s.target.checked,e.itemCode,e.probability)}),Object(Cr.jsx)(Ac,{small:!0,children:"Badge?"})]}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:e.itemCode,onChange:s=>_(t,e.isBadge,s.target.value,e.probability),placeholder:"Item Code"}),Object(Cr.jsx)("input",{type:"number",className:"form-control form-control-sm",value:e.probability,onChange:s=>_(t,e.isBadge,e.itemCode,Number(s.target.value)),placeholder:"Probability"}),t>0&&Object(Cr.jsx)(wr,{variant:"danger",onClick:e=>p(t),children:Object(Cr.jsx)(Lr.a,{icon:"trash"})})]},t)))})]})},Vj=e=>{const[t,s]=Object(c.useState)(1),[n,r]=Object(c.useState)(1),[i,a]=Object(c.useState)(1),{trigger:o=null,setIntParams:l=null}=Nj();return Object(c.useEffect)((()=>{o.intData.length>=2?(s(o.intData[0]),r(o.intData[1]),a(o.intData[2])):(s(1),r(1),a(1))}),[o]),Object(Cr.jsxs)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>l([t,n,i]),children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.setpoints",["points"],[t.toString()])}),Object(Cr.jsx)(gi.a,{className:"nitro-slider",min:1,max:100,value:t,onChange:e=>s(e)})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.settimesingame",["times"],[n.toString()])}),Object(Cr.jsx)(gi.a,{className:"nitro-slider",min:1,max:10,value:n,onChange:e=>r(e)})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.team")}),[1,2,3,4].map((e=>Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${e}`,checked:i===e,onChange:t=>a(e)}),Object(Cr.jsx)(Ac,{children:$e("wiredfurni.params.team."+e)})]},e)))]})]})},qj=e=>{const[t,s]=Object(c.useState)(1),[n,r]=Object(c.useState)(1),{trigger:i=null,setIntParams:a=null}=Nj();return Object(c.useEffect)((()=>{i.intData.length>=2?(s(i.intData[0]),r(i.intData[1])):(s(1),r(1))}),[i]),Object(Cr.jsxs)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>a([t,n]),children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.setpoints",["points"],[t.toString()])}),Object(Cr.jsx)(gi.a,{className:"nitro-slider",min:1,max:100,value:t,onChange:e=>s(e)})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.settimesingame",["times"],[n.toString()])}),Object(Cr.jsx)(gi.a,{className:"nitro-slider",min:1,max:10,value:n,onChange:e=>r(e)})]})]})},zj=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=Nj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Cr.jsx)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.team")}),[1,2,3,4].map((e=>Object(Cr.jsxs)(yr,{gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${e}`,checked:t===e,onChange:t=>s(e)}),Object(Cr.jsx)(Ac,{children:$e(`wiredfurni.params.team.${e}`)})]},e)))]})})},Yj=e=>{const[t,s]=Object(c.useState)(""),{trigger:n=null,setStringParam:r=null}=Nj();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(Cr.jsx)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r(t),children:Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.message")}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:e=>s(e.target.value),maxLength:100})]})})},Kj=e=>Object(Cr.jsx)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),Qj=[{value:0,icon:"ne"},{value:2,icon:"se"},{value:4,icon:"sw"},{value:6,icon:"nw"}],$j=[0,1,2,3,4,5,6],Xj=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(-1),{trigger:i=null,setIntParams:a=null}=Nj();return Object(c.useEffect)((()=>{i.intData.length>=2?(s(i.intData[0]),r(i.intData[1])):(s(-1),r(-1))}),[i]),Object(Cr.jsxs)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!0,save:()=>a([t,n]),children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.startdir")}),Object(Cr.jsx)(yr,{gap:1,children:Qj.map((e=>Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${e.value}`,checked:t===e.value,onChange:t=>s(e.value)}),Object(Cr.jsx)(Ac,{children:Object(Cr.jsx)("i",{className:`icon icon-${e.icon}`})})]},e.value)))})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.turn")}),$j.map((e=>Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"rotation",id:`rotation${e}`,checked:n===e,onChange:t=>r(e)}),Object(Cr.jsx)(Ac,{children:$e(`wiredfurni.params.turn.${e}`)})]},e)))]})]})},Jj=[{value:0,icon:"ne"},{value:2,icon:"se"},{value:4,icon:"sw"},{value:6,icon:"nw"}],Zj=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(-1),{trigger:i=null,setIntParams:a=null}=Nj();return Object(c.useEffect)((()=>{i.intData.length>=2?(s(i.intData[1]),r(i.intData[0])):(s(-1),r(-1))}),[i]),Object(Cr.jsxs)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!0,save:()=>a([n,t]),children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.emptytiles",["tiles"],[t.toString()])}),Object(Cr.jsx)(gi.a,{className:"nitro-slider",min:1,max:5,value:t,onChange:e=>s(e)})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.startdir")}),Object(Cr.jsx)(yr,{gap:1,children:Jj.map((e=>Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${e.value}`,checked:n===e.value,onChange:t=>r(e.value)}),Object(Cr.jsx)(Ac,{children:Object(Cr.jsx)("i",{className:`icon icon-${e.icon}`})})]},e.value)))})]})]})},eb=[{value:4,icon:"ne"},{value:5,icon:"se"},{value:6,icon:"sw"},{value:7,icon:"nw"},{value:2,icon:"mv-2"},{value:3,icon:"mv-3"},{value:1,icon:"mv-1"}],tb=[0,1,2,3],sb=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(-1),{trigger:i=null,setIntParams:a=null}=Nj();return Object(c.useEffect)((()=>{i.intData.length>=2?(s(i.intData[0]),r(i.intData[1])):(s(-1),r(-1))}),[i]),Object(Cr.jsxs)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!0,save:()=>a([t,n]),children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.movefurni")}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:"movement0",checked:0===t,onChange:e=>s(0)}),Object(Cr.jsx)(Ac,{children:$e("wiredfurni.params.movefurni.0")})]}),Object(Cr.jsxs)(yr,{gap:1,children:[eb.map((e=>Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${e.value}`,checked:t===e.value,onChange:t=>s(e.value)}),Object(Cr.jsx)("i",{className:`icon icon-${e.icon}`})]},e.value))),Object(Cr.jsx)("div",{className:"col"})]})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.rotatefurni")}),tb.map((e=>Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"rotation",id:`rotation${e}`,checked:n===e,onChange:t=>r(e)}),Object(Cr.jsxs)(Ac,{children:[[1,2].includes(e)&&Object(Cr.jsx)("i",{className:`icon icon-rot-${e}`}),$e(`wiredfurni.params.rotatefurni.${e}`)]})]},e)))]})]})},nb=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(""),{trigger:i=null,setIntParams:a=null,setStringParam:o=null}=Nj();return Object(c.useEffect)((()=>{s(i.intData.length>0?i.intData[0]:0),r(i.stringData)}),[i]),Object(Cr.jsxs)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{a([t]),o(n)},children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.length.minutes",["minutes"],[t.toString()])}),Object(Cr.jsx)(gi.a,{className:"nitro-slider",min:1,max:10,value:t,onChange:e=>s(e)})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.message")}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:e=>r(e.target.value),maxLength:100})]})]})},rb=e=>Object(Cr.jsx)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),cb=e=>{const[t,s]=Object(c.useState)(0),[n,r]=Object(c.useState)(0),[i,a]=Object(c.useState)(0),{trigger:o=null,setIntParams:l=null}=Nj();return Object(c.useEffect)((()=>{s(o.getBoolean(0)?1:0),r(o.getBoolean(1)?1:0),a(o.getBoolean(2)?1:0)}),[o]),Object(Cr.jsx)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>l([t,n,i]),children:Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.conditions")}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",id:"stateFlag",checked:!!t,onChange:e=>s(e.target.checked?1:0)}),Object(Cr.jsx)(Ac,{children:$e("wiredfurni.params.condition.state")})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",id:"directionFlag",checked:!!n,onChange:e=>r(e.target.checked?1:0)}),Object(Cr.jsx)(Ac,{children:$e("wiredfurni.params.condition.direction")})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",id:"positionFlag",checked:!!i,onChange:e=>a(e.target.checked?1:0)}),Object(Cr.jsx)(Ac,{children:$e("wiredfurni.params.condition.position")})]})]})})},ib=e=>Object(Cr.jsx)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),ab=e=>Object(Cr.jsx)(Aj,{requiresFurni:Er.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),ob=e=>{const{requiresFurni:t=Er.STUFF_SELECTION_OPTION_NONE,save:s=null,hasSpecialInput:n=!1,children:r=null}=e;return Object(Cr.jsx)(Rj,{wiredType:"condition",requiresFurni:t,hasSpecialInput:n,save:()=>s&&s(),children:r})},lb=[2,5,7,8,9,10,27],ub=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=Nj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Cr.jsx)(ob,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.handitem")}),Object(Cr.jsx)("select",{className:"form-select form-select-sm",value:t,onChange:e=>s(parseInt(e.target.value)),children:lb.map((e=>Object(Cr.jsx)("option",{value:e,children:$e(`handitem${e}`)},e)))})]})})},db=e=>Object(Cr.jsx)(ob,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),hb=e=>Object(Cr.jsx)(ob,{requiresFurni:Er.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!1,save:null}),jb=[1,2,3,4],bb=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=Nj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Cr.jsx)(ob,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.team")}),jb.map((e=>Object(Cr.jsxs)(yr,{gap:1,alignItems:"center",children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${e}`,checked:t===e,onChange:t=>s(e)}),Object(Cr.jsx)(Ac,{children:$e(`wiredfurni.params.team.${e}`)})]},e)))]})})},gb=e=>{const[t,s]=Object(c.useState)(""),{trigger:n=null,setStringParam:r=null}=Nj();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(Cr.jsx)(ob,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r(t),children:Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.badgecode")}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:e=>s(e.target.value)})]})})},Ob=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=Nj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Cr.jsx)(ob,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.effectid")}),Object(Cr.jsx)("input",{type:"number",className:"form-control form-control-sm",value:t,onChange:e=>s(parseInt(e.target.value))})]})})},mb=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(""),{trigger:i=null,setIntParams:a=null}=Nj();return Object(c.useEffect)((()=>{if(i.intData.length>=2){let e=new Date,t=new Date;i.intData[0]>0&&(e=new Date(1e3*i.intData[0])),i.intData[1]>0&&(t=new Date(1e3*i.intData[1])),s(_r(e)),r(_r(t))}}),[i]),Object(Cr.jsxs)(ob,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{let e=0,s=0;const r=new Date(t),c=new Date(n);r&&c&&(e=r.getTime()/1e3,s=c.getTime()/1e3),a([e,s])},children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.startdate")}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:e=>s(e.target.value)})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.enddate")}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:e=>r(e.target.value)})]})]})},pb=e=>Object(Cr.jsx)(ob,{requiresFurni:Er.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!1,save:null}),_b=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=Nj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Cr.jsx)(ob,{requiresFurni:Er.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>r([t]),children:Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.requireall")}),[0,1].map((e=>Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"requireAll",id:`requireAll${e}`,checked:t===e,onChange:t=>s(e)}),Object(Cr.jsx)(Ac,{children:$e("wiredfurni.params.requireall."+e)})]},e)))]})})},Eb=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=Nj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Cr.jsx)(ob,{requiresFurni:Er.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>r([t]),children:Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.not_requireall")}),[0,1].map((e=>Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"requireAll",id:`requireAll${e}`,checked:t===e,onChange:t=>s(e)}),Object(Cr.jsx)(Ac,{children:$e(`wiredfurni.params.not_requireall.${e}`)})]},e)))]})})},fb=e=>Object(Cr.jsx)(ob,{requiresFurni:Er.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),xb=e=>{const[t,s]=Object(c.useState)(0),[n,r]=Object(c.useState)(0),[i,a]=Object(c.useState)(0),{trigger:o=null,setIntParams:l=null}=Nj();return Object(c.useEffect)((()=>{s(o.getBoolean(0)?1:0),r(o.getBoolean(1)?1:0),a(o.getBoolean(2)?1:0)}),[o]),Object(Cr.jsx)(ob,{requiresFurni:Er.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>l([t,n,i]),children:Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.conditions")}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",id:"stateFlag",checked:!!t,onChange:e=>s(e.target.checked?1:0)}),Object(Cr.jsx)(Ac,{children:$e("wiredfurni.params.condition.state")})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",id:"directionFlag",checked:!!n,onChange:e=>r(e.target.checked?1:0)}),Object(Cr.jsx)(Ac,{children:$e("wiredfurni.params.condition.direction")})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"checkbox",id:"positionFlag",checked:!!i,onChange:e=>a(e.target.checked?1:0)}),Object(Cr.jsx)(Ac,{children:$e("wiredfurni.params.condition.position")})]})]})})},Ib=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=Nj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Cr.jsx)(ob,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.allowbefore",["seconds"],[Or(t)])}),Object(Cr.jsx)(gi.a,{className:"nitro-slider",min:1,max:1200,value:t,onChange:e=>s(e)})]})})},Tb=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=Nj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Cr.jsx)(ob,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.allowafter",["seconds"],[Or(t)])}),Object(Cr.jsx)(gi.a,{className:"nitro-slider",min:1,max:1200,value:t,onChange:e=>s(e)})]})})},Cb=e=>{const[t,s]=Object(c.useState)(1),[n,r]=Object(c.useState)(1),{trigger:i=null,setIntParams:a=null}=Nj();return Object(c.useEffect)((()=>{i.intData.length>=2?(s(i.intData[0]),r(i.intData[1])):(s(1),r(1))}),[i]),Object(Cr.jsxs)(ob,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>a([t,n]),children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.usercountmin",["value"],[t.toString()])}),Object(Cr.jsx)(gi.a,{className:"nitro-slider",min:1,max:50,value:t,onChange:e=>s(e)})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.usercountmax",["value"],[n.toString()])}),Object(Cr.jsx)(gi.a,{className:"nitro-slider",min:1,max:50,value:n,onChange:e=>r(e)})]})]})},Sb=e=>{const{requiresFurni:t=Er.STUFF_SELECTION_OPTION_NONE,save:s=null,hasSpecialInput:n=!1,children:r=null}=e;return Object(Cr.jsx)(Rj,{wiredType:"trigger",requiresFurni:t,hasSpecialInput:n,save:()=>s&&s(),children:r})},Nb=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(0),{trigger:i=null,setStringParam:a=null}=Nj();return Object(c.useEffect)((()=>{s(i.stringData),r(i.stringData?1:0)}),[i]),Object(Cr.jsx)(Sb,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>a(1===n?t:""),children:Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.picktriggerer")}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"avatarMode",id:"avatarMode0",checked:0===n,onChange:e=>r(0)}),Object(Cr.jsx)(Ac,{children:$e("wiredfurni.params.anyavatar")})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"avatarMode",id:"avatarMode1",checked:1===n,onChange:e=>r(1)}),Object(Cr.jsx)(Ac,{children:$e("wiredfurni.params.certainavatar")})]}),1===n&&Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:e=>s(e.target.value)})]})})},vb=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(-1),{trigger:i=null,setStringParam:a=null,setIntParams:o=null}=Nj();return Object(c.useEffect)((()=>{s(i.stringData),r(i.intData.length>0?i.intData[0]:0)}),[i]),Object(Cr.jsxs)(Sb,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{a(t),o([n])},children:[Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.whatissaid")}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:e=>s(e.target.value)})]}),Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.picktriggerer")}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"triggererAvatar",id:"triggererAvatar0",checked:0===n,onChange:e=>r(0)}),Object(Cr.jsx)(Ac,{children:$e("wiredfurni.params.anyavatar")})]}),Object(Cr.jsxs)(yr,{alignItems:"center",gap:1,children:[Object(Cr.jsx)("input",{className:"form-check-input",type:"radio",name:"triggererAvatar",id:"triggererAvatar1",checked:1===n,onChange:e=>r(1)}),Object(Cr.jsx)(Ac,{children:K().userName})]})]})]})},Rb=e=>Object(Cr.jsx)(Sb,{requiresFurni:Er.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),Ab=e=>Object(Cr.jsx)(Sb,{requiresFurni:Er.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),yb=e=>{const[t,s]=Object(c.useState)(""),{trigger:n=null,setStringParam:r=null}=Nj();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(Cr.jsx)(Sb,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r(t),children:Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.bot.name")}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]})})},wb=e=>{const[t,s]=Object(c.useState)(""),{trigger:n=null,setStringParam:r=null}=Nj();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(Cr.jsx)(Sb,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r(t),children:Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.bot.name")}),Object(Cr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]})})},kb=e=>Object(Cr.jsx)(Sb,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),Db=e=>{const[t,s]=Object(c.useState)(1),{trigger:n=null,setIntParams:r=null}=Nj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Cr.jsx)(Sb,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.settime",["seconds"],[Or(t)])}),Object(Cr.jsx)(gi.a,{className:"nitro-slider",min:1,max:1200,value:t,onChange:e=>s(e)})]})})},Pb=e=>{const[t,s]=Object(c.useState)(1),{trigger:n=null,setIntParams:r=null}=Nj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Cr.jsx)(Sb,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.setlongtime",["time"],[a.Fb.format(5*t).toString()])}),Object(Cr.jsx)(gi.a,{className:"nitro-slider",min:1,max:120,value:t,onChange:e=>s(e)})]})})},Ub=e=>{const[t,s]=Object(c.useState)(1),{trigger:n=null,setIntParams:r=null}=Nj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Cr.jsx)(Sb,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.settime",["seconds"],[Or(t)])}),Object(Cr.jsx)(gi.a,{className:"nitro-slider",min:1,max:60,value:t,onChange:e=>s(e)})]})})},Lb=e=>Object(Cr.jsx)(Sb,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),Mb=e=>Object(Cr.jsx)(Sb,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),Fb=e=>{const[t,s]=Object(c.useState)(1),{trigger:n=null,setIntParams:r=null}=Nj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Cr.jsx)(Sb,{requiresFurni:Er.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Cr.jsxs)(rc,{gap:1,children:[Object(Cr.jsx)(Ac,{bold:!0,children:$e("wiredfurni.params.setscore",["points"],[t.toString()])}),Object(Cr.jsx)(gi.a,{className:"nitro-slider",min:1,max:1e3,value:t,onChange:e=>s(e)})]})})},Hb=e=>Object(Cr.jsx)(Sb,{requiresFurni:Er.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),Bb=e=>e instanceof a.Qi?(e=>{switch(e){case mr.BOT_CHANGE_FIGURE:return Object(Cr.jsx)(yj,{});case mr.BOT_FOLLOW_AVATAR:return Object(Cr.jsx)(wj,{});case mr.BOT_GIVE_HAND_ITEM:return Object(Cr.jsx)(Dj,{});case mr.BOT_MOVE:return Object(Cr.jsx)(Pj,{});case mr.BOT_TALK:return Object(Cr.jsx)(Lj,{});case mr.BOT_TALK_DIRECT_TO_AVTR:return Object(Cr.jsx)(Uj,{});case mr.BOT_TELEPORT:return Object(Cr.jsx)(Mj,{});case mr.CALL_ANOTHER_STACK:return Object(Cr.jsx)(Fj,{});case mr.CHASE:return Object(Cr.jsx)(Hj,{});case mr.CHAT:return Object(Cr.jsx)(Bj,{});case mr.FLEE:return Object(Cr.jsx)(Gj,{});case mr.GIVE_REWARD:return Object(Cr.jsx)(Wj,{});case mr.GIVE_SCORE:return Object(Cr.jsx)(qj,{});case mr.GIVE_SCORE_TO_PREDEFINED_TEAM:return Object(Cr.jsx)(Vj,{});case mr.JOIN_TEAM:return Object(Cr.jsx)(zj,{});case mr.KICK_FROM_ROOM:return Object(Cr.jsx)(Yj,{});case mr.LEAVE_TEAM:return Object(Cr.jsx)(Kj,{});case mr.MOVE_FURNI:return Object(Cr.jsx)(sb,{});case mr.MOVE_AND_ROTATE_FURNI:return Object(Cr.jsx)(Xj,{});case mr.MOVE_FURNI_TO:return Object(Cr.jsx)(Zj,{});case mr.MUTE_USER:return Object(Cr.jsx)(nb,{});case mr.RESET:return Object(Cr.jsx)(rb,{});case mr.SET_FURNI_STATE:return Object(Cr.jsx)(cb,{});case mr.TELEPORT:return Object(Cr.jsx)(ib,{});case mr.TOGGLE_FURNI_STATE:return Object(Cr.jsx)(ab,{})}return null})(e.code):e instanceof a.fi?(e=>{switch(e){case Tr.AVATAR_ENTERS_ROOM:return Object(Cr.jsx)(Nb,{});case Tr.AVATAR_SAYS_SOMETHING:return Object(Cr.jsx)(vb,{});case Tr.AVATAR_WALKS_OFF_FURNI:return Object(Cr.jsx)(Rb,{});case Tr.AVATAR_WALKS_ON_FURNI:return Object(Cr.jsx)(Ab,{});case Tr.BOT_REACHED_AVATAR:return Object(Cr.jsx)(yb,{});case Tr.BOT_REACHED_STUFF:return Object(Cr.jsx)(wb,{});case Tr.COLLISION:return Object(Cr.jsx)(kb,{});case Tr.EXECUTE_ONCE:return Object(Cr.jsx)(Db,{});case Tr.EXECUTE_PERIODICALLY:return Object(Cr.jsx)(Ub,{});case Tr.EXECUTE_PERIODICALLY_LONG:return Object(Cr.jsx)(Pb,{});case Tr.GAME_ENDS:return Object(Cr.jsx)(Lb,{});case Tr.GAME_STARTS:return Object(Cr.jsx)(Mb,{});case Tr.SCORE_ACHIEVED:return Object(Cr.jsx)(Fb,{});case Tr.TOGGLE_FURNI:return Object(Cr.jsx)(Hb,{})}return null})(e.code):e instanceof a.gb?(e=>{switch(e){case pr.ACTOR_HAS_HANDITEM:return Object(Cr.jsx)(ub,{});case pr.ACTOR_IS_GROUP_MEMBER:case pr.NOT_ACTOR_IN_GROUP:return Object(Cr.jsx)(db,{});case pr.ACTOR_IS_ON_FURNI:case pr.NOT_ACTOR_ON_FURNI:return Object(Cr.jsx)(hb,{});case pr.ACTOR_IS_IN_TEAM:case pr.NOT_ACTOR_IN_TEAM:return Object(Cr.jsx)(bb,{});case pr.ACTOR_IS_WEARING_BADGE:case pr.NOT_ACTOR_WEARS_BADGE:return Object(Cr.jsx)(gb,{});case pr.ACTOR_IS_WEARING_EFFECT:case pr.NOT_ACTOR_WEARING_EFFECT:return Object(Cr.jsx)(Ob,{});case pr.DATE_RANGE_ACTIVE:return Object(Cr.jsx)(mb,{});case pr.FURNIS_HAVE_AVATARS:case pr.FURNI_NOT_HAVE_HABBO:return Object(Cr.jsx)(pb,{});case pr.HAS_STACKED_FURNIS:return Object(Cr.jsx)(_b,{});case pr.NOT_HAS_STACKED_FURNIS:return Object(Cr.jsx)(Eb,{});case pr.STUFF_TYPE_MATCHES:case pr.NOT_FURNI_IS_OF_TYPE:return Object(Cr.jsx)(fb,{});case pr.STATES_MATCH:case pr.NOT_STATES_MATCH:return Object(Cr.jsx)(xb,{});case pr.TIME_ELAPSED_LESS:return Object(Cr.jsx)(Ib,{});case pr.TIME_ELAPSED_MORE:return Object(Cr.jsx)(Tb,{});case pr.USER_COUNT_IN:case pr.NOT_USER_COUNT_IN:return Object(Cr.jsx)(Cb,{})}return null})(e.code):null,Gb=e=>{const{setTrigger:t=null}=Nj(),s=Object(c.useCallback)((e=>{const s=e.getParser();t(s.definition)}),[t]),n=Object(c.useCallback)((e=>{const s=e.getParser();t(s.definition)}),[t]),r=Object(c.useCallback)((e=>{const s=e.getParser();t(s.definition)}),[t]),i=Object(c.useCallback)((e=>{const t=e.getParser();console.log(t)}),[]),o=Object(c.useCallback)((e=>{const t=e.getParser();console.log(t)}),[]),l=Object(c.useCallback)((e=>{t(null)}),[t]),u=Object(c.useCallback)((e=>{const t=e.getParser();jr.simpleAlert(t.info,or.DEFAULT,null,null,$e("error.title")),console.log(t)}),[]);return Je(a.Ri,s),Je(a.Si,n),Je(a.Ti,r),Je(a.Ui,i),Je(a.Vi,o),Je(a.Wi,l),Je(a.Xi,u),null},Wb=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)([]),[i,o]=Object(c.useState)(""),[l,u]=Object(c.useState)([]),[d,h]=Object(c.useState)(0);return Object(Cr.jsxs)(Sj,{value:{trigger:t,setTrigger:s,intParams:n,setIntParams:r,stringParam:i,setStringParam:o,furniIds:l,setFurniIds:u,actionDelay:d,setActionDelay:h,saveWired:()=>{const e=e=>{e&&(e instanceof a.Qi?Ln(new a.ji(e.id,n,i,l,d,e.stuffTypeSelectionCode)):e instanceof a.fi?Ln(new a.mi(e.id,n,i,l,e.stuffTypeSelectionCode)):e instanceof a.gb&&Ln(new a.ki(e.id,n,i,l,e.stuffTypeSelectionCode)))};!function(e){const t=w().getRoomObject(ee().roomId,e,a.zg.FLOOR);return!(!t||!t.model)&&K().userId===t.model.getValue(a.Fg.FURNITURE_OWNER_ID)}(t.id)?jr.confirm($e("wiredfurni.nonowner.change.confirm.body"),(()=>{e(t)}),null,null,null,$e("wiredfurni.nonowner.change.confirm.title")):e(t)}},children:[Object(Cr.jsx)(Gb,{}),null!==t&&Bb(t)]})},Vb=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(!0),i=Object(c.useCallback)((e=>{switch(e.type){case a.Pg.CREATED:return void r(!1);case a.Pg.ENDED:return void r(e.openLandingView)}}),[]);it(a.Pg.CREATED,i),it(a.Pg.ENDED,i);const o=Object(c.useCallback)((e=>{const t=e.split("/");if(!(t.length<2))if("open"!==t[1]);else if(t.length>2)if("credits"===t[2]);else{const e=t[2];a.Cd.openHabblet(e)}}),[]);return Object(c.useEffect)((()=>{s(!0),S().connection.onReady()}),[]),Object(c.useEffect)((()=>{const e={linkReceived:o,eventUrlPrefix:"habblet/"};return E(e),()=>{y(e)}}),[o]),Object(Cr.jsxs)(Sr,{fit:!0,children:[Object(Cr.jsx)(mc,{type:gc.FADE_IN,inProp:n,timeout:300,children:Object(Cr.jsx)(tu,{})}),Object(Cr.jsx)(mj,{isInRoom:!n}),Object(Cr.jsx)(qu,{}),Object(Cr.jsx)(gj,{}),Object(Cr.jsx)(ao,{}),Object(Cr.jsx)(Wb,{}),Object(Cr.jsx)(li,{}),Object(Cr.jsx)(Fc,{}),Object(Cr.jsx)(bd,{}),Object(Cr.jsx)(_u,{}),Object(Cr.jsx)($a,{}),Object(Cr.jsx)(Go,{}),Object(Cr.jsx)(kd,{}),Object(Cr.jsx)(Tj,{}),Object(Cr.jsx)(Ij,{}),Object(Cr.jsx)(jl,{}),Object(Cr.jsx)(xi,{}),Object(Cr.jsx)(Yl,{}),Object(Cr.jsx)(vo,{}),Object(Cr.jsx)(Od,{}),Object(Cr.jsx)(Tl,{}),Object(Cr.jsx)(Nl,{}),Object(Cr.jsx)(Ci,{})]})};var qb=()=>{const e=[];self.onmessage=t=>{if(!t)return;const s=t.data;switch(s.type){case"CREATE_INTERVAL":{const t=s.timerId,n=s.time,r=s.response,c=setInterval((()=>postMessage(r)),n);return void e.push({id:t,interval:c})}case"REMOVE_INTERVAL":{const t=s.timerId,n=0;for(;n<e.length;){const s=e[n];if(s.id===t)return clearInterval(s.interval),void e.splice(n,1)}}}}};class zb extends Worker{constructor(e){const t=e.toString(),s=new Blob([`(${t})()`]);super(URL.createObjectURL(s))}}a.We.UI_VERSION="2.0.0";const Yb=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)("Getting Ready"),[l,u]=Object(c.useState)(0);if(!NitroConfig)throw new Error("NitroConfig is not defined!");if(!_()){a.Ge.bootstrap();const e=new zb(qb);a.Ge.instance.setWorker(e)}const d=Object(c.useCallback)((()=>{const e=[],t=N("preload.assets.urls");if(t&&t.length)for(const s of t)e.push(_().core.configuration.interpolate(s));return e}),[]),h=Object(c.useCallback)((()=>u((e=>e+20))),[]),j=Object(c.useCallback)((e=>{switch(e.type){case a.hb.LOADED:return _().localization.init(),void h();case a.hb.FAILED:return r(!0),void o("Configuration Failed");case a.Ge.WEBGL_UNAVAILABLE:return r(!0),void o("WebGL Required");case a.Ge.WEBGL_CONTEXT_LOST:return r(!0),o("WebGL Context Lost - Reloading"),void setTimeout((()=>window.location.reload()),1500);case a.Je.CONNECTION_HANDSHAKING:return void h();case a.Je.CONNECTION_HANDSHAKE_FAILED:return r(!0),void o("Handshake Failed");case a.Je.CONNECTION_AUTHENTICATED:return h(),_().init(),void(a.Od.available&&a.Od.call("legacyTrack","authentication","authok",[]));case a.Je.CONNECTION_ERROR:return r(!0),void o("Connection Error");case a.Je.CONNECTION_CLOSED:return o("Connection Error"),void a.Cd.send(-1,"client.init.handshake.fail");case a.gg.ENGINE_INITIALIZED:return h(),void setTimeout((()=>s(!0)),300);case a.Ne.LOADED:return void _().core.asset.downloadAssets(d(),(e=>{e?(S().init(),h()):(r(!0),o("Assets Failed"))}))}}),[d,h]);return rt(a.Ge.WEBGL_UNAVAILABLE,j),rt(a.Ge.WEBGL_CONTEXT_LOST,j),rt(a.Je.CONNECTION_HANDSHAKING,j),rt(a.Je.CONNECTION_HANDSHAKE_FAILED,j),rt(a.Je.CONNECTION_AUTHENTICATED,j),rt(a.Je.CONNECTION_ERROR,j),rt(a.Je.CONNECTION_CLOSED,j),ct(a.gg.ENGINE_INITIALIZED,j),((e,t)=>{et(e,_().localization.events,t)})(a.Ne.LOADED,j),tt(a.hb.LOADED,j),tt(a.hb.FAILED,j),a.Pi.isWebGLAvailable()?_().core.configuration.init():ot(new a.Le(a.Ge.WEBGL_UNAVAILABLE)),Object(Cr.jsxs)(Sr,{fit:!0,overflow:"hidden",children:[(!t||n)&&Object(Cr.jsx)(yc,{isError:n,message:i,percent:l}),Object(Cr.jsx)(mc,{type:gc.FADE_IN,inProp:t,children:Object(Cr.jsx)(Vb,{})}),Object(Cr.jsx)(Sr,{id:"draggable-windows-container"})]})};s(125);n.b.add(r.a),Object(i.createRoot)(document.getElementById("root")).render(Object(Cr.jsx)(Yb,{}))}},[[126,2,1,3]]]);